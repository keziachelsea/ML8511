function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/MainPage-DiLM2QNQ.js","assets/b-split-lbjiU3aO.js","assets/b-split-Luue7qqd.css","assets/c-split-BKR8S8oO.js","assets/a-split-oGy8Iei_.js","assets/c-split-BZRP_SIr.css","assets/serialMonitorWindow-CGsOnwo-.js","assets/MainPage-DlqhmRbR.css","assets/SerialMonitorPage-D6oh_I7F.js","assets/index-wWwew1qC.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
var sp=Object.defineProperty;var ap=(e,t,r)=>t in e?sp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var il=(e,t,r)=>(ap(e,typeof t!="symbol"?t+"":t,r),r);import{i as gs,as as cp,at as up,au as lp,av as fp,aw as hp,ax as dp,ay as pp,k as X,az as mp,aA as gp,aB as vp,r as Oe,aC as yp,aD as bf,aE as wf,aF as bp,aG as xf,aH as _f,aI as Vn,aa as wp,aJ as Ef,aK as Sf,aL as Cf,aM as kf,aN as Af,aO as xp,aP as ga,aQ as gc,aR as _p,aS as ol,aT as Ep,aU as Sp,aV as Cp,aW as kp,aX as sl,aY as Ap,aZ as Ip,a_ as Tp,a$ as Rp,b0 as Op,b1 as Np,b2 as Lp,b3 as Pp,b4 as Bp,b5 as Fp,j as qr,A as cn,b6 as jp,n as vs,b7 as Jt,ad as Dp,b8 as Mp,b9 as Up,ba as $p,w as zp,bb as If,bc as Tf,bd as vc,J as Gp,m as Oi,be as Vp,bf as qp,bg as Hp,bh as Wp,bi as tr,bj as Zp,bk as Rf,bl as Of,bm as Kp,bn as Yi,bo as Yp,G as Xp,K as Qp,bp as Nf,bq as Lf}from"./b-split-lbjiU3aO.js";import{C as at,d as Xo,c as Jp,s as em,l as tm,g as rm,a as nm,b as im,e as om,A as al,B as In,U as Li,f as yc,h as sm,i as cl,u as Pf,j as am,k as cm,m as Dr,n as um,o as lm,p as fm,q as hm,r as dm,t as pm,v as mm,w as Bf,x as bc,y as gm,z as vm,D as ym,E as Ci,F as bm,G as wm,H as xm,I as _m,J as Em,K as Cr,N as Ga,L as Sm,M as wc,O as Cm,P as km,Q as Am,S as un,R as xc,T as Jn,V as Im,W as Tm,X as kn,Y as Xi,Z as Qo,_ as ys,$ as Rm,a0 as Om,a1 as Nm,a2 as Lm,a3 as Pm,a4 as Bm,a5 as Ff,a6 as Fm,a7 as jm,a8 as Dm,a9 as Mm,aa as Um,ab as $m,ac as zm,ad as jf,ae as Df,af as Mf,ag as Gm,ah as Vm,ai as qm,aj as Hm,ak as Wm,al as _r,am as Uf,an as Zm,ao as Km,ap as Ym,aq as bs,ar as Jo,as as Xm,at as Qm,au as Jm,av as ul,aw as $f,ax as eg,ay as tg,az as rg,aA as ng,aB as ig,aC as og,aD as Tn,aE as sg,aF as en,aG as _c,aH as ag,aI as zf,aJ as Ec,aK as Sc,aL as Gf,aM as cg,aN as ug,aO as ll,aP as va,aQ as rn,aR as lg,aS as fg,aT as hg,aU as ya,aV as ki,aW as fl,aX as dg}from"./c-split-BKR8S8oO.js";import"./a-split-oGy8Iei_.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(o){if(o.ep)return;o.ep=!0;const s=r(o);fetch(o.href,s)}})();var Cc={},ws={};ws.byteLength=gg;ws.toByteArray=yg;ws.fromByteArray=xg;var jr=[],vr=[],pg=typeof Uint8Array<"u"?Uint8Array:Array,ba="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Dn=0,mg=ba.length;Dn<mg;++Dn)jr[Dn]=ba[Dn],vr[ba.charCodeAt(Dn)]=Dn;vr[45]=62;vr[95]=63;function Vf(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");r===-1&&(r=t);var n=r===t?0:4-r%4;return[r,n]}function gg(e){var t=Vf(e),r=t[0],n=t[1];return(r+n)*3/4-n}function vg(e,t,r){return(t+r)*3/4-r}function yg(e){var t,r=Vf(e),n=r[0],o=r[1],s=new pg(vg(e,n,o)),c=0,i=o>0?n-4:n,g;for(g=0;g<i;g+=4)t=vr[e.charCodeAt(g)]<<18|vr[e.charCodeAt(g+1)]<<12|vr[e.charCodeAt(g+2)]<<6|vr[e.charCodeAt(g+3)],s[c++]=t>>16&255,s[c++]=t>>8&255,s[c++]=t&255;return o===2&&(t=vr[e.charCodeAt(g)]<<2|vr[e.charCodeAt(g+1)]>>4,s[c++]=t&255),o===1&&(t=vr[e.charCodeAt(g)]<<10|vr[e.charCodeAt(g+1)]<<4|vr[e.charCodeAt(g+2)]>>2,s[c++]=t>>8&255,s[c++]=t&255),s}function bg(e){return jr[e>>18&63]+jr[e>>12&63]+jr[e>>6&63]+jr[e&63]}function wg(e,t,r){for(var n,o=[],s=t;s<r;s+=3)n=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(e[s+2]&255),o.push(bg(n));return o.join("")}function xg(e){for(var t,r=e.length,n=r%3,o=[],s=16383,c=0,i=r-n;c<i;c+=s)o.push(wg(e,c,c+s>i?i:c+s));return n===1?(t=e[r-1],o.push(jr[t>>2]+jr[t<<4&63]+"==")):n===2&&(t=(e[r-2]<<8)+e[r-1],o.push(jr[t>>10]+jr[t>>4&63]+jr[t<<2&63]+"=")),o.join("")}var kc={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */kc.read=function(e,t,r,n,o){var s,c,i=o*8-n-1,g=(1<<i)-1,f=g>>1,a=-7,y=r?o-1:0,l=r?-1:1,v=e[t+y];for(y+=l,s=v&(1<<-a)-1,v>>=-a,a+=i;a>0;s=s*256+e[t+y],y+=l,a-=8);for(c=s&(1<<-a)-1,s>>=-a,a+=n;a>0;c=c*256+e[t+y],y+=l,a-=8);if(s===0)s=1-f;else{if(s===g)return c?NaN:(v?-1:1)*(1/0);c=c+Math.pow(2,n),s=s-f}return(v?-1:1)*c*Math.pow(2,s-n)};kc.write=function(e,t,r,n,o,s){var c,i,g,f=s*8-o-1,a=(1<<f)-1,y=a>>1,l=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,v=n?0:s-1,A=n?1:-1,d=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(i=isNaN(t)?1:0,c=a):(c=Math.floor(Math.log(t)/Math.LN2),t*(g=Math.pow(2,-c))<1&&(c--,g*=2),c+y>=1?t+=l/g:t+=l*Math.pow(2,1-y),t*g>=2&&(c++,g/=2),c+y>=a?(i=0,c=a):c+y>=1?(i=(t*g-1)*Math.pow(2,o),c=c+y):(i=t*Math.pow(2,y-1)*Math.pow(2,o),c=0));o>=8;e[r+v]=i&255,v+=A,i/=256,o-=8);for(c=c<<o|i,f+=o;f>0;e[r+v]=c&255,v+=A,c/=256,f-=8);e[r+v-A]|=d*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=ws,r=kc,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=i,e.SlowBuffer=S,e.INSPECT_MAX_BYTES=50;const o=2147483647;e.kMaxLength=o,i.TYPED_ARRAY_SUPPORT=s(),!i.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const h=new Uint8Array(1),u={foo:function(){return 42}};return Object.setPrototypeOf(u,Uint8Array.prototype),Object.setPrototypeOf(h,u),h.foo()===42}catch{return!1}}Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}});function c(h){if(h>o)throw new RangeError('The value "'+h+'" is invalid for option "size"');const u=new Uint8Array(h);return Object.setPrototypeOf(u,i.prototype),u}function i(h,u,p){if(typeof h=="number"){if(typeof u=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return y(h)}return g(h,u,p)}i.poolSize=8192;function g(h,u,p){if(typeof h=="string")return l(h,u);if(ArrayBuffer.isView(h))return A(h);if(h==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h);if(xe(h,ArrayBuffer)||h&&xe(h.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(xe(h,SharedArrayBuffer)||h&&xe(h.buffer,SharedArrayBuffer)))return d(h,u,p);if(typeof h=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const L=h.valueOf&&h.valueOf();if(L!=null&&L!==h)return i.from(L,u,p);const J=T(h);if(J)return J;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof h[Symbol.toPrimitive]=="function")return i.from(h[Symbol.toPrimitive]("string"),u,p);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h)}i.from=function(h,u,p){return g(h,u,p)},Object.setPrototypeOf(i.prototype,Uint8Array.prototype),Object.setPrototypeOf(i,Uint8Array);function f(h){if(typeof h!="number")throw new TypeError('"size" argument must be of type number');if(h<0)throw new RangeError('The value "'+h+'" is invalid for option "size"')}function a(h,u,p){return f(h),h<=0?c(h):u!==void 0?typeof p=="string"?c(h).fill(u,p):c(h).fill(u):c(h)}i.alloc=function(h,u,p){return a(h,u,p)};function y(h){return f(h),c(h<0?0:w(h)|0)}i.allocUnsafe=function(h){return y(h)},i.allocUnsafeSlow=function(h){return y(h)};function l(h,u){if((typeof u!="string"||u==="")&&(u="utf8"),!i.isEncoding(u))throw new TypeError("Unknown encoding: "+u);const p=O(h,u)|0;let L=c(p);const J=L.write(h,u);return J!==p&&(L=L.slice(0,J)),L}function v(h){const u=h.length<0?0:w(h.length)|0,p=c(u);for(let L=0;L<u;L+=1)p[L]=h[L]&255;return p}function A(h){if(xe(h,Uint8Array)){const u=new Uint8Array(h);return d(u.buffer,u.byteOffset,u.byteLength)}return v(h)}function d(h,u,p){if(u<0||h.byteLength<u)throw new RangeError('"offset" is outside of buffer bounds');if(h.byteLength<u+(p||0))throw new RangeError('"length" is outside of buffer bounds');let L;return u===void 0&&p===void 0?L=new Uint8Array(h):p===void 0?L=new Uint8Array(h,u):L=new Uint8Array(h,u,p),Object.setPrototypeOf(L,i.prototype),L}function T(h){if(i.isBuffer(h)){const u=w(h.length)|0,p=c(u);return p.length===0||h.copy(p,0,0,u),p}if(h.length!==void 0)return typeof h.length!="number"||Fe(h.length)?c(0):v(h);if(h.type==="Buffer"&&Array.isArray(h.data))return v(h.data)}function w(h){if(h>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return h|0}function S(h){return+h!=h&&(h=0),i.alloc(+h)}i.isBuffer=function(u){return u!=null&&u._isBuffer===!0&&u!==i.prototype},i.compare=function(u,p){if(xe(u,Uint8Array)&&(u=i.from(u,u.offset,u.byteLength)),xe(p,Uint8Array)&&(p=i.from(p,p.offset,p.byteLength)),!i.isBuffer(u)||!i.isBuffer(p))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(u===p)return 0;let L=u.length,J=p.length;for(let ge=0,we=Math.min(L,J);ge<we;++ge)if(u[ge]!==p[ge]){L=u[ge],J=p[ge];break}return L<J?-1:J<L?1:0},i.isEncoding=function(u){switch(String(u).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(u,p){if(!Array.isArray(u))throw new TypeError('"list" argument must be an Array of Buffers');if(u.length===0)return i.alloc(0);let L;if(p===void 0)for(p=0,L=0;L<u.length;++L)p+=u[L].length;const J=i.allocUnsafe(p);let ge=0;for(L=0;L<u.length;++L){let we=u[L];if(xe(we,Uint8Array))ge+we.length>J.length?(i.isBuffer(we)||(we=i.from(we)),we.copy(J,ge)):Uint8Array.prototype.set.call(J,we,ge);else if(i.isBuffer(we))we.copy(J,ge);else throw new TypeError('"list" argument must be an Array of Buffers');ge+=we.length}return J};function O(h,u){if(i.isBuffer(h))return h.length;if(ArrayBuffer.isView(h)||xe(h,ArrayBuffer))return h.byteLength;if(typeof h!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof h);const p=h.length,L=arguments.length>2&&arguments[2]===!0;if(!L&&p===0)return 0;let J=!1;for(;;)switch(u){case"ascii":case"latin1":case"binary":return p;case"utf8":case"utf-8":return se(h).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return p*2;case"hex":return p>>>1;case"base64":return Te(h).length;default:if(J)return L?-1:se(h).length;u=(""+u).toLowerCase(),J=!0}}i.byteLength=O;function N(h,u,p){let L=!1;if((u===void 0||u<0)&&(u=0),u>this.length||((p===void 0||p>this.length)&&(p=this.length),p<=0)||(p>>>=0,u>>>=0,p<=u))return"";for(h||(h="utf8");;)switch(h){case"hex":return M(this,u,p);case"utf8":case"utf-8":return _(this,u,p);case"ascii":return F(this,u,p);case"latin1":case"binary":return V(this,u,p);case"base64":return Q(this,u,p);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return K(this,u,p);default:if(L)throw new TypeError("Unknown encoding: "+h);h=(h+"").toLowerCase(),L=!0}}i.prototype._isBuffer=!0;function P(h,u,p){const L=h[u];h[u]=h[p],h[p]=L}i.prototype.swap16=function(){const u=this.length;if(u%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let p=0;p<u;p+=2)P(this,p,p+1);return this},i.prototype.swap32=function(){const u=this.length;if(u%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let p=0;p<u;p+=4)P(this,p,p+3),P(this,p+1,p+2);return this},i.prototype.swap64=function(){const u=this.length;if(u%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let p=0;p<u;p+=8)P(this,p,p+7),P(this,p+1,p+6),P(this,p+2,p+5),P(this,p+3,p+4);return this},i.prototype.toString=function(){const u=this.length;return u===0?"":arguments.length===0?_(this,0,u):N.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(u){if(!i.isBuffer(u))throw new TypeError("Argument must be a Buffer");return this===u?!0:i.compare(this,u)===0},i.prototype.inspect=function(){let u="";const p=e.INSPECT_MAX_BYTES;return u=this.toString("hex",0,p).replace(/(.{2})/g,"$1 ").trim(),this.length>p&&(u+=" ... "),"<Buffer "+u+">"},n&&(i.prototype[n]=i.prototype.inspect),i.prototype.compare=function(u,p,L,J,ge){if(xe(u,Uint8Array)&&(u=i.from(u,u.offset,u.byteLength)),!i.isBuffer(u))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof u);if(p===void 0&&(p=0),L===void 0&&(L=u?u.length:0),J===void 0&&(J=0),ge===void 0&&(ge=this.length),p<0||L>u.length||J<0||ge>this.length)throw new RangeError("out of range index");if(J>=ge&&p>=L)return 0;if(J>=ge)return-1;if(p>=L)return 1;if(p>>>=0,L>>>=0,J>>>=0,ge>>>=0,this===u)return 0;let we=ge-J,We=L-p;const et=Math.min(we,We),rt=this.slice(J,ge),xt=u.slice(p,L);for(let mt=0;mt<et;++mt)if(rt[mt]!==xt[mt]){we=rt[mt],We=xt[mt];break}return we<We?-1:We<we?1:0};function H(h,u,p,L,J){if(h.length===0)return-1;if(typeof p=="string"?(L=p,p=0):p>2147483647?p=2147483647:p<-2147483648&&(p=-2147483648),p=+p,Fe(p)&&(p=J?0:h.length-1),p<0&&(p=h.length+p),p>=h.length){if(J)return-1;p=h.length-1}else if(p<0)if(J)p=0;else return-1;if(typeof u=="string"&&(u=i.from(u,L)),i.isBuffer(u))return u.length===0?-1:j(h,u,p,L,J);if(typeof u=="number")return u=u&255,typeof Uint8Array.prototype.indexOf=="function"?J?Uint8Array.prototype.indexOf.call(h,u,p):Uint8Array.prototype.lastIndexOf.call(h,u,p):j(h,[u],p,L,J);throw new TypeError("val must be string, number or Buffer")}function j(h,u,p,L,J){let ge=1,we=h.length,We=u.length;if(L!==void 0&&(L=String(L).toLowerCase(),L==="ucs2"||L==="ucs-2"||L==="utf16le"||L==="utf-16le")){if(h.length<2||u.length<2)return-1;ge=2,we/=2,We/=2,p/=2}function et(xt,mt){return ge===1?xt[mt]:xt.readUInt16BE(mt*ge)}let rt;if(J){let xt=-1;for(rt=p;rt<we;rt++)if(et(h,rt)===et(u,xt===-1?0:rt-xt)){if(xt===-1&&(xt=rt),rt-xt+1===We)return xt*ge}else xt!==-1&&(rt-=rt-xt),xt=-1}else for(p+We>we&&(p=we-We),rt=p;rt>=0;rt--){let xt=!0;for(let mt=0;mt<We;mt++)if(et(h,rt+mt)!==et(u,mt)){xt=!1;break}if(xt)return rt}return-1}i.prototype.includes=function(u,p,L){return this.indexOf(u,p,L)!==-1},i.prototype.indexOf=function(u,p,L){return H(this,u,p,L,!0)},i.prototype.lastIndexOf=function(u,p,L){return H(this,u,p,L,!1)};function Z(h,u,p,L){p=Number(p)||0;const J=h.length-p;L?(L=Number(L),L>J&&(L=J)):L=J;const ge=u.length;L>ge/2&&(L=ge/2);let we;for(we=0;we<L;++we){const We=parseInt(u.substr(we*2,2),16);if(Fe(We))return we;h[p+we]=We}return we}function U(h,u,p,L){return Pe(se(u,h.length-p),h,p,L)}function ue(h,u,p,L){return Pe(ne(u),h,p,L)}function fe(h,u,p,L){return Pe(Te(u),h,p,L)}function q(h,u,p,L){return Pe(ve(u,h.length-p),h,p,L)}i.prototype.write=function(u,p,L,J){if(p===void 0)J="utf8",L=this.length,p=0;else if(L===void 0&&typeof p=="string")J=p,L=this.length,p=0;else if(isFinite(p))p=p>>>0,isFinite(L)?(L=L>>>0,J===void 0&&(J="utf8")):(J=L,L=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ge=this.length-p;if((L===void 0||L>ge)&&(L=ge),u.length>0&&(L<0||p<0)||p>this.length)throw new RangeError("Attempt to write outside buffer bounds");J||(J="utf8");let we=!1;for(;;)switch(J){case"hex":return Z(this,u,p,L);case"utf8":case"utf-8":return U(this,u,p,L);case"ascii":case"latin1":case"binary":return ue(this,u,p,L);case"base64":return fe(this,u,p,L);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q(this,u,p,L);default:if(we)throw new TypeError("Unknown encoding: "+J);J=(""+J).toLowerCase(),we=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Q(h,u,p){return u===0&&p===h.length?t.fromByteArray(h):t.fromByteArray(h.slice(u,p))}function _(h,u,p){p=Math.min(h.length,p);const L=[];let J=u;for(;J<p;){const ge=h[J];let we=null,We=ge>239?4:ge>223?3:ge>191?2:1;if(J+We<=p){let et,rt,xt,mt;switch(We){case 1:ge<128&&(we=ge);break;case 2:et=h[J+1],(et&192)===128&&(mt=(ge&31)<<6|et&63,mt>127&&(we=mt));break;case 3:et=h[J+1],rt=h[J+2],(et&192)===128&&(rt&192)===128&&(mt=(ge&15)<<12|(et&63)<<6|rt&63,mt>2047&&(mt<55296||mt>57343)&&(we=mt));break;case 4:et=h[J+1],rt=h[J+2],xt=h[J+3],(et&192)===128&&(rt&192)===128&&(xt&192)===128&&(mt=(ge&15)<<18|(et&63)<<12|(rt&63)<<6|xt&63,mt>65535&&mt<1114112&&(we=mt))}}we===null?(we=65533,We=1):we>65535&&(we-=65536,L.push(we>>>10&1023|55296),we=56320|we&1023),L.push(we),J+=We}return $(L)}const k=4096;function $(h){const u=h.length;if(u<=k)return String.fromCharCode.apply(String,h);let p="",L=0;for(;L<u;)p+=String.fromCharCode.apply(String,h.slice(L,L+=k));return p}function F(h,u,p){let L="";p=Math.min(h.length,p);for(let J=u;J<p;++J)L+=String.fromCharCode(h[J]&127);return L}function V(h,u,p){let L="";p=Math.min(h.length,p);for(let J=u;J<p;++J)L+=String.fromCharCode(h[J]);return L}function M(h,u,p){const L=h.length;(!u||u<0)&&(u=0),(!p||p<0||p>L)&&(p=L);let J="";for(let ge=u;ge<p;++ge)J+=Ve[h[ge]];return J}function K(h,u,p){const L=h.slice(u,p);let J="";for(let ge=0;ge<L.length-1;ge+=2)J+=String.fromCharCode(L[ge]+L[ge+1]*256);return J}i.prototype.slice=function(u,p){const L=this.length;u=~~u,p=p===void 0?L:~~p,u<0?(u+=L,u<0&&(u=0)):u>L&&(u=L),p<0?(p+=L,p<0&&(p=0)):p>L&&(p=L),p<u&&(p=u);const J=this.subarray(u,p);return Object.setPrototypeOf(J,i.prototype),J};function G(h,u,p){if(h%1!==0||h<0)throw new RangeError("offset is not uint");if(h+u>p)throw new RangeError("Trying to access beyond buffer length")}i.prototype.readUintLE=i.prototype.readUIntLE=function(u,p,L){u=u>>>0,p=p>>>0,L||G(u,p,this.length);let J=this[u],ge=1,we=0;for(;++we<p&&(ge*=256);)J+=this[u+we]*ge;return J},i.prototype.readUintBE=i.prototype.readUIntBE=function(u,p,L){u=u>>>0,p=p>>>0,L||G(u,p,this.length);let J=this[u+--p],ge=1;for(;p>0&&(ge*=256);)J+=this[u+--p]*ge;return J},i.prototype.readUint8=i.prototype.readUInt8=function(u,p){return u=u>>>0,p||G(u,1,this.length),this[u]},i.prototype.readUint16LE=i.prototype.readUInt16LE=function(u,p){return u=u>>>0,p||G(u,2,this.length),this[u]|this[u+1]<<8},i.prototype.readUint16BE=i.prototype.readUInt16BE=function(u,p){return u=u>>>0,p||G(u,2,this.length),this[u]<<8|this[u+1]},i.prototype.readUint32LE=i.prototype.readUInt32LE=function(u,p){return u=u>>>0,p||G(u,4,this.length),(this[u]|this[u+1]<<8|this[u+2]<<16)+this[u+3]*16777216},i.prototype.readUint32BE=i.prototype.readUInt32BE=function(u,p){return u=u>>>0,p||G(u,4,this.length),this[u]*16777216+(this[u+1]<<16|this[u+2]<<8|this[u+3])},i.prototype.readBigUInt64LE=m(function(u){u=u>>>0,lt(u,"offset");const p=this[u],L=this[u+7];(p===void 0||L===void 0)&&R(u,this.length-8);const J=p+this[++u]*2**8+this[++u]*2**16+this[++u]*2**24,ge=this[++u]+this[++u]*2**8+this[++u]*2**16+L*2**24;return BigInt(J)+(BigInt(ge)<<BigInt(32))}),i.prototype.readBigUInt64BE=m(function(u){u=u>>>0,lt(u,"offset");const p=this[u],L=this[u+7];(p===void 0||L===void 0)&&R(u,this.length-8);const J=p*2**24+this[++u]*2**16+this[++u]*2**8+this[++u],ge=this[++u]*2**24+this[++u]*2**16+this[++u]*2**8+L;return(BigInt(J)<<BigInt(32))+BigInt(ge)}),i.prototype.readIntLE=function(u,p,L){u=u>>>0,p=p>>>0,L||G(u,p,this.length);let J=this[u],ge=1,we=0;for(;++we<p&&(ge*=256);)J+=this[u+we]*ge;return ge*=128,J>=ge&&(J-=Math.pow(2,8*p)),J},i.prototype.readIntBE=function(u,p,L){u=u>>>0,p=p>>>0,L||G(u,p,this.length);let J=p,ge=1,we=this[u+--J];for(;J>0&&(ge*=256);)we+=this[u+--J]*ge;return ge*=128,we>=ge&&(we-=Math.pow(2,8*p)),we},i.prototype.readInt8=function(u,p){return u=u>>>0,p||G(u,1,this.length),this[u]&128?(255-this[u]+1)*-1:this[u]},i.prototype.readInt16LE=function(u,p){u=u>>>0,p||G(u,2,this.length);const L=this[u]|this[u+1]<<8;return L&32768?L|4294901760:L},i.prototype.readInt16BE=function(u,p){u=u>>>0,p||G(u,2,this.length);const L=this[u+1]|this[u]<<8;return L&32768?L|4294901760:L},i.prototype.readInt32LE=function(u,p){return u=u>>>0,p||G(u,4,this.length),this[u]|this[u+1]<<8|this[u+2]<<16|this[u+3]<<24},i.prototype.readInt32BE=function(u,p){return u=u>>>0,p||G(u,4,this.length),this[u]<<24|this[u+1]<<16|this[u+2]<<8|this[u+3]},i.prototype.readBigInt64LE=m(function(u){u=u>>>0,lt(u,"offset");const p=this[u],L=this[u+7];(p===void 0||L===void 0)&&R(u,this.length-8);const J=this[u+4]+this[u+5]*2**8+this[u+6]*2**16+(L<<24);return(BigInt(J)<<BigInt(32))+BigInt(p+this[++u]*2**8+this[++u]*2**16+this[++u]*2**24)}),i.prototype.readBigInt64BE=m(function(u){u=u>>>0,lt(u,"offset");const p=this[u],L=this[u+7];(p===void 0||L===void 0)&&R(u,this.length-8);const J=(p<<24)+this[++u]*2**16+this[++u]*2**8+this[++u];return(BigInt(J)<<BigInt(32))+BigInt(this[++u]*2**24+this[++u]*2**16+this[++u]*2**8+L)}),i.prototype.readFloatLE=function(u,p){return u=u>>>0,p||G(u,4,this.length),r.read(this,u,!0,23,4)},i.prototype.readFloatBE=function(u,p){return u=u>>>0,p||G(u,4,this.length),r.read(this,u,!1,23,4)},i.prototype.readDoubleLE=function(u,p){return u=u>>>0,p||G(u,8,this.length),r.read(this,u,!0,52,8)},i.prototype.readDoubleBE=function(u,p){return u=u>>>0,p||G(u,8,this.length),r.read(this,u,!1,52,8)};function Y(h,u,p,L,J,ge){if(!i.isBuffer(h))throw new TypeError('"buffer" argument must be a Buffer instance');if(u>J||u<ge)throw new RangeError('"value" argument is out of bounds');if(p+L>h.length)throw new RangeError("Index out of range")}i.prototype.writeUintLE=i.prototype.writeUIntLE=function(u,p,L,J){if(u=+u,p=p>>>0,L=L>>>0,!J){const We=Math.pow(2,8*L)-1;Y(this,u,p,L,We,0)}let ge=1,we=0;for(this[p]=u&255;++we<L&&(ge*=256);)this[p+we]=u/ge&255;return p+L},i.prototype.writeUintBE=i.prototype.writeUIntBE=function(u,p,L,J){if(u=+u,p=p>>>0,L=L>>>0,!J){const We=Math.pow(2,8*L)-1;Y(this,u,p,L,We,0)}let ge=L-1,we=1;for(this[p+ge]=u&255;--ge>=0&&(we*=256);)this[p+ge]=u/we&255;return p+L},i.prototype.writeUint8=i.prototype.writeUInt8=function(u,p,L){return u=+u,p=p>>>0,L||Y(this,u,p,1,255,0),this[p]=u&255,p+1},i.prototype.writeUint16LE=i.prototype.writeUInt16LE=function(u,p,L){return u=+u,p=p>>>0,L||Y(this,u,p,2,65535,0),this[p]=u&255,this[p+1]=u>>>8,p+2},i.prototype.writeUint16BE=i.prototype.writeUInt16BE=function(u,p,L){return u=+u,p=p>>>0,L||Y(this,u,p,2,65535,0),this[p]=u>>>8,this[p+1]=u&255,p+2},i.prototype.writeUint32LE=i.prototype.writeUInt32LE=function(u,p,L){return u=+u,p=p>>>0,L||Y(this,u,p,4,4294967295,0),this[p+3]=u>>>24,this[p+2]=u>>>16,this[p+1]=u>>>8,this[p]=u&255,p+4},i.prototype.writeUint32BE=i.prototype.writeUInt32BE=function(u,p,L){return u=+u,p=p>>>0,L||Y(this,u,p,4,4294967295,0),this[p]=u>>>24,this[p+1]=u>>>16,this[p+2]=u>>>8,this[p+3]=u&255,p+4};function ye(h,u,p,L,J){ht(u,L,J,h,p,7);let ge=Number(u&BigInt(4294967295));h[p++]=ge,ge=ge>>8,h[p++]=ge,ge=ge>>8,h[p++]=ge,ge=ge>>8,h[p++]=ge;let we=Number(u>>BigInt(32)&BigInt(4294967295));return h[p++]=we,we=we>>8,h[p++]=we,we=we>>8,h[p++]=we,we=we>>8,h[p++]=we,p}function Ee(h,u,p,L,J){ht(u,L,J,h,p,7);let ge=Number(u&BigInt(4294967295));h[p+7]=ge,ge=ge>>8,h[p+6]=ge,ge=ge>>8,h[p+5]=ge,ge=ge>>8,h[p+4]=ge;let we=Number(u>>BigInt(32)&BigInt(4294967295));return h[p+3]=we,we=we>>8,h[p+2]=we,we=we>>8,h[p+1]=we,we=we>>8,h[p]=we,p+8}i.prototype.writeBigUInt64LE=m(function(u,p=0){return ye(this,u,p,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeBigUInt64BE=m(function(u,p=0){return Ee(this,u,p,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeIntLE=function(u,p,L,J){if(u=+u,p=p>>>0,!J){const et=Math.pow(2,8*L-1);Y(this,u,p,L,et-1,-et)}let ge=0,we=1,We=0;for(this[p]=u&255;++ge<L&&(we*=256);)u<0&&We===0&&this[p+ge-1]!==0&&(We=1),this[p+ge]=(u/we>>0)-We&255;return p+L},i.prototype.writeIntBE=function(u,p,L,J){if(u=+u,p=p>>>0,!J){const et=Math.pow(2,8*L-1);Y(this,u,p,L,et-1,-et)}let ge=L-1,we=1,We=0;for(this[p+ge]=u&255;--ge>=0&&(we*=256);)u<0&&We===0&&this[p+ge+1]!==0&&(We=1),this[p+ge]=(u/we>>0)-We&255;return p+L},i.prototype.writeInt8=function(u,p,L){return u=+u,p=p>>>0,L||Y(this,u,p,1,127,-128),u<0&&(u=255+u+1),this[p]=u&255,p+1},i.prototype.writeInt16LE=function(u,p,L){return u=+u,p=p>>>0,L||Y(this,u,p,2,32767,-32768),this[p]=u&255,this[p+1]=u>>>8,p+2},i.prototype.writeInt16BE=function(u,p,L){return u=+u,p=p>>>0,L||Y(this,u,p,2,32767,-32768),this[p]=u>>>8,this[p+1]=u&255,p+2},i.prototype.writeInt32LE=function(u,p,L){return u=+u,p=p>>>0,L||Y(this,u,p,4,2147483647,-2147483648),this[p]=u&255,this[p+1]=u>>>8,this[p+2]=u>>>16,this[p+3]=u>>>24,p+4},i.prototype.writeInt32BE=function(u,p,L){return u=+u,p=p>>>0,L||Y(this,u,p,4,2147483647,-2147483648),u<0&&(u=4294967295+u+1),this[p]=u>>>24,this[p+1]=u>>>16,this[p+2]=u>>>8,this[p+3]=u&255,p+4},i.prototype.writeBigInt64LE=m(function(u,p=0){return ye(this,u,p,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),i.prototype.writeBigInt64BE=m(function(u,p=0){return Ee(this,u,p,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Re(h,u,p,L,J,ge){if(p+L>h.length)throw new RangeError("Index out of range");if(p<0)throw new RangeError("Index out of range")}function ct(h,u,p,L,J){return u=+u,p=p>>>0,J||Re(h,u,p,4),r.write(h,u,p,L,23,4),p+4}i.prototype.writeFloatLE=function(u,p,L){return ct(this,u,p,!0,L)},i.prototype.writeFloatBE=function(u,p,L){return ct(this,u,p,!1,L)};function ft(h,u,p,L,J){return u=+u,p=p>>>0,J||Re(h,u,p,8),r.write(h,u,p,L,52,8),p+8}i.prototype.writeDoubleLE=function(u,p,L){return ft(this,u,p,!0,L)},i.prototype.writeDoubleBE=function(u,p,L){return ft(this,u,p,!1,L)},i.prototype.copy=function(u,p,L,J){if(!i.isBuffer(u))throw new TypeError("argument should be a Buffer");if(L||(L=0),!J&&J!==0&&(J=this.length),p>=u.length&&(p=u.length),p||(p=0),J>0&&J<L&&(J=L),J===L||u.length===0||this.length===0)return 0;if(p<0)throw new RangeError("targetStart out of bounds");if(L<0||L>=this.length)throw new RangeError("Index out of range");if(J<0)throw new RangeError("sourceEnd out of bounds");J>this.length&&(J=this.length),u.length-p<J-L&&(J=u.length-p+L);const ge=J-L;return this===u&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(p,L,J):Uint8Array.prototype.set.call(u,this.subarray(L,J),p),ge},i.prototype.fill=function(u,p,L,J){if(typeof u=="string"){if(typeof p=="string"?(J=p,p=0,L=this.length):typeof L=="string"&&(J=L,L=this.length),J!==void 0&&typeof J!="string")throw new TypeError("encoding must be a string");if(typeof J=="string"&&!i.isEncoding(J))throw new TypeError("Unknown encoding: "+J);if(u.length===1){const we=u.charCodeAt(0);(J==="utf8"&&we<128||J==="latin1")&&(u=we)}}else typeof u=="number"?u=u&255:typeof u=="boolean"&&(u=Number(u));if(p<0||this.length<p||this.length<L)throw new RangeError("Out of range index");if(L<=p)return this;p=p>>>0,L=L===void 0?this.length:L>>>0,u||(u=0);let ge;if(typeof u=="number")for(ge=p;ge<L;++ge)this[ge]=u;else{const we=i.isBuffer(u)?u:i.from(u,J),We=we.length;if(We===0)throw new TypeError('The value "'+u+'" is invalid for argument "value"');for(ge=0;ge<L-p;++ge)this[ge+p]=we[ge%We]}return this};const Ze={};function Je(h,u,p){Ze[h]=class extends p{constructor(){super(),Object.defineProperty(this,"message",{value:u.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${h}]`,this.stack,delete this.name}get code(){return h}set code(J){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:J,writable:!0})}toString(){return`${this.name} [${h}]: ${this.message}`}}}Je("ERR_BUFFER_OUT_OF_BOUNDS",function(h){return h?`${h} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Je("ERR_INVALID_ARG_TYPE",function(h,u){return`The "${h}" argument must be of type number. Received type ${typeof u}`},TypeError),Je("ERR_OUT_OF_RANGE",function(h,u,p){let L=`The value of "${h}" is out of range.`,J=p;return Number.isInteger(p)&&Math.abs(p)>2**32?J=Xe(String(p)):typeof p=="bigint"&&(J=String(p),(p>BigInt(2)**BigInt(32)||p<-(BigInt(2)**BigInt(32)))&&(J=Xe(J)),J+="n"),L+=` It must be ${u}. Received ${J}`,L},RangeError);function Xe(h){let u="",p=h.length;const L=h[0]==="-"?1:0;for(;p>=L+4;p-=3)u=`_${h.slice(p-3,p)}${u}`;return`${h.slice(0,p)}${u}`}function Qe(h,u,p){lt(u,"offset"),(h[u]===void 0||h[u+p]===void 0)&&R(u,h.length-(p+1))}function ht(h,u,p,L,J,ge){if(h>p||h<u){const we=typeof u=="bigint"?"n":"";let We;throw u===0||u===BigInt(0)?We=`>= 0${we} and < 2${we} ** ${(ge+1)*8}${we}`:We=`>= -(2${we} ** ${(ge+1)*8-1}${we}) and < 2 ** ${(ge+1)*8-1}${we}`,new Ze.ERR_OUT_OF_RANGE("value",We,h)}Qe(L,J,ge)}function lt(h,u){if(typeof h!="number")throw new Ze.ERR_INVALID_ARG_TYPE(u,"number",h)}function R(h,u,p){throw Math.floor(h)!==h?(lt(h,p),new Ze.ERR_OUT_OF_RANGE("offset","an integer",h)):u<0?new Ze.ERR_BUFFER_OUT_OF_BOUNDS:new Ze.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${u}`,h)}const Se=/[^+/0-9A-Za-z-_]/g;function Ae(h){if(h=h.split("=")[0],h=h.trim().replace(Se,""),h.length<2)return"";for(;h.length%4!==0;)h=h+"=";return h}function se(h,u){u=u||1/0;let p;const L=h.length;let J=null;const ge=[];for(let we=0;we<L;++we){if(p=h.charCodeAt(we),p>55295&&p<57344){if(!J){if(p>56319){(u-=3)>-1&&ge.push(239,191,189);continue}else if(we+1===L){(u-=3)>-1&&ge.push(239,191,189);continue}J=p;continue}if(p<56320){(u-=3)>-1&&ge.push(239,191,189),J=p;continue}p=(J-55296<<10|p-56320)+65536}else J&&(u-=3)>-1&&ge.push(239,191,189);if(J=null,p<128){if((u-=1)<0)break;ge.push(p)}else if(p<2048){if((u-=2)<0)break;ge.push(p>>6|192,p&63|128)}else if(p<65536){if((u-=3)<0)break;ge.push(p>>12|224,p>>6&63|128,p&63|128)}else if(p<1114112){if((u-=4)<0)break;ge.push(p>>18|240,p>>12&63|128,p>>6&63|128,p&63|128)}else throw new Error("Invalid code point")}return ge}function ne(h){const u=[];for(let p=0;p<h.length;++p)u.push(h.charCodeAt(p)&255);return u}function ve(h,u){let p,L,J;const ge=[];for(let we=0;we<h.length&&!((u-=2)<0);++we)p=h.charCodeAt(we),L=p>>8,J=p%256,ge.push(J),ge.push(L);return ge}function Te(h){return t.toByteArray(Ae(h))}function Pe(h,u,p,L){let J;for(J=0;J<L&&!(J+p>=u.length||J>=h.length);++J)u[J+p]=h[J];return J}function xe(h,u){return h instanceof u||h!=null&&h.constructor!=null&&h.constructor.name!=null&&h.constructor.name===u.name}function Fe(h){return h!==h}const Ve=function(){const h="0123456789abcdef",u=new Array(256);for(let p=0;p<16;++p){const L=p*16;for(let J=0;J<16;++J)u[L+J]=h[p]+h[J]}return u}();function m(h){return typeof BigInt>"u"?I:h}function I(){throw new Error("BigInt not supported")}})(Cc);var qf={exports:{}},jt=qf.exports={},Br,Fr;function Va(){throw new Error("setTimeout has not been defined")}function qa(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Br=setTimeout:Br=Va}catch{Br=Va}try{typeof clearTimeout=="function"?Fr=clearTimeout:Fr=qa}catch{Fr=qa}})();function Hf(e){if(Br===setTimeout)return setTimeout(e,0);if((Br===Va||!Br)&&setTimeout)return Br=setTimeout,setTimeout(e,0);try{return Br(e,0)}catch{try{return Br.call(null,e,0)}catch{return Br.call(this,e,0)}}}function _g(e){if(Fr===clearTimeout)return clearTimeout(e);if((Fr===qa||!Fr)&&clearTimeout)return Fr=clearTimeout,clearTimeout(e);try{return Fr(e)}catch{try{return Fr.call(null,e)}catch{return Fr.call(this,e)}}}var Hr=[],qn=!1,Sn,Ho=-1;function Eg(){!qn||!Sn||(qn=!1,Sn.length?Hr=Sn.concat(Hr):Ho=-1,Hr.length&&Wf())}function Wf(){if(!qn){var e=Hf(Eg);qn=!0;for(var t=Hr.length;t;){for(Sn=Hr,Hr=[];++Ho<t;)Sn&&Sn[Ho].run();Ho=-1,t=Hr.length}Sn=null,qn=!1,_g(e)}}jt.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];Hr.push(new Zf(e,t)),Hr.length===1&&!qn&&Hf(Wf)};function Zf(e,t){this.fun=e,this.array=t}Zf.prototype.run=function(){this.fun.apply(null,this.array)};jt.title="browser";jt.browser=!0;jt.env={};jt.argv=[];jt.version="";jt.versions={};function Wr(){}jt.on=Wr;jt.addListener=Wr;jt.once=Wr;jt.off=Wr;jt.removeListener=Wr;jt.removeAllListeners=Wr;jt.emit=Wr;jt.prependListener=Wr;jt.prependOnceListener=Wr;jt.listeners=function(e){return[]};jt.binding=function(e){throw new Error("process.binding is not supported")};jt.cwd=function(){return"/"};jt.chdir=function(e){throw new Error("process.chdir is not supported")};jt.umask=function(){return 0};var Sg=qf.exports;const Kf=gs(Sg);window.Buffer=Cc.Buffer;window.process=Kf;function Qi(e){return new Promise((t,r)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>r(e.error)})}function Cg(e,t){const r=indexedDB.open(e);r.onupgradeneeded=()=>r.result.createObjectStore(t);const n=Qi(r);return(o,s)=>n.then(c=>s(c.transaction(t,o).objectStore(t)))}let wa;function xs(){return wa||(wa=Cg("keyval-store","keyval")),wa}function WS(e,t=xs()){return t("readonly",r=>Qi(r.get(e)))}function Yf(e,t,r=xs()){return r("readwrite",n=>(n.put(t,e),Qi(n.transaction)))}function kg(e,t=xs()){return t("readonly",r=>Promise.all(e.map(n=>Qi(r.get(n)))))}function ZS(e,t=xs()){return t("readwrite",r=>(r.delete(e),Qi(r.transaction)))}const{APP_URL:Ag,CLOUD_HOME_URL:Ig}=at,Tg=`${Ag}/redirect`,Rg=`${Ig}/sketches`;function hl(e){return Xo.customKey?e.replace("https://",`https://${Xo.customKey}.`):e}const _s={domain:at.AUTH_URL,clientId:at.AUTH_ID,authorizationParams:{redirect_uri:hl(Tg),logout_uri:hl(Rg),audience:at.AUTH_AUDIENCE,scope:at.AUTH_SCOPE,state:Ng()},cacheLocation:"memory"},Og=5;function Ng(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}function wt(){return Promise.reject(new Error("User not authorized to perform request"))}`${_s.authorizationParams.client_id}`;const Lg=`auth0.${_s.authorizationParams.client_id}.is.authenticated=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/`,Pg="authRedirectTo",ei="token-placeholder";let ir=null,Bg=null;async function Fg(){return ir||(ir=await jg()),ir}async function jg(){var r;const e=await Jp(_s,Og),t=(r=e.getCustomization())==null?void 0:r.url;return t&&em({CLOUD_HOME_URL:t,APP_ORIGIN:t,NEW_WINDOW_ORIGIN:t,SERIAL_MONITOR_PARENT_ORIGIN:t}),ir=e,e}async function es(){if(!ir)throw new Error("Cannot login when auth client not initialized");const{state:e,...t}=_s.authorizationParams;await Yf(Pg,{previousState:e,redirectTo:window.location.pathname+window.location.search}),tm(ir,{...t,appState:{previousState:e}})}async function KS(){if(!ir)throw new Error("Cannot get auth state when Auth client not initialized");return rm(ir)}async function Dg(){if(!ir)throw new Error("Can not authenticate when Auth client not initialized");return nm(ir)}function Mg(){document.cookie=Lg}async function Xf(){if(!ir)throw new Error("Cannot get user when Auth client not initialized");return im(ir)}async function Ug(e,t=!1){if(!ir)throw new Error("Cannot get token when Auth client not initialized");try{return await om(ir,e)}catch(r){if(t)return ei;switch(r.error){case al.LoginRequired:Mg(),es();break;case al.InteractionRequired:es();break}throw r}}let Ac=!1;function $g(e){Ac=e}let ts=null;function zg(){ts=null}function Gg(){return ts=new In(!1),ts}function Ic(){return ts||Gg()}function Vg(e){Ic().next(e)}function bt(e,t=!1,r=!1){return!t&&Ac&&!Ic().getValue()?Promise.resolve(ei):Ug(e,r)}let Ha=!1,Qf=!1;async function qg(){await yc(`https://www.googletagmanager.com/gtm.js?id=${at.GTM_ID}`,"gtm-script"),window.dataLayer=window.dataLayer||[],window.dataLayer.push({"gtm.start":new Date().getTime(),event:"gtm.js"}),window.dataLayer.push({event:"pageMetaData",page:{type:"content",title:"Arduino Cloud Editor",path:window.location.pathname,environment:"%VITE_HF_CDN_ENV%",region:"global",brand:"arduino",language:"EN"}})}async function Hg(){const e=window.analytics||[];if(window.analytics=e,!e.initialize){if(e.invoked){console.error("Segment snippet included twice.");return}return e.invoked=!0,e.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","screen","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware","register"],e.factory=t=>()=>{const r=Array.prototype.slice.call(arguments);if(["track","screen","alias","group","page","identify"].indexOf(t)>-1){const n=document.querySelector("link[rel='canonical']");r.push({__t:"bpc",c:n&&n.getAttribute("href")||void 0,p:window.location.pathname,u:window.location.href,s:window.location.search,t:document.title,r:document.referrer})}return r.unshift(t),e.push(r),e},e.methods.forEach(t=>{const r=e.methods[t];e[r]=e.factory(r)}),e._writeKey=at.SEGMENT_TOKEN,e._cdn="https://evs.aayinltcs.arduino.cc",e.SNIPPET_VERSION="5.2.0",e.load=async t=>{await yc(at.SEGMENT_SCRIPT,"segment-script"),e._loadOptions=t},e.load(e._writeKey)}}async function Wg(e){sm(`${at.HF_CDN_URL}/cookieSolution.css`),await yc(`${at.HF_CDN_URL}/cookieSolution.js`,"cookieSolution");const t=e[cl]===void 0?!1:!e[cl];window.arduinoCookieSolution.initCookieConsent(t)}async function Zg(e){Qf=!0;const t=4;async function r(n,o=0,s=1e3){return new Promise((c,i)=>{o>10&&i(),n()?c():setTimeout(()=>r(n,o+1).then(c),s)})}await Wg(e),await qg(),await Hg(),r(()=>{var n,o,s,c;return!!((n=window.analytics)!=null&&n.page)&&!!window._iub&&((c=(s=(o=window._iub)==null?void 0:o.cs)==null?void 0:s.consent)==null?void 0:c.purposes[t])}).then(()=>window.analytics.page()).catch(()=>console.warn("Page not triggered!")),r(()=>{var n;return!!((n=window.analytics)!=null&&n.identify)&&!!window._iub}).then(()=>{var o,s,c;const n=(c=(s=(o=window._iub)==null?void 0:o.cs)==null?void 0:s.consent)==null?void 0:c.purposes[t];window.analytics.identify(e[Li],{email:e.email},{integrations:{All:!1,"Segment.io":n,ProfitWell:n}})}).catch(()=>console.warn("Profitwell not triggered!"));try{await r(()=>{var n,o;return!!((n=window.analytics)!=null&&n.track)&&!!((o=window.analytics)!=null&&o.identify)}),Ha=!0}catch{console.warn("Analytics could not be initialized")}return Ha}function Kg(e){switch(e){case"INIT":return{event:"web_editor_initiate"};case"COMPILE":return{event:"web_editor_compile"};case"UPLOAD":return{event:"web_editor_upload"};case"SKETCH_MOD":return{event:"editor_sketch_interaction"};case"BOARD_CHANGE":return{event:"editor_board_selection"};case"EXAMPLE_SELECT":return{event:"editor_examples"};case"LIBRARY_SELECT":return{event:"editor_libraries"};case"LIBRARY_FAVORITE":return{event:"editor_libraries",action:"add to favorites"};case"REFERENCE_VIEW":return{event:"editor_reference",action:"view_reference"};case"GEN_AI_INTERACTION":return{event:"ai_interaction"};default:return{}}}async function Yg({type:e,payload:t=void 0}){if(!Qf)return;if(!Ha){console.error("Tried to emit event before analytics was initialized");return}let r=Bg;if(!r)try{r=await Xf()}catch{console.error("Error retrieving user profile for event emission");return}if(!r){console.error("Tried to emit event without a user profile");return}try{window.dataLayer=window.dataLayer||[],window.dataLayer.push({...Kg(e),...t,site_area:"editor",user_id:r[Li]})}catch{console.error(`Error tracking event [${e}] with args [${t}]`)}}var Jf={exports:{}};(function(e,t){var r={};/*!
 * 
 *   @bcmi-labs/arduino-chromeos-uploader v1.2.11
 *   https://www.github.com/bcmi-labs/arduino-chromeos-uploader
 *
 *   Copyright (c) Arduino (https://www.arduino.cc) and project contributors.
 *
 *   This source code is licensed under the UNLICENSED license found in the
 *   LICENSE.md file in the root directory of this source tree.
 *
 */(function(n,o){e.exports=o()})(self,()=>(()=>{var n={195:function(i,g,f){i=f.nmd(i),function(a){function y(z,te){te|=0;for(var ce=Math.max(z.length-te,0),me=Array(ce),Ie=0;Ie<ce;Ie++)me[Ie]=z[te+Ie];return me}var l=function(z){var te=y(arguments,1);return function(){var ce=y(arguments);return z.apply(null,te.concat(ce))}},v=function(z){return function(){var te=y(arguments),ce=te.pop();z.call(this,te,ce)}};function A(z){var te=typeof z;return z!=null&&(te=="object"||te=="function")}var d=typeof setImmediate=="function"&&setImmediate,T=typeof process=="object"&&typeof process.nextTick=="function";function w(z){setTimeout(z,0)}function S(z){return function(te){var ce=y(arguments,1);z(function(){te.apply(null,ce)})}}var O=S(d?setImmediate:T?process.nextTick:w);function N(z){return v(function(te,ce){var me;try{me=z.apply(this,te)}catch(Ie){return ce(Ie)}A(me)&&typeof me.then=="function"?me.then(function(Ie){P(ce,null,Ie)},function(Ie){P(ce,Ie.message?Ie:new Error(Ie))}):ce(null,me)})}function P(z,te,ce){try{z(te,ce)}catch(me){O(H,me)}}function H(z){throw z}var j=typeof Symbol=="function";function Z(z){return j&&z[Symbol.toStringTag]==="AsyncFunction"}function U(z){return Z(z)?N(z):z}function ue(z){return function(te){var ce=y(arguments,1),me=v(function(Ie,ke){var Le=this;return z(te,function(je,ze){U(je).apply(Le,Ie.concat(ze))},ke)});return ce.length?me.apply(this,ce):me}}var fe=typeof f.g=="object"&&f.g&&f.g.Object===Object&&f.g,q=typeof self=="object"&&self&&self.Object===Object&&self,Q=fe||q||Function("return this")(),_=Q.Symbol,k=Object.prototype,$=k.hasOwnProperty,F=k.toString,V=_?_.toStringTag:void 0;function M(z){var te=$.call(z,V),ce=z[V];try{z[V]=void 0;var me=!0}catch{}var Ie=F.call(z);return me&&(te?z[V]=ce:delete z[V]),Ie}var K=Object.prototype.toString;function G(z){return K.call(z)}var Y="[object Null]",ye="[object Undefined]",Ee=_?_.toStringTag:void 0;function Re(z){return z==null?z===void 0?ye:Y:Ee&&Ee in Object(z)?M(z):G(z)}var ct="[object AsyncFunction]",ft="[object Function]",Ze="[object GeneratorFunction]",Je="[object Proxy]";function Xe(z){if(!A(z))return!1;var te=Re(z);return te==ft||te==Ze||te==ct||te==Je}var Qe=9007199254740991;function ht(z){return typeof z=="number"&&z>-1&&z%1==0&&z<=Qe}function lt(z){return z!=null&&ht(z.length)&&!Xe(z)}var R={};function Se(){}function Ae(z){return function(){if(z!==null){var te=z;z=null,te.apply(this,arguments)}}}var se=typeof Symbol=="function"&&Symbol.iterator,ne=function(z){return se&&z[se]&&z[se]()};function ve(z,te){for(var ce=-1,me=Array(z);++ce<z;)me[ce]=te(ce);return me}function Te(z){return z!=null&&typeof z=="object"}var Pe="[object Arguments]";function xe(z){return Te(z)&&Re(z)==Pe}var Fe=Object.prototype,Ve=Fe.hasOwnProperty,m=Fe.propertyIsEnumerable,I=xe(function(){return arguments}())?xe:function(z){return Te(z)&&Ve.call(z,"callee")&&!m.call(z,"callee")},h=Array.isArray;function u(){return!1}var p=typeof a=="object"&&a&&!a.nodeType&&a,L=p&&i&&!i.nodeType&&i,J=L&&L.exports===p?Q.Buffer:void 0,ge=(J?J.isBuffer:void 0)||u,we=9007199254740991,We=/^(?:0|[1-9]\d*)$/;function et(z,te){var ce=typeof z;return!!(te=te??we)&&(ce=="number"||ce!="symbol"&&We.test(z))&&z>-1&&z%1==0&&z<te}var rt="[object Arguments]",xt="[object Array]",mt="[object Boolean]",Yr="[object Date]",fn="[object Error]",hn="[object Function]",Ur="[object Map]",Ir="[object Number]",Gs="[object Object]",Vs="[object RegExp]",Nn="[object Set]",qs="[object String]",hr="[object WeakMap]",Hs="[object ArrayBuffer]",Ws="[object DataView]",ui="[object Float64Array]",io="[object Int8Array]",oo="[object Int16Array]",so="[object Int32Array]",Zs="[object Uint8Array]",Ks="[object Uint8ClampedArray]",ao="[object Uint16Array]",Ys="[object Uint32Array]",_t={};function dn(z){return Te(z)&&ht(z.length)&&!!_t[Re(z)]}function co(z){return function(te){return z(te)}}_t["[object Float32Array]"]=_t[ui]=_t[io]=_t[oo]=_t[so]=_t[Zs]=_t[Ks]=_t[ao]=_t[Ys]=!0,_t[rt]=_t[xt]=_t[Hs]=_t[mt]=_t[Ws]=_t[Yr]=_t[fn]=_t[hn]=_t[Ur]=_t[Ir]=_t[Gs]=_t[Vs]=_t[Nn]=_t[qs]=_t[hr]=!1;var li=typeof a=="object"&&a&&!a.nodeType&&a,pn=li&&i&&!i.nodeType&&i,fi=pn&&pn.exports===li&&fe.process,uo=function(){try{var z=pn&&pn.require&&pn.require("util").types;return z||fi&&fi.binding&&fi.binding("util")}catch{}}(),mn=uo&&uo.isTypedArray,gn=mn?co(mn):dn,lo=Object.prototype.hasOwnProperty;function fo(z,te){var ce=h(z),me=!ce&&I(z),Ie=!ce&&!me&&ge(z),ke=!ce&&!me&&!Ie&&gn(z),Le=ce||me||Ie||ke,je=Le?ve(z.length,String):[],ze=je.length;for(var nt in z)!lo.call(z,nt)||Le&&(nt=="length"||Ie&&(nt=="offset"||nt=="parent")||ke&&(nt=="buffer"||nt=="byteLength"||nt=="byteOffset")||et(nt,ze))||je.push(nt);return je}var Xs=Object.prototype;function hi(z){var te=z&&z.constructor;return z===(typeof te=="function"&&te.prototype||Xs)}function Qs(z,te){return function(ce){return z(te(ce))}}var Js=Qs(Object.keys,Object),Ln=Object.prototype.hasOwnProperty;function ea(z){if(!hi(z))return Js(z);var te=[];for(var ce in Object(z))Ln.call(z,ce)&&ce!="constructor"&&te.push(ce);return te}function Tr(z){return lt(z)?fo(z):ea(z)}function Kt(z){var te=-1,ce=z.length;return function(){return++te<ce?{value:z[te],key:te}:null}}function ho(z){var te=-1;return function(){var ce=z.next();return ce.done?null:(te++,{value:ce.value,key:te})}}function ta(z){var te=Tr(z),ce=-1,me=te.length;return function Ie(){var ke=te[++ce];return ke==="__proto__"?Ie():ce<me?{value:z[ke],key:ke}:null}}function di(z){if(lt(z))return Kt(z);var te=ne(z);return te?ho(te):ta(z)}function sr(z){return function(){if(z===null)throw new Error("Callback was already called.");var te=z;z=null,te.apply(this,arguments)}}function vn(z){return function(te,ce,me){if(me=Ae(me||Se),z<=0||!te)return me(null);var Ie=di(te),ke=!1,Le=0,je=!1;function ze(He,st){if(Le-=1,He)ke=!0,me(He);else{if(st===R||ke&&Le<=0)return ke=!0,me(null);je||nt()}}function nt(){for(je=!0;Le<z&&!ke;){var He=Ie();if(He===null)return ke=!0,void(Le<=0&&me(null));Le+=1,ce(He.value,He.key,sr(ze))}je=!1}nt()}}function Rr(z,te,ce,me){vn(te)(z,U(ce),me)}function Dt(z,te){return function(ce,me,Ie){return z(ce,te,me,Ie)}}function ra(z,te,ce){ce=Ae(ce||Se);var me=0,Ie=0,ke=z.length;function Le(je,ze){je?ce(je):++Ie!==ke&&ze!==R||ce(null)}for(ke===0&&ce(null);me<ke;me++)te(z[me],me,sr(Le))}var pi=Dt(Rr,1/0),Et=function(z,te,ce){(lt(z)?ra:pi)(z,U(te),ce)};function $r(z){return function(te,ce,me){return z(Et,te,U(ce),me)}}function dr(z,te,ce,me){me=me||Se,te=te||[];var Ie=[],ke=0,Le=U(ce);z(te,function(je,ze,nt){var He=ke++;Le(je,function(st,Lt){Ie[He]=Lt,nt(st)})},function(je){me(je,Ie)})}var pr=$r(dr),mi=ue(pr);function mr(z){return function(te,ce,me,Ie){return z(vn(ce),te,U(me),Ie)}}var Or=mr(dr),zr=Dt(Or,1),gi=ue(zr);function Pn(z,te){for(var ce=-1,me=z==null?0:z.length;++ce<me&&te(z[ce],ce,z)!==!1;);return z}function na(z){return function(te,ce,me){for(var Ie=-1,ke=Object(te),Le=me(te),je=Le.length;je--;){var ze=Le[++Ie];if(ce(ke[ze],ze,ke)===!1)break}return te}}var ia=na();function Xr(z,te){return z&&ia(z,te,Tr)}function po(z,te,ce,me){for(var Ie=z.length,ke=ce+-1;++ke<Ie;)if(te(z[ke],ke,z))return ke;return-1}function mo(z){return z!=z}function oa(z,te,ce){for(var me=ce-1,Ie=z.length;++me<Ie;)if(z[me]===te)return me;return-1}function yn(z,te,ce){return te==te?oa(z,te,ce):po(z,mo,ce)}var vi=function(z,te,ce){typeof te=="function"&&(ce=te,te=null),ce=Ae(ce||Se);var me=Tr(z).length;if(!me)return ce(null);te||(te=me);var Ie={},ke=0,Le=!1,je=Object.create(null),ze=[],nt=[],He={};function st(Pt,Nt){ze.push(function(){gr(Pt,Nt)})}function Lt(){if(ze.length===0&&ke===0)return ce(null,Ie);for(;ze.length&&ke<te;)ze.shift()()}function cr(Pt,Nt){var ur=je[Pt];ur||(ur=je[Pt]=[]),ur.push(Nt)}function Nr(Pt){Pn(je[Pt]||[],function(Nt){Nt()}),Lt()}function gr(Pt,Nt){if(!Le){var ur=sr(function(jn,pa){if(ke--,arguments.length>2&&(pa=y(arguments,1)),jn){var ma={};Xr(Ie,function(ip,op){ma[op]=ip}),ma[Pt]=pa,Le=!0,je=Object.create(null),ce(jn,ma)}else Ie[Pt]=pa,Nr(Pt)});ke++;var Qr=U(Nt[Nt.length-1]);Nt.length>1?Qr(Ie,ur):Qr(ur)}}function Lr(){for(var Pt=0;nt.length;)Pt++,Pn(np(nt.pop()),function(Nt){--He[Nt]==0&&nt.push(Nt)});if(Pt!==me)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}function np(Pt){var Nt=[];return Xr(z,function(ur,Qr){h(ur)&&yn(ur,Pt,0)>=0&&Nt.push(Qr)}),Nt}Xr(z,function(Pt,Nt){if(!h(Pt))return st(Nt,[Pt]),void nt.push(Nt);var ur=Pt.slice(0,Pt.length-1),Qr=ur.length;if(Qr===0)return st(Nt,Pt),void nt.push(Nt);He[Nt]=Qr,Pn(ur,function(jn){if(!z[jn])throw new Error("async.auto task `"+Nt+"` has a non-existent dependency `"+jn+"` in "+ur.join(", "));cr(jn,function(){--Qr==0&&st(Nt,Pt)})})}),Lr(),Lt()};function ar(z,te){for(var ce=-1,me=z==null?0:z.length,Ie=Array(me);++ce<me;)Ie[ce]=te(z[ce],ce,z);return Ie}var sa="[object Symbol]";function Bn(z){return typeof z=="symbol"||Te(z)&&Re(z)==sa}var B=1/0,b=_?_.prototype:void 0,E=b?b.toString:void 0;function D(z){if(typeof z=="string")return z;if(h(z))return ar(z,D)+"";if(Bn(z))return E?E.call(z):"";var te=z+"";return te=="0"&&1/z==-B?"-0":te}function W(z,te,ce){var me=-1,Ie=z.length;te<0&&(te=-te>Ie?0:Ie+te),(ce=ce>Ie?Ie:ce)<0&&(ce+=Ie),Ie=te>ce?0:ce-te>>>0,te>>>=0;for(var ke=Array(Ie);++me<Ie;)ke[me]=z[me+te];return ke}function he(z,te,ce){var me=z.length;return ce=ce===void 0?me:ce,!te&&ce>=me?z:W(z,te,ce)}function de(z,te){for(var ce=z.length;ce--&&yn(te,z[ce],0)>-1;);return ce}function oe(z,te){for(var ce=-1,me=z.length;++ce<me&&yn(te,z[ce],0)>-1;);return ce}function le(z){return z.split("")}var ie=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function ae(z){return ie.test(z)}var Ne="\\ud800-\\udfff",Me="["+Ne+"]",Ce="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Ue="\\ud83c[\\udffb-\\udfff]",_e="[^"+Ne+"]",Ge="(?:\\ud83c[\\udde6-\\uddff]){2}",Ke="[\\ud800-\\udbff][\\udc00-\\udfff]",kt="(?:"+Ce+"|"+Ue+")?",it="[\\ufe0e\\ufe0f]?",ut="(?:\\u200d(?:"+[_e,Ge,Ke].join("|")+")"+it+kt+")*",Yt=it+kt+ut,It="(?:"+[_e+Ce+"?",Ce,Ge,Ke,Me].join("|")+")",Tt=RegExp(Ue+"(?="+Ue+")|"+It+Yt,"g");function Rt(z){return z.match(Tt)||[]}function Mt(z){return ae(z)?Rt(z):le(z)}function C(z){return z==null?"":D(z)}var x=/^\s+|\s+$/g;function re(z,te,ce){if((z=C(z))&&te===void 0)return z.replace(x,"");if(!z||!(te=D(te)))return z;var me=Mt(z),Ie=Mt(te);return he(me,oe(me,Ie),de(me,Ie)+1).join("")}var pe=/^(?:async\s+)?(function)?\s*[^\(]*\(\s*([^\)]*)\)/m,ee=/,/,Be=/(=.+)?(\s*)$/,De=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm;function qe(z){return z=(z=(z=(z=z.toString().replace(De,"")).match(pe)[2].replace(" ",""))?z.split(ee):[]).map(function(te){return re(te.replace(Be,""))})}function tt(z,te){var ce={};Xr(z,function(me,Ie){var ke,Le=Z(me),je=!Le&&me.length===1||Le&&me.length===0;if(h(me))ke=me.slice(0,-1),me=me[me.length-1],ce[Ie]=ke.concat(ke.length>0?ze:me);else if(je)ce[Ie]=me;else{if(ke=qe(me),me.length===0&&!Le&&ke.length===0)throw new Error("autoInject task functions require explicit parameters.");Le||ke.pop(),ce[Ie]=ke.concat(ze)}function ze(nt,He){var st=ar(ke,function(Lt){return nt[Lt]});st.push(He),U(me).apply(null,st)}}),vi(ce,te)}function be(){this.head=this.tail=null,this.length=0}function $e(z,te){z.length=1,z.head=z.tail=te}function Ye(z,te,ce){if(te==null)te=1;else if(te===0)throw new Error("Concurrency must not be zero");var me=U(z),Ie=0,ke=[],Le=!1;function je(st,Lt,cr){if(cr!=null&&typeof cr!="function")throw new Error("task callback must be a function");if(He.started=!0,h(st)||(st=[st]),st.length===0&&He.idle())return O(function(){He.drain()});for(var Nr=0,gr=st.length;Nr<gr;Nr++){var Lr={data:st[Nr],callback:cr||Se};Lt?He._tasks.unshift(Lr):He._tasks.push(Lr)}Le||(Le=!0,O(function(){Le=!1,He.process()}))}function ze(st){return function(Lt){Ie-=1;for(var cr=0,Nr=st.length;cr<Nr;cr++){var gr=st[cr],Lr=yn(ke,gr,0);Lr===0?ke.shift():Lr>0&&ke.splice(Lr,1),gr.callback.apply(gr,arguments),Lt!=null&&He.error(Lt,gr.data)}Ie<=He.concurrency-He.buffer&&He.unsaturated(),He.idle()&&He.drain(),He.process()}}var nt=!1,He={_tasks:new be,concurrency:te,payload:ce,saturated:Se,unsaturated:Se,buffer:te/4,empty:Se,drain:Se,error:Se,started:!1,paused:!1,push:function(st,Lt){je(st,!1,Lt)},kill:function(){He.drain=Se,He._tasks.empty()},unshift:function(st,Lt){je(st,!0,Lt)},remove:function(st){He._tasks.remove(st)},process:function(){if(!nt){for(nt=!0;!He.paused&&Ie<He.concurrency&&He._tasks.length;){var st=[],Lt=[],cr=He._tasks.length;He.payload&&(cr=Math.min(cr,He.payload));for(var Nr=0;Nr<cr;Nr++){var gr=He._tasks.shift();st.push(gr),ke.push(gr),Lt.push(gr.data)}Ie+=1,He._tasks.length===0&&He.empty(),Ie===He.concurrency&&He.saturated();var Lr=sr(ze(st));me(Lt,Lr)}nt=!1}},length:function(){return He._tasks.length},running:function(){return Ie},workersList:function(){return ke},idle:function(){return He._tasks.length+Ie===0},pause:function(){He.paused=!0},resume:function(){He.paused!==!1&&(He.paused=!1,O(He.process))}};return He}function Ut(z,te){return Ye(z,1,te)}be.prototype.removeLink=function(z){return z.prev?z.prev.next=z.next:this.head=z.next,z.next?z.next.prev=z.prev:this.tail=z.prev,z.prev=z.next=null,this.length-=1,z},be.prototype.empty=function(){for(;this.head;)this.shift();return this},be.prototype.insertAfter=function(z,te){te.prev=z,te.next=z.next,z.next?z.next.prev=te:this.tail=te,z.next=te,this.length+=1},be.prototype.insertBefore=function(z,te){te.prev=z.prev,te.next=z,z.prev?z.prev.next=te:this.head=te,z.prev=te,this.length+=1},be.prototype.unshift=function(z){this.head?this.insertBefore(this.head,z):$e(this,z)},be.prototype.push=function(z){this.tail?this.insertAfter(this.tail,z):$e(this,z)},be.prototype.shift=function(){return this.head&&this.removeLink(this.head)},be.prototype.pop=function(){return this.tail&&this.removeLink(this.tail)},be.prototype.toArray=function(){for(var z=Array(this.length),te=this.head,ce=0;ce<this.length;ce++)z[ce]=te.data,te=te.next;return z},be.prototype.remove=function(z){for(var te=this.head;te;){var ce=te.next;z(te)&&this.removeLink(te),te=ce}return this};var Ot=Dt(Rr,1);function gt(z,te,ce,me){me=Ae(me||Se);var Ie=U(ce);Ot(z,function(ke,Le,je){Ie(te,ke,function(ze,nt){te=nt,je(ze)})},function(ke){me(ke,te)})}function dt(){var z=ar(arguments,U);return function(){var te=y(arguments),ce=this,me=te[te.length-1];typeof me=="function"?te.pop():me=Se,gt(z,te,function(Ie,ke,Le){ke.apply(ce,Ie.concat(function(je){var ze=y(arguments,1);Le(je,ze)}))},function(Ie,ke){me.apply(ce,[Ie].concat(ke))})}}var vu=function(){return dt.apply(null,y(arguments).reverse())},Yd=Array.prototype.concat,go=function(z,te,ce,me){me=me||Se;var Ie=U(ce);Or(z,te,function(ke,Le){Ie(ke,function(je){return je?Le(je):Le(null,y(arguments,1))})},function(ke,Le){for(var je=[],ze=0;ze<Le.length;ze++)Le[ze]&&(je=Yd.apply(je,Le[ze]));return me(ke,je)})},yu=Dt(go,1/0),bu=Dt(go,1),wu=function(){var z=y(arguments),te=[null].concat(z);return function(){return arguments[arguments.length-1].apply(this,te)}};function yi(z){return z}function Fn(z,te){return function(ce,me,Ie,ke){ke=ke||Se;var Le,je=!1;ce(me,function(ze,nt,He){Ie(ze,function(st,Lt){st?He(st):z(Lt)&&!Le?(je=!0,Le=te(!0,ze),He(null,R)):He()})},function(ze){ze?ke(ze):ke(null,je?Le:te(!1))})}}function xu(z,te){return te}var vo=$r(Fn(yi,xu)),bi=mr(Fn(yi,xu)),yo=Dt(bi,1);function _u(z){return function(te){var ce=y(arguments,1);ce.push(function(me){var Ie=y(arguments,1);typeof console=="object"&&(me?console.error&&console.error(me):console[z]&&Pn(Ie,function(ke){console[z](ke)}))}),U(te).apply(null,ce)}}var Eu=_u("dir");function Su(z,te,ce){ce=sr(ce||Se);var me=U(z),Ie=U(te);function ke(je){if(je)return ce(je);var ze=y(arguments,1);ze.push(Le),Ie.apply(this,ze)}function Le(je,ze){return je?ce(je):ze?void me(ke):ce(null)}Le(null,!0)}function aa(z,te,ce){ce=sr(ce||Se);var me=U(z),Ie=function(ke){if(ke)return ce(ke);var Le=y(arguments,1);if(te.apply(this,Le))return me(Ie);ce.apply(null,[null].concat(Le))};me(Ie)}function Cu(z,te,ce){aa(z,function(){return!te.apply(this,arguments)},ce)}function ku(z,te,ce){ce=sr(ce||Se);var me=U(te),Ie=U(z);function ke(je){if(je)return ce(je);Ie(Le)}function Le(je,ze){return je?ce(je):ze?void me(ke):ce(null)}Ie(Le)}function Au(z){return function(te,ce,me){return z(te,me)}}function bo(z,te,ce){Et(z,Au(U(te)),ce)}function wi(z,te,ce,me){vn(te)(z,Au(U(ce)),me)}var xi=Dt(wi,1);function ca(z){return Z(z)?z:v(function(te,ce){var me=!0;te.push(function(){var Ie=arguments;me?O(function(){ce.apply(null,Ie)}):ce.apply(null,Ie)}),z.apply(this,te),me=!1})}function wo(z){return!z}var xo=$r(Fn(wo,wo)),_i=mr(Fn(wo,wo)),_o=Dt(_i,1);function Iu(z){return function(te){return te==null?void 0:te[z]}}function Xd(z,te,ce,me){var Ie=new Array(te.length);z(te,function(ke,Le,je){ce(ke,function(ze,nt){Ie[Le]=!!nt,je(ze)})},function(ke){if(ke)return me(ke);for(var Le=[],je=0;je<te.length;je++)Ie[je]&&Le.push(te[je]);me(null,Le)})}function Qd(z,te,ce,me){var Ie=[];z(te,function(ke,Le,je){ce(ke,function(ze,nt){ze?je(ze):(nt&&Ie.push({index:Le,value:ke}),je())})},function(ke){ke?me(ke):me(null,ar(Ie.sort(function(Le,je){return Le.index-je.index}),Iu("value")))})}function ua(z,te,ce,me){(lt(te)?Xd:Qd)(z,te,U(ce),me||Se)}var Eo=$r(ua),Ei=mr(ua),So=Dt(Ei,1);function Tu(z,te){var ce=sr(te||Se),me=U(ca(z));function Ie(ke){if(ke)return ce(ke);me(Ie)}Ie()}var Co=function(z,te,ce,me){me=me||Se;var Ie=U(ce);Or(z,te,function(ke,Le){Ie(ke,function(je,ze){return je?Le(je):Le(null,{key:ze,val:ke})})},function(ke,Le){for(var je={},ze=Object.prototype.hasOwnProperty,nt=0;nt<Le.length;nt++)if(Le[nt]){var He=Le[nt].key,st=Le[nt].val;ze.call(je,He)?je[He].push(st):je[He]=[st]}return me(ke,je)})},Ru=Dt(Co,1/0),Ou=Dt(Co,1),Nu=_u("log");function ko(z,te,ce,me){me=Ae(me||Se);var Ie={},ke=U(ce);Rr(z,te,function(Le,je,ze){ke(Le,je,function(nt,He){if(nt)return ze(nt);Ie[je]=He,ze()})},function(Le){me(Le,Ie)})}var Lu=Dt(ko,1/0),Pu=Dt(ko,1);function Bu(z,te){return te in z}function Fu(z,te){var ce=Object.create(null),me=Object.create(null);te=te||yi;var Ie=U(z),ke=v(function(Le,je){var ze=te.apply(null,Le);Bu(ce,ze)?O(function(){je.apply(null,ce[ze])}):Bu(me,ze)?me[ze].push(je):(me[ze]=[je],Ie.apply(null,Le.concat(function(){var nt=y(arguments);ce[ze]=nt;var He=me[ze];delete me[ze];for(var st=0,Lt=He.length;st<Lt;st++)He[st].apply(null,nt)})))});return ke.memo=ce,ke.unmemoized=z,ke}var ju=S(T?process.nextTick:d?setImmediate:w);function la(z,te,ce){ce=ce||Se;var me=lt(te)?[]:{};z(te,function(Ie,ke,Le){U(Ie)(function(je,ze){arguments.length>2&&(ze=y(arguments,1)),me[ke]=ze,Le(je)})},function(Ie){ce(Ie,me)})}function Du(z,te){la(Et,z,te)}function Mu(z,te,ce){la(vn(te),z,ce)}var fa=function(z,te){var ce=U(z);return Ye(function(me,Ie){ce(me[0],Ie)},te,1)},Uu=function(z,te){var ce=fa(z,te);return ce.push=function(me,Ie,ke){if(ke==null&&(ke=Se),typeof ke!="function")throw new Error("task callback must be a function");if(ce.started=!0,h(me)||(me=[me]),me.length===0)return O(function(){ce.drain()});Ie=Ie||0;for(var Le=ce._tasks.head;Le&&Ie>=Le.priority;)Le=Le.next;for(var je=0,ze=me.length;je<ze;je++){var nt={data:me[je],priority:Ie,callback:ke};Le?ce._tasks.insertBefore(Le,nt):ce._tasks.push(nt)}O(ce.process)},delete ce.unshift,ce};function $u(z,te){if(te=Ae(te||Se),!h(z))return te(new TypeError("First argument to race must be an array of functions"));if(!z.length)return te();for(var ce=0,me=z.length;ce<me;ce++)U(z[ce])(te)}function Ao(z,te,ce,me){gt(y(z).reverse(),te,ce,me)}function Io(z){var te=U(z);return v(function(ce,me){return ce.push(function(Ie,ke){var Le;Ie?me(null,{error:Ie}):(Le=arguments.length<=2?ke:y(arguments,1),me(null,{value:Le}))}),te.apply(this,ce)})}function zu(z){var te;return h(z)?te=ar(z,Io):(te={},Xr(z,function(ce,me){te[me]=Io.call(this,ce)})),te}function Gu(z,te,ce,me){ua(z,te,function(Ie,ke){ce(Ie,function(Le,je){ke(Le,!je)})},me)}var Vu=$r(Gu),ha=mr(Gu),qu=Dt(ha,1);function Hu(z){return function(){return z}}function To(z,te,ce){var me=5,Ie=0,ke={times:me,intervalFunc:Hu(Ie)};function Le(He,st){if(typeof st=="object")He.times=+st.times||me,He.intervalFunc=typeof st.interval=="function"?st.interval:Hu(+st.interval||Ie),He.errorFilter=st.errorFilter;else{if(typeof st!="number"&&typeof st!="string")throw new Error("Invalid arguments for async.retry");He.times=+st||me}}if(arguments.length<3&&typeof z=="function"?(ce=te||Se,te=z):(Le(ke,z),ce=ce||Se),typeof te!="function")throw new Error("Invalid arguments for async.retry");var je=U(te),ze=1;function nt(){je(function(He){He&&ze++<ke.times&&(typeof ke.errorFilter!="function"||ke.errorFilter(He))?setTimeout(nt,ke.intervalFunc(ze)):ce.apply(null,arguments)})}nt()}var Wu=function(z,te){te||(te=z,z=null);var ce=U(te);return v(function(me,Ie){function ke(Le){ce.apply(null,me.concat(Le))}z?To(z,ke,Ie):To(ke,Ie)})};function Zu(z,te){la(Ot,z,te)}var Ro=$r(Fn(Boolean,yi)),Si=mr(Fn(Boolean,yi)),Oo=Dt(Si,1);function Ku(z,te,ce){var me=U(te);function Ie(ke,Le){var je=ke.criteria,ze=Le.criteria;return je<ze?-1:je>ze?1:0}pr(z,function(ke,Le){me(ke,function(je,ze){if(je)return Le(je);Le(null,{value:ke,criteria:ze})})},function(ke,Le){if(ke)return ce(ke);ce(null,ar(Le.sort(Ie),Iu("value")))})}function Yu(z,te,ce){var me=U(z);return v(function(Ie,ke){var Le,je=!1;function ze(){var nt=z.name||"anonymous",He=new Error('Callback function "'+nt+'" timed out.');He.code="ETIMEDOUT",ce&&(He.info=ce),je=!0,ke(He)}Ie.push(function(){je||(ke.apply(null,arguments),clearTimeout(Le))}),Le=setTimeout(ze,te),me.apply(null,Ie)})}var Jd=Math.ceil,ep=Math.max;function tp(z,te,ce,me){for(var Ie=-1,ke=ep(Jd((te-z)/ce),0),Le=Array(ke);ke--;)Le[++Ie]=z,z+=ce;return Le}function No(z,te,ce,me){var Ie=U(ce);Or(tp(0,z,1),te,Ie,me)}var Xu=Dt(No,1/0),Qu=Dt(No,1);function Ju(z,te,ce,me){arguments.length<=3&&(me=ce,ce=te,te=h(z)?[]:{}),me=Ae(me||Se);var Ie=U(ce);Et(z,function(ke,Le,je){Ie(te,ke,Le,je)},function(ke){me(ke,te)})}function el(z,te){var ce,me=null;te=te||Se,xi(z,function(Ie,ke){U(Ie)(function(Le,je){ce=arguments.length>2?y(arguments,1):je,me=Le,ke(!Le)})},function(){te(me,ce)})}function tl(z){return function(){return(z.unmemoized||z).apply(null,arguments)}}function da(z,te,ce){ce=sr(ce||Se);var me=U(te);if(!z())return ce(null);var Ie=function(ke){if(ke)return ce(ke);if(z())return me(Ie);var Le=y(arguments,1);ce.apply(null,[null].concat(Le))};me(Ie)}function rl(z,te,ce){da(function(){return!z.apply(this,arguments)},te,ce)}var nl=function(z,te){if(te=Ae(te||Se),!h(z))return te(new Error("First argument to waterfall must be an array of functions"));if(!z.length)return te();var ce=0;function me(ke){var Le=U(z[ce++]);ke.push(sr(Ie)),Le.apply(null,ke)}function Ie(ke){if(ke||ce===z.length)return te.apply(null,arguments);me(y(arguments,1))}me([])},rp={apply:l,applyEach:mi,applyEachSeries:gi,asyncify:N,auto:vi,autoInject:tt,cargo:Ut,compose:vu,concat:yu,concatLimit:go,concatSeries:bu,constant:wu,detect:vo,detectLimit:bi,detectSeries:yo,dir:Eu,doDuring:Su,doUntil:Cu,doWhilst:aa,during:ku,each:bo,eachLimit:wi,eachOf:Et,eachOfLimit:Rr,eachOfSeries:Ot,eachSeries:xi,ensureAsync:ca,every:xo,everyLimit:_i,everySeries:_o,filter:Eo,filterLimit:Ei,filterSeries:So,forever:Tu,groupBy:Ru,groupByLimit:Co,groupBySeries:Ou,log:Nu,map:pr,mapLimit:Or,mapSeries:zr,mapValues:Lu,mapValuesLimit:ko,mapValuesSeries:Pu,memoize:Fu,nextTick:ju,parallel:Du,parallelLimit:Mu,priorityQueue:Uu,queue:fa,race:$u,reduce:gt,reduceRight:Ao,reflect:Io,reflectAll:zu,reject:Vu,rejectLimit:ha,rejectSeries:qu,retry:To,retryable:Wu,seq:dt,series:Zu,setImmediate:O,some:Ro,someLimit:Si,someSeries:Oo,sortBy:Ku,timeout:Yu,times:Xu,timesLimit:No,timesSeries:Qu,transform:Ju,tryEach:el,unmemoize:tl,until:rl,waterfall:nl,whilst:da,all:xo,allLimit:_i,allSeries:_o,any:Ro,anyLimit:Si,anySeries:Oo,find:vo,findLimit:bi,findSeries:yo,forEach:bo,forEachSeries:xi,forEachLimit:wi,forEachOf:Et,forEachOfSeries:Ot,forEachOfLimit:Rr,inject:gt,foldl:gt,foldr:Ao,select:Eo,selectLimit:Ei,selectSeries:So,wrapSync:N};a.default=rp,a.apply=l,a.applyEach=mi,a.applyEachSeries=gi,a.asyncify=N,a.auto=vi,a.autoInject=tt,a.cargo=Ut,a.compose=vu,a.concat=yu,a.concatLimit=go,a.concatSeries=bu,a.constant=wu,a.detect=vo,a.detectLimit=bi,a.detectSeries=yo,a.dir=Eu,a.doDuring=Su,a.doUntil=Cu,a.doWhilst=aa,a.during=ku,a.each=bo,a.eachLimit=wi,a.eachOf=Et,a.eachOfLimit=Rr,a.eachOfSeries=Ot,a.eachSeries=xi,a.ensureAsync=ca,a.every=xo,a.everyLimit=_i,a.everySeries=_o,a.filter=Eo,a.filterLimit=Ei,a.filterSeries=So,a.forever=Tu,a.groupBy=Ru,a.groupByLimit=Co,a.groupBySeries=Ou,a.log=Nu,a.map=pr,a.mapLimit=Or,a.mapSeries=zr,a.mapValues=Lu,a.mapValuesLimit=ko,a.mapValuesSeries=Pu,a.memoize=Fu,a.nextTick=ju,a.parallel=Du,a.parallelLimit=Mu,a.priorityQueue=Uu,a.queue=fa,a.race=$u,a.reduce=gt,a.reduceRight=Ao,a.reflect=Io,a.reflectAll=zu,a.reject=Vu,a.rejectLimit=ha,a.rejectSeries=qu,a.retry=To,a.retryable=Wu,a.seq=dt,a.series=Zu,a.setImmediate=O,a.some=Ro,a.someLimit=Si,a.someSeries=Oo,a.sortBy=Ku,a.timeout=Yu,a.times=Xu,a.timesLimit=No,a.timesSeries=Qu,a.transform=Ju,a.tryEach=el,a.unmemoize=tl,a.until=rl,a.waterfall=nl,a.whilst=da,a.all=xo,a.allLimit=_i,a.allSeries=_o,a.any=Ro,a.anyLimit=Si,a.anySeries=Oo,a.find=vo,a.findLimit=bi,a.findSeries=yo,a.forEach=bo,a.forEachSeries=xi,a.forEachLimit=wi,a.forEachOf=Et,a.forEachOfSeries=Ot,a.forEachOfLimit=Rr,a.inject=gt,a.foldl=gt,a.foldr=Ao,a.select=Eo,a.selectLimit=Ei,a.selectSeries=So,a.wrapSync=N,Object.defineProperty(a,"__esModule",{value:!0})}(g)},664:i=>{i.exports=function(g,f){for(var a=0;a++<f;)g*=2;return g}},911:(i,g,f)=>{var a=f(346),y=f(664);i.exports=function(l){if(!arguments.length)throw new SyntaxError("must supply a polling function");if(!a(l,"function"))throw new TypeError("poll must be a function");return function(){var v,A,d=1/0,T=!1,w=1e3,S=null,O=0;function N(){var H=l(P);l.length===0&&P(H)}function P(H){var j=w,Z=A;O+=1,H||O>=d?A&&(A=null,Z(!!H)):(T&&(T===!0?j=y(j,O):j+=O*T),S=setTimeout(N,j))}return v=function(H){if(S&&(clearTimeout(S),S=null,A&&A(!1),A=null,O=0),arguments.length){if(!a(H,"function"))throw new TypeError("done callback must be a function");A=H}S=setTimeout(N,w)},v.ask=function(H){if(S)throw new SyntaxError("can not set ask limit during polling");if(!a(H,"number"))throw new TypeError("ask limit must be a number");return d=H,v},v.every=function(H){if(S)throw new SyntaxError("can not set timeout during polling");if(!a(H,"number"))throw new TypeError("timout must be a number");return w=H,v},v.incr=function(H){if(S)throw new SyntexError("can not set increment during polling");if(!arguments.length||a(H,"boolean"))T=!!H;else{if(!a(H,"number"))throw new TypeError("increment must be a boolean or number");T=H}return v},v}()}},742:(i,g)=>{g.byteLength=function(w){var S=d(w),O=S[0],N=S[1];return 3*(O+N)/4-N},g.toByteArray=function(w){var S,O,N=d(w),P=N[0],H=N[1],j=new y(function(ue,fe,q){return 3*(fe+q)/4-q}(0,P,H)),Z=0,U=H>0?P-4:P;for(O=0;O<U;O+=4)S=a[w.charCodeAt(O)]<<18|a[w.charCodeAt(O+1)]<<12|a[w.charCodeAt(O+2)]<<6|a[w.charCodeAt(O+3)],j[Z++]=S>>16&255,j[Z++]=S>>8&255,j[Z++]=255&S;return H===2&&(S=a[w.charCodeAt(O)]<<2|a[w.charCodeAt(O+1)]>>4,j[Z++]=255&S),H===1&&(S=a[w.charCodeAt(O)]<<10|a[w.charCodeAt(O+1)]<<4|a[w.charCodeAt(O+2)]>>2,j[Z++]=S>>8&255,j[Z++]=255&S),j},g.fromByteArray=function(w){for(var S,O=w.length,N=O%3,P=[],H=16383,j=0,Z=O-N;j<Z;j+=H)P.push(T(w,j,j+H>Z?Z:j+H));return N===1?(S=w[O-1],P.push(f[S>>2]+f[S<<4&63]+"==")):N===2&&(S=(w[O-2]<<8)+w[O-1],P.push(f[S>>10]+f[S>>4&63]+f[S<<2&63]+"=")),P.join("")};for(var f=[],a=[],y=typeof Uint8Array<"u"?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",v=0,A=l.length;v<A;++v)f[v]=l[v],a[l.charCodeAt(v)]=v;function d(w){var S=w.length;if(S%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var O=w.indexOf("=");return O===-1&&(O=S),[O,O===S?0:4-O%4]}function T(w,S,O){for(var N,P,H=[],j=S;j<O;j+=3)N=(w[j]<<16&16711680)+(w[j+1]<<8&65280)+(255&w[j+2]),H.push(f[(P=N)>>18&63]+f[P>>12&63]+f[P>>6&63]+f[63&P]);return H.join("")}a[45]=62,a[95]=63},764:(i,g,f)=>{/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */const a=f(742),y=f(645),l=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;g.lW=d,g.h2=50;const v=2147483647;function A(m){if(m>v)throw new RangeError('The value "'+m+'" is invalid for option "size"');const I=new Uint8Array(m);return Object.setPrototypeOf(I,d.prototype),I}function d(m,I,h){if(typeof m=="number"){if(typeof I=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return S(m)}return T(m,I,h)}function T(m,I,h){if(typeof m=="string")return function(L,J){if(typeof J=="string"&&J!==""||(J="utf8"),!d.isEncoding(J))throw new TypeError("Unknown encoding: "+J);const ge=0|H(L,J);let we=A(ge);const We=we.write(L,J);return We!==ge&&(we=we.slice(0,We)),we}(m,I);if(ArrayBuffer.isView(m))return function(L){if(Te(L,Uint8Array)){const J=new Uint8Array(L);return N(J.buffer,J.byteOffset,J.byteLength)}return O(L)}(m);if(m==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof m);if(Te(m,ArrayBuffer)||m&&Te(m.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Te(m,SharedArrayBuffer)||m&&Te(m.buffer,SharedArrayBuffer)))return N(m,I,h);if(typeof m=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const u=m.valueOf&&m.valueOf();if(u!=null&&u!==m)return d.from(u,I,h);const p=function(L){if(d.isBuffer(L)){const J=0|P(L.length),ge=A(J);return ge.length===0||L.copy(ge,0,0,J),ge}if(L.length!==void 0)return typeof L.length!="number"||Pe(L.length)?A(0):O(L);if(L.type==="Buffer"&&Array.isArray(L.data))return O(L.data)}(m);if(p)return p;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof m[Symbol.toPrimitive]=="function")return d.from(m[Symbol.toPrimitive]("string"),I,h);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof m)}function w(m){if(typeof m!="number")throw new TypeError('"size" argument must be of type number');if(m<0)throw new RangeError('The value "'+m+'" is invalid for option "size"')}function S(m){return w(m),A(m<0?0:0|P(m))}function O(m){const I=m.length<0?0:0|P(m.length),h=A(I);for(let u=0;u<I;u+=1)h[u]=255&m[u];return h}function N(m,I,h){if(I<0||m.byteLength<I)throw new RangeError('"offset" is outside of buffer bounds');if(m.byteLength<I+(h||0))throw new RangeError('"length" is outside of buffer bounds');let u;return u=I===void 0&&h===void 0?new Uint8Array(m):h===void 0?new Uint8Array(m,I):new Uint8Array(m,I,h),Object.setPrototypeOf(u,d.prototype),u}function P(m){if(m>=v)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+v.toString(16)+" bytes");return 0|m}function H(m,I){if(d.isBuffer(m))return m.length;if(ArrayBuffer.isView(m)||Te(m,ArrayBuffer))return m.byteLength;if(typeof m!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof m);const h=m.length,u=arguments.length>2&&arguments[2]===!0;if(!u&&h===0)return 0;let p=!1;for(;;)switch(I){case"ascii":case"latin1":case"binary":return h;case"utf8":case"utf-8":return se(m).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*h;case"hex":return h>>>1;case"base64":return ne(m).length;default:if(p)return u?-1:se(m).length;I=(""+I).toLowerCase(),p=!0}}function j(m,I,h){let u=!1;if((I===void 0||I<0)&&(I=0),I>this.length||((h===void 0||h>this.length)&&(h=this.length),h<=0)||(h>>>=0)<=(I>>>=0))return"";for(m||(m="utf8");;)switch(m){case"hex":return G(this,I,h);case"utf8":case"utf-8":return F(this,I,h);case"ascii":return M(this,I,h);case"latin1":case"binary":return K(this,I,h);case"base64":return $(this,I,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Y(this,I,h);default:if(u)throw new TypeError("Unknown encoding: "+m);m=(m+"").toLowerCase(),u=!0}}function Z(m,I,h){const u=m[I];m[I]=m[h],m[h]=u}function U(m,I,h,u,p){if(m.length===0)return-1;if(typeof h=="string"?(u=h,h=0):h>2147483647?h=2147483647:h<-2147483648&&(h=-2147483648),Pe(h=+h)&&(h=p?0:m.length-1),h<0&&(h=m.length+h),h>=m.length){if(p)return-1;h=m.length-1}else if(h<0){if(!p)return-1;h=0}if(typeof I=="string"&&(I=d.from(I,u)),d.isBuffer(I))return I.length===0?-1:ue(m,I,h,u,p);if(typeof I=="number")return I&=255,typeof Uint8Array.prototype.indexOf=="function"?p?Uint8Array.prototype.indexOf.call(m,I,h):Uint8Array.prototype.lastIndexOf.call(m,I,h):ue(m,[I],h,u,p);throw new TypeError("val must be string, number or Buffer")}function ue(m,I,h,u,p){let L,J=1,ge=m.length,we=I.length;if(u!==void 0&&((u=String(u).toLowerCase())==="ucs2"||u==="ucs-2"||u==="utf16le"||u==="utf-16le")){if(m.length<2||I.length<2)return-1;J=2,ge/=2,we/=2,h/=2}function We(et,rt){return J===1?et[rt]:et.readUInt16BE(rt*J)}if(p){let et=-1;for(L=h;L<ge;L++)if(We(m,L)===We(I,et===-1?0:L-et)){if(et===-1&&(et=L),L-et+1===we)return et*J}else et!==-1&&(L-=L-et),et=-1}else for(h+we>ge&&(h=ge-we),L=h;L>=0;L--){let et=!0;for(let rt=0;rt<we;rt++)if(We(m,L+rt)!==We(I,rt)){et=!1;break}if(et)return L}return-1}function fe(m,I,h,u){h=Number(h)||0;const p=m.length-h;u?(u=Number(u))>p&&(u=p):u=p;const L=I.length;let J;for(u>L/2&&(u=L/2),J=0;J<u;++J){const ge=parseInt(I.substr(2*J,2),16);if(Pe(ge))return J;m[h+J]=ge}return J}function q(m,I,h,u){return ve(se(I,m.length-h),m,h,u)}function Q(m,I,h,u){return ve(function(p){const L=[];for(let J=0;J<p.length;++J)L.push(255&p.charCodeAt(J));return L}(I),m,h,u)}function _(m,I,h,u){return ve(ne(I),m,h,u)}function k(m,I,h,u){return ve(function(p,L){let J,ge,we;const We=[];for(let et=0;et<p.length&&!((L-=2)<0);++et)J=p.charCodeAt(et),ge=J>>8,we=J%256,We.push(we),We.push(ge);return We}(I,m.length-h),m,h,u)}function $(m,I,h){return I===0&&h===m.length?a.fromByteArray(m):a.fromByteArray(m.slice(I,h))}function F(m,I,h){h=Math.min(m.length,h);const u=[];let p=I;for(;p<h;){const L=m[p];let J=null,ge=L>239?4:L>223?3:L>191?2:1;if(p+ge<=h){let we,We,et,rt;switch(ge){case 1:L<128&&(J=L);break;case 2:we=m[p+1],(192&we)==128&&(rt=(31&L)<<6|63&we,rt>127&&(J=rt));break;case 3:we=m[p+1],We=m[p+2],(192&we)==128&&(192&We)==128&&(rt=(15&L)<<12|(63&we)<<6|63&We,rt>2047&&(rt<55296||rt>57343)&&(J=rt));break;case 4:we=m[p+1],We=m[p+2],et=m[p+3],(192&we)==128&&(192&We)==128&&(192&et)==128&&(rt=(15&L)<<18|(63&we)<<12|(63&We)<<6|63&et,rt>65535&&rt<1114112&&(J=rt))}}J===null?(J=65533,ge=1):J>65535&&(J-=65536,u.push(J>>>10&1023|55296),J=56320|1023&J),u.push(J),p+=ge}return function(L){const J=L.length;if(J<=V)return String.fromCharCode.apply(String,L);let ge="",we=0;for(;we<J;)ge+=String.fromCharCode.apply(String,L.slice(we,we+=V));return ge}(u)}d.TYPED_ARRAY_SUPPORT=function(){try{const m=new Uint8Array(1),I={foo:function(){return 42}};return Object.setPrototypeOf(I,Uint8Array.prototype),Object.setPrototypeOf(m,I),m.foo()===42}catch{return!1}}(),d.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}}),d.poolSize=8192,d.from=function(m,I,h){return T(m,I,h)},Object.setPrototypeOf(d.prototype,Uint8Array.prototype),Object.setPrototypeOf(d,Uint8Array),d.alloc=function(m,I,h){return function(u,p,L){return w(u),u<=0?A(u):p!==void 0?typeof L=="string"?A(u).fill(p,L):A(u).fill(p):A(u)}(m,I,h)},d.allocUnsafe=function(m){return S(m)},d.allocUnsafeSlow=function(m){return S(m)},d.isBuffer=function(m){return m!=null&&m._isBuffer===!0&&m!==d.prototype},d.compare=function(m,I){if(Te(m,Uint8Array)&&(m=d.from(m,m.offset,m.byteLength)),Te(I,Uint8Array)&&(I=d.from(I,I.offset,I.byteLength)),!d.isBuffer(m)||!d.isBuffer(I))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(m===I)return 0;let h=m.length,u=I.length;for(let p=0,L=Math.min(h,u);p<L;++p)if(m[p]!==I[p]){h=m[p],u=I[p];break}return h<u?-1:u<h?1:0},d.isEncoding=function(m){switch(String(m).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(m,I){if(!Array.isArray(m))throw new TypeError('"list" argument must be an Array of Buffers');if(m.length===0)return d.alloc(0);let h;if(I===void 0)for(I=0,h=0;h<m.length;++h)I+=m[h].length;const u=d.allocUnsafe(I);let p=0;for(h=0;h<m.length;++h){let L=m[h];if(Te(L,Uint8Array))p+L.length>u.length?(d.isBuffer(L)||(L=d.from(L)),L.copy(u,p)):Uint8Array.prototype.set.call(u,L,p);else{if(!d.isBuffer(L))throw new TypeError('"list" argument must be an Array of Buffers');L.copy(u,p)}p+=L.length}return u},d.byteLength=H,d.prototype._isBuffer=!0,d.prototype.swap16=function(){const m=this.length;if(m%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let I=0;I<m;I+=2)Z(this,I,I+1);return this},d.prototype.swap32=function(){const m=this.length;if(m%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let I=0;I<m;I+=4)Z(this,I,I+3),Z(this,I+1,I+2);return this},d.prototype.swap64=function(){const m=this.length;if(m%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let I=0;I<m;I+=8)Z(this,I,I+7),Z(this,I+1,I+6),Z(this,I+2,I+5),Z(this,I+3,I+4);return this},d.prototype.toString=function(){const m=this.length;return m===0?"":arguments.length===0?F(this,0,m):j.apply(this,arguments)},d.prototype.toLocaleString=d.prototype.toString,d.prototype.equals=function(m){if(!d.isBuffer(m))throw new TypeError("Argument must be a Buffer");return this===m||d.compare(this,m)===0},d.prototype.inspect=function(){let m="";const I=g.h2;return m=this.toString("hex",0,I).replace(/(.{2})/g,"$1 ").trim(),this.length>I&&(m+=" ... "),"<Buffer "+m+">"},l&&(d.prototype[l]=d.prototype.inspect),d.prototype.compare=function(m,I,h,u,p){if(Te(m,Uint8Array)&&(m=d.from(m,m.offset,m.byteLength)),!d.isBuffer(m))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof m);if(I===void 0&&(I=0),h===void 0&&(h=m?m.length:0),u===void 0&&(u=0),p===void 0&&(p=this.length),I<0||h>m.length||u<0||p>this.length)throw new RangeError("out of range index");if(u>=p&&I>=h)return 0;if(u>=p)return-1;if(I>=h)return 1;if(this===m)return 0;let L=(p>>>=0)-(u>>>=0),J=(h>>>=0)-(I>>>=0);const ge=Math.min(L,J),we=this.slice(u,p),We=m.slice(I,h);for(let et=0;et<ge;++et)if(we[et]!==We[et]){L=we[et],J=We[et];break}return L<J?-1:J<L?1:0},d.prototype.includes=function(m,I,h){return this.indexOf(m,I,h)!==-1},d.prototype.indexOf=function(m,I,h){return U(this,m,I,h,!0)},d.prototype.lastIndexOf=function(m,I,h){return U(this,m,I,h,!1)},d.prototype.write=function(m,I,h,u){if(I===void 0)u="utf8",h=this.length,I=0;else if(h===void 0&&typeof I=="string")u=I,h=this.length,I=0;else{if(!isFinite(I))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");I>>>=0,isFinite(h)?(h>>>=0,u===void 0&&(u="utf8")):(u=h,h=void 0)}const p=this.length-I;if((h===void 0||h>p)&&(h=p),m.length>0&&(h<0||I<0)||I>this.length)throw new RangeError("Attempt to write outside buffer bounds");u||(u="utf8");let L=!1;for(;;)switch(u){case"hex":return fe(this,m,I,h);case"utf8":case"utf-8":return q(this,m,I,h);case"ascii":case"latin1":case"binary":return Q(this,m,I,h);case"base64":return _(this,m,I,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,m,I,h);default:if(L)throw new TypeError("Unknown encoding: "+u);u=(""+u).toLowerCase(),L=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const V=4096;function M(m,I,h){let u="";h=Math.min(m.length,h);for(let p=I;p<h;++p)u+=String.fromCharCode(127&m[p]);return u}function K(m,I,h){let u="";h=Math.min(m.length,h);for(let p=I;p<h;++p)u+=String.fromCharCode(m[p]);return u}function G(m,I,h){const u=m.length;(!I||I<0)&&(I=0),(!h||h<0||h>u)&&(h=u);let p="";for(let L=I;L<h;++L)p+=xe[m[L]];return p}function Y(m,I,h){const u=m.slice(I,h);let p="";for(let L=0;L<u.length-1;L+=2)p+=String.fromCharCode(u[L]+256*u[L+1]);return p}function ye(m,I,h){if(m%1!=0||m<0)throw new RangeError("offset is not uint");if(m+I>h)throw new RangeError("Trying to access beyond buffer length")}function Ee(m,I,h,u,p,L){if(!d.isBuffer(m))throw new TypeError('"buffer" argument must be a Buffer instance');if(I>p||I<L)throw new RangeError('"value" argument is out of bounds');if(h+u>m.length)throw new RangeError("Index out of range")}function Re(m,I,h,u,p){lt(I,u,p,m,h,7);let L=Number(I&BigInt(4294967295));m[h++]=L,L>>=8,m[h++]=L,L>>=8,m[h++]=L,L>>=8,m[h++]=L;let J=Number(I>>BigInt(32)&BigInt(4294967295));return m[h++]=J,J>>=8,m[h++]=J,J>>=8,m[h++]=J,J>>=8,m[h++]=J,h}function ct(m,I,h,u,p){lt(I,u,p,m,h,7);let L=Number(I&BigInt(4294967295));m[h+7]=L,L>>=8,m[h+6]=L,L>>=8,m[h+5]=L,L>>=8,m[h+4]=L;let J=Number(I>>BigInt(32)&BigInt(4294967295));return m[h+3]=J,J>>=8,m[h+2]=J,J>>=8,m[h+1]=J,J>>=8,m[h]=J,h+8}function ft(m,I,h,u,p,L){if(h+u>m.length)throw new RangeError("Index out of range");if(h<0)throw new RangeError("Index out of range")}function Ze(m,I,h,u,p){return I=+I,h>>>=0,p||ft(m,0,h,4),y.write(m,I,h,u,23,4),h+4}function Je(m,I,h,u,p){return I=+I,h>>>=0,p||ft(m,0,h,8),y.write(m,I,h,u,52,8),h+8}d.prototype.slice=function(m,I){const h=this.length;(m=~~m)<0?(m+=h)<0&&(m=0):m>h&&(m=h),(I=I===void 0?h:~~I)<0?(I+=h)<0&&(I=0):I>h&&(I=h),I<m&&(I=m);const u=this.subarray(m,I);return Object.setPrototypeOf(u,d.prototype),u},d.prototype.readUintLE=d.prototype.readUIntLE=function(m,I,h){m>>>=0,I>>>=0,h||ye(m,I,this.length);let u=this[m],p=1,L=0;for(;++L<I&&(p*=256);)u+=this[m+L]*p;return u},d.prototype.readUintBE=d.prototype.readUIntBE=function(m,I,h){m>>>=0,I>>>=0,h||ye(m,I,this.length);let u=this[m+--I],p=1;for(;I>0&&(p*=256);)u+=this[m+--I]*p;return u},d.prototype.readUint8=d.prototype.readUInt8=function(m,I){return m>>>=0,I||ye(m,1,this.length),this[m]},d.prototype.readUint16LE=d.prototype.readUInt16LE=function(m,I){return m>>>=0,I||ye(m,2,this.length),this[m]|this[m+1]<<8},d.prototype.readUint16BE=d.prototype.readUInt16BE=function(m,I){return m>>>=0,I||ye(m,2,this.length),this[m]<<8|this[m+1]},d.prototype.readUint32LE=d.prototype.readUInt32LE=function(m,I){return m>>>=0,I||ye(m,4,this.length),(this[m]|this[m+1]<<8|this[m+2]<<16)+16777216*this[m+3]},d.prototype.readUint32BE=d.prototype.readUInt32BE=function(m,I){return m>>>=0,I||ye(m,4,this.length),16777216*this[m]+(this[m+1]<<16|this[m+2]<<8|this[m+3])},d.prototype.readBigUInt64LE=Fe(function(m){R(m>>>=0,"offset");const I=this[m],h=this[m+7];I!==void 0&&h!==void 0||Se(m,this.length-8);const u=I+256*this[++m]+65536*this[++m]+this[++m]*2**24,p=this[++m]+256*this[++m]+65536*this[++m]+h*2**24;return BigInt(u)+(BigInt(p)<<BigInt(32))}),d.prototype.readBigUInt64BE=Fe(function(m){R(m>>>=0,"offset");const I=this[m],h=this[m+7];I!==void 0&&h!==void 0||Se(m,this.length-8);const u=I*2**24+65536*this[++m]+256*this[++m]+this[++m],p=this[++m]*2**24+65536*this[++m]+256*this[++m]+h;return(BigInt(u)<<BigInt(32))+BigInt(p)}),d.prototype.readIntLE=function(m,I,h){m>>>=0,I>>>=0,h||ye(m,I,this.length);let u=this[m],p=1,L=0;for(;++L<I&&(p*=256);)u+=this[m+L]*p;return p*=128,u>=p&&(u-=Math.pow(2,8*I)),u},d.prototype.readIntBE=function(m,I,h){m>>>=0,I>>>=0,h||ye(m,I,this.length);let u=I,p=1,L=this[m+--u];for(;u>0&&(p*=256);)L+=this[m+--u]*p;return p*=128,L>=p&&(L-=Math.pow(2,8*I)),L},d.prototype.readInt8=function(m,I){return m>>>=0,I||ye(m,1,this.length),128&this[m]?-1*(255-this[m]+1):this[m]},d.prototype.readInt16LE=function(m,I){m>>>=0,I||ye(m,2,this.length);const h=this[m]|this[m+1]<<8;return 32768&h?4294901760|h:h},d.prototype.readInt16BE=function(m,I){m>>>=0,I||ye(m,2,this.length);const h=this[m+1]|this[m]<<8;return 32768&h?4294901760|h:h},d.prototype.readInt32LE=function(m,I){return m>>>=0,I||ye(m,4,this.length),this[m]|this[m+1]<<8|this[m+2]<<16|this[m+3]<<24},d.prototype.readInt32BE=function(m,I){return m>>>=0,I||ye(m,4,this.length),this[m]<<24|this[m+1]<<16|this[m+2]<<8|this[m+3]},d.prototype.readBigInt64LE=Fe(function(m){R(m>>>=0,"offset");const I=this[m],h=this[m+7];I!==void 0&&h!==void 0||Se(m,this.length-8);const u=this[m+4]+256*this[m+5]+65536*this[m+6]+(h<<24);return(BigInt(u)<<BigInt(32))+BigInt(I+256*this[++m]+65536*this[++m]+this[++m]*16777216)}),d.prototype.readBigInt64BE=Fe(function(m){R(m>>>=0,"offset");const I=this[m],h=this[m+7];I!==void 0&&h!==void 0||Se(m,this.length-8);const u=(I<<24)+65536*this[++m]+256*this[++m]+this[++m];return(BigInt(u)<<BigInt(32))+BigInt(this[++m]*16777216+65536*this[++m]+256*this[++m]+h)}),d.prototype.readFloatLE=function(m,I){return m>>>=0,I||ye(m,4,this.length),y.read(this,m,!0,23,4)},d.prototype.readFloatBE=function(m,I){return m>>>=0,I||ye(m,4,this.length),y.read(this,m,!1,23,4)},d.prototype.readDoubleLE=function(m,I){return m>>>=0,I||ye(m,8,this.length),y.read(this,m,!0,52,8)},d.prototype.readDoubleBE=function(m,I){return m>>>=0,I||ye(m,8,this.length),y.read(this,m,!1,52,8)},d.prototype.writeUintLE=d.prototype.writeUIntLE=function(m,I,h,u){m=+m,I>>>=0,h>>>=0,!u&&Ee(this,m,I,h,Math.pow(2,8*h)-1,0);let p=1,L=0;for(this[I]=255&m;++L<h&&(p*=256);)this[I+L]=m/p&255;return I+h},d.prototype.writeUintBE=d.prototype.writeUIntBE=function(m,I,h,u){m=+m,I>>>=0,h>>>=0,!u&&Ee(this,m,I,h,Math.pow(2,8*h)-1,0);let p=h-1,L=1;for(this[I+p]=255&m;--p>=0&&(L*=256);)this[I+p]=m/L&255;return I+h},d.prototype.writeUint8=d.prototype.writeUInt8=function(m,I,h){return m=+m,I>>>=0,h||Ee(this,m,I,1,255,0),this[I]=255&m,I+1},d.prototype.writeUint16LE=d.prototype.writeUInt16LE=function(m,I,h){return m=+m,I>>>=0,h||Ee(this,m,I,2,65535,0),this[I]=255&m,this[I+1]=m>>>8,I+2},d.prototype.writeUint16BE=d.prototype.writeUInt16BE=function(m,I,h){return m=+m,I>>>=0,h||Ee(this,m,I,2,65535,0),this[I]=m>>>8,this[I+1]=255&m,I+2},d.prototype.writeUint32LE=d.prototype.writeUInt32LE=function(m,I,h){return m=+m,I>>>=0,h||Ee(this,m,I,4,4294967295,0),this[I+3]=m>>>24,this[I+2]=m>>>16,this[I+1]=m>>>8,this[I]=255&m,I+4},d.prototype.writeUint32BE=d.prototype.writeUInt32BE=function(m,I,h){return m=+m,I>>>=0,h||Ee(this,m,I,4,4294967295,0),this[I]=m>>>24,this[I+1]=m>>>16,this[I+2]=m>>>8,this[I+3]=255&m,I+4},d.prototype.writeBigUInt64LE=Fe(function(m,I=0){return Re(this,m,I,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeBigUInt64BE=Fe(function(m,I=0){return ct(this,m,I,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeIntLE=function(m,I,h,u){if(m=+m,I>>>=0,!u){const ge=Math.pow(2,8*h-1);Ee(this,m,I,h,ge-1,-ge)}let p=0,L=1,J=0;for(this[I]=255&m;++p<h&&(L*=256);)m<0&&J===0&&this[I+p-1]!==0&&(J=1),this[I+p]=(m/L>>0)-J&255;return I+h},d.prototype.writeIntBE=function(m,I,h,u){if(m=+m,I>>>=0,!u){const ge=Math.pow(2,8*h-1);Ee(this,m,I,h,ge-1,-ge)}let p=h-1,L=1,J=0;for(this[I+p]=255&m;--p>=0&&(L*=256);)m<0&&J===0&&this[I+p+1]!==0&&(J=1),this[I+p]=(m/L>>0)-J&255;return I+h},d.prototype.writeInt8=function(m,I,h){return m=+m,I>>>=0,h||Ee(this,m,I,1,127,-128),m<0&&(m=255+m+1),this[I]=255&m,I+1},d.prototype.writeInt16LE=function(m,I,h){return m=+m,I>>>=0,h||Ee(this,m,I,2,32767,-32768),this[I]=255&m,this[I+1]=m>>>8,I+2},d.prototype.writeInt16BE=function(m,I,h){return m=+m,I>>>=0,h||Ee(this,m,I,2,32767,-32768),this[I]=m>>>8,this[I+1]=255&m,I+2},d.prototype.writeInt32LE=function(m,I,h){return m=+m,I>>>=0,h||Ee(this,m,I,4,2147483647,-2147483648),this[I]=255&m,this[I+1]=m>>>8,this[I+2]=m>>>16,this[I+3]=m>>>24,I+4},d.prototype.writeInt32BE=function(m,I,h){return m=+m,I>>>=0,h||Ee(this,m,I,4,2147483647,-2147483648),m<0&&(m=4294967295+m+1),this[I]=m>>>24,this[I+1]=m>>>16,this[I+2]=m>>>8,this[I+3]=255&m,I+4},d.prototype.writeBigInt64LE=Fe(function(m,I=0){return Re(this,m,I,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),d.prototype.writeBigInt64BE=Fe(function(m,I=0){return ct(this,m,I,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),d.prototype.writeFloatLE=function(m,I,h){return Ze(this,m,I,!0,h)},d.prototype.writeFloatBE=function(m,I,h){return Ze(this,m,I,!1,h)},d.prototype.writeDoubleLE=function(m,I,h){return Je(this,m,I,!0,h)},d.prototype.writeDoubleBE=function(m,I,h){return Je(this,m,I,!1,h)},d.prototype.copy=function(m,I,h,u){if(!d.isBuffer(m))throw new TypeError("argument should be a Buffer");if(h||(h=0),u||u===0||(u=this.length),I>=m.length&&(I=m.length),I||(I=0),u>0&&u<h&&(u=h),u===h||m.length===0||this.length===0)return 0;if(I<0)throw new RangeError("targetStart out of bounds");if(h<0||h>=this.length)throw new RangeError("Index out of range");if(u<0)throw new RangeError("sourceEnd out of bounds");u>this.length&&(u=this.length),m.length-I<u-h&&(u=m.length-I+h);const p=u-h;return this===m&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(I,h,u):Uint8Array.prototype.set.call(m,this.subarray(h,u),I),p},d.prototype.fill=function(m,I,h,u){if(typeof m=="string"){if(typeof I=="string"?(u=I,I=0,h=this.length):typeof h=="string"&&(u=h,h=this.length),u!==void 0&&typeof u!="string")throw new TypeError("encoding must be a string");if(typeof u=="string"&&!d.isEncoding(u))throw new TypeError("Unknown encoding: "+u);if(m.length===1){const L=m.charCodeAt(0);(u==="utf8"&&L<128||u==="latin1")&&(m=L)}}else typeof m=="number"?m&=255:typeof m=="boolean"&&(m=Number(m));if(I<0||this.length<I||this.length<h)throw new RangeError("Out of range index");if(h<=I)return this;let p;if(I>>>=0,h=h===void 0?this.length:h>>>0,m||(m=0),typeof m=="number")for(p=I;p<h;++p)this[p]=m;else{const L=d.isBuffer(m)?m:d.from(m,u),J=L.length;if(J===0)throw new TypeError('The value "'+m+'" is invalid for argument "value"');for(p=0;p<h-I;++p)this[p+I]=L[p%J]}return this};const Xe={};function Qe(m,I,h){Xe[m]=class extends h{constructor(){super(),Object.defineProperty(this,"message",{value:I.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${m}]`,this.stack,delete this.name}get code(){return m}set code(u){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:u,writable:!0})}toString(){return`${this.name} [${m}]: ${this.message}`}}}function ht(m){let I="",h=m.length;const u=m[0]==="-"?1:0;for(;h>=u+4;h-=3)I=`_${m.slice(h-3,h)}${I}`;return`${m.slice(0,h)}${I}`}function lt(m,I,h,u,p,L){if(m>h||m<I){const J=typeof I=="bigint"?"n":"";let ge;throw ge=I===0||I===BigInt(0)?`>= 0${J} and < 2${J} ** ${8*(L+1)}${J}`:`>= -(2${J} ** ${8*(L+1)-1}${J}) and < 2 ** ${8*(L+1)-1}${J}`,new Xe.ERR_OUT_OF_RANGE("value",ge,m)}(function(J,ge,we){R(ge,"offset"),J[ge]!==void 0&&J[ge+we]!==void 0||Se(ge,J.length-(we+1))})(u,p,L)}function R(m,I){if(typeof m!="number")throw new Xe.ERR_INVALID_ARG_TYPE(I,"number",m)}function Se(m,I,h){throw Math.floor(m)!==m?(R(m,h),new Xe.ERR_OUT_OF_RANGE("offset","an integer",m)):I<0?new Xe.ERR_BUFFER_OUT_OF_BOUNDS:new Xe.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${I}`,m)}Qe("ERR_BUFFER_OUT_OF_BOUNDS",function(m){return m?`${m} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Qe("ERR_INVALID_ARG_TYPE",function(m,I){return`The "${m}" argument must be of type number. Received type ${typeof I}`},TypeError),Qe("ERR_OUT_OF_RANGE",function(m,I,h){let u=`The value of "${m}" is out of range.`,p=h;return Number.isInteger(h)&&Math.abs(h)>4294967296?p=ht(String(h)):typeof h=="bigint"&&(p=String(h),(h>BigInt(2)**BigInt(32)||h<-(BigInt(2)**BigInt(32)))&&(p=ht(p)),p+="n"),u+=` It must be ${I}. Received ${p}`,u},RangeError);const Ae=/[^+/0-9A-Za-z-_]/g;function se(m,I){let h;I=I||1/0;const u=m.length;let p=null;const L=[];for(let J=0;J<u;++J){if(h=m.charCodeAt(J),h>55295&&h<57344){if(!p){if(h>56319){(I-=3)>-1&&L.push(239,191,189);continue}if(J+1===u){(I-=3)>-1&&L.push(239,191,189);continue}p=h;continue}if(h<56320){(I-=3)>-1&&L.push(239,191,189),p=h;continue}h=65536+(p-55296<<10|h-56320)}else p&&(I-=3)>-1&&L.push(239,191,189);if(p=null,h<128){if((I-=1)<0)break;L.push(h)}else if(h<2048){if((I-=2)<0)break;L.push(h>>6|192,63&h|128)}else if(h<65536){if((I-=3)<0)break;L.push(h>>12|224,h>>6&63|128,63&h|128)}else{if(!(h<1114112))throw new Error("Invalid code point");if((I-=4)<0)break;L.push(h>>18|240,h>>12&63|128,h>>6&63|128,63&h|128)}}return L}function ne(m){return a.toByteArray(function(I){if((I=(I=I.split("=")[0]).trim().replace(Ae,"")).length<2)return"";for(;I.length%4!=0;)I+="=";return I}(m))}function ve(m,I,h,u){let p;for(p=0;p<u&&!(p+h>=I.length||p>=m.length);++p)I[p+h]=m[p];return p}function Te(m,I){return m instanceof I||m!=null&&m.constructor!=null&&m.constructor.name!=null&&m.constructor.name===I.name}function Pe(m){return m!=m}const xe=function(){const m="0123456789abcdef",I=new Array(256);for(let h=0;h<16;++h){const u=16*h;for(let p=0;p<16;++p)I[u+p]=m[h]+m[p]}return I}();function Fe(m){return typeof BigInt>"u"?Ve:m}function Ve(){throw new Error("BigInt not supported")}},517:(i,g,f)=>{var a={};i.exports=a,a.themes={};var y=f(947),l=a.styles=f(784),v=Object.defineProperties,A=new RegExp(/[\r\n]+/g);a.supportsColor=f(561).supportsColor,a.enabled===void 0&&(a.enabled=a.supportsColor()!==!1),a.enable=function(){a.enabled=!0},a.disable=function(){a.enabled=!1},a.stripColors=a.strip=function(j){return(""+j).replace(/\x1B\[\d+m/g,"")},a.stylize=function(j,Z){if(!a.enabled)return j+"";var U=l[Z];return!U&&Z in a?a[Z](j):U.open+j+U.close};var d=/[|\\{}()[\]^$+*?.]/g;function T(j){var Z=function U(){return N.apply(U,arguments)};return Z._styles=j,Z.__proto__=O,Z}var w,S=(w={},l.grey=l.gray,Object.keys(l).forEach(function(j){l[j].closeRe=new RegExp(function(Z){if(typeof Z!="string")throw new TypeError("Expected a string");return Z.replace(d,"\\$&")}(l[j].close),"g"),w[j]={get:function(){return T(this._styles.concat(j))}}}),w),O=v(function(){},S);function N(){var j=Array.prototype.slice.call(arguments),Z=j.map(function(Q){return Q!=null&&Q.constructor===String?Q:y.inspect(Q)}).join(" ");if(!a.enabled||!Z)return Z;for(var U=Z.indexOf(`
`)!=-1,ue=this._styles,fe=ue.length;fe--;){var q=l[ue[fe]];Z=q.open+Z.replace(q.closeRe,q.open)+q.close,U&&(Z=Z.replace(A,function(Q){return q.close+Q+q.open}))}return Z}a.setTheme=function(j){if(typeof j!="string")for(var Z in j)(function(U){a[U]=function(ue){if(typeof j[U]=="object"){var fe=ue;for(var q in j[U])fe=a[j[U][q]](fe);return fe}return a[j[U]](ue)}})(Z);else console.log("colors.setTheme now only accepts an object, not a string.  If you are trying to set a theme from a file, it is now your (the caller's) responsibility to require the file.  The old syntax looked like colors.setTheme(__dirname + '/../themes/generic-logging.js'); The new syntax looks like colors.setTheme(require(__dirname + '/../themes/generic-logging.js'));")};var P=function(j,Z){var U=Z.split("");return(U=U.map(j)).join("")};for(var H in a.trap=f(117),a.zalgo=f(492),a.maps={},a.maps.america=f(260)(a),a.maps.zebra=f(270)(a),a.maps.rainbow=f(920)(a),a.maps.random=f(449)(a),a.maps)(function(j){a[j]=function(Z){return P(a.maps[j],Z)}})(H);v(a,function(){var j={};return Object.keys(S).forEach(function(Z){j[Z]={get:function(){return T([Z])}}}),j}())},117:i=>{i.exports=function(g,f){var a="";g=(g=g||"Run the trap, drop the bass").split("");var y={a:["@","Ą","Ⱥ","Ʌ","Δ","Λ","Д"],b:["ß","Ɓ","Ƀ","ɮ","β","฿"],c:["©","Ȼ","Ͼ"],d:["Ð","Ɗ","Ԁ","ԁ","Ԃ","ԃ"],e:["Ë","ĕ","Ǝ","ɘ","Σ","ξ","Ҽ","੬"],f:["Ӻ"],g:["ɢ"],h:["Ħ","ƕ","Ң","Һ","Ӈ","Ԋ"],i:["༏"],j:["Ĵ"],k:["ĸ","Ҡ","Ӄ","Ԟ"],l:["Ĺ"],m:["ʍ","Ӎ","ӎ","Ԡ","ԡ","൩"],n:["Ñ","ŋ","Ɲ","Ͷ","Π","Ҋ"],o:["Ø","õ","ø","Ǿ","ʘ","Ѻ","ם","۝","๏"],p:["Ƿ","Ҏ"],q:["্"],r:["®","Ʀ","Ȑ","Ɍ","ʀ","Я"],s:["§","Ϟ","ϟ","Ϩ"],t:["Ł","Ŧ","ͳ"],u:["Ʊ","Ս"],v:["ט"],w:["Ш","Ѡ","Ѽ","൰"],x:["Ҳ","Ӿ","Ӽ","ӽ"],y:["¥","Ұ","Ӌ"],z:["Ƶ","ɀ"]};return g.forEach(function(l){l=l.toLowerCase();var v=y[l]||[" "],A=Math.floor(Math.random()*v.length);a+=y[l]!==void 0?y[l][A]:l}),a}},492:i=>{i.exports=function(g,f){g=g||"   he is here   ";var a={up:["̍","̎","̄","̅","̿","̑","̆","̐","͒","͗","͑","̇","̈","̊","͂","̓","̈","͊","͋","͌","̃","̂","̌","͐","̀","́","̋","̏","̒","̓","̔","̽","̉","ͣ","ͤ","ͥ","ͦ","ͧ","ͨ","ͩ","ͪ","ͫ","ͬ","ͭ","ͮ","ͯ","̾","͛","͆","̚"],down:["̖","̗","̘","̙","̜","̝","̞","̟","̠","̤","̥","̦","̩","̪","̫","̬","̭","̮","̯","̰","̱","̲","̳","̹","̺","̻","̼","ͅ","͇","͈","͉","͍","͎","͓","͔","͕","͖","͙","͚","̣"],mid:["̕","̛","̀","́","͘","̡","̢","̧","̨","̴","̵","̶","͜","͝","͞","͟","͠","͢","̸","̷","͡"," ҉"]},y=[].concat(a.up,a.down,a.mid);function l(A){return Math.floor(Math.random()*A)}function v(A){var d=!1;return y.filter(function(T){d=T===A}),d}return function(A,d){var T,w,S="";for(w in(d=d||{}).up=d.up===void 0||d.up,d.mid=d.mid===void 0||d.mid,d.down=d.down===void 0||d.down,d.size=d.size!==void 0?d.size:"maxi",A=A.split(""))if(!v(w)){switch(S+=A[w],T={up:0,down:0,mid:0},d.size){case"mini":T.up=l(8),T.mid=l(2),T.down=l(8);break;case"maxi":T.up=l(16)+3,T.mid=l(4)+1,T.down=l(64)+3;break;default:T.up=l(8)+1,T.mid=l(6)/2,T.down=l(8)+1}var O=["up","mid","down"];for(var N in O)for(var P=O[N],H=0;H<=T[P];H++)d[P]&&(S+=a[P][l(a[P].length)])}return S}(g,f)}},883:(i,g,f)=>{var a=f(517);i.exports=function(){var y=function(l,v){String.prototype.__defineGetter__(l,v)};y("strip",function(){return a.strip(this)}),y("stripColors",function(){return a.strip(this)}),y("trap",function(){return a.trap(this)}),y("zalgo",function(){return a.zalgo(this)}),y("zebra",function(){return a.zebra(this)}),y("rainbow",function(){return a.rainbow(this)}),y("random",function(){return a.random(this)}),y("america",function(){return a.america(this)}),Object.keys(a.styles).forEach(function(l){y(l,function(){return a.stylize(this,l)})}),a.setTheme=function(l){typeof l!="string"?function(v){var A=["__defineGetter__","__defineSetter__","__lookupGetter__","__lookupSetter__","charAt","constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf","charCodeAt","indexOf","lastIndexOf","length","localeCompare","match","repeat","replace","search","slice","split","substring","toLocaleLowerCase","toLocaleUpperCase","toLowerCase","toUpperCase","trim","trimLeft","trimRight"];Object.keys(v).forEach(function(d){if(A.indexOf(d)!==-1)console.log("warn: ".red+("String.prototype"+d).magenta+" is probably something you don't want to override.  Ignoring style name");else if(typeof v[d]=="string")a[d]=a[v[d]],y(d,function(){return a[d](this)});else{var T=function(w){for(var S=w||this,O=0;O<v[d].length;O++)S=a[v[d][O]](S);return S};y(d,T),a[d]=function(w){return T(w)}}})}(l):console.log("colors.setTheme now only accepts an object, not a string. If you are trying to set a theme from a file, it is now your (the caller's) responsibility to require the file.  The old syntax looked like colors.setTheme(__dirname + '/../themes/generic-logging.js'); The new syntax looks like colors.setTheme(require(__dirname + '/../themes/generic-logging.js'));")}}},196:(i,g,f)=>{var a=f(517);i.exports=a,f(883)()},260:i=>{i.exports=function(g){return function(f,a,y){if(f===" ")return f;switch(a%3){case 0:return g.red(f);case 1:return g.white(f);case 2:return g.blue(f)}}}},920:i=>{i.exports=function(g){var f=["red","yellow","green","blue","magenta"];return function(a,y,l){return a===" "?a:g[f[y++%f.length]](a)}}},449:i=>{i.exports=function(g){var f=["underline","inverse","grey","yellow","red","green","blue","white","cyan","magenta","brightYellow","brightRed","brightGreen","brightBlue","brightWhite","brightCyan","brightMagenta"];return function(a,y,l){return a===" "?a:g[f[Math.round(Math.random()*(f.length-2))]](a)}}},270:i=>{i.exports=function(g){return function(f,a,y){return a%2==0?f:g.inverse(f)}}},784:i=>{var g={};i.exports=g;var f={reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],grey:[90,39],brightRed:[91,39],brightGreen:[92,39],brightYellow:[93,39],brightBlue:[94,39],brightMagenta:[95,39],brightCyan:[96,39],brightWhite:[97,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgGray:[100,49],bgGrey:[100,49],bgBrightRed:[101,49],bgBrightGreen:[102,49],bgBrightYellow:[103,49],bgBrightBlue:[104,49],bgBrightMagenta:[105,49],bgBrightCyan:[106,49],bgBrightWhite:[107,49],blackBG:[40,49],redBG:[41,49],greenBG:[42,49],yellowBG:[43,49],blueBG:[44,49],magentaBG:[45,49],cyanBG:[46,49],whiteBG:[47,49]};Object.keys(f).forEach(function(a){var y=f[a],l=g[a]=[];l.open="\x1B["+y[0]+"m",l.close="\x1B["+y[1]+"m"})},340:i=>{i.exports=function(g,f){var a=(f=f||process.argv).indexOf("--"),y=/^-{1,2}/.test(g)?"":"--",l=f.indexOf(y+g);return l!==-1&&(a===-1||l<a)}},561:(i,g,f)=>{var a=f(987),y=f(340),l=r,v=void 0;function A(d){var T=function(w){if(v===!1)return 0;if(y("color=16m")||y("color=full")||y("color=truecolor"))return 3;if(y("color=256"))return 2;if(w&&!w.isTTY&&v!==!0)return 0;var S=v?1:0;if(process.platform==="win32"){var O=a.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(O[0])>=10&&Number(O[2])>=10586?Number(O[2])>=14931?3:2:1}if("CI"in l)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(function(P){return P in l})||l.CI_NAME==="codeship"?1:S;if("TEAMCITY_VERSION"in l)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(l.TEAMCITY_VERSION)?1:0;if("TERM_PROGRAM"in l){var N=parseInt((l.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(l.TERM_PROGRAM){case"iTerm.app":return N>=3?3:2;case"Hyper":return 3;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(l.TERM)?2:/^screen|^xterm|^vt100|^rxvt|color|ansi|cygwin|linux/i.test(l.TERM)||"COLORTERM"in l?1:(l.TERM,S)}(d);return function(w){return w!==0&&{level:w,hasBasic:!0,has256:w>=2,has16m:w>=3}}(T)}y("no-color")||y("no-colors")||y("color=false")?v=!1:(y("color")||y("colors")||y("color=true")||y("color=always"))&&(v=!0),"FORCE_COLOR"in l&&(v=l.FORCE_COLOR.length===0||parseInt(l.FORCE_COLOR,10)!==0),i.exports={supportsColor:A,stdout:A(process.stdout),stderr:A(process.stderr)}},187:i=>{var g,f=typeof Reflect=="object"?Reflect:null,a=f&&typeof f.apply=="function"?f.apply:function(j,Z,U){return Function.prototype.apply.call(j,Z,U)};g=f&&typeof f.ownKeys=="function"?f.ownKeys:Object.getOwnPropertySymbols?function(j){return Object.getOwnPropertyNames(j).concat(Object.getOwnPropertySymbols(j))}:function(j){return Object.getOwnPropertyNames(j)};var y=Number.isNaN||function(j){return j!=j};function l(){l.init.call(this)}i.exports=l,i.exports.once=function(j,Z){return new Promise(function(U,ue){function fe(Q){j.removeListener(Z,q),ue(Q)}function q(){typeof j.removeListener=="function"&&j.removeListener("error",fe),U([].slice.call(arguments))}H(j,Z,q,{once:!0}),Z!=="error"&&function(Q,_,k){typeof Q.on=="function"&&H(Q,"error",_,k)}(j,fe,{once:!0})})},l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var v=10;function A(j){if(typeof j!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof j)}function d(j){return j._maxListeners===void 0?l.defaultMaxListeners:j._maxListeners}function T(j,Z,U,ue){var fe,q,Q,_;if(A(U),(q=j._events)===void 0?(q=j._events=Object.create(null),j._eventsCount=0):(q.newListener!==void 0&&(j.emit("newListener",Z,U.listener?U.listener:U),q=j._events),Q=q[Z]),Q===void 0)Q=q[Z]=U,++j._eventsCount;else if(typeof Q=="function"?Q=q[Z]=ue?[U,Q]:[Q,U]:ue?Q.unshift(U):Q.push(U),(fe=d(j))>0&&Q.length>fe&&!Q.warned){Q.warned=!0;var k=new Error("Possible EventEmitter memory leak detected. "+Q.length+" "+String(Z)+" listeners added. Use emitter.setMaxListeners() to increase limit");k.name="MaxListenersExceededWarning",k.emitter=j,k.type=Z,k.count=Q.length,_=k,console&&console.warn&&console.warn(_)}return j}function w(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function S(j,Z,U){var ue={fired:!1,wrapFn:void 0,target:j,type:Z,listener:U},fe=w.bind(ue);return fe.listener=U,ue.wrapFn=fe,fe}function O(j,Z,U){var ue=j._events;if(ue===void 0)return[];var fe=ue[Z];return fe===void 0?[]:typeof fe=="function"?U?[fe.listener||fe]:[fe]:U?function(q){for(var Q=new Array(q.length),_=0;_<Q.length;++_)Q[_]=q[_].listener||q[_];return Q}(fe):P(fe,fe.length)}function N(j){var Z=this._events;if(Z!==void 0){var U=Z[j];if(typeof U=="function")return 1;if(U!==void 0)return U.length}return 0}function P(j,Z){for(var U=new Array(Z),ue=0;ue<Z;++ue)U[ue]=j[ue];return U}function H(j,Z,U,ue){if(typeof j.on=="function")ue.once?j.once(Z,U):j.on(Z,U);else{if(typeof j.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof j);j.addEventListener(Z,function fe(q){ue.once&&j.removeEventListener(Z,fe),U(q)})}}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return v},set:function(j){if(typeof j!="number"||j<0||y(j))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+j+".");v=j}}),l.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(j){if(typeof j!="number"||j<0||y(j))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+j+".");return this._maxListeners=j,this},l.prototype.getMaxListeners=function(){return d(this)},l.prototype.emit=function(j){for(var Z=[],U=1;U<arguments.length;U++)Z.push(arguments[U]);var ue=j==="error",fe=this._events;if(fe!==void 0)ue=ue&&fe.error===void 0;else if(!ue)return!1;if(ue){var q;if(Z.length>0&&(q=Z[0]),q instanceof Error)throw q;var Q=new Error("Unhandled error."+(q?" ("+q.message+")":""));throw Q.context=q,Q}var _=fe[j];if(_===void 0)return!1;if(typeof _=="function")a(_,this,Z);else{var k=_.length,$=P(_,k);for(U=0;U<k;++U)a($[U],this,Z)}return!0},l.prototype.addListener=function(j,Z){return T(this,j,Z,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(j,Z){return T(this,j,Z,!0)},l.prototype.once=function(j,Z){return A(Z),this.on(j,S(this,j,Z)),this},l.prototype.prependOnceListener=function(j,Z){return A(Z),this.prependListener(j,S(this,j,Z)),this},l.prototype.removeListener=function(j,Z){var U,ue,fe,q,Q;if(A(Z),(ue=this._events)===void 0)return this;if((U=ue[j])===void 0)return this;if(U===Z||U.listener===Z)--this._eventsCount==0?this._events=Object.create(null):(delete ue[j],ue.removeListener&&this.emit("removeListener",j,U.listener||Z));else if(typeof U!="function"){for(fe=-1,q=U.length-1;q>=0;q--)if(U[q]===Z||U[q].listener===Z){Q=U[q].listener,fe=q;break}if(fe<0)return this;fe===0?U.shift():function(_,k){for(;k+1<_.length;k++)_[k]=_[k+1];_.pop()}(U,fe),U.length===1&&(ue[j]=U[0]),ue.removeListener!==void 0&&this.emit("removeListener",j,Q||Z)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(j){var Z,U,ue;if((U=this._events)===void 0)return this;if(U.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):U[j]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete U[j]),this;if(arguments.length===0){var fe,q=Object.keys(U);for(ue=0;ue<q.length;++ue)(fe=q[ue])!=="removeListener"&&this.removeAllListeners(fe);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(Z=U[j])=="function")this.removeListener(j,Z);else if(Z!==void 0)for(ue=Z.length-1;ue>=0;ue--)this.removeListener(j,Z[ue]);return this},l.prototype.listeners=function(j){return O(this,j,!0)},l.prototype.rawListeners=function(j){return O(this,j,!1)},l.listenerCount=function(j,Z){return typeof j.listenerCount=="function"?j.listenerCount(Z):N.call(j,Z)},l.prototype.listenerCount=N,l.prototype.eventNames=function(){return this._eventsCount>0?g(this._events):[]}},645:(i,g)=>{/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */g.read=function(f,a,y,l,v){var A,d,T=8*v-l-1,w=(1<<T)-1,S=w>>1,O=-7,N=y?v-1:0,P=y?-1:1,H=f[a+N];for(N+=P,A=H&(1<<-O)-1,H>>=-O,O+=T;O>0;A=256*A+f[a+N],N+=P,O-=8);for(d=A&(1<<-O)-1,A>>=-O,O+=l;O>0;d=256*d+f[a+N],N+=P,O-=8);if(A===0)A=1-S;else{if(A===w)return d?NaN:1/0*(H?-1:1);d+=Math.pow(2,l),A-=S}return(H?-1:1)*d*Math.pow(2,A-l)},g.write=function(f,a,y,l,v,A){var d,T,w,S=8*A-v-1,O=(1<<S)-1,N=O>>1,P=v===23?Math.pow(2,-24)-Math.pow(2,-77):0,H=l?0:A-1,j=l?1:-1,Z=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(T=isNaN(a)?1:0,d=O):(d=Math.floor(Math.log(a)/Math.LN2),a*(w=Math.pow(2,-d))<1&&(d--,w*=2),(a+=d+N>=1?P/w:P*Math.pow(2,1-N))*w>=2&&(d++,w/=2),d+N>=O?(T=0,d=O):d+N>=1?(T=(a*w-1)*Math.pow(2,v),d+=N):(T=a*Math.pow(2,N-1)*Math.pow(2,v),d=0));v>=8;f[y+H]=255&T,H+=j,T/=256,v-=8);for(d=d<<v|T,S+=v;S>0;f[y+H]=255&d,H+=j,d/=256,S-=8);f[y+H-j]|=128*Z}},717:i=>{typeof Object.create=="function"?i.exports=function(g,f){f&&(g.super_=f,g.prototype=Object.create(f.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}))}:i.exports=function(g,f){if(f){g.super_=f;var a=function(){};a.prototype=f.prototype,g.prototype=new a,g.prototype.constructor=g}}},620:(i,g)=>{g.parse=function(f,a){f instanceof Buffer&&(f=f.toString("ascii"));for(var y=Buffer.alloc(a||8192),l=0,v=0,A=null,d=null,T=0,w=0;w+11<=f.length;){if(f.charAt(w++)!=":")throw new Error("Line "+(T+1)+" does not start with a colon (:).");T++;var S=parseInt(f.substr(w,2),16);w+=2;var O=parseInt(f.substr(w,4),16);w+=4;var N=parseInt(f.substr(w,2),16);w+=2;var P=f.substr(w,2*S),H=Buffer.from(P,"hex");w+=2*S;var j=parseInt(f.substr(w,2),16);w+=2;for(var Z=S+(O>>8)+O+N&255,U=0;U<S;U++)Z=Z+H[U]&255;if(j!=(Z=256-Z&255))throw new Error("Invalid checksum on line "+T+": got "+j+", but expected "+Z);switch(N){case 0:var ue=v+O;if(ue+S>=y.length){var fe=Buffer.alloc(2*(ue+S));y.copy(fe,0,0,l),y=fe}ue>l&&y.fill(255,l,ue),H.copy(y,ue),l=Math.max(l,ue+S);break;case 1:if(S!=0)throw new Error("Invalid EOF record on line "+T+".");return{data:y.slice(0,l),startSegmentAddress:A,startLinearAddress:d};case 2:if(S!=2||O!=0)throw new Error("Invalid extended segment address record on line "+T+".");v=parseInt(P,16)<<4;break;case 3:if(S!=4||O!=0)throw new Error("Invalid start segment address record on line "+T+".");A=parseInt(P,16);break;case 4:if(S!=2||O!=0)throw new Error("Invalid extended linear address record on line "+T+".");v=parseInt(P,16)<<16;break;case 5:if(S!=4||O!=0)throw new Error("Invalid start linear address record on line "+T+".");d=parseInt(P,16);break;default:throw new Error("Invalid record type ("+N+") on line "+T)}f.charAt(w)=="\r"&&w++,f.charAt(w)==`
`&&w++}throw new Error("Unexpected end of input: missing or invalid EOF record.")}},346:i=>{i.exports=function(g,f){function a(l){return typeof g=="object"&&g!==null}function y(l){return l.name.toLowerCase()}switch(arguments.length===2&&f===void 0?f="undefined":Number.isNaN(f)&&(f="NaN"),f){case"boolean":case"function":case"string":return typeof g===f;case"number":return typeof g===f&&!isNaN(g);case Number:if(isNaN(g))return!1;case String:case Boolean:return typeof g===y(f);case Object:case"object":return a();case"array":return Array.isArray(g);case"regex":case"regexp":return g instanceof RegExp;case"date":return g instanceof Date;case"null":case null:return g===null;case"undefined":return g===void 0;case"NaN":return Number.isNaN(g);case"arguments":return!!a()&&(typeof g.callee=="function"||/arguments/i.test(g.toString()));default:return typeof f=="function"?g instanceof f:g}}},777:(i,g,f)=>{var a=f(190),y=f(5),l=f(269),v=200,A=100,d=25,T=32,w=0,S=83,O=3;function N(P){if(!(this instanceof N))return new N(P);var H=this;H.parser=y(P),H.constants=H.parser.constants,H.serialPort=P}N.prototype.sync=function(P,H){var j=this,Z=1,U=Buffer.from([1]);(function ue(){Z+=1,j.parser.send(U,function(fe,q){var Q;if(!fe){var _=q.message;_[0]!==l.CMD_SIGN_ON?(fe=new Error("command response was not CMD_SIGN_ON. "+_[0])).code="E_CMD_ERROR":_[1]!==l.STATUS_CMD_OK?(fe=new Error("command status was not ok. "+_[1])).code="E_CMD_STATUS":(_[2],(Q=_.slice(3)+"").length)}if(fe&&Z<=P)return ue();H(fe,Q)})})()},N.prototype.reset=function(P,H,j){var Z=this;a.series([function(U){Z.serialPort.set({rts:!0,dtr:!0},function(ue){ue?U(ue):U()})},function(U){setTimeout(U,P)},function(U){Z.serialPort.set({rts:!1,dtr:!1},function(ue){ue?U(ue):U()})},function(U){setTimeout(U,H)}],function(U){j(U)})},N.prototype.verifySignature=function(P,H){this.getSignature(function(j,Z){P.equals(Z)?H():H(new Error("signature doesnt match. Found: "+Z.toString("hex"),j))})},N.prototype.getSignature=function(P){var H=this,j=Buffer.alloc(3);a.series([function(Z){var U=Buffer.from([29,4,4,0,48,0,0,0]);H.parser.send(U,function(ue,fe){if(fe&&fe.message&&fe.message.length>=6){var q=fe.message[5];j.writeUInt8(q,0)}Z(ue)})},function(Z){var U=Buffer.from([29,4,4,0,48,0,1,0]);H.parser.send(U,function(ue,fe){if(fe&&fe.message&&fe.message.length>=6){var q=fe.message[5];j.writeUInt8(q,1)}Z(ue)})},function(Z){var U=Buffer.from([29,4,4,0,48,0,2,0]);H.parser.send(U,function(ue,fe){if(fe&&fe.message&&fe.message.length>=6){var q=fe.message[5];j.writeUInt8(q,2)}Z(ue)})}],function(Z){P(Z,j)})},N.prototype.enterProgrammingMode=function(P,H){var j=this,Z=Array.prototype.slice.call(arguments);typeof(H=Z.pop())!="function"&&(H=null),(P=typeof P!="function"&&P||{}).timeout=P.timeout||v,P.stabDelay=P.stabDelay||A,P.cmdexeDelay=P.cmdexeDelay||d,P.synchLoops=P.synchLoops||T,P.byteDelay=P.byteDelay||w,P.pollValue=P.pollValue||S,P.pollIndex=P.pollIndex||O;var U=172,ue=83,fe=0,q=0,Q=Buffer.from([16,P.timeout,P.stabDelay,P.cmdexeDelay,P.synchLoops,P.byteDelay,P.pollValue,P.pollIndex,U,ue,fe,q]);j.parser.send(Q,function(_,k){H(_)})},N.prototype.loadAddress=function(P,H){msb=P>>24&255|128,xsb=P>>16&255,ysb=P>>8&255,lsb=255&P;var j=Buffer.from([6,msb,xsb,ysb,lsb]);this.parser.send(j,function(Z,U){H(Z)})},N.prototype.loadPage=function(P,H){var j=P.length>>8,Z=255&P.length,U=Buffer.from([19,j,Z,193,10,64,76,32,0,0]);U=Buffer.concat([U,P]),this.parser.send(U,function(ue,fe){H(ue)})},N.prototype.upload=function(P,H,j){var Z,U,ue=0,fe=this;a.whilst(function(){return ue<P.length},function(q){a.series([function(Q){U=ue>>1,Q()},function(Q){fe.loadAddress(U,Q)},function(Q){Z=P.slice(ue,P.length>H?ue+H:P.length-1),Q()},function(Q){fe.loadPage(Z,Q)},function(Q){ue+=Z.length,setTimeout(Q,4)}],function(Q){q(Q)})},function(q){j(q)})},N.prototype.exitProgrammingMode=function(P){var H=Buffer.from([17,1,1]);this.parser.send(H,function(j,Z){P(j)})},N.prototype.verify=function(P,H){H()},N.prototype.bootload=function(P,H,j){j()},i.exports=N},269:i=>{i.exports.MESSAGE_START=27,i.exports.TOKEN=14,i.exports.CMD_SIGN_ON=1,i.exports.CMD_SET_PARAMETER=2,i.exports.CMD_GET_PARAMETER=3,i.exports.CMD_SET_DEVICE_PARAMETERS=4,i.exports.CMD_OSCCAL=5,i.exports.CMD_LOAD_ADDRESS=6,i.exports.CMD_FIRMWARE_UPGRADE=7,i.exports.CMD_ENTER_PROGMODE_ISP=16,i.exports.CMD_LEAVE_PROGMODE_ISP=17,i.exports.CMD_CHIP_ERASE_ISP=18,i.exports.CMD_PROGRAM_FLASH_ISP=19,i.exports.CMD_READ_FLASH_ISP=20,i.exports.CMD_PROGRAM_EEPROM_ISP=21,i.exports.CMD_READ_EEPROM_ISP=22,i.exports.CMD_PROGRAM_FUSE_ISP=23,i.exports.CMD_READ_FUSE_ISP=24,i.exports.CMD_PROGRAM_LOCK_ISP=25,i.exports.CMD_READ_LOCK_ISP=26,i.exports.CMD_READ_SIGNATURE_ISP=27,i.exports.CMD_READ_OSCCAL_ISP=28,i.exports.CMD_SPI_MULTI=29,i.exports.CMD_ENTER_PROGMODE_PP=32,i.exports.CMD_LEAVE_PROGMODE_PP=33,i.exports.CMD_CHIP_ERASE_PP=34,i.exports.CMD_PROGRAM_FLASH_PP=35,i.exports.CMD_READ_FLASH_PP=36,i.exports.CMD_PROGRAM_EEPROM_PP=37,i.exports.CMD_READ_EEPROM_PP=38,i.exports.CMD_PROGRAM_FUSE_PP=39,i.exports.CMD_READ_FUSE_PP=40,i.exports.CMD_PROGRAM_LOCK_PP=41,i.exports.CMD_READ_LOCK_PP=42,i.exports.CMD_READ_SIGNATURE_PP=43,i.exports.CMD_READ_OSCCAL_PP=44,i.exports.CMD_SET_CONTROL_STACK=45,i.exports.CMD_ENTER_PROGMODE_HVSP=48,i.exports.CMD_LEAVE_PROGMODE_HVSP=49,i.exports.CMD_CHIP_ERASE_HVSP=50,i.exports.CMD_PROGRAM_FLASH_HVSP=51,i.exports.CMD_READ_FLASH_HVSP=52,i.exports.CMD_PROGRAM_EEPROM_HVSP=53,i.exports.CMD_READ_EEPROM_HVSP=54,i.exports.CMD_PROGRAM_FUSE_HVSP=55,i.exports.CMD_READ_FUSE_HVSP=56,i.exports.CMD_PROGRAM_LOCK_HVSP=57,i.exports.CMD_READ_LOCK_HVSP=58,i.exports.CMD_READ_SIGNATURE_HVSP=59,i.exports.CMD_READ_OSCCAL_HVSP=60,i.exports.STATUS_CMD_OK=0,i.exports.STATUS_CMD_TOUT=128,i.exports.STATUS_RDY_BSY_TOUT=129,i.exports.STATUS_SET_PARAM_MISSING=130,i.exports.STATUS_CMD_FAILED=192,i.exports.STATUS_CKSUM_ERROR=193,i.exports.STATUS_CMD_UNKNOWN=201,i.exports.STATUS_BUILD_NUMBER_LOW=128,i.exports.STATUS_BUILD_NUMBER_HIGH=129,i.exports.STATUS_HW_VER=144,i.exports.STATUS_SW_MAJOR=145,i.exports.STATUS_SW_MINOR=146,i.exports.STATUS_VTARGET=148,i.exports.STATUS_VADJUST=149,i.exports.STATUS_OSC_PSCALE=150,i.exports.STATUS_OSC_CMATCH=151,i.exports.STATUS_SCK_DURATION=152,i.exports.STATUS_TOPCARD_DETECT=154,i.exports.STATUS_STATUS=156,i.exports.STATUS_DATA=157,i.exports.STATUS_RESET_POLARITY=158,i.exports.STATUS_CONTROLLER_INIT=159,i.exports.ANSWER_CKSUM_ERROR=176},5:(i,g,f)=>{var a=f(269),y=f(187).EventEmitter;i.exports=function(l){var v,A,d=(v=new y,A={constants:a,port:l,boundOpen:!1,closed:!1,_inc:-1,_queue:[],_current:!1,states:["Start","GetSequenceNumber","GetMessageSize1","GetMessageSize2","GetToken","GetData","GetChecksum","Done"],state:0,pkt:!1,send:function(S,O){if(this.closed)return setImmediate(function(){var Z=new Error("this parser is closed.");Z.code="E_CLOSED",O(Z)});Buffer.isBuffer(S)||(S=Buffer.from(S));var N=this._commandTimeout(S[0]),P=Buffer.from([0,0]);P.writeUInt16BE(S.length,0);var H=Buffer.concat([Buffer.from([a.MESSAGE_START,this._seq(),P[0],P[1],a.TOKEN]),S]),j=this.checksum(H);this._queue.push({buf:Buffer.concat([H,Buffer.from([j])]),seq:this._inc,cb:O,timeout:N}),this._send()},checksum:function(S){for(var O=0,N=0;N<S.length;++N)O^=S[N];return O},_seq:function(){return this._inc++,this._inc>255&&(this._inc=0),this._inc},_commandTimeout:function(S){if(timeout=1e3,S===a.CMD_SIGN_ON)timeout=200;else for(var O=Object.keys(a),N=0;N<O.length;++N)if(a[O[N]]===S){(O[N].indexOf("CMD_READ")>-1||O[N].indexOf("PROGRAM_FLASH")>-1||O[N].indexOf("EEPROM")>-1)&&(timeout=5e3);break}return timeout},_send:function(){if(this.closed)return!1;if(!this._current&&this._queue.length)if(typeof l.isOpen=="function"?l.isOpen():l.isOpen){var S=this._queue.shift(),O=this._current={timeout:!1,seq:S.seq,cb:S.cb};this._current,this.state=0,N=this,this.port.write(S.buf),this.port.drain(function(){if(O!==N._current)return N.emit("log","current was no longer the current message after drain callback");O.timeout=setTimeout(function(){var P=new Error("stk500 timeout. "+S.timeout+"ms");P.code="E_TIMEOUT",N._resolveCurrent(P)},S.timeout)}),this.emit("rawinput",S.buf)}else{var N=this;this.boundOpen||l.once("open",function(){N._send()})}},_handle:function(S){var O=this._current;if(this.emit("raw",S),!O)return this.emit("log","notice","dropping data","data");for(var N=0;N<S.length;++N)this._stateMachine(S.readUInt8(N))},_pkt:function(){return{seq:-1,len:[],raw:[],message:[],checksum:0}},_stateMachine:function(S){var O=this.pkt;switch(this.state){case 0:if(O=this.pkt=this._pkt(),S!==27)return this.emit("log","parser","Invalid header byte expected 27 got: "+S);++this.state;break;case 1:if(S!==this._current.seq)return this.state=0,this.emit("log","parser","Invalid sequence number. back to start. got: "+S);O.seq=S,++this.state;break;case 2:O.len.push(S),++this.state;break;case 3:O.len.push(S),O.len=O.len[0]<<8|O.len[1],++this.state;break;case 4:if(S!==14)return this.state=0,O.error=new Error("Invalid message token byte. got: "+S),O.error.code="E_PARSE",this.emit("log","parser",this.pkt.error);++this.state,O.len||++this.state;break;case 5:O.len===0&&S===a.STATUS_CKSUM_ERROR&&(O.error=new Error("send checksum error"),O.error.code="E_STATUS_CKSUM"),O.message.push(S),--O.len==0&&++this.state;break;case 6:O.checksum=this.checksum(O.raw),O.checksum=O.checksum===S,O.checksum||(O.error=new Error("recv cecksum didn't match"),O.error.code="E_RECV_CKSUM"),O.message=Buffer.from(O.message),this.emit("data",O),this.state++,O.len=O.message.length,delete O.raw,this._resolveCurrent(!!O.error&&O.error,O)}O.raw&&O.raw.push(S)},_resolveCurrent:function(S,O){var N=this._current;this._current=!1;var P=!1;if((S.code=="E_PARSE"||S.code=="E_TIMEOUT"||this.closed)&&(P=this.queue,this.queue=[]),clearTimeout(N.timeout),N.cb(S,O),P){var H=S;for(this.closed||((H=new Error("a call queued before this call errored leaving the protocol in an upredictable state. timidly refusing to run queued commands.")).code="E_DEPENDENT",H.prev_code=S.code);P.lenth;)P.shift()(S)}this._send()}},Object.keys(A).forEach(function(S){v[S]=A[S]}),v);return l.on("data",T).once("error",w).once("close",w),d;function T(S){d._handle(S)}function w(S){d.closed=!0,l.removeListener("data",T),S||((S=new Error("serial closed.")).code="E_CLOSED"),d._current&&d._resolveCurrent(S),this.emit("closed")}}},190:(i,g)=>{var f;/*!
 * async
 * https://github.com/caolan/async
 *
 * Copyright 2010-2014 Caolan McMahon
 * Released under the MIT license
 */(function(){var a,y,l={};function v(k){var $=!1;return function(){if($)throw new Error("Callback was already called.");$=!0,k.apply(a,arguments)}}(a=this)!=null&&(y=a.async),l.noConflict=function(){return a.async=y,l};var A=Object.prototype.toString,d=Array.isArray||function(k){return A.call(k)==="[object Array]"},T=function(k,$){for(var F=0;F<k.length;F+=1)$(k[F],F,k)},w=function(k,$){if(k.map)return k.map($);var F=[];return T(k,function(V,M,K){F.push($(V,M,K))}),F},S=function(k){if(Object.keys)return Object.keys(k);var $=[];for(var F in k)k.hasOwnProperty(F)&&$.push(F);return $};typeof process<"u"&&process.nextTick?(l.nextTick=process.nextTick,typeof setImmediate<"u"?l.setImmediate=function(k){setImmediate(k)}:l.setImmediate=l.nextTick):typeof setImmediate=="function"?(l.nextTick=function(k){setImmediate(k)},l.setImmediate=l.nextTick):(l.nextTick=function(k){setTimeout(k,0)},l.setImmediate=l.nextTick),l.each=function(k,$,F){if(F=F||function(){},!k.length)return F();var V=0;function M(K){K?(F(K),F=function(){}):(V+=1)>=k.length&&F()}T(k,function(K){$(K,v(M))})},l.forEach=l.each,l.eachSeries=function(k,$,F){if(F=F||function(){},!k.length)return F();var V=0,M=function(){$(k[V],function(K){K?(F(K),F=function(){}):(V+=1)>=k.length?F():M()})};M()},l.forEachSeries=l.eachSeries,l.eachLimit=function(k,$,F,V){O($).apply(null,[k,F,V])},l.forEachLimit=l.eachLimit;var O=function(k){return function($,F,V){if(V=V||function(){},!$.length||k<=0)return V();var M=0,K=0,G=0;(function Y(){if(M>=$.length)return V();for(;G<k&&K<$.length;)G+=1,F($[(K+=1)-1],function(ye){ye?(V(ye),V=function(){}):(G-=1,(M+=1)>=$.length?V():Y())})})()}},N=function(k){return function(){var $=Array.prototype.slice.call(arguments);return k.apply(null,[l.each].concat($))}},P=function(k){return function(){var $=Array.prototype.slice.call(arguments);return k.apply(null,[l.eachSeries].concat($))}},H=function(k,$,F,V){if($=w($,function(K,G){return{index:G,value:K}}),V){var M=[];k($,function(K,G){F(K.value,function(Y,ye){M[K.index]=ye,G(Y)})},function(K){V(K,M)})}else k($,function(K,G){F(K.value,function(Y){G(Y)})})};l.map=N(H),l.mapSeries=P(H),l.mapLimit=function(k,$,F,V){return j($)(k,F,V)};var j=function(k){return function($,F){return function(){var V=Array.prototype.slice.call(arguments);return F.apply(null,[O($)].concat(V))}}(k,H)};l.reduce=function(k,$,F,V){l.eachSeries(k,function(M,K){F($,M,function(G,Y){$=Y,K(G)})},function(M){V(M,$)})},l.inject=l.reduce,l.foldl=l.reduce,l.reduceRight=function(k,$,F,V){var M=w(k,function(K){return K}).reverse();l.reduce(M,$,F,V)},l.foldr=l.reduceRight;var Z=function(k,$,F,V){var M=[];k($=w($,function(K,G){return{index:G,value:K}}),function(K,G){F(K.value,function(Y){Y&&M.push(K),G()})},function(K){V(w(M.sort(function(G,Y){return G.index-Y.index}),function(G){return G.value}))})};l.filter=N(Z),l.filterSeries=P(Z),l.select=l.filter,l.selectSeries=l.filterSeries;var U=function(k,$,F,V){var M=[];k($=w($,function(K,G){return{index:G,value:K}}),function(K,G){F(K.value,function(Y){Y||M.push(K),G()})},function(K){V(w(M.sort(function(G,Y){return G.index-Y.index}),function(G){return G.value}))})};l.reject=N(U),l.rejectSeries=P(U);var ue=function(k,$,F,V){k($,function(M,K){F(M,function(G){G?(V(M),V=function(){}):K()})},function(M){V()})};l.detect=N(ue),l.detectSeries=P(ue),l.some=function(k,$,F){l.each(k,function(V,M){$(V,function(K){K&&(F(!0),F=function(){}),M()})},function(V){F(!1)})},l.any=l.some,l.every=function(k,$,F){l.each(k,function(V,M){$(V,function(K){K||(F(!1),F=function(){}),M()})},function(V){F(!0)})},l.all=l.every,l.sortBy=function(k,$,F){l.map(k,function(V,M){$(V,function(K,G){K?M(K):M(null,{value:V,criteria:G})})},function(V,M){if(V)return F(V);F(null,w(M.sort(function(K,G){var Y=K.criteria,ye=G.criteria;return Y<ye?-1:Y>ye?1:0}),function(K){return K.value}))})},l.auto=function(k,$){$=$||function(){};var F=S(k),V=F.length;if(!V)return $();var M={},K=[],G=function(ye){K.unshift(ye)},Y=function(){V--,T(K.slice(0),function(ye){ye()})};G(function(){if(!V){var ye=$;$=function(){},ye(null,M)}}),T(F,function(ye){var Ee=d(k[ye])?k[ye]:[k[ye]],Re=function(Je){var Xe=Array.prototype.slice.call(arguments,1);if(Xe.length<=1&&(Xe=Xe[0]),Je){var Qe={};T(S(M),function(ht){Qe[ht]=M[ht]}),Qe[ye]=Xe,$(Je,Qe),$=function(){}}else M[ye]=Xe,l.setImmediate(Y)},ct=Ee.slice(0,Math.abs(Ee.length-1))||[],ft=function(){return Xe=function(ht,lt){return ht&&M.hasOwnProperty(lt)},Qe=!0,((Je=ct).reduce?Je.reduce(Xe,Qe):(T(Je,function(ht,lt,R){Qe=Xe(Qe,ht,lt,R)}),Qe))&&!M.hasOwnProperty(ye);var Je,Xe,Qe};if(ft())Ee[Ee.length-1](Re,M);else{var Ze=function(){ft()&&(function(Je){for(var Xe=0;Xe<K.length;Xe+=1)if(K[Xe]===Je)return void K.splice(Xe,1)}(Ze),Ee[Ee.length-1](Re,M))};G(Ze)}})},l.retry=function(k,$,F){var V=[];typeof k=="function"&&(F=$,$=k,k=5),k=parseInt(k,10)||5;var M=function(K,G){for(var Y=function(ye,Ee){return function(Re){ye(function(ct,ft){Re(!ct||Ee,{err:ct,result:ft})},G)}};k;)V.push(Y($,!(k-=1)));l.series(V,function(ye,Ee){Ee=Ee[Ee.length-1],(K||F)(Ee.err,Ee.result)})};return F?M():M},l.waterfall=function(k,$){if($=$||function(){},!d(k)){var F=new Error("First argument to waterfall must be an array of functions");return $(F)}if(!k.length)return $();var V=function(M){return function(K){if(K)$.apply(null,arguments),$=function(){};else{var G=Array.prototype.slice.call(arguments,1),Y=M.next();Y?G.push(V(Y)):G.push($),l.setImmediate(function(){M.apply(null,G)})}}};V(l.iterator(k))()};var fe=function(k,$,F){if(F=F||function(){},d($))k.map($,function(M,K){M&&M(function(G){var Y=Array.prototype.slice.call(arguments,1);Y.length<=1&&(Y=Y[0]),K.call(null,G,Y)})},F);else{var V={};k.each(S($),function(M,K){$[M](function(G){var Y=Array.prototype.slice.call(arguments,1);Y.length<=1&&(Y=Y[0]),V[M]=Y,K(G)})},function(M){F(M,V)})}};l.parallel=function(k,$){fe({map:l.map,each:l.each},k,$)},l.parallelLimit=function(k,$,F){fe({map:j($),each:O($)},k,F)},l.series=function(k,$){if($=$||function(){},d(k))l.mapSeries(k,function(V,M){V&&V(function(K){var G=Array.prototype.slice.call(arguments,1);G.length<=1&&(G=G[0]),M.call(null,K,G)})},$);else{var F={};l.eachSeries(S(k),function(V,M){k[V](function(K){var G=Array.prototype.slice.call(arguments,1);G.length<=1&&(G=G[0]),F[V]=G,M(K)})},function(V){$(V,F)})}},l.iterator=function(k){var $=function(F){var V=function(){return k.length&&k[F].apply(null,arguments),V.next()};return V.next=function(){return F<k.length-1?$(F+1):null},V};return $(0)},l.apply=function(k){var $=Array.prototype.slice.call(arguments,1);return function(){return k.apply(null,$.concat(Array.prototype.slice.call(arguments)))}};var q=function(k,$,F,V){var M=[];k($,function(K,G){F(K,function(Y,ye){M=M.concat(ye||[]),G(Y)})},function(K){V(K,M)})};l.concat=N(q),l.concatSeries=P(q),l.whilst=function(k,$,F){k()?$(function(V){if(V)return F(V);l.whilst(k,$,F)}):F()},l.doWhilst=function(k,$,F){k(function(V){if(V)return F(V);var M=Array.prototype.slice.call(arguments,1);$.apply(null,M)?l.doWhilst(k,$,F):F()})},l.until=function(k,$,F){k()?F():$(function(V){if(V)return F(V);l.until(k,$,F)})},l.doUntil=function(k,$,F){k(function(V){if(V)return F(V);var M=Array.prototype.slice.call(arguments,1);$.apply(null,M)?F():l.doUntil(k,$,F)})},l.queue=function(k,$){function F(K,G,Y,ye){if(K.started||(K.started=!0),d(G)||(G=[G]),G.length==0)return l.setImmediate(function(){K.drain&&K.drain()});T(G,function(Ee){var Re={data:Ee,callback:typeof ye=="function"?ye:null};Y?K.tasks.unshift(Re):K.tasks.push(Re),K.saturated&&K.tasks.length===K.concurrency&&K.saturated(),l.setImmediate(K.process)})}$===void 0&&($=1);var V=0,M={tasks:[],concurrency:$,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(K,G){F(M,K,!1,G)},kill:function(){M.drain=null,M.tasks=[]},unshift:function(K,G){F(M,K,!0,G)},process:function(){if(!M.paused&&V<M.concurrency&&M.tasks.length){var K=M.tasks.shift();M.empty&&M.tasks.length===0&&M.empty(),V+=1;var G=v(function(){V-=1,K.callback&&K.callback.apply(K,arguments),M.drain&&M.tasks.length+V===0&&M.drain(),M.process()});k(K.data,G)}},length:function(){return M.tasks.length},running:function(){return V},idle:function(){return M.tasks.length+V===0},pause:function(){M.paused!==!0&&(M.paused=!0)},resume:function(){if(M.paused!==!1){M.paused=!1;for(var K=1;K<=M.concurrency;K++)l.setImmediate(M.process)}}};return M},l.priorityQueue=function(k,$){function F(M,K){return M.priority-K.priority}var V=l.queue(k,$);return V.push=function(M,K,G){(function(Y,ye,Ee,Re){if(Y.started||(Y.started=!0),d(ye)||(ye=[ye]),ye.length==0)return l.setImmediate(function(){Y.drain&&Y.drain()});T(ye,function(ct){var ft={data:ct,priority:Ee,callback:typeof Re=="function"?Re:null};Y.tasks.splice(function(Ze,Je,Xe){for(var Qe=-1,ht=Ze.length-1;Qe<ht;){var lt=Qe+(ht-Qe+1>>>1);Xe(Je,Ze[lt])>=0?Qe=lt:ht=lt-1}return Qe}(Y.tasks,ft,F)+1,0,ft),Y.saturated&&Y.tasks.length===Y.concurrency&&Y.saturated(),l.setImmediate(Y.process)})})(V,M,K,G)},delete V.unshift,V},l.cargo=function(k,$){var F=!1,V=[],M={tasks:V,payload:$,saturated:null,empty:null,drain:null,drained:!0,push:function(K,G){d(K)||(K=[K]),T(K,function(Y){V.push({data:Y,callback:typeof G=="function"?G:null}),M.drained=!1,M.saturated&&V.length===$&&M.saturated()}),l.setImmediate(M.process)},process:function K(){if(!F){if(V.length===0)return M.drain&&!M.drained&&M.drain(),void(M.drained=!0);var G=typeof $=="number"?V.splice(0,$):V.splice(0,V.length),Y=w(G,function(ye){return ye.data});M.empty&&M.empty(),F=!0,k(Y,function(){F=!1;var ye=arguments;T(G,function(Ee){Ee.callback&&Ee.callback.apply(null,ye)}),K()})}},length:function(){return V.length},running:function(){return F}};return M};var Q=function(k){return function($){var F=Array.prototype.slice.call(arguments,1);$.apply(null,F.concat([function(V){var M=Array.prototype.slice.call(arguments,1);typeof console<"u"&&(V?console.error&&console.error(V):console[k]&&T(M,function(K){console[k](K)}))}]))}};l.log=Q("log"),l.dir=Q("dir"),l.memoize=function(k,$){var F={},V={};$=$||function(K){return K};var M=function(){var K=Array.prototype.slice.call(arguments),G=K.pop(),Y=$.apply(null,K);Y in F?l.nextTick(function(){G.apply(null,F[Y])}):Y in V?V[Y].push(G):(V[Y]=[G],k.apply(null,K.concat([function(){F[Y]=arguments;var ye=V[Y];delete V[Y];for(var Ee=0,Re=ye.length;Ee<Re;Ee++)ye[Ee].apply(null,arguments)}])))};return M.memo=F,M.unmemoized=k,M},l.unmemoize=function(k){return function(){return(k.unmemoized||k).apply(null,arguments)}},l.times=function(k,$,F){for(var V=[],M=0;M<k;M++)V.push(M);return l.map(V,$,F)},l.timesSeries=function(k,$,F){for(var V=[],M=0;M<k;M++)V.push(M);return l.mapSeries(V,$,F)},l.seq=function(){var k=arguments;return function(){var $=this,F=Array.prototype.slice.call(arguments),V=F.pop();l.reduce(k,F,function(M,K,G){K.apply($,M.concat([function(){var Y=arguments[0],ye=Array.prototype.slice.call(arguments,1);G(Y,ye)}]))},function(M,K){V.apply($,[M].concat(K))})}},l.compose=function(){return l.seq.apply(null,Array.prototype.reverse.call(arguments))};var _=function(k,$){var F=function(){var M=this,K=Array.prototype.slice.call(arguments),G=K.pop();return k($,function(Y,ye){Y.apply(M,K.concat([ye]))},G)};if(arguments.length>2){var V=Array.prototype.slice.call(arguments,2);return F.apply(this,V)}return F};l.applyEach=N(_),l.applyEachSeries=P(_),l.forever=function(k,$){(function F(V){if(V){if($)return $(V);throw V}k(F)})()},i.exports?i.exports=l:(f=(function(){return l}).apply(g,[]))===void 0||(i.exports=f)})()},668:(i,g)=>{var f;/*!
 * async
 * https://github.com/caolan/async
 *
 * Copyright 2010-2014 Caolan McMahon
 * Released under the MIT license
 */(function(){var a,y,l={};function v(k){var $=!1;return function(){if($)throw new Error("Callback was already called.");$=!0,k.apply(a,arguments)}}(a=this)!=null&&(y=a.async),l.noConflict=function(){return a.async=y,l};var A=Object.prototype.toString,d=Array.isArray||function(k){return A.call(k)==="[object Array]"},T=function(k,$){for(var F=0;F<k.length;F+=1)$(k[F],F,k)},w=function(k,$){if(k.map)return k.map($);var F=[];return T(k,function(V,M,K){F.push($(V,M,K))}),F},S=function(k){if(Object.keys)return Object.keys(k);var $=[];for(var F in k)k.hasOwnProperty(F)&&$.push(F);return $};typeof process<"u"&&process.nextTick?(l.nextTick=process.nextTick,typeof setImmediate<"u"?l.setImmediate=function(k){setImmediate(k)}:l.setImmediate=l.nextTick):typeof setImmediate=="function"?(l.nextTick=function(k){setImmediate(k)},l.setImmediate=l.nextTick):(l.nextTick=function(k){setTimeout(k,0)},l.setImmediate=l.nextTick),l.each=function(k,$,F){if(F=F||function(){},!k.length)return F();var V=0;function M(K){K?(F(K),F=function(){}):(V+=1)>=k.length&&F()}T(k,function(K){$(K,v(M))})},l.forEach=l.each,l.eachSeries=function(k,$,F){if(F=F||function(){},!k.length)return F();var V=0,M=function(){$(k[V],function(K){K?(F(K),F=function(){}):(V+=1)>=k.length?F():M()})};M()},l.forEachSeries=l.eachSeries,l.eachLimit=function(k,$,F,V){O($).apply(null,[k,F,V])},l.forEachLimit=l.eachLimit;var O=function(k){return function($,F,V){if(V=V||function(){},!$.length||k<=0)return V();var M=0,K=0,G=0;(function Y(){if(M>=$.length)return V();for(;G<k&&K<$.length;)G+=1,F($[(K+=1)-1],function(ye){ye?(V(ye),V=function(){}):(G-=1,(M+=1)>=$.length?V():Y())})})()}},N=function(k){return function(){var $=Array.prototype.slice.call(arguments);return k.apply(null,[l.each].concat($))}},P=function(k){return function(){var $=Array.prototype.slice.call(arguments);return k.apply(null,[l.eachSeries].concat($))}},H=function(k,$,F,V){if($=w($,function(K,G){return{index:G,value:K}}),V){var M=[];k($,function(K,G){F(K.value,function(Y,ye){M[K.index]=ye,G(Y)})},function(K){V(K,M)})}else k($,function(K,G){F(K.value,function(Y){G(Y)})})};l.map=N(H),l.mapSeries=P(H),l.mapLimit=function(k,$,F,V){return j($)(k,F,V)};var j=function(k){return function($,F){return function(){var V=Array.prototype.slice.call(arguments);return F.apply(null,[O($)].concat(V))}}(k,H)};l.reduce=function(k,$,F,V){l.eachSeries(k,function(M,K){F($,M,function(G,Y){$=Y,K(G)})},function(M){V(M,$)})},l.inject=l.reduce,l.foldl=l.reduce,l.reduceRight=function(k,$,F,V){var M=w(k,function(K){return K}).reverse();l.reduce(M,$,F,V)},l.foldr=l.reduceRight;var Z=function(k,$,F,V){var M=[];k($=w($,function(K,G){return{index:G,value:K}}),function(K,G){F(K.value,function(Y){Y&&M.push(K),G()})},function(K){V(w(M.sort(function(G,Y){return G.index-Y.index}),function(G){return G.value}))})};l.filter=N(Z),l.filterSeries=P(Z),l.select=l.filter,l.selectSeries=l.filterSeries;var U=function(k,$,F,V){var M=[];k($=w($,function(K,G){return{index:G,value:K}}),function(K,G){F(K.value,function(Y){Y||M.push(K),G()})},function(K){V(w(M.sort(function(G,Y){return G.index-Y.index}),function(G){return G.value}))})};l.reject=N(U),l.rejectSeries=P(U);var ue=function(k,$,F,V){k($,function(M,K){F(M,function(G){G?(V(M),V=function(){}):K()})},function(M){V()})};l.detect=N(ue),l.detectSeries=P(ue),l.some=function(k,$,F){l.each(k,function(V,M){$(V,function(K){K&&(F(!0),F=function(){}),M()})},function(V){F(!1)})},l.any=l.some,l.every=function(k,$,F){l.each(k,function(V,M){$(V,function(K){K||(F(!1),F=function(){}),M()})},function(V){F(!0)})},l.all=l.every,l.sortBy=function(k,$,F){l.map(k,function(V,M){$(V,function(K,G){K?M(K):M(null,{value:V,criteria:G})})},function(V,M){if(V)return F(V);F(null,w(M.sort(function(K,G){var Y=K.criteria,ye=G.criteria;return Y<ye?-1:Y>ye?1:0}),function(K){return K.value}))})},l.auto=function(k,$){$=$||function(){};var F=S(k),V=F.length;if(!V)return $();var M={},K=[],G=function(ye){K.unshift(ye)},Y=function(){V--,T(K.slice(0),function(ye){ye()})};G(function(){if(!V){var ye=$;$=function(){},ye(null,M)}}),T(F,function(ye){var Ee=d(k[ye])?k[ye]:[k[ye]],Re=function(Je){var Xe=Array.prototype.slice.call(arguments,1);if(Xe.length<=1&&(Xe=Xe[0]),Je){var Qe={};T(S(M),function(ht){Qe[ht]=M[ht]}),Qe[ye]=Xe,$(Je,Qe),$=function(){}}else M[ye]=Xe,l.setImmediate(Y)},ct=Ee.slice(0,Math.abs(Ee.length-1))||[],ft=function(){return Xe=function(ht,lt){return ht&&M.hasOwnProperty(lt)},Qe=!0,((Je=ct).reduce?Je.reduce(Xe,Qe):(T(Je,function(ht,lt,R){Qe=Xe(Qe,ht,lt,R)}),Qe))&&!M.hasOwnProperty(ye);var Je,Xe,Qe};if(ft())Ee[Ee.length-1](Re,M);else{var Ze=function(){ft()&&(function(Je){for(var Xe=0;Xe<K.length;Xe+=1)if(K[Xe]===Je)return void K.splice(Xe,1)}(Ze),Ee[Ee.length-1](Re,M))};G(Ze)}})},l.retry=function(k,$,F){var V=[];typeof k=="function"&&(F=$,$=k,k=5),k=parseInt(k,10)||5;var M=function(K,G){for(var Y=function(ye,Ee){return function(Re){ye(function(ct,ft){Re(!ct||Ee,{err:ct,result:ft})},G)}};k;)V.push(Y($,!(k-=1)));l.series(V,function(ye,Ee){Ee=Ee[Ee.length-1],(K||F)(Ee.err,Ee.result)})};return F?M():M},l.waterfall=function(k,$){if($=$||function(){},!d(k)){var F=new Error("First argument to waterfall must be an array of functions");return $(F)}if(!k.length)return $();var V=function(M){return function(K){if(K)$.apply(null,arguments),$=function(){};else{var G=Array.prototype.slice.call(arguments,1),Y=M.next();Y?G.push(V(Y)):G.push($),l.setImmediate(function(){M.apply(null,G)})}}};V(l.iterator(k))()};var fe=function(k,$,F){if(F=F||function(){},d($))k.map($,function(M,K){M&&M(function(G){var Y=Array.prototype.slice.call(arguments,1);Y.length<=1&&(Y=Y[0]),K.call(null,G,Y)})},F);else{var V={};k.each(S($),function(M,K){$[M](function(G){var Y=Array.prototype.slice.call(arguments,1);Y.length<=1&&(Y=Y[0]),V[M]=Y,K(G)})},function(M){F(M,V)})}};l.parallel=function(k,$){fe({map:l.map,each:l.each},k,$)},l.parallelLimit=function(k,$,F){fe({map:j($),each:O($)},k,F)},l.series=function(k,$){if($=$||function(){},d(k))l.mapSeries(k,function(V,M){V&&V(function(K){var G=Array.prototype.slice.call(arguments,1);G.length<=1&&(G=G[0]),M.call(null,K,G)})},$);else{var F={};l.eachSeries(S(k),function(V,M){k[V](function(K){var G=Array.prototype.slice.call(arguments,1);G.length<=1&&(G=G[0]),F[V]=G,M(K)})},function(V){$(V,F)})}},l.iterator=function(k){var $=function(F){var V=function(){return k.length&&k[F].apply(null,arguments),V.next()};return V.next=function(){return F<k.length-1?$(F+1):null},V};return $(0)},l.apply=function(k){var $=Array.prototype.slice.call(arguments,1);return function(){return k.apply(null,$.concat(Array.prototype.slice.call(arguments)))}};var q=function(k,$,F,V){var M=[];k($,function(K,G){F(K,function(Y,ye){M=M.concat(ye||[]),G(Y)})},function(K){V(K,M)})};l.concat=N(q),l.concatSeries=P(q),l.whilst=function(k,$,F){k()?$(function(V){if(V)return F(V);l.whilst(k,$,F)}):F()},l.doWhilst=function(k,$,F){k(function(V){if(V)return F(V);var M=Array.prototype.slice.call(arguments,1);$.apply(null,M)?l.doWhilst(k,$,F):F()})},l.until=function(k,$,F){k()?F():$(function(V){if(V)return F(V);l.until(k,$,F)})},l.doUntil=function(k,$,F){k(function(V){if(V)return F(V);var M=Array.prototype.slice.call(arguments,1);$.apply(null,M)?F():l.doUntil(k,$,F)})},l.queue=function(k,$){function F(K,G,Y,ye){if(K.started||(K.started=!0),d(G)||(G=[G]),G.length==0)return l.setImmediate(function(){K.drain&&K.drain()});T(G,function(Ee){var Re={data:Ee,callback:typeof ye=="function"?ye:null};Y?K.tasks.unshift(Re):K.tasks.push(Re),K.saturated&&K.tasks.length===K.concurrency&&K.saturated(),l.setImmediate(K.process)})}$===void 0&&($=1);var V=0,M={tasks:[],concurrency:$,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(K,G){F(M,K,!1,G)},kill:function(){M.drain=null,M.tasks=[]},unshift:function(K,G){F(M,K,!0,G)},process:function(){if(!M.paused&&V<M.concurrency&&M.tasks.length){var K=M.tasks.shift();M.empty&&M.tasks.length===0&&M.empty(),V+=1;var G=v(function(){V-=1,K.callback&&K.callback.apply(K,arguments),M.drain&&M.tasks.length+V===0&&M.drain(),M.process()});k(K.data,G)}},length:function(){return M.tasks.length},running:function(){return V},idle:function(){return M.tasks.length+V===0},pause:function(){M.paused!==!0&&(M.paused=!0)},resume:function(){if(M.paused!==!1){M.paused=!1;for(var K=1;K<=M.concurrency;K++)l.setImmediate(M.process)}}};return M},l.priorityQueue=function(k,$){function F(M,K){return M.priority-K.priority}var V=l.queue(k,$);return V.push=function(M,K,G){(function(Y,ye,Ee,Re){if(Y.started||(Y.started=!0),d(ye)||(ye=[ye]),ye.length==0)return l.setImmediate(function(){Y.drain&&Y.drain()});T(ye,function(ct){var ft={data:ct,priority:Ee,callback:typeof Re=="function"?Re:null};Y.tasks.splice(function(Ze,Je,Xe){for(var Qe=-1,ht=Ze.length-1;Qe<ht;){var lt=Qe+(ht-Qe+1>>>1);Xe(Je,Ze[lt])>=0?Qe=lt:ht=lt-1}return Qe}(Y.tasks,ft,F)+1,0,ft),Y.saturated&&Y.tasks.length===Y.concurrency&&Y.saturated(),l.setImmediate(Y.process)})})(V,M,K,G)},delete V.unshift,V},l.cargo=function(k,$){var F=!1,V=[],M={tasks:V,payload:$,saturated:null,empty:null,drain:null,drained:!0,push:function(K,G){d(K)||(K=[K]),T(K,function(Y){V.push({data:Y,callback:typeof G=="function"?G:null}),M.drained=!1,M.saturated&&V.length===$&&M.saturated()}),l.setImmediate(M.process)},process:function K(){if(!F){if(V.length===0)return M.drain&&!M.drained&&M.drain(),void(M.drained=!0);var G=typeof $=="number"?V.splice(0,$):V.splice(0,V.length),Y=w(G,function(ye){return ye.data});M.empty&&M.empty(),F=!0,k(Y,function(){F=!1;var ye=arguments;T(G,function(Ee){Ee.callback&&Ee.callback.apply(null,ye)}),K()})}},length:function(){return V.length},running:function(){return F}};return M};var Q=function(k){return function($){var F=Array.prototype.slice.call(arguments,1);$.apply(null,F.concat([function(V){var M=Array.prototype.slice.call(arguments,1);typeof console<"u"&&(V?console.error&&console.error(V):console[k]&&T(M,function(K){console[k](K)}))}]))}};l.log=Q("log"),l.dir=Q("dir"),l.memoize=function(k,$){var F={},V={};$=$||function(K){return K};var M=function(){var K=Array.prototype.slice.call(arguments),G=K.pop(),Y=$.apply(null,K);Y in F?l.nextTick(function(){G.apply(null,F[Y])}):Y in V?V[Y].push(G):(V[Y]=[G],k.apply(null,K.concat([function(){F[Y]=arguments;var ye=V[Y];delete V[Y];for(var Ee=0,Re=ye.length;Ee<Re;Ee++)ye[Ee].apply(null,arguments)}])))};return M.memo=F,M.unmemoized=k,M},l.unmemoize=function(k){return function(){return(k.unmemoized||k).apply(null,arguments)}},l.times=function(k,$,F){for(var V=[],M=0;M<k;M++)V.push(M);return l.map(V,$,F)},l.timesSeries=function(k,$,F){for(var V=[],M=0;M<k;M++)V.push(M);return l.mapSeries(V,$,F)},l.seq=function(){var k=arguments;return function(){var $=this,F=Array.prototype.slice.call(arguments),V=F.pop();l.reduce(k,F,function(M,K,G){K.apply($,M.concat([function(){var Y=arguments[0],ye=Array.prototype.slice.call(arguments,1);G(Y,ye)}]))},function(M,K){V.apply($,[M].concat(K))})}},l.compose=function(){return l.seq.apply(null,Array.prototype.reverse.call(arguments))};var _=function(k,$){var F=function(){var M=this,K=Array.prototype.slice.call(arguments),G=K.pop();return k($,function(Y,ye){Y.apply(M,K.concat([ye]))},G)};if(arguments.length>2){var V=Array.prototype.slice.call(arguments,2);return F.apply(this,V)}return F};l.applyEach=N(_),l.applyEachSeries=P(_),l.forever=function(k,$){(function F(V){if(V){if($)return $(V);throw V}k(F)})()},i.exports?i.exports=l:(f=(function(){return l}).apply(g,[]))===void 0||(i.exports=f)})()},987:()=>{},947:()=>{},479:(i,g,f)=>{var a=f(668),y=f(204),l=f(177),v=function(A){this.opts=A||{},this.quiet=this.opts.quiet||!1,this.quiet?this.log=function(){}:typeof window=="object"?this.log=console.log.bind(window):this.log=console.log};v.prototype.sync=function(A,d,T,w){this.log("sync");var S=this,O=1,N={cmd:[y.Cmnd_STK_GET_SYNC],responseData:y.OK_RESPONSE,timeout:T};(function P(){O+=1,l(A,N,function(H,j){if(H&&O<=d)return H&&S.log(H),S.log("failed attempt again",O),P();S.log("sync complete",H,j,O),w(H,j)})})()},v.prototype.verifySignature=function(A,d,T,w){this.log("verify signature");var S=this;match=Buffer.concat([Buffer.from([y.Resp_STK_INSYNC]),d,Buffer.from([y.Resp_STK_OK])]);var O={cmd:[y.Cmnd_STK_READ_SIGN],responseLength:match.length,timeout:T};l(A,O,function(N,P){P?S.log("confirm signature",N,P,P.toString("hex")):S.log("confirm signature",N,"no data"),w(N,P)})},v.prototype.getSignature=function(A,d,T){this.log("get signature");var w={cmd:[y.Cmnd_STK_READ_SIGN],responseLength:5,timeout:d};l(A,w,function(S,O){this.log("getSignature",S,O),T(S,O)})},v.prototype.setOptions=function(A,d,T,w){this.log("set device");var S=this,O={cmd:[y.Cmnd_STK_SET_DEVICE,d.devicecode||0,d.revision||0,d.progtype||0,d.parmode||0,d.polling||0,d.selftimed||0,d.lockbytes||0,d.fusebytes||0,d.flashpollval1||0,d.flashpollval2||0,d.eeprompollval1||0,d.eeprompollval2||0,d.pagesizehigh||0,d.pagesizelow||0,d.eepromsizehigh||0,d.eepromsizelow||0,d.flashsize4||0,d.flashsize3||0,d.flashsize2||0,d.flashsize1||0],responseData:y.OK_RESPONSE,timeout:T};l(A,O,function(N,P){if(S.log("setOptions",N,P),N)return w(N);w()})},v.prototype.enterProgrammingMode=function(A,d,T){this.log("send enter programming mode");var w=this,S={cmd:[y.Cmnd_STK_ENTER_PROGMODE],responseData:y.OK_RESPONSE,timeout:d};l(A,S,function(O,N){w.log("sent enter programming mode",O,N),T(O,N)})},v.prototype.loadAddress=function(A,d,T,w){this.log("load address");var S=this,O=255&d,N=d>>8&255,P={cmd:[y.Cmnd_STK_LOAD_ADDRESS,O,N],responseData:y.OK_RESPONSE,timeout:T};l(A,P,function(H,j){S.log("loaded address",H,j),w(H,j)})},v.prototype.loadPage=function(A,d,T,w){this.log("load page");var S=this,O=255&d.length,N=d.length>>8,P={cmd:Buffer.concat([Buffer.from([y.Cmnd_STK_PROG_PAGE,N,O,70]),d,Buffer.from([y.Sync_CRC_EOP])]),responseData:y.OK_RESPONSE,timeout:T};l(A,P,function(H,j){S.log("loaded page",H,j),w(H,j)})},v.prototype.upload=function(){var A,d,T,w,S,O;this.log("program"),arguments.length===6?(A=arguments[0],d=arguments[1],T=arguments[2],w=arguments[3],S=arguments[4],O=arguments[5]):(A=arguments[0],d=arguments[1],T=arguments[2],w=arguments[3],S=void 0,O=arguments[4]);var N,P,H=0,j=this;a.whilst(function(){return H<d.length},function(Z){j.log("program page"),a.series([function(U){P=S?H:H>>1,U()},function(U){j.loadAddress(A,P,w,U)},function(U){N=d.slice(H,d.length>T?H+T:d.length-1),U()},function(U){j.loadPage(A,N,w,U)},function(U){j.log("programmed page"),H+=N.length,setTimeout(U,4)}],function(U){j.log("page done"),Z(U)})},function(Z){j.log("upload done"),O(Z)})},v.prototype.exitProgrammingMode=function(A,d,T){this.log("send leave programming mode");var w=this,S={cmd:[y.Cmnd_STK_LEAVE_PROGMODE],responseData:y.OK_RESPONSE,timeout:d};l(A,S,function(O,N){w.log("sent leave programming mode",O,N),T(O,N)})},v.prototype.verify=function(A,d,T,w,S){this.log("verify");var O,N,P=0,H=this;a.whilst(function(){return P<d.length},function(j){H.log("verify page"),a.series([function(Z){N=P>>1,Z()},function(Z){H.loadAddress(A,N,w,Z)},function(Z){O=d.slice(P,d.length>T?P+T:d.length-1),Z()},function(Z){H.verifyPage(A,O,T,w,Z)},function(Z){H.log("verified page"),P+=O.length,setTimeout(Z,4)}],function(Z){H.log("verify done"),j(Z)})},function(j){H.log("verify done"),S(j)})},v.prototype.verifyPage=function(A,d,T,w,S){this.log("verify page");var O=this;match=Buffer.concat([Buffer.from([y.Resp_STK_INSYNC]),d,Buffer.from([y.Resp_STK_OK])]);var N=d.length>=T?T:d.length,P={cmd:[y.Cmnd_STK_READ_PAGE,N>>8&255,255&N,70],responseLength:match.length,timeout:w};l(A,P,function(H,j){O.log("confirm page",H,j,j.toString("hex")),S(H,j)})},v.prototype.bootload=function(A,d,T,w){var S={pagesizehigh:T.pagesizehigh<<8&255,pagesizelow:255&T.pagesizelow};a.series([this.sync.bind(this,A,3,T.timeout),this.sync.bind(this,A,3,T.timeout),this.sync.bind(this,A,3,T.timeout),this.verifySignature.bind(this,A,T.signature,T.timeout),this.setOptions.bind(this,A,S,T.timeout),this.enterProgrammingMode.bind(this,A,T.timeout),this.upload.bind(this,A,d,T.pageSize,T.timeout,T.dontShiftPageAddr),this.verify.bind(this,A,d,T.pageSize,T.timeout),this.exitProgrammingMode.bind(this,A,T.timeout)],function(O){return w(O)})},i.exports=v},950:(i,g,f)=>{var a=[f(204).Resp_STK_INSYNC];i.exports=function(y,l,v,A){var d=Buffer.alloc(0),T=!1,w=null,S=function(N){for(var P=0;!T&&P<N.length;){var H=N[P];a.indexOf(H)!==-1&&(N=N.slice(P,N.length-P),T=!0),P++}if(T&&(d=Buffer.concat([d,N])),d.length>v)return O(new Error("buffer overflow "+d.length+" > "+v));d.length==v&&O()},O=function(N){w&&clearTimeout(w),y.removeListener("data",S),A(N,d)};l&&l>0&&(w=setTimeout(function(){w=null,O(new Error("receiveData timeout after "+l+"ms"))},l)),y.on("data",S)}},177:(i,g,f)=>{var a=f(950),y=f(204);i.exports=function(l,v,A){var d,T=v.timeout||0,w=(y.Resp_STK_INSYNC,y.Resp_STK_NOSYNC,null),S=0;v.responseData&&v.responseData.length>0&&(w=v.responseData),w&&(S=w.length),v.responseLength&&(S=v.responseLength);var O=v.cmd;O instanceof Array&&(O=Buffer.from(O.concat(y.Sync_CRC_EOP))),l.write(O,function(N){if(N)return d=new Error("Sending "+O.toString("hex")+": "+N.message),A(d);a(l,T,S,function(P,H){return P?(d=new Error("Sending "+O.toString("hex")+": "+P.message),A(d)):w&&!H.equals(w)?(d=new Error(O+" response mismatch: "+H.toString("hex")+", "+w.toString("hex")),A(d)):void A(null,H)})})}},204:i=>{i.exports={Cmnd_STK_GET_SYNC:48,Cmnd_STK_SET_DEVICE:66,Cmnd_STK_ENTER_PROGMODE:80,Cmnd_STK_LOAD_ADDRESS:85,Cmnd_STK_PROG_PAGE:100,Cmnd_STK_LEAVE_PROGMODE:81,Cmnd_STK_READ_SIGN:117,Sync_CRC_EOP:32,Resp_STK_OK:16,Resp_STK_INSYNC:20,Resp_STK_NOSYNC:21,Cmnd_STK_READ_PAGE:116,OK_RESPONSE:Buffer.from([20,16])}}},o={};function s(i){var g=o[i];if(g!==void 0)return g.exports;var f=o[i]={id:i,loaded:!1,exports:{}};return n[i].call(f.exports,f,f.exports,s),f.loaded=!0,f.exports}s.d=(i,g)=>{for(var f in g)s.o(g,f)&&!s.o(i,f)&&Object.defineProperty(i,f,{enumerable:!0,get:g[f]})},s.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),s.o=(i,g)=>Object.prototype.hasOwnProperty.call(i,g),s.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},s.nmd=i=>(i.paths=[],i.children||(i.children=[]),i);var c={};return(()=>{s.r(c),s.d(c,{UNKNOWN_BOARD_FQBN:()=>A,UNKNOWN_BOARD_NAME:()=>d,Uploader:()=>Bn});class i{constructor(){this.logger=window.console}debug(b,E){this.log("debug",b,E)}info(b,E){this.log("info",b,E)}warn(b,E){this.log("warn",b,E)}error(b,E){this.log("error",b,E)}log(b,E,D){this.logger[b](E,D?Object.assign({},D):"")}}const g={"arduino:avr:uno":{name:"Arduino Uno",flasher:"avr",avr_name:"uno",ids:[{vid:9025,pid:67},{vid:9025,pid:1},{vid:10755,pid:67},{vid:9025,pid:579}]},"arduino:megaavr:uno2018":{name:"Arduino Uno WiFi Rev2",flasher:"avr",ids:[{vid:1003,pid:8517}],avr_name:"unowifirev2"},"arduino:samd:mkrwifi1010":{name:"Arduino MKR WiFi 1010",flasher:"sam-ba",iot_enabled:!0,ids:[{vid:9025,pid:84},{vid:9025,pid:32852,bootloader:!0}],use_1200bps_touch:!0},"arduino:mbed_nano:nanorp2040connect":{name:"Arduino Nano RP2040 Connect",flasher:"rp",iot_enabled:!1,supports_uf2:!0,ids:[{vid:9025,pid:94},{vid:9025,pid:32862},{vid:9025,pid:350},{vid:9025,pid:606}],use_1200bps_touch:!0},"arduino:samd:nano_33_iot":{name:"Arduino NANO 33 IoT",flasher:"sam-ba",iot_enabled:!0,ids:[{vid:9025,pid:87},{vid:9025,pid:32855,bootloader:!0}],use_1200bps_touch:!0},"arduino:renesas_uno:minima":{name:"Arduino Uno R4 Minima",flasher:"dfu",iot_enabled:!1,ids:[{vid:9025,pid:105},{vid:9025,pid:873,bootloader:!0}],use_1200bps_touch:!0},"arduino:renesas_uno:unor4wifi":{name:"Arduino Uno R4 WiFi",flasher:"sam-ba-renesas",iot_enabled:!0,ids:[{vid:9025,pid:4098},{vid:9025,pid:109,bootloader:!0}]}},f=`
  .confirm-dialog {
    max-width: 45em;
    padding: 2rem;
    width: 60vw;
    box-shadow: 2px 2px 8px #888888;
    position: absolute;
    float: left;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
  }
  .confirm-dialog::backdrop {
    background-color: rgba(0, 0, 0, 0.3);
  }

  .confirm-dialog .header-image {
    margin: 0 auto;
    display: block;
    width: 100%;
  }

  .additional-warning-container {
    padding: 20px;
    background-color: #fbedb7;
    border-radius: 3px;
    margin-top: 30px;
    margin-left: 16px;
  }

  .additional-warning-container::before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' id='warning-mono'%3E%3Cpath d='M8.897 2.556c1.72-3.222 4.486-3.222 6.186 0l8.221 15.474c1.72 3.222.139 5.83-3.498 5.83H4.194c-3.637 0-5.218-2.608-3.498-5.83zm1.443 2.648v10.632h3.537V5.204zm0 12.747v3.538h3.537V17.95z' fill='%23374146'%3E%3C/path%3E%3C/svg%3E");
    margin-left: -36px;
    margin-top: -36px;
    background-color: #fbedb7;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    padding: 12px;
    display: block;
  }

  .additional-warning {
    font-size: 14px;
  }
  `;class a{constructor(){this.dialog=void 0,this.positiveButton=void 0,this.negativeButton=void 0,this.parent=void 0,this.titleText="Confirm",this.questionText="Are you sure?",this.positiveButtonText="Yes",this.negativeButtonText="No",this.css=f,this.headerImageSrc=void 0,this.additionalWarning=void 0,this.dialog=void 0,this.positiveButton=void 0,this.negativeButton=void 0,this.parent=document.body}static From(b){const E=new a;return E.customize(b),E.createDialog(),E.createStyle(),E.appendDialog(),E}confirm(){return new Promise((b,E)=>{var D,W,he;(!this.dialog||!this.positiveButton)&&E(new Error("Something went wrong upon dialog creation")),(D=this.dialog)===null||D===void 0||D.showModal(),(W=this.positiveButton)===null||W===void 0||W.addEventListener("click",()=>{b(!0),this.destroy()}),(he=this.negativeButton)===null||he===void 0||he.addEventListener("click",()=>{b(!1),this.destroy()})})}customize(b){b&&(b.css&&(this.css=b.css),b.titleText&&(this.titleText=b.titleText),b.negativeButtonText&&(this.negativeButtonText=b.negativeButtonText),b.positiveButtonText&&(this.positiveButtonText=b.positiveButtonText),b.questionText&&(this.questionText=b.questionText),b.headerImageSrc&&(this.headerImageSrc=b.headerImageSrc),b.additionalWarning&&(this.additionalWarning=b.additionalWarning))}createStyle(){const b=document.createElement("style");b.innerHTML=`${f} ${this.css}`,document.getElementsByTagName("head")[0].appendChild(b)}createDialog(){if(this.dialog=document.createElement("dialog"),this.dialog.classList.add("confirm-dialog"),this.headerImageSrc){const W=document.createElement("div");W.classList.add("header-image-container");const he=document.createElement("img");he.classList.add("header-image"),he.src=this.headerImageSrc,W.appendChild(he),this.dialog.appendChild(W)}const b=document.createElement("div");b.classList.add("title"),b.innerHTML=this.titleText,this.dialog.appendChild(b);const E=document.createElement("div");if(E.classList.add("question"),E.innerHTML=this.questionText,this.dialog.appendChild(E),this.additionalWarning){const W=document.createElement("div");W.classList.add("additional-warning-container");const he=document.createElement("div");he.classList.add("additional-warning"),he.innerHTML=this.additionalWarning,W.appendChild(he),this.dialog.appendChild(W)}const D=document.createElement("div");D.classList.add("button-group"),this.dialog.appendChild(D),this.positiveButton=document.createElement("button"),this.positiveButton.type="button",this.positiveButton.classList.add("true-button"),this.positiveButton.textContent=this.positiveButtonText,D.appendChild(this.positiveButton)}appendDialog(){var b;(b=this.parent)===null||b===void 0||b.appendChild(this.dialog)}destroy(){var b;(b=this.parent)===null||b===void 0||b.removeChild(this.dialog),delete this.dialog}}function y(B){if(!B||B<0)throw new Error("Provided parameter should be a positive integer");return`0x${Math.round(B).toString(16).padStart(4,"0").toUpperCase()}`}function l({vid:B,pid:b}){if(typeof B!="number"||typeof b!="number")throw new Error("VendorID (vid) and ProductID (pid) must be integer");return`${y(B)}/${y(b)}`}var v=function(B,b,E,D){return new(E||(E=Promise))(function(W,he){function de(ie){try{le(D.next(ie))}catch(ae){he(ae)}}function oe(ie){try{le(D.throw(ie))}catch(ae){he(ae)}}function le(ie){var ae;ie.done?W(ie.value):(ae=ie.value,ae instanceof E?ae:new E(function(Ne){Ne(ae)})).then(de,oe)}le((D=D.apply(B,[])).next())})};const A="unknown",d="Unknown";function T({vid:B,pid:b}){var E;return v(this,void 0,void 0,function*(){return(E=yield navigator.serial.getPorts())===null||E===void 0?void 0:E.find(D=>{const{usbVendorId:W,usbProductId:he}=D.getInfo();return he===b&&W===B})})}function w({vid:B,pid:b}){var E;return v(this,void 0,void 0,function*(){return(E=yield navigator.usb.getDevices())===null||E===void 0?void 0:E.find(D=>{const{productId:W,vendorId:he}=D;return W===b&&he===B})})}function S(B){let b=g[B];if(!b){const E=B.indexOf(":mode=");E!==-1&&(b=g[B.substring(0,E)])}return b}function O(B){return v(this,void 0,void 0,function*(){const b=S(B);for(let E=0;E<b.ids.length;E+=1){const{vid:D,pid:W}=b.ids[E],he=yield w({vid:D,pid:W});if(he)return he}})}function N(B){return v(this,void 0,void 0,function*(){if(yield a.From(B).confirm())return yield navigator.serial.requestPort();throw new Error("Permission denied")})}function P(B){return Uint8Array.from(Buffer.from(B,"base64"))}var H=[{name:"uno",baud:115200,signature:Buffer.from([30,149,15]),pageSize:128,numPages:256,timeout:400,productId:["0x0043","0x7523","0x0001","0xea60","0x6015"],productPage:"https://store.arduino.cc/arduino-uno-rev3",protocol:"stk500v1"},{name:"unowifirev2",baud:57600,signature:Buffer.from([30,150,81]),pageSize:128,numPages:256,timeout:400,productId:["0x2145"],productPage:"https://store.arduino.cc/arduino-uno-wifi-rev2",protocol:"stk500v1",dontShiftPageAddr:!0},{name:"micro",baud:57600,signature:Buffer.from([67,65,84,69,82,73,78]),productId:["0x0037","0x8037","0x0036","0x0237"],productPage:"https://store.arduino.cc/arduino-micro",protocol:"avr109"},{name:"imuduino",baud:57600,signature:Buffer.from([67,65,84,69,82,73,78]),productId:["0x0036","0x8037","0x8036"],productPage:"https://www.kickstarter.com/projects/1265095814/imuduino-wireless-3d-motion-html-js-apps-arduino-p?lang=de",protocol:"avr109"},{name:"leonardo",baud:57600,signature:Buffer.from([67,65,84,69,82,73,78]),productId:["0x0036","0x8036","0x800c"],productPage:"https://store.arduino.cc/leonardo",protocol:"avr109"},{name:"arduboy",baud:57600,signature:Buffer.from([67,65,84,69,82,73,78]),productId:["0x0036","0x8036","0x800c"],productPage:"https://arduboy.com/",protocol:"avr109"},{name:"feather",baud:57600,signature:Buffer.from([67,65,84,69,82,73,78]),productId:["0x800c","0x000c"],productPage:"https://www.adafruit.com/feather",protocol:"avr109"},{name:"little-bits",baud:57600,signature:Buffer.from([67,65,84,69,82,73,78]),productId:["0x0036","0x8036"],productPage:"https://littlebits.com/collections/bits-and-accessories/products/arduino-bit",protocol:"avr109"},{name:"blend-micro",baud:57600,signature:Buffer.from([67,65,84,69,82,73,78]),productId:["0x2404"],productPage:"https://redbear.cc/product/retired/blend-micro.html",protocol:"avr109"},{name:"nano",baud:57600,signature:Buffer.from([30,149,15]),pageSize:128,numPages:256,timeout:400,productId:["0x6001","0x7523"],productPage:"https://web.archive.org/web/20150813095112/https://www.arduino.cc/en/Main/ArduinoBoardNano",protocol:"stk500v1"},{name:"nano (new bootloader)",baud:115200,signature:Buffer.from([30,149,15]),pageSize:128,numPages:256,timeout:400,productId:["0x6001","0x7523"],productPage:"https://store.arduino.cc/arduino-nano",protocol:"stk500v1"},{name:"duemilanove168",baud:19200,signature:Buffer.from([30,148,6]),pageSize:128,numPages:128,timeout:400,productId:["0x6001"],productPage:"https://www.arduino.cc/en/Main/arduinoBoardDuemilanove",protocol:"stk500v1"},{name:"duemilanove328",baud:57600,signature:Buffer.from([30,149,20]),pageSize:128,numPages:256,timeout:400,productId:["0x6001"],productPage:"https://www.arduino.cc/en/Main/arduinoBoardDuemilanove",protocol:"stk500v1"},{name:"tinyduino",baud:57600,signature:Buffer.from([30,149,15]),pageSize:128,numPages:256,timeout:400,productId:["0x6015"],productPage:"https://tinycircuits.com/pages/tinyduino-overview",protocol:"stk500v1",aliases:["tinduino"]},{name:"mega",baud:115200,signature:Buffer.from([30,152,1]),pageSize:256,delay1:10,delay2:1,timeout:200,stabDelay:100,cmdexeDelay:25,synchLoops:32,byteDelay:0,pollValue:83,pollIndex:3,productId:["0x0042","0x6001","0x0010","0x7523"],productPage:"https://store.arduino.cc/mega-2560-r3",protocol:"stk500v2"},{name:"adk",baud:115200,signature:Buffer.from([30,152,1]),pageSize:256,delay1:10,delay2:1,timeout:200,stabDelay:100,cmdexeDelay:25,synchLoops:32,byteDelay:0,pollValue:83,pollIndex:3,productId:["0x0044","0x6001","0x003F"],productPage:"https://store.arduino.cc/arduino-mega-adk-rev3",protocol:"stk500v2"},{name:"sf-pro-micro",baud:57600,signature:Buffer.from([67,65,84,69,82,73,78]),productId:["0x9206","0x9205","0x0036"],productPage:"https://www.sparkfun.com/products/12640",protocol:"avr109"},{name:"pro-mini",baud:57600,signature:Buffer.from([30,149,15]),pageSize:128,numPages:256,timeout:400,productPage:"https://store.arduino.cc/arduino-pro-mini",protocol:"stk500v1"},{name:"qduino",baud:57600,signature:Buffer.from([67,65,84,69,82,73,78]),productId:["0x516d","0x514d"],productPage:"https://www.sparkfun.com/products/13614",protocol:"avr109"},{name:"pinoccio",baud:115200,signature:Buffer.from([30,168,2]),pageSize:256,delay1:10,delay2:1,timeout:200,stabDelay:100,cmdexeDelay:25,synchLoops:32,byteDelay:0,pollValue:83,pollIndex:3,productId:["0x6051"],productPage:"https://www.mouser.de/new/crowd-supply/crowd-supply-pinoccio-microcontroller/",protocol:"stk500v2"},{name:"lilypad-usb",baud:57600,signature:Buffer.from([67,65,84,69,82,73,78]),productId:["0x9207","0x9208","0x1B4F"],productPage:"https://www.sparkfun.com/products/12049",protocol:"avr109"},{name:"yun",baud:57600,signature:Buffer.from([67,65,84,69,82,73,78]),productId:["0x0041","0x8041"],productPage:"https://store.arduino.cc/arduino-yun",protocol:"avr109"},{name:"esplora",baud:57600,signature:Buffer.from([67,65,84,69,82,73,78]),productId:["0x003C","0x803C"],productPage:"https://store.arduino.cc/arduino-esplora",protocol:"avr109"},{name:"circuit-playground-classic",baud:57600,signature:Buffer.from([67,65,84,69,82,73,78]),productId:["0x0011","0x8011"],productPage:"https://www.adafruit.com/product/3000",protocol:"avr109"},{name:"zumjunior",baud:115200,signature:Buffer.from([30,149,15]),pageSize:128,numPages:256,timeout:400,productId:["0xEA60"],productPage:"https://store-de.bq.com/de/zum-kit-junior",protocol:"stk500v1"},{name:"zumcore2",baud:115200,signature:Buffer.from([30,149,15]),pageSize:128,numPages:256,timeout:400,productId:["0xEA60"],productPage:"https://www.bq.com/de/zum-core-2-0",protocol:"stk500v1"},{name:"bqZum",baud:19200,signature:Buffer.from([30,149,15]),pageSize:128,numPages:256,timeout:400,productId:["0x6001","0x7523"],productPage:"http://diwo.bq.com/zum-bt-328-especificaciones-tecnicas/",protocol:"stk500v1"},{name:"xprov4",baud:115200,signature:Buffer.from([30,149,22]),pageSize:128,numPages:256,timeout:400,productId:["0x0043","0x7523","0x0001","0xea60"],productPage:"http://www.spark-concepts.com/cnc-xpro-v4-controller/",protocol:"stk500v1"}];const j=function(){for(var B={},b=0;b<H.length;b++){var E=H[b];B[E.name]=E;var D=E.aliases;if(Array.isArray(D))for(var W=0;W<D.length;W++)B[D[W]]=E}return B}();var Z=s(764),U=s(187);function ue(B){return ue=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},ue(B)}function fe(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */fe=function(){return B};var B={},b=Object.prototype,E=b.hasOwnProperty,D=typeof Symbol=="function"?Symbol:{},W=D.iterator||"@@iterator",he=D.asyncIterator||"@@asyncIterator",de=D.toStringTag||"@@toStringTag";function oe(C,x,re){return Object.defineProperty(C,x,{value:re,enumerable:!0,configurable:!0,writable:!0}),C[x]}try{oe({},"")}catch{oe=function(x,re,pe){return x[re]=pe}}function le(C,x,re,pe){var ee=x&&x.prototype instanceof Ne?x:Ne,Be=Object.create(ee.prototype),De=new Tt(pe||[]);return Be._invoke=function(qe,tt,be){var $e="suspendedStart";return function(Ye,Ut){if($e==="executing")throw new Error("Generator is already running");if($e==="completed"){if(Ye==="throw")throw Ut;return Mt()}for(be.method=Ye,be.arg=Ut;;){var Ot=be.delegate;if(Ot){var gt=ut(Ot,be);if(gt){if(gt===ae)continue;return gt}}if(be.method==="next")be.sent=be._sent=be.arg;else if(be.method==="throw"){if($e==="suspendedStart")throw $e="completed",be.arg;be.dispatchException(be.arg)}else be.method==="return"&&be.abrupt("return",be.arg);$e="executing";var dt=ie(qe,tt,be);if(dt.type==="normal"){if($e=be.done?"completed":"suspendedYield",dt.arg===ae)continue;return{value:dt.arg,done:be.done}}dt.type==="throw"&&($e="completed",be.method="throw",be.arg=dt.arg)}}}(C,re,De),Be}function ie(C,x,re){try{return{type:"normal",arg:C.call(x,re)}}catch(pe){return{type:"throw",arg:pe}}}B.wrap=le;var ae={};function Ne(){}function Me(){}function Ce(){}var Ue={};oe(Ue,W,function(){return this});var _e=Object.getPrototypeOf,Ge=_e&&_e(_e(Rt([])));Ge&&Ge!==b&&E.call(Ge,W)&&(Ue=Ge);var Ke=Ce.prototype=Ne.prototype=Object.create(Ue);function kt(C){["next","throw","return"].forEach(function(x){oe(C,x,function(re){return this._invoke(x,re)})})}function it(C,x){function re(ee,Be,De,qe){var tt=ie(C[ee],C,Be);if(tt.type!=="throw"){var be=tt.arg,$e=be.value;return $e&&ue($e)=="object"&&E.call($e,"__await")?x.resolve($e.__await).then(function(Ye){re("next",Ye,De,qe)},function(Ye){re("throw",Ye,De,qe)}):x.resolve($e).then(function(Ye){be.value=Ye,De(be)},function(Ye){return re("throw",Ye,De,qe)})}qe(tt.arg)}var pe;this._invoke=function(ee,Be){function De(){return new x(function(qe,tt){re(ee,Be,qe,tt)})}return pe=pe?pe.then(De,De):De()}}function ut(C,x){var re=C.iterator[x.method];if(re===void 0){if(x.delegate=null,x.method==="throw"){if(C.iterator.return&&(x.method="return",x.arg=void 0,ut(C,x),x.method==="throw"))return ae;x.method="throw",x.arg=new TypeError("The iterator does not provide a 'throw' method")}return ae}var pe=ie(re,C.iterator,x.arg);if(pe.type==="throw")return x.method="throw",x.arg=pe.arg,x.delegate=null,ae;var ee=pe.arg;return ee?ee.done?(x[C.resultName]=ee.value,x.next=C.nextLoc,x.method!=="return"&&(x.method="next",x.arg=void 0),x.delegate=null,ae):ee:(x.method="throw",x.arg=new TypeError("iterator result is not an object"),x.delegate=null,ae)}function Yt(C){var x={tryLoc:C[0]};1 in C&&(x.catchLoc=C[1]),2 in C&&(x.finallyLoc=C[2],x.afterLoc=C[3]),this.tryEntries.push(x)}function It(C){var x=C.completion||{};x.type="normal",delete x.arg,C.completion=x}function Tt(C){this.tryEntries=[{tryLoc:"root"}],C.forEach(Yt,this),this.reset(!0)}function Rt(C){if(C){var x=C[W];if(x)return x.call(C);if(typeof C.next=="function")return C;if(!isNaN(C.length)){var re=-1,pe=function ee(){for(;++re<C.length;)if(E.call(C,re))return ee.value=C[re],ee.done=!1,ee;return ee.value=void 0,ee.done=!0,ee};return pe.next=pe}}return{next:Mt}}function Mt(){return{value:void 0,done:!0}}return Me.prototype=Ce,oe(Ke,"constructor",Ce),oe(Ce,"constructor",Me),Me.displayName=oe(Ce,de,"GeneratorFunction"),B.isGeneratorFunction=function(C){var x=typeof C=="function"&&C.constructor;return!!x&&(x===Me||(x.displayName||x.name)==="GeneratorFunction")},B.mark=function(C){return Object.setPrototypeOf?Object.setPrototypeOf(C,Ce):(C.__proto__=Ce,oe(C,de,"GeneratorFunction")),C.prototype=Object.create(Ke),C},B.awrap=function(C){return{__await:C}},kt(it.prototype),oe(it.prototype,he,function(){return this}),B.AsyncIterator=it,B.async=function(C,x,re,pe,ee){ee===void 0&&(ee=Promise);var Be=new it(le(C,x,re,pe),ee);return B.isGeneratorFunction(x)?Be:Be.next().then(function(De){return De.done?De.value:Be.next()})},kt(Ke),oe(Ke,de,"Generator"),oe(Ke,W,function(){return this}),oe(Ke,"toString",function(){return"[object Generator]"}),B.keys=function(C){var x=[];for(var re in C)x.push(re);return x.reverse(),function pe(){for(;x.length;){var ee=x.pop();if(ee in C)return pe.value=ee,pe.done=!1,pe}return pe.done=!0,pe}},B.values=Rt,Tt.prototype={constructor:Tt,reset:function(C){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(It),!C)for(var x in this)x.charAt(0)==="t"&&E.call(this,x)&&!isNaN(+x.slice(1))&&(this[x]=void 0)},stop:function(){this.done=!0;var C=this.tryEntries[0].completion;if(C.type==="throw")throw C.arg;return this.rval},dispatchException:function(C){if(this.done)throw C;var x=this;function re(tt,be){return Be.type="throw",Be.arg=C,x.next=tt,be&&(x.method="next",x.arg=void 0),!!be}for(var pe=this.tryEntries.length-1;pe>=0;--pe){var ee=this.tryEntries[pe],Be=ee.completion;if(ee.tryLoc==="root")return re("end");if(ee.tryLoc<=this.prev){var De=E.call(ee,"catchLoc"),qe=E.call(ee,"finallyLoc");if(De&&qe){if(this.prev<ee.catchLoc)return re(ee.catchLoc,!0);if(this.prev<ee.finallyLoc)return re(ee.finallyLoc)}else if(De){if(this.prev<ee.catchLoc)return re(ee.catchLoc,!0)}else{if(!qe)throw new Error("try statement without catch or finally");if(this.prev<ee.finallyLoc)return re(ee.finallyLoc)}}}},abrupt:function(C,x){for(var re=this.tryEntries.length-1;re>=0;--re){var pe=this.tryEntries[re];if(pe.tryLoc<=this.prev&&E.call(pe,"finallyLoc")&&this.prev<pe.finallyLoc){var ee=pe;break}}ee&&(C==="break"||C==="continue")&&ee.tryLoc<=x&&x<=ee.finallyLoc&&(ee=null);var Be=ee?ee.completion:{};return Be.type=C,Be.arg=x,ee?(this.method="next",this.next=ee.finallyLoc,ae):this.complete(Be)},complete:function(C,x){if(C.type==="throw")throw C.arg;return C.type==="break"||C.type==="continue"?this.next=C.arg:C.type==="return"?(this.rval=this.arg=C.arg,this.method="return",this.next="end"):C.type==="normal"&&x&&(this.next=x),ae},finish:function(C){for(var x=this.tryEntries.length-1;x>=0;--x){var re=this.tryEntries[x];if(re.finallyLoc===C)return this.complete(re.completion,re.afterLoc),It(re),ae}},catch:function(C){for(var x=this.tryEntries.length-1;x>=0;--x){var re=this.tryEntries[x];if(re.tryLoc===C){var pe=re.completion;if(pe.type==="throw"){var ee=pe.arg;It(re)}return ee}}throw new Error("illegal catch attempt")},delegateYield:function(C,x,re){return this.delegate={iterator:Rt(C),resultName:x,nextLoc:re},this.method==="next"&&(this.arg=void 0),ae}},B}function q(B,b,E,D,W,he,de){try{var oe=B[he](de),le=oe.value}catch(ie){return void E(ie)}oe.done?b(le):Promise.resolve(le).then(D,W)}function Q(B){return function(){var b=this,E=arguments;return new Promise(function(D,W){var he=B.apply(b,E);function de(le){q(he,D,W,de,oe,"next",le)}function oe(le){q(he,D,W,de,oe,"throw",le)}de(void 0)})}}function _(B,b){for(var E=0;E<b.length;E++){var D=b[E];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(B,D.key,D)}}function k(B,b){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(E,D){return E.__proto__=D,E},k(B,b)}function $(B){var b=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var E,D=V(B);if(b){var W=V(this).constructor;E=Reflect.construct(D,arguments,W)}else E=D.apply(this,arguments);return F(this,E)}}function F(B,b){if(b&&(ue(b)==="object"||typeof b=="function"))return b;if(b!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(E){if(E===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E}(B)}function V(B){return V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(b){return b.__proto__||Object.getPrototypeOf(b)},V(B)}const M=function(B){(function(Me,Ce){if(typeof Ce!="function"&&Ce!==null)throw new TypeError("Super expression must either be null or a function");Me.prototype=Object.create(Ce&&Ce.prototype,{constructor:{value:Me,writable:!0,configurable:!0}}),Object.defineProperty(Me,"prototype",{writable:!1}),Ce&&k(Me,Ce)})(Ne,B);var b,E,D,W,he,de,oe,le,ie,ae=$(Ne);function Ne(Me,Ce){var Ue;return function(_e,Ge){if(!(_e instanceof Ge))throw new TypeError("Cannot call a class as a function")}(this,Ne),(Ue=ae.call(this,Ce)).port=Me||null,Ue.options=Ce||{},Ue.browser=!0,Ue.path=Ue.options.path,Ue.isOpen=!1,Ue.writer=null,Ue.reader=null,Ue.isUpdating=!1,Ue.pausePromise=Promise.resolve(),Ue.closeReadPromise=null,Ue.pauseResolve=function(_e){},Ue.closeReadResolve=function(_e){},Ue.baudRate=Ue.options.baudRate,Ue.requestOptions=Ue.options.requestOptions||{},Ue.vid=null,Ue.pid=null,Ue.encoder=new TextEncoder,Ue.className="USBSerialPort",Ue.options.autoOpen&&Ue.open(),Ue}return b=Ne,E=[{key:"_getPort",value:(ie=Q(fe().mark(function Me(){return fe().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:if(!this.port||this.options.forceRequest){Ce.next=2;break}return Ce.abrupt("return",this.port);case 2:return Ce.abrupt("return",window.navigator.serial.requestPort(this.requestOptions));case 3:case"end":return Ce.stop()}},Me,this)})),function(){return ie.apply(this,arguments)})},{key:"open",value:function(Me){var Ce=this;return new Promise(function(Ue,_e){Ce._getPort().then(function(Ge){if(Ce.port=Ge,Ce.vid=Ge.getInfo().usbVendorId,Ce.pid=Ge.getInfo().usbProductId,!Ce.isOpen)return Ce.port.open({baudRate:Ce.baudRate||57600})}).then(function(){Ce.writer=Ce.port.writable.getWriter()}).then(function(){Ce.reader=Ce.port.readable.getReader()}).then(Q(fe().mark(function Ge(){var Ke,kt;return fe().wrap(function(it){for(;;)switch(it.prev=it.next){case 0:Ce.isUpdating||Ce.emit("open"),Ce.isOpen=!0,Me&&Me(null),Ue(null);case 4:if(!Ce.port.readable.locked){it.next=23;break}return it.prev=5,it.next=8,Ce.pausePromise;case 8:return it.next=10,Ce.reader.read();case 10:if(Ke=it.sent,kt=Ke.value,!Ke.done&&!Ce.closeReadPromise){it.next=15;break}return it.abrupt("break",23);case 15:Ce.emit("data",Z.lW.from(kt)),it.next=21;break;case 18:it.prev=18,it.t0=it.catch(5),console.error(it.t0);case 21:it.next=4;break;case 23:Ce.closeReadResolve();case 24:case"end":return it.stop()}},Ge,null,[[5,18]])}))).catch(function(Ge){Me&&Me(Ge),_e(Ge)})})}},{key:"forget",value:(le=Q(fe().mark(function Me(){return fe().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Ce.abrupt("return",this.port.forget());case 1:case"end":return Ce.stop()}},Me,this)})),function(){return le.apply(this,arguments)})},{key:"close",value:(oe=Q(fe().mark(function Me(Ce){var Ue=this;return fe().wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:if(this.isOpen){_e.next=3;break}return Ce&&Ce(null),_e.abrupt("return");case 3:if(!this.port.readable.locked){_e.next=17;break}return this.closeReadPromise=new Promise(function(Ge){Ue.closeReadResolve=Ge}),this.pauseResolve(),_e.prev=6,_e.next=9,this.reader.cancel();case 9:_e.next=14;break;case 11:_e.prev=11,_e.t0=_e.catch(6),console.error(_e.t0);case 14:return _e.next=16,this.closeReadPromise;case 16:this.closeReadPromise=null;case 17:return _e.prev=17,_e.next=20,this.reader.releaseLock();case 20:return _e.next=22,this.writer.releaseLock();case 22:return _e.next=24,this.port.close();case 24:this.isUpdating||this.emit("close"),this.isOpen=!1,_e.next=35;break;case 28:if(_e.prev=28,_e.t1=_e.catch(17),!Ce){_e.next=34;break}Ce(_e.t1),_e.next=35;break;case 34:throw _e.t1;case 35:Ce&&Ce(null);case 36:case"end":return _e.stop()}},Me,this,[[6,11],[17,28]])})),function(Me){return oe.apply(this,arguments)})},{key:"set",value:(de=Q(fe().mark(function Me(){var Ce,Ue,_e,Ge=arguments;return fe().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:if(Ce=Ge.length>0&&Ge[0]!==void 0?Ge[0]:{},Ue=Ge.length>1?Ge[1]:void 0,Ke.prev=2,_e={},Object.prototype.hasOwnProperty.call(Ce,"dtr")&&(_e.dataTerminalReady=Ce.dtr),Object.prototype.hasOwnProperty.call(Ce,"rts")&&(_e.requestToSend=Ce.rts),Object.prototype.hasOwnProperty.call(Ce,"brk")&&(_e.break=Ce.brk),!(Object.keys(_e).length>0)){Ke.next=10;break}return Ke.next=10,this.port.setSignals(_e);case 10:Ke.next=18;break;case 12:if(Ke.prev=12,Ke.t0=Ke.catch(2),!Ue){Ke.next=17;break}return Ue(Ke.t0),Ke.abrupt("return");case 17:throw Ke.t0;case 18:Ue&&Ue(null);case 19:case"end":return Ke.stop()}},Me,this,[[2,12]])})),function(){return de.apply(this,arguments)})},{key:"get",value:(he=Q(fe().mark(function Me(Ce){var Ue,_e;return fe().wrap(function(Ge){for(;;)switch(Ge.prev=Ge.next){case 0:return Ue={},Ge.prev=1,Ge.next=4,this.port.getSignals();case 4:_e=Ge.sent,Object.prototype.hasOwnProperty.call(_e,"dataCarrierDetect")&&(Ue.dcd=_e.dataCarrierDetect),Object.prototype.hasOwnProperty.call(_e,"clearToSend")&&(Ue.cts=_e.clearToSend),Object.prototype.hasOwnProperty.call(_e,"dataSetReady")&&(Ue.dsr=_e.dataSetReady),Ge.next=15;break;case 10:if(Ge.prev=10,Ge.t0=Ge.catch(1),!Ce){Ge.next=14;break}return Ge.abrupt("return",Ce(Ge.t0));case 14:throw Ge.t0;case 15:if(!Ce){Ge.next=17;break}return Ge.abrupt("return",Ce(Ue));case 17:return Ge.abrupt("return",Ue);case 18:case"end":return Ge.stop()}},Me,this,[[1,10]])})),function(Me){return he.apply(this,arguments)})},{key:"writeText",value:function(Me,Ce){return this.write(this.encoder.encode(Me),Ce)}},{key:"write",value:function(Me,Ce){this.writer.write(Me),Ce&&Ce(null)}},{key:"read",value:(W=Q(fe().mark(function Me(Ce){var Ue;return fe().wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:return _e.prev=0,_e.next=3,this.reader.read();case 3:Ue=_e.sent,_e.next=12;break;case 6:if(_e.prev=6,_e.t0=_e.catch(0),!Ce){_e.next=11;break}return Ce(_e.t0),_e.abrupt("return");case 11:throw _e.t0;case 12:Ce&&Ce(null,Ue);case 13:case"end":return _e.stop()}},Me,this,[[0,6]])})),function(Me){return W.apply(this,arguments)})},{key:"update",value:(D=Q(fe().mark(function Me(Ce,Ue){return fe().wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:if(_e.prev=0,!Object.prototype.hasOwnProperty.call(Ce,"baudRate")||this.baudRate===Ce.baudRate){_e.next=13;break}if(!this.isOpen){_e.next=12;break}return this.isUpdating=!0,_e.next=6,this.close();case 6:return this.baudRate=Ce.baudRate,_e.next=9,this.open();case 9:this.isUpdating=!1,_e.next=13;break;case 12:this.baudRate=Ce.baudRate;case 13:_e.next=21;break;case 15:if(_e.prev=15,_e.t0=_e.catch(0),!Ue){_e.next=20;break}return Ue(_e.t0),_e.abrupt("return");case 20:throw _e.t0;case 21:Ue&&Ue(null);case 22:case"end":return _e.stop()}},Me,this,[[0,15]])})),function(Me,Ce){return D.apply(this,arguments)})},{key:"pause",value:function(){var Me=this;this.pausePromise=new Promise(function(Ce){Me.pauseResolve=Ce})}},{key:"resume",value:function(){this.pauseResolve()}},{key:"flush",value:function(Me){console.warn("flush method is a NOP right now"),Me&&Me(null)}},{key:"drain",value:function(Me){console.warn("drain method is a NOP right now"),Me&&Me(null)}}],E&&_(b.prototype,E),Object.defineProperty(b,"prototype",{writable:!1}),Ne}(U.EventEmitter);function K(B){return K=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},K(B)}function G(B,b){return G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(E,D){return E.__proto__=D,E},G(B,b)}function Y(B){var b=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var E,D=Ee(B);if(b){var W=Ee(this).constructor;E=Reflect.construct(D,arguments,W)}else E=D.apply(this,arguments);return ye(this,E)}}function ye(B,b){if(b&&(K(b)==="object"||typeof b=="function"))return b;if(b!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(E){if(E===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E}(B)}function Ee(B){return Ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(b){return b.__proto__||Object.getPrototypeOf(b)},Ee(B)}const Re=function(B){(function(W,he){if(typeof he!="function"&&he!==null)throw new TypeError("Super expression must either be null or a function");W.prototype=Object.create(he&&he.prototype,{constructor:{value:W,writable:!0,configurable:!0}}),Object.defineProperty(W,"prototype",{writable:!1}),he&&G(W,he)})(D,B);var b,E=Y(D);function D(W,he){var de;return function(oe,le){if(!(oe instanceof le))throw new TypeError("Cannot call a class as a function")}(this,D),(de=E.call(this,W,he)).className="AvrUSBSerialPort",de}return b=D,Object.defineProperty(b,"prototype",{writable:!1}),b}(M);var ct=s(195),ft=s(911),Ze=function(B){if(this.options=B,this.debug=this.options.debug?console.log.bind(console):function(){},this.board=this.options.board,this.board.protocol==="avr109")throw new Error("Sorry, we currently don't support ".concat(this.board.name," or other avr109 boards in webserial. Please see https://github.com/noopkat/avrgirl-arduino/issues/204#issuecomment-703284131 for further details"))};Ze.prototype._init=function(B){this._setUpSerial(function(b){return B(b)})},Ze.prototype._setUpSerial=function(B){if(!this.options.serialPort)return this.serialPort=new Re(this.options.port,{baudRate:this.board.baud,autoOpen:!1}),this.serialPort.on("open",function(){}),B(null);this.serialPort=this.options.serialPort,this.serialPort.update({baudRate:this.board.baud},function(b){return B(b)})},Ze.prototype._sniffPort=function(B){var b=this.board.productId.map(function(E){return parseInt(E,16)});this._listPorts(function(E,D){var W=D.filter(function(he){return b.indexOf(parseInt(he._standardPid,16))!==-1});return B(null,W)})},Ze.prototype._setDTR=function(B,b,E){var D={rts:!1,dtr:B};this.serialPort.set(D,function(W){if(W)return E(W);setTimeout(function(){E(W)},b)})},Ze.prototype._pollForPort=function(B){var b=this,E=ft(function(D){var W=!1;b._sniffPort(function(he,de){de.length&&(b.options.port=de[0].comName,W=!0),D(W)})});E.every(100).ask(15),E(function(D){if(!D)return B(new Error("could not reconnect after resetting board."));b.debug("found port on",b.options.port),b._setUpSerial(function(W){return B(W)})})},Ze.prototype._pollForOpen=function(B){var b=this,E=ft(function(D){b.serialPort.open(function(W){D(!W)})});E.every(200).ask(10),E(function(D){var W;D||(W=new Error("could not open board on "+b.serialPort.path)),B(W)})},Ze.prototype._cycleDTR=function(B){var b=this;ct.series([b._setDTR.bind(b,!0,250),b._setDTR.bind(b,!1,50)],function(E){return B(E)})},Ze.prototype._listPorts=function(B){var b=[];Serialport.list(function(E,D){if(E)return B(E);for(var W=0;W<D.length;W+=1){var he;if(D[W].productId)he=D[W].productId;else if(D[W].pnpId)try{he="0x"+/PID_\d*/.exec(D[W].pnpId)[0].substr(4)}catch{he=""}else he="";D[W]._standardPid=he,b.push(D[W])}return B(null,b)})};const Je=Ze;var Xe=s(479),Qe=s(196),ht=s(620),lt={_parseHex:function(B){try{var b=Buffer.from(B);return ht.parse(b).data}catch(E){return E}},_hexStringToByte:function(B){return Buffer.from([parseInt(B,16)])}};const R=lt;var Se=function(B){this.debug=B.debug,this.megaDebug=B.megaDebug,this.board=B.board,this.connection=B.connection,this.chip=new B.protocol({quiet:!this.megaDebug})};Se.prototype._reset=function(B){var b=this;b.connection._setDTR(!1,250,function(E){return E||b.debug("reset complete."),B(E)})};const Ae=Se;var se=s(717),ne=function(B){B.protocol=Xe,Ae.call(this,B)};se(ne,Ae),ne.prototype._upload=function(B,b){var E=this;this.serialPort=this.connection.serialPort;var D=R._parseHex(B);if(!Buffer.isBuffer(D))return b(D);E.serialPort.open(function(W){if(W)return b(W);E.debug("connected"),E._reset(function(he){if(he)return b(he);E.debug("flashing, please wait..."),E.chip.bootload(E.serialPort,D,E.board,function(de){var oe=de?Qe.red:Qe.green;return E.debug(oe("flash complete.")),E.serialPort.close(),b(de)})})})},ne.prototype._reset=function(B){var b=this;b.connection._setDTR(!1,250,function(E){if(E)return B(E);b.connection._setDTR(!0,50,function(D){return b.debug("reset complete."),B(D)})})};const ve=ne;var Te=s(777),Pe=function(B){B.protocol=function(){return Te},Ae.call(this,B)};se(Pe,Ae),Pe.prototype._upload=function(B,b){var E=this;E.serialPort=E.connection.serialPort;var D=R._parseHex(B);if(!Buffer.isBuffer(D))return b(D);E.serialPort.open(function(W){if(W)return b(W);E.debug("connected");var he=E.chip(E.serialPort);ct.series([E._reset.bind(E),he.sync.bind(he,5),he.verifySignature.bind(he,E.board.signature),he.enterProgrammingMode.bind(he,E.board),function(de){E.debug("flashing, please wait..."),de(null)},he.upload.bind(he,D,E.board.pageSize),he.exitProgrammingMode.bind(he)],function(de){var oe=de?Qe.red:Qe.green;return E.debug(oe("flash complete.")),E.serialPort.close(),b(de)})})};function xe(B){return xe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},xe(B)}const Fe=function(B,b,E){var D=function(W){if(W=W||{},this.options={board:W.board||"uno",serialPort:W.serialPort||null,debug:W.debug||!1,megaDebug:W.megaDebug||!1,port:W.port||"",manualReset:W.manualReset||!1,disableVerify:W.disableVerify||!1},this.options.debug===!0?this.debug=this.options.debug=console.log.bind(console):typeof this.options.debug=="function"?this.debug=this.options.debug=this.options.debug:this.debug=this.options.debug=function(){},xe(this.options.board)==="object"){var he=Object.getOwnPropertyNames(this.options.board);he.length===1&&he[0]==="name"&&(this.options.board=this.options.board.name)}if(typeof this.options.board=="string"&&(this.options.board=B[this.options.board]),this.options.board&&!this.options.board.manualReset&&(this.options.board.manualReset=this.options.manualReset),this.options.board&&!this.options.board.disableVerify&&(this.options.board.disableVerify=this.options.disableVerify),this.connection=new b(this.options),this.options.board){var de=E[this.options.board.protocol]||function(){};this.protocol=new de({board:this.options.board,connection:this.connection,debug:this.debug,megaDebug:this.options.megaDebug})}U.call(this)};return se(D,U),D.prototype._validateBoard=function(W){if(xe(this.options.board)!=="object")return W(new Error('"'+this.options.board+'" is not a supported board type.'));if(this.protocol.chip)return this.options.port||this.options.board.name!=="pro-mini"?W(null):W(new Error("using a pro-mini, please specify the port in your options."));var he="not a supported programming protocol: "+this.options.board.protocol;return W(new Error(he))},D.prototype.flash=function(W,he){var de=this;de._validateBoard(function(oe){if(oe)return he(oe);de.connection._init(function(le){if(le)return he(le);de.protocol._upload(W,he)})})},D.prototype.listPorts=D.listPorts=D.prototype.list=D.list=function(W){return b.prototype._listPorts(W)},D.listKnownBoards=function(){return Object.keys(B).filter(function(W){var he=B[W].aliases;return!he||!~he.indexOf(W)})},D.prototype.tools=R,D},Ve=Fe(j,Je,{stk500v1:ve,stk500v2:Pe});var m=function(B,b,E,D){return new(E||(E=Promise))(function(W,he){function de(ie){try{le(D.next(ie))}catch(ae){he(ae)}}function oe(ie){try{le(D.throw(ie))}catch(ae){he(ae)}}function le(ie){var ae;ie.done?W(ie.value):(ae=ie.value,ae instanceof E?ae:new E(function(Ne){Ne(ae)})).then(de,oe)}le((D=D.apply(B,[])).next())})};const I=()=>{};function h(B){return new Promise(b=>{setTimeout(b,B)})}var u=function(B,b,E,D){return new(E||(E=Promise))(function(W,he){function de(ie){try{le(D.next(ie))}catch(ae){he(ae)}}function oe(ie){try{le(D.throw(ie))}catch(ae){he(ae)}}function le(ie){var ae;ie.done?W(ie.value):(ae=ie.value,ae instanceof E?ae:new E(function(Ne){Ne(ae)})).then(de,oe)}le((D=D.apply(B,[])).next())})};class p{constructor({logger:b,serialPort:E}){this.logger=b,this.usbSerialPort=new M(E,{baudRate:1200})}call(){return u(this,void 0,void 0,function*(){this.logger.debug("Starting CDC reset"),yield this.usbSerialPort.open(),this.logger.debug("Opening port"),yield h(500),yield this.usbSerialPort.close(),this.logger.debug("Port closed"),yield h(2e3)})}}var L=function(B,b,E,D){return new(E||(E=Promise))(function(W,he){function de(ie){try{le(D.next(ie))}catch(ae){he(ae)}}function oe(ie){try{le(D.throw(ie))}catch(ae){he(ae)}}function le(ie){var ae;ie.done?W(ie.value):(ae=ie.value,ae instanceof E?ae:new E(function(Ne){Ne(ae)})).then(de,oe)}le((D=D.apply(B,[])).next())})};function J(B){const b=`000000000${B.toString(16)}`;return b.substring(b.length-8)}function ge(B){return ge=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},ge(B)}function we(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */we=function(){return B};var B={},b=Object.prototype,E=b.hasOwnProperty,D=typeof Symbol=="function"?Symbol:{},W=D.iterator||"@@iterator",he=D.asyncIterator||"@@asyncIterator",de=D.toStringTag||"@@toStringTag";function oe(C,x,re){return Object.defineProperty(C,x,{value:re,enumerable:!0,configurable:!0,writable:!0}),C[x]}try{oe({},"")}catch{oe=function(x,re,pe){return x[re]=pe}}function le(C,x,re,pe){var ee=x&&x.prototype instanceof Ne?x:Ne,Be=Object.create(ee.prototype),De=new Tt(pe||[]);return Be._invoke=function(qe,tt,be){var $e="suspendedStart";return function(Ye,Ut){if($e==="executing")throw new Error("Generator is already running");if($e==="completed"){if(Ye==="throw")throw Ut;return Mt()}for(be.method=Ye,be.arg=Ut;;){var Ot=be.delegate;if(Ot){var gt=ut(Ot,be);if(gt){if(gt===ae)continue;return gt}}if(be.method==="next")be.sent=be._sent=be.arg;else if(be.method==="throw"){if($e==="suspendedStart")throw $e="completed",be.arg;be.dispatchException(be.arg)}else be.method==="return"&&be.abrupt("return",be.arg);$e="executing";var dt=ie(qe,tt,be);if(dt.type==="normal"){if($e=be.done?"completed":"suspendedYield",dt.arg===ae)continue;return{value:dt.arg,done:be.done}}dt.type==="throw"&&($e="completed",be.method="throw",be.arg=dt.arg)}}}(C,re,De),Be}function ie(C,x,re){try{return{type:"normal",arg:C.call(x,re)}}catch(pe){return{type:"throw",arg:pe}}}B.wrap=le;var ae={};function Ne(){}function Me(){}function Ce(){}var Ue={};oe(Ue,W,function(){return this});var _e=Object.getPrototypeOf,Ge=_e&&_e(_e(Rt([])));Ge&&Ge!==b&&E.call(Ge,W)&&(Ue=Ge);var Ke=Ce.prototype=Ne.prototype=Object.create(Ue);function kt(C){["next","throw","return"].forEach(function(x){oe(C,x,function(re){return this._invoke(x,re)})})}function it(C,x){function re(ee,Be,De,qe){var tt=ie(C[ee],C,Be);if(tt.type!=="throw"){var be=tt.arg,$e=be.value;return $e&&ge($e)=="object"&&E.call($e,"__await")?x.resolve($e.__await).then(function(Ye){re("next",Ye,De,qe)},function(Ye){re("throw",Ye,De,qe)}):x.resolve($e).then(function(Ye){be.value=Ye,De(be)},function(Ye){return re("throw",Ye,De,qe)})}qe(tt.arg)}var pe;this._invoke=function(ee,Be){function De(){return new x(function(qe,tt){re(ee,Be,qe,tt)})}return pe=pe?pe.then(De,De):De()}}function ut(C,x){var re=C.iterator[x.method];if(re===void 0){if(x.delegate=null,x.method==="throw"){if(C.iterator.return&&(x.method="return",x.arg=void 0,ut(C,x),x.method==="throw"))return ae;x.method="throw",x.arg=new TypeError("The iterator does not provide a 'throw' method")}return ae}var pe=ie(re,C.iterator,x.arg);if(pe.type==="throw")return x.method="throw",x.arg=pe.arg,x.delegate=null,ae;var ee=pe.arg;return ee?ee.done?(x[C.resultName]=ee.value,x.next=C.nextLoc,x.method!=="return"&&(x.method="next",x.arg=void 0),x.delegate=null,ae):ee:(x.method="throw",x.arg=new TypeError("iterator result is not an object"),x.delegate=null,ae)}function Yt(C){var x={tryLoc:C[0]};1 in C&&(x.catchLoc=C[1]),2 in C&&(x.finallyLoc=C[2],x.afterLoc=C[3]),this.tryEntries.push(x)}function It(C){var x=C.completion||{};x.type="normal",delete x.arg,C.completion=x}function Tt(C){this.tryEntries=[{tryLoc:"root"}],C.forEach(Yt,this),this.reset(!0)}function Rt(C){if(C){var x=C[W];if(x)return x.call(C);if(typeof C.next=="function")return C;if(!isNaN(C.length)){var re=-1,pe=function ee(){for(;++re<C.length;)if(E.call(C,re))return ee.value=C[re],ee.done=!1,ee;return ee.value=void 0,ee.done=!0,ee};return pe.next=pe}}return{next:Mt}}function Mt(){return{value:void 0,done:!0}}return Me.prototype=Ce,oe(Ke,"constructor",Ce),oe(Ce,"constructor",Me),Me.displayName=oe(Ce,de,"GeneratorFunction"),B.isGeneratorFunction=function(C){var x=typeof C=="function"&&C.constructor;return!!x&&(x===Me||(x.displayName||x.name)==="GeneratorFunction")},B.mark=function(C){return Object.setPrototypeOf?Object.setPrototypeOf(C,Ce):(C.__proto__=Ce,oe(C,de,"GeneratorFunction")),C.prototype=Object.create(Ke),C},B.awrap=function(C){return{__await:C}},kt(it.prototype),oe(it.prototype,he,function(){return this}),B.AsyncIterator=it,B.async=function(C,x,re,pe,ee){ee===void 0&&(ee=Promise);var Be=new it(le(C,x,re,pe),ee);return B.isGeneratorFunction(x)?Be:Be.next().then(function(De){return De.done?De.value:Be.next()})},kt(Ke),oe(Ke,de,"Generator"),oe(Ke,W,function(){return this}),oe(Ke,"toString",function(){return"[object Generator]"}),B.keys=function(C){var x=[];for(var re in C)x.push(re);return x.reverse(),function pe(){for(;x.length;){var ee=x.pop();if(ee in C)return pe.value=ee,pe.done=!1,pe}return pe.done=!0,pe}},B.values=Rt,Tt.prototype={constructor:Tt,reset:function(C){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(It),!C)for(var x in this)x.charAt(0)==="t"&&E.call(this,x)&&!isNaN(+x.slice(1))&&(this[x]=void 0)},stop:function(){this.done=!0;var C=this.tryEntries[0].completion;if(C.type==="throw")throw C.arg;return this.rval},dispatchException:function(C){if(this.done)throw C;var x=this;function re(tt,be){return Be.type="throw",Be.arg=C,x.next=tt,be&&(x.method="next",x.arg=void 0),!!be}for(var pe=this.tryEntries.length-1;pe>=0;--pe){var ee=this.tryEntries[pe],Be=ee.completion;if(ee.tryLoc==="root")return re("end");if(ee.tryLoc<=this.prev){var De=E.call(ee,"catchLoc"),qe=E.call(ee,"finallyLoc");if(De&&qe){if(this.prev<ee.catchLoc)return re(ee.catchLoc,!0);if(this.prev<ee.finallyLoc)return re(ee.finallyLoc)}else if(De){if(this.prev<ee.catchLoc)return re(ee.catchLoc,!0)}else{if(!qe)throw new Error("try statement without catch or finally");if(this.prev<ee.finallyLoc)return re(ee.finallyLoc)}}}},abrupt:function(C,x){for(var re=this.tryEntries.length-1;re>=0;--re){var pe=this.tryEntries[re];if(pe.tryLoc<=this.prev&&E.call(pe,"finallyLoc")&&this.prev<pe.finallyLoc){var ee=pe;break}}ee&&(C==="break"||C==="continue")&&ee.tryLoc<=x&&x<=ee.finallyLoc&&(ee=null);var Be=ee?ee.completion:{};return Be.type=C,Be.arg=x,ee?(this.method="next",this.next=ee.finallyLoc,ae):this.complete(Be)},complete:function(C,x){if(C.type==="throw")throw C.arg;return C.type==="break"||C.type==="continue"?this.next=C.arg:C.type==="return"?(this.rval=this.arg=C.arg,this.method="return",this.next="end"):C.type==="normal"&&x&&(this.next=x),ae},finish:function(C){for(var x=this.tryEntries.length-1;x>=0;--x){var re=this.tryEntries[x];if(re.finallyLoc===C)return this.complete(re.completion,re.afterLoc),It(re),ae}},catch:function(C){for(var x=this.tryEntries.length-1;x>=0;--x){var re=this.tryEntries[x];if(re.tryLoc===C){var pe=re.completion;if(pe.type==="throw"){var ee=pe.arg;It(re)}return ee}}throw new Error("illegal catch attempt")},delegateYield:function(C,x,re){return this.delegate={iterator:Rt(C),resultName:x,nextLoc:re},this.method==="next"&&(this.arg=void 0),ae}},B}function We(B,b,E,D,W,he,de){try{var oe=B[he](de),le=oe.value}catch(ie){return void E(ie)}oe.done?b(le):Promise.resolve(le).then(D,W)}function et(B){return function(){var b=this,E=arguments;return new Promise(function(D,W){var he=B.apply(b,E);function de(le){We(he,D,W,de,oe,"next",le)}function oe(le){We(he,D,W,de,oe,"throw",le)}de(void 0)})}}function rt(B,b){if(!(B instanceof b))throw new TypeError("Cannot call a class as a function")}function xt(B,b){for(var E=0;E<b.length;E++){var D=b[E];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(B,D.key,D)}}var mt=function(){function B(he){var de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new TextDecoder;rt(this,B),this.reader=he,this.decoder=de,this.buffer=[],this.index=0}var b,E,D,W;return b=B,E=[{key:"startReading",value:(W=et(we().mark(function he(){var de,oe,le;return we().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return ie.prev=1,ie.next=4,this.reader.read();case 4:if(de=ie.sent,oe=de.value,!de.done){ie.next=11;break}return this.reader.releaseLock(),console.debug("Reader done"),ie.abrupt("break",20);case 11:oe&&(le=this.decoder.decode(oe),this.buffer.push(le),console.debug("Received Value: ".concat(le))),ie.next=18;break;case 14:return ie.prev=14,ie.t0=ie.catch(1),console.warn("An error occurred while reading;",ie.t0),ie.abrupt("break",20);case 18:ie.next=0;break;case 20:case"end":return ie.stop()}},he,this,[[1,14]])})),function(){return W.apply(this,arguments)})},{key:"timedRead",value:(D=et(we().mark(function he(de,oe){var le,ie;return we().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:le=!0,ie="",setTimeout(function(){le=!1},oe);case 3:if(!le){ae.next=10;break}return this.index<this.buffer.length&&(ie+=this.buffer[this.index],this.index+=1),ie.length>=de&&(le=!1),ae.next=8,h(0);case 8:ae.next=3;break;case 10:return ae.abrupt("return",ie);case 11:case"end":return ae.stop()}},he,this)})),function(he,de){return D.apply(this,arguments)})},{key:"cancel",value:function(){return this.reader.cancel()}}],E&&xt(b.prototype,E),Object.defineProperty(b,"prototype",{writable:!1}),B}();function Yr(B){return Yr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},Yr(B)}function fn(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */fn=function(){return B};var B={},b=Object.prototype,E=b.hasOwnProperty,D=typeof Symbol=="function"?Symbol:{},W=D.iterator||"@@iterator",he=D.asyncIterator||"@@asyncIterator",de=D.toStringTag||"@@toStringTag";function oe(C,x,re){return Object.defineProperty(C,x,{value:re,enumerable:!0,configurable:!0,writable:!0}),C[x]}try{oe({},"")}catch{oe=function(x,re,pe){return x[re]=pe}}function le(C,x,re,pe){var ee=x&&x.prototype instanceof Ne?x:Ne,Be=Object.create(ee.prototype),De=new Tt(pe||[]);return Be._invoke=function(qe,tt,be){var $e="suspendedStart";return function(Ye,Ut){if($e==="executing")throw new Error("Generator is already running");if($e==="completed"){if(Ye==="throw")throw Ut;return Mt()}for(be.method=Ye,be.arg=Ut;;){var Ot=be.delegate;if(Ot){var gt=ut(Ot,be);if(gt){if(gt===ae)continue;return gt}}if(be.method==="next")be.sent=be._sent=be.arg;else if(be.method==="throw"){if($e==="suspendedStart")throw $e="completed",be.arg;be.dispatchException(be.arg)}else be.method==="return"&&be.abrupt("return",be.arg);$e="executing";var dt=ie(qe,tt,be);if(dt.type==="normal"){if($e=be.done?"completed":"suspendedYield",dt.arg===ae)continue;return{value:dt.arg,done:be.done}}dt.type==="throw"&&($e="completed",be.method="throw",be.arg=dt.arg)}}}(C,re,De),Be}function ie(C,x,re){try{return{type:"normal",arg:C.call(x,re)}}catch(pe){return{type:"throw",arg:pe}}}B.wrap=le;var ae={};function Ne(){}function Me(){}function Ce(){}var Ue={};oe(Ue,W,function(){return this});var _e=Object.getPrototypeOf,Ge=_e&&_e(_e(Rt([])));Ge&&Ge!==b&&E.call(Ge,W)&&(Ue=Ge);var Ke=Ce.prototype=Ne.prototype=Object.create(Ue);function kt(C){["next","throw","return"].forEach(function(x){oe(C,x,function(re){return this._invoke(x,re)})})}function it(C,x){function re(ee,Be,De,qe){var tt=ie(C[ee],C,Be);if(tt.type!=="throw"){var be=tt.arg,$e=be.value;return $e&&Yr($e)=="object"&&E.call($e,"__await")?x.resolve($e.__await).then(function(Ye){re("next",Ye,De,qe)},function(Ye){re("throw",Ye,De,qe)}):x.resolve($e).then(function(Ye){be.value=Ye,De(be)},function(Ye){return re("throw",Ye,De,qe)})}qe(tt.arg)}var pe;this._invoke=function(ee,Be){function De(){return new x(function(qe,tt){re(ee,Be,qe,tt)})}return pe=pe?pe.then(De,De):De()}}function ut(C,x){var re=C.iterator[x.method];if(re===void 0){if(x.delegate=null,x.method==="throw"){if(C.iterator.return&&(x.method="return",x.arg=void 0,ut(C,x),x.method==="throw"))return ae;x.method="throw",x.arg=new TypeError("The iterator does not provide a 'throw' method")}return ae}var pe=ie(re,C.iterator,x.arg);if(pe.type==="throw")return x.method="throw",x.arg=pe.arg,x.delegate=null,ae;var ee=pe.arg;return ee?ee.done?(x[C.resultName]=ee.value,x.next=C.nextLoc,x.method!=="return"&&(x.method="next",x.arg=void 0),x.delegate=null,ae):ee:(x.method="throw",x.arg=new TypeError("iterator result is not an object"),x.delegate=null,ae)}function Yt(C){var x={tryLoc:C[0]};1 in C&&(x.catchLoc=C[1]),2 in C&&(x.finallyLoc=C[2],x.afterLoc=C[3]),this.tryEntries.push(x)}function It(C){var x=C.completion||{};x.type="normal",delete x.arg,C.completion=x}function Tt(C){this.tryEntries=[{tryLoc:"root"}],C.forEach(Yt,this),this.reset(!0)}function Rt(C){if(C){var x=C[W];if(x)return x.call(C);if(typeof C.next=="function")return C;if(!isNaN(C.length)){var re=-1,pe=function ee(){for(;++re<C.length;)if(E.call(C,re))return ee.value=C[re],ee.done=!1,ee;return ee.value=void 0,ee.done=!0,ee};return pe.next=pe}}return{next:Mt}}function Mt(){return{value:void 0,done:!0}}return Me.prototype=Ce,oe(Ke,"constructor",Ce),oe(Ce,"constructor",Me),Me.displayName=oe(Ce,de,"GeneratorFunction"),B.isGeneratorFunction=function(C){var x=typeof C=="function"&&C.constructor;return!!x&&(x===Me||(x.displayName||x.name)==="GeneratorFunction")},B.mark=function(C){return Object.setPrototypeOf?Object.setPrototypeOf(C,Ce):(C.__proto__=Ce,oe(C,de,"GeneratorFunction")),C.prototype=Object.create(Ke),C},B.awrap=function(C){return{__await:C}},kt(it.prototype),oe(it.prototype,he,function(){return this}),B.AsyncIterator=it,B.async=function(C,x,re,pe,ee){ee===void 0&&(ee=Promise);var Be=new it(le(C,x,re,pe),ee);return B.isGeneratorFunction(x)?Be:Be.next().then(function(De){return De.done?De.value:Be.next()})},kt(Ke),oe(Ke,de,"Generator"),oe(Ke,W,function(){return this}),oe(Ke,"toString",function(){return"[object Generator]"}),B.keys=function(C){var x=[];for(var re in C)x.push(re);return x.reverse(),function pe(){for(;x.length;){var ee=x.pop();if(ee in C)return pe.value=ee,pe.done=!1,pe}return pe.done=!0,pe}},B.values=Rt,Tt.prototype={constructor:Tt,reset:function(C){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(It),!C)for(var x in this)x.charAt(0)==="t"&&E.call(this,x)&&!isNaN(+x.slice(1))&&(this[x]=void 0)},stop:function(){this.done=!0;var C=this.tryEntries[0].completion;if(C.type==="throw")throw C.arg;return this.rval},dispatchException:function(C){if(this.done)throw C;var x=this;function re(tt,be){return Be.type="throw",Be.arg=C,x.next=tt,be&&(x.method="next",x.arg=void 0),!!be}for(var pe=this.tryEntries.length-1;pe>=0;--pe){var ee=this.tryEntries[pe],Be=ee.completion;if(ee.tryLoc==="root")return re("end");if(ee.tryLoc<=this.prev){var De=E.call(ee,"catchLoc"),qe=E.call(ee,"finallyLoc");if(De&&qe){if(this.prev<ee.catchLoc)return re(ee.catchLoc,!0);if(this.prev<ee.finallyLoc)return re(ee.finallyLoc)}else if(De){if(this.prev<ee.catchLoc)return re(ee.catchLoc,!0)}else{if(!qe)throw new Error("try statement without catch or finally");if(this.prev<ee.finallyLoc)return re(ee.finallyLoc)}}}},abrupt:function(C,x){for(var re=this.tryEntries.length-1;re>=0;--re){var pe=this.tryEntries[re];if(pe.tryLoc<=this.prev&&E.call(pe,"finallyLoc")&&this.prev<pe.finallyLoc){var ee=pe;break}}ee&&(C==="break"||C==="continue")&&ee.tryLoc<=x&&x<=ee.finallyLoc&&(ee=null);var Be=ee?ee.completion:{};return Be.type=C,Be.arg=x,ee?(this.method="next",this.next=ee.finallyLoc,ae):this.complete(Be)},complete:function(C,x){if(C.type==="throw")throw C.arg;return C.type==="break"||C.type==="continue"?this.next=C.arg:C.type==="return"?(this.rval=this.arg=C.arg,this.method="return",this.next="end"):C.type==="normal"&&x&&(this.next=x),ae},finish:function(C){for(var x=this.tryEntries.length-1;x>=0;--x){var re=this.tryEntries[x];if(re.finallyLoc===C)return this.complete(re.completion,re.afterLoc),It(re),ae}},catch:function(C){for(var x=this.tryEntries.length-1;x>=0;--x){var re=this.tryEntries[x];if(re.tryLoc===C){var pe=re.completion;if(pe.type==="throw"){var ee=pe.arg;It(re)}return ee}}throw new Error("illegal catch attempt")},delegateYield:function(C,x,re){return this.delegate={iterator:Rt(C),resultName:x,nextLoc:re},this.method==="next"&&(this.arg=void 0),ae}},B}function hn(B,b,E,D,W,he,de){try{var oe=B[he](de),le=oe.value}catch(ie){return void E(ie)}oe.done?b(le):Promise.resolve(le).then(D,W)}function Ur(B,b){for(var E=0;E<b.length;E++){var D=b[E];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(B,D.key,D)}}function Ir(B,b){return Ir=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(E,D){return E.__proto__=D,E},Ir(B,b)}function Gs(B){var b=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var E,D=Nn(B);if(b){var W=Nn(this).constructor;E=Reflect.construct(D,arguments,W)}else E=D.apply(this,arguments);return Vs(this,E)}}function Vs(B,b){if(b&&(Yr(b)==="object"||typeof b=="function"))return b;if(b!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(E){if(E===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E}(B)}function Nn(B){return Nn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(b){return b.__proto__||Object.getPrototypeOf(b)},Nn(B)}var qs=function(B){(function(oe,le){if(typeof le!="function"&&le!==null)throw new TypeError("Super expression must either be null or a function");oe.prototype=Object.create(le&&le.prototype,{constructor:{value:oe,writable:!0,configurable:!0}}),Object.defineProperty(oe,"prototype",{writable:!1}),le&&Ir(oe,le)})(de,B);var b,E,D,W,he=Gs(de);function de(oe,le){var ie;return function(ae,Ne){if(!(ae instanceof Ne))throw new TypeError("Cannot call a class as a function")}(this,de),(ie=he.call(this,oe,le)).className="SambaUSBSerialPort",ie}return b=de,E=[{key:"open",value:(D=fn().mark(function oe(){var le;return fn().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return ie.prev=0,ie.next=3,this._getPort();case 3:if(this.port=ie.sent,!this.isOpen){ie.next=6;break}return ie.abrupt("return");case 6:return ie.next=8,this.port.open(this.requestOptions||{baudRate:this.baudRate||57600});case 8:return ie.next=10,this.port.writable.getWriter();case 10:this.writer=ie.sent,this.reader=new mt(this.port.readable.getReader()),(le=this.reader)===null||le===void 0||le.startReading(),this.isOpen=!0;case 14:return ie.prev=14,this.isOpen=!1,ie.finish(14);case 17:case"end":return ie.stop()}},oe,this,[[0,,14,17]])}),W=function(){var oe=this,le=arguments;return new Promise(function(ie,ae){var Ne=D.apply(oe,le);function Me(Ue){hn(Ne,ie,ae,Me,Ce,"next",Ue)}function Ce(Ue){hn(Ne,ie,ae,Me,Ce,"throw",Ue)}Me(void 0)})},function(){return W.apply(this,arguments)})},{key:"timedRead",value:function(oe,le){var ie;return(ie=this.reader)===null||ie===void 0?void 0:ie.timedRead(oe,le)}}],E&&Ur(b.prototype,E),Object.defineProperty(b,"prototype",{writable:!1}),de}(M),hr=function(B,b,E,D){return new(E||(E=Promise))(function(W,he){function de(ie){try{le(D.next(ie))}catch(ae){he(ae)}}function oe(ie){try{le(D.throw(ie))}catch(ae){he(ae)}}function le(ie){var ae;ie.done?W(ie.value):(ae=ie.value,ae instanceof E?ae:new E(function(Ne){Ne(ae)})).then(de,oe)}le((D=D.apply(B,[])).next())})};const Hs=100,Ws=1e3,ui=5e3,io=8192,oo=536891392,so=1024,Zs=3758157068,Ks=100270084;class ao{constructor({logger:b,serialPort:E}){this.serialPort=new qs(E,{requestOptions:{baudRate:921600,dataBits:8,parity:"none",stopBits:1,flowControl:"none",bufferSize:4096,autoOpen:!1}}),this.logger=b}flash(b,E){return hr(this,void 0,void 0,function*(){E&&(yield this.cdcReset()),yield this.openSerial(),yield this.setBinaryMode(),yield this.checkVersion(),yield this.erase(),yield this.writeBinary(b),yield this.reset(),yield this.waitForPort()})}waitForPort(){return hr(this,void 0,void 0,function*(){yield h(500)})}reset(){return hr(this,void 0,void 0,function*(){this.logger.debug("SamBaFlasher#reset"),yield this.serialPort.writeText(`W${J(Zs)},${J(Ks)}#`)})}erase(){return hr(this,void 0,void 0,function*(){if(this.logger.debug("SamBaFlasher#erase"),yield this.serialPort.writeText(`X${J(io)}#`),!(yield this.checkResponse(`X
\r`,ui)))throw new Error("Error while erasing")})}checkVersion(){return hr(this,void 0,void 0,function*(){this.logger.debug("SamBaFlasher#checkVersion"),yield this.serialPort.writeText("V#"),this.logger.info(yield this.serialPort.timedRead(256,Hs))})}setBinaryMode(){return hr(this,void 0,void 0,function*(){if(this.logger.debug("SamBaFlasher#setBinaryMode"),yield this.serialPort.writeText("N#"),!(yield this.checkResponse(`
\r`,Ws)))throw new Error("Error setting binary mode")})}openSerial(){return hr(this,void 0,void 0,function*(){this.logger.debug("SamBaFlasher#openSerial"),yield this.serialPort.open()})}writeBinary(b){return hr(this,void 0,void 0,function*(){let E=0;do{let D=b.length-E;D>so&&(D=so);const W=b.slice(E,E+D);if(yield this.serialPort.writeText(`S${J(oo)},${J(D)}#`),yield this.serialPort.write(W),yield h(5),yield this.serialPort.writeText(`Y${J(oo)},0#`),!(yield this.checkResponse(`Y
\r`,5*ui)))throw new Error(`Error while writing chunk ${(100*E/b.length).toFixed(0)}%`);if(yield this.serialPort.writeText(`Y${J(io+E)},${J(D)}#`),!(yield this.checkResponse(`Y
\r`,ui)))throw new Error("Error while writing buffer");E+=D}while(E<b.length)})}checkResponse(b,E){return hr(this,void 0,void 0,function*(){const{length:D}=b;yield h(10);const W=yield this.serialPort.timedRead(D,E);return this.logger.debug(`Checked Response.
${encodeURIComponent(b)} :expected
${encodeURIComponent(W)} :actual`),W===b})}cdcReset(){return hr(this,void 0,void 0,function*(){const b=yield this.serialPort._getPort();yield new p({logger:this.logger,serialPort:b}).call()})}}var Ys=function(B,b,E,D){return new(E||(E=Promise))(function(W,he){function de(ie){try{le(D.next(ie))}catch(ae){he(ae)}}function oe(ie){try{le(D.throw(ie))}catch(ae){he(ae)}}function le(ie){var ae;ie.done?W(ie.value):(ae=ie.value,ae instanceof E?ae:new E(function(Ne){Ne(ae)})).then(de,oe)}le((D=D.apply(B,[])).next())})};function _t(B){return _t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},_t(B)}function dn(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */dn=function(){return B};var B={},b=Object.prototype,E=b.hasOwnProperty,D=typeof Symbol=="function"?Symbol:{},W=D.iterator||"@@iterator",he=D.asyncIterator||"@@asyncIterator",de=D.toStringTag||"@@toStringTag";function oe(C,x,re){return Object.defineProperty(C,x,{value:re,enumerable:!0,configurable:!0,writable:!0}),C[x]}try{oe({},"")}catch{oe=function(x,re,pe){return x[re]=pe}}function le(C,x,re,pe){var ee=x&&x.prototype instanceof Ne?x:Ne,Be=Object.create(ee.prototype),De=new Tt(pe||[]);return Be._invoke=function(qe,tt,be){var $e="suspendedStart";return function(Ye,Ut){if($e==="executing")throw new Error("Generator is already running");if($e==="completed"){if(Ye==="throw")throw Ut;return Mt()}for(be.method=Ye,be.arg=Ut;;){var Ot=be.delegate;if(Ot){var gt=ut(Ot,be);if(gt){if(gt===ae)continue;return gt}}if(be.method==="next")be.sent=be._sent=be.arg;else if(be.method==="throw"){if($e==="suspendedStart")throw $e="completed",be.arg;be.dispatchException(be.arg)}else be.method==="return"&&be.abrupt("return",be.arg);$e="executing";var dt=ie(qe,tt,be);if(dt.type==="normal"){if($e=be.done?"completed":"suspendedYield",dt.arg===ae)continue;return{value:dt.arg,done:be.done}}dt.type==="throw"&&($e="completed",be.method="throw",be.arg=dt.arg)}}}(C,re,De),Be}function ie(C,x,re){try{return{type:"normal",arg:C.call(x,re)}}catch(pe){return{type:"throw",arg:pe}}}B.wrap=le;var ae={};function Ne(){}function Me(){}function Ce(){}var Ue={};oe(Ue,W,function(){return this});var _e=Object.getPrototypeOf,Ge=_e&&_e(_e(Rt([])));Ge&&Ge!==b&&E.call(Ge,W)&&(Ue=Ge);var Ke=Ce.prototype=Ne.prototype=Object.create(Ue);function kt(C){["next","throw","return"].forEach(function(x){oe(C,x,function(re){return this._invoke(x,re)})})}function it(C,x){function re(ee,Be,De,qe){var tt=ie(C[ee],C,Be);if(tt.type!=="throw"){var be=tt.arg,$e=be.value;return $e&&_t($e)=="object"&&E.call($e,"__await")?x.resolve($e.__await).then(function(Ye){re("next",Ye,De,qe)},function(Ye){re("throw",Ye,De,qe)}):x.resolve($e).then(function(Ye){be.value=Ye,De(be)},function(Ye){return re("throw",Ye,De,qe)})}qe(tt.arg)}var pe;this._invoke=function(ee,Be){function De(){return new x(function(qe,tt){re(ee,Be,qe,tt)})}return pe=pe?pe.then(De,De):De()}}function ut(C,x){var re=C.iterator[x.method];if(re===void 0){if(x.delegate=null,x.method==="throw"){if(C.iterator.return&&(x.method="return",x.arg=void 0,ut(C,x),x.method==="throw"))return ae;x.method="throw",x.arg=new TypeError("The iterator does not provide a 'throw' method")}return ae}var pe=ie(re,C.iterator,x.arg);if(pe.type==="throw")return x.method="throw",x.arg=pe.arg,x.delegate=null,ae;var ee=pe.arg;return ee?ee.done?(x[C.resultName]=ee.value,x.next=C.nextLoc,x.method!=="return"&&(x.method="next",x.arg=void 0),x.delegate=null,ae):ee:(x.method="throw",x.arg=new TypeError("iterator result is not an object"),x.delegate=null,ae)}function Yt(C){var x={tryLoc:C[0]};1 in C&&(x.catchLoc=C[1]),2 in C&&(x.finallyLoc=C[2],x.afterLoc=C[3]),this.tryEntries.push(x)}function It(C){var x=C.completion||{};x.type="normal",delete x.arg,C.completion=x}function Tt(C){this.tryEntries=[{tryLoc:"root"}],C.forEach(Yt,this),this.reset(!0)}function Rt(C){if(C){var x=C[W];if(x)return x.call(C);if(typeof C.next=="function")return C;if(!isNaN(C.length)){var re=-1,pe=function ee(){for(;++re<C.length;)if(E.call(C,re))return ee.value=C[re],ee.done=!1,ee;return ee.value=void 0,ee.done=!0,ee};return pe.next=pe}}return{next:Mt}}function Mt(){return{value:void 0,done:!0}}return Me.prototype=Ce,oe(Ke,"constructor",Ce),oe(Ce,"constructor",Me),Me.displayName=oe(Ce,de,"GeneratorFunction"),B.isGeneratorFunction=function(C){var x=typeof C=="function"&&C.constructor;return!!x&&(x===Me||(x.displayName||x.name)==="GeneratorFunction")},B.mark=function(C){return Object.setPrototypeOf?Object.setPrototypeOf(C,Ce):(C.__proto__=Ce,oe(C,de,"GeneratorFunction")),C.prototype=Object.create(Ke),C},B.awrap=function(C){return{__await:C}},kt(it.prototype),oe(it.prototype,he,function(){return this}),B.AsyncIterator=it,B.async=function(C,x,re,pe,ee){ee===void 0&&(ee=Promise);var Be=new it(le(C,x,re,pe),ee);return B.isGeneratorFunction(x)?Be:Be.next().then(function(De){return De.done?De.value:Be.next()})},kt(Ke),oe(Ke,de,"Generator"),oe(Ke,W,function(){return this}),oe(Ke,"toString",function(){return"[object Generator]"}),B.keys=function(C){var x=[];for(var re in C)x.push(re);return x.reverse(),function pe(){for(;x.length;){var ee=x.pop();if(ee in C)return pe.value=ee,pe.done=!1,pe}return pe.done=!0,pe}},B.values=Rt,Tt.prototype={constructor:Tt,reset:function(C){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(It),!C)for(var x in this)x.charAt(0)==="t"&&E.call(this,x)&&!isNaN(+x.slice(1))&&(this[x]=void 0)},stop:function(){this.done=!0;var C=this.tryEntries[0].completion;if(C.type==="throw")throw C.arg;return this.rval},dispatchException:function(C){if(this.done)throw C;var x=this;function re(tt,be){return Be.type="throw",Be.arg=C,x.next=tt,be&&(x.method="next",x.arg=void 0),!!be}for(var pe=this.tryEntries.length-1;pe>=0;--pe){var ee=this.tryEntries[pe],Be=ee.completion;if(ee.tryLoc==="root")return re("end");if(ee.tryLoc<=this.prev){var De=E.call(ee,"catchLoc"),qe=E.call(ee,"finallyLoc");if(De&&qe){if(this.prev<ee.catchLoc)return re(ee.catchLoc,!0);if(this.prev<ee.finallyLoc)return re(ee.finallyLoc)}else if(De){if(this.prev<ee.catchLoc)return re(ee.catchLoc,!0)}else{if(!qe)throw new Error("try statement without catch or finally");if(this.prev<ee.finallyLoc)return re(ee.finallyLoc)}}}},abrupt:function(C,x){for(var re=this.tryEntries.length-1;re>=0;--re){var pe=this.tryEntries[re];if(pe.tryLoc<=this.prev&&E.call(pe,"finallyLoc")&&this.prev<pe.finallyLoc){var ee=pe;break}}ee&&(C==="break"||C==="continue")&&ee.tryLoc<=x&&x<=ee.finallyLoc&&(ee=null);var Be=ee?ee.completion:{};return Be.type=C,Be.arg=x,ee?(this.method="next",this.next=ee.finallyLoc,ae):this.complete(Be)},complete:function(C,x){if(C.type==="throw")throw C.arg;return C.type==="break"||C.type==="continue"?this.next=C.arg:C.type==="return"?(this.rval=this.arg=C.arg,this.method="return",this.next="end"):C.type==="normal"&&x&&(this.next=x),ae},finish:function(C){for(var x=this.tryEntries.length-1;x>=0;--x){var re=this.tryEntries[x];if(re.finallyLoc===C)return this.complete(re.completion,re.afterLoc),It(re),ae}},catch:function(C){for(var x=this.tryEntries.length-1;x>=0;--x){var re=this.tryEntries[x];if(re.tryLoc===C){var pe=re.completion;if(pe.type==="throw"){var ee=pe.arg;It(re)}return ee}}throw new Error("illegal catch attempt")},delegateYield:function(C,x,re){return this.delegate={iterator:Rt(C),resultName:x,nextLoc:re},this.method==="next"&&(this.arg=void 0),ae}},B}function co(B,b,E,D,W,he,de){try{var oe=B[he](de),le=oe.value}catch(ie){return void E(ie)}oe.done?b(le):Promise.resolve(le).then(D,W)}function li(B){return function(){var b=this,E=arguments;return new Promise(function(D,W){var he=B.apply(b,E);function de(le){co(he,D,W,de,oe,"next",le)}function oe(le){co(he,D,W,de,oe,"throw",le)}de(void 0)})}}function pn(B,b){if(!(B instanceof b))throw new TypeError("Cannot call a class as a function")}function fi(B,b){for(var E=0;E<b.length;E++){var D=b[E];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(B,D.key,D)}}var uo=function(){function B(he){var de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new TextDecoder;pn(this,B),this.reader=he,this.decoder=de,this.buffer=[],this.index=0}var b,E,D,W;return b=B,E=[{key:"startReading",value:(W=li(dn().mark(function he(){var de,oe,le;return dn().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return ie.prev=1,ie.next=4,this.reader.read();case 4:if(de=ie.sent,oe=de.value,!de.done){ie.next=11;break}return this.reader.releaseLock(),console.debug("Reader done"),ie.abrupt("break",20);case 11:oe&&(le=this.decoder.decode(oe),this.buffer.push(le),console.debug("Received Value: ".concat(le))),ie.next=18;break;case 14:return ie.prev=14,ie.t0=ie.catch(1),console.warn("An error occurred while reading;",ie.t0),ie.abrupt("break",20);case 18:ie.next=0;break;case 20:case"end":return ie.stop()}},he,this,[[1,14]])})),function(){return W.apply(this,arguments)})},{key:"timedRead",value:(D=li(dn().mark(function he(de,oe){var le,ie;return dn().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:le=!0,ie="",setTimeout(function(){le=!1},oe);case 3:if(!le){ae.next=10;break}return this.index<this.buffer.length&&(ie+=this.buffer[this.index],this.index+=1),ie.length>=de&&(le=!1),ae.next=8,h(0);case 8:ae.next=3;break;case 10:return ae.abrupt("return",ie);case 11:case"end":return ae.stop()}},he,this)})),function(he,de){return D.apply(this,arguments)})},{key:"cancel",value:function(){return this.reader.cancel()}}],E&&fi(b.prototype,E),Object.defineProperty(b,"prototype",{writable:!1}),B}();function mn(B){return mn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},mn(B)}function gn(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */gn=function(){return B};var B={},b=Object.prototype,E=b.hasOwnProperty,D=typeof Symbol=="function"?Symbol:{},W=D.iterator||"@@iterator",he=D.asyncIterator||"@@asyncIterator",de=D.toStringTag||"@@toStringTag";function oe(C,x,re){return Object.defineProperty(C,x,{value:re,enumerable:!0,configurable:!0,writable:!0}),C[x]}try{oe({},"")}catch{oe=function(x,re,pe){return x[re]=pe}}function le(C,x,re,pe){var ee=x&&x.prototype instanceof Ne?x:Ne,Be=Object.create(ee.prototype),De=new Tt(pe||[]);return Be._invoke=function(qe,tt,be){var $e="suspendedStart";return function(Ye,Ut){if($e==="executing")throw new Error("Generator is already running");if($e==="completed"){if(Ye==="throw")throw Ut;return Mt()}for(be.method=Ye,be.arg=Ut;;){var Ot=be.delegate;if(Ot){var gt=ut(Ot,be);if(gt){if(gt===ae)continue;return gt}}if(be.method==="next")be.sent=be._sent=be.arg;else if(be.method==="throw"){if($e==="suspendedStart")throw $e="completed",be.arg;be.dispatchException(be.arg)}else be.method==="return"&&be.abrupt("return",be.arg);$e="executing";var dt=ie(qe,tt,be);if(dt.type==="normal"){if($e=be.done?"completed":"suspendedYield",dt.arg===ae)continue;return{value:dt.arg,done:be.done}}dt.type==="throw"&&($e="completed",be.method="throw",be.arg=dt.arg)}}}(C,re,De),Be}function ie(C,x,re){try{return{type:"normal",arg:C.call(x,re)}}catch(pe){return{type:"throw",arg:pe}}}B.wrap=le;var ae={};function Ne(){}function Me(){}function Ce(){}var Ue={};oe(Ue,W,function(){return this});var _e=Object.getPrototypeOf,Ge=_e&&_e(_e(Rt([])));Ge&&Ge!==b&&E.call(Ge,W)&&(Ue=Ge);var Ke=Ce.prototype=Ne.prototype=Object.create(Ue);function kt(C){["next","throw","return"].forEach(function(x){oe(C,x,function(re){return this._invoke(x,re)})})}function it(C,x){function re(ee,Be,De,qe){var tt=ie(C[ee],C,Be);if(tt.type!=="throw"){var be=tt.arg,$e=be.value;return $e&&mn($e)=="object"&&E.call($e,"__await")?x.resolve($e.__await).then(function(Ye){re("next",Ye,De,qe)},function(Ye){re("throw",Ye,De,qe)}):x.resolve($e).then(function(Ye){be.value=Ye,De(be)},function(Ye){return re("throw",Ye,De,qe)})}qe(tt.arg)}var pe;this._invoke=function(ee,Be){function De(){return new x(function(qe,tt){re(ee,Be,qe,tt)})}return pe=pe?pe.then(De,De):De()}}function ut(C,x){var re=C.iterator[x.method];if(re===void 0){if(x.delegate=null,x.method==="throw"){if(C.iterator.return&&(x.method="return",x.arg=void 0,ut(C,x),x.method==="throw"))return ae;x.method="throw",x.arg=new TypeError("The iterator does not provide a 'throw' method")}return ae}var pe=ie(re,C.iterator,x.arg);if(pe.type==="throw")return x.method="throw",x.arg=pe.arg,x.delegate=null,ae;var ee=pe.arg;return ee?ee.done?(x[C.resultName]=ee.value,x.next=C.nextLoc,x.method!=="return"&&(x.method="next",x.arg=void 0),x.delegate=null,ae):ee:(x.method="throw",x.arg=new TypeError("iterator result is not an object"),x.delegate=null,ae)}function Yt(C){var x={tryLoc:C[0]};1 in C&&(x.catchLoc=C[1]),2 in C&&(x.finallyLoc=C[2],x.afterLoc=C[3]),this.tryEntries.push(x)}function It(C){var x=C.completion||{};x.type="normal",delete x.arg,C.completion=x}function Tt(C){this.tryEntries=[{tryLoc:"root"}],C.forEach(Yt,this),this.reset(!0)}function Rt(C){if(C){var x=C[W];if(x)return x.call(C);if(typeof C.next=="function")return C;if(!isNaN(C.length)){var re=-1,pe=function ee(){for(;++re<C.length;)if(E.call(C,re))return ee.value=C[re],ee.done=!1,ee;return ee.value=void 0,ee.done=!0,ee};return pe.next=pe}}return{next:Mt}}function Mt(){return{value:void 0,done:!0}}return Me.prototype=Ce,oe(Ke,"constructor",Ce),oe(Ce,"constructor",Me),Me.displayName=oe(Ce,de,"GeneratorFunction"),B.isGeneratorFunction=function(C){var x=typeof C=="function"&&C.constructor;return!!x&&(x===Me||(x.displayName||x.name)==="GeneratorFunction")},B.mark=function(C){return Object.setPrototypeOf?Object.setPrototypeOf(C,Ce):(C.__proto__=Ce,oe(C,de,"GeneratorFunction")),C.prototype=Object.create(Ke),C},B.awrap=function(C){return{__await:C}},kt(it.prototype),oe(it.prototype,he,function(){return this}),B.AsyncIterator=it,B.async=function(C,x,re,pe,ee){ee===void 0&&(ee=Promise);var Be=new it(le(C,x,re,pe),ee);return B.isGeneratorFunction(x)?Be:Be.next().then(function(De){return De.done?De.value:Be.next()})},kt(Ke),oe(Ke,de,"Generator"),oe(Ke,W,function(){return this}),oe(Ke,"toString",function(){return"[object Generator]"}),B.keys=function(C){var x=[];for(var re in C)x.push(re);return x.reverse(),function pe(){for(;x.length;){var ee=x.pop();if(ee in C)return pe.value=ee,pe.done=!1,pe}return pe.done=!0,pe}},B.values=Rt,Tt.prototype={constructor:Tt,reset:function(C){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(It),!C)for(var x in this)x.charAt(0)==="t"&&E.call(this,x)&&!isNaN(+x.slice(1))&&(this[x]=void 0)},stop:function(){this.done=!0;var C=this.tryEntries[0].completion;if(C.type==="throw")throw C.arg;return this.rval},dispatchException:function(C){if(this.done)throw C;var x=this;function re(tt,be){return Be.type="throw",Be.arg=C,x.next=tt,be&&(x.method="next",x.arg=void 0),!!be}for(var pe=this.tryEntries.length-1;pe>=0;--pe){var ee=this.tryEntries[pe],Be=ee.completion;if(ee.tryLoc==="root")return re("end");if(ee.tryLoc<=this.prev){var De=E.call(ee,"catchLoc"),qe=E.call(ee,"finallyLoc");if(De&&qe){if(this.prev<ee.catchLoc)return re(ee.catchLoc,!0);if(this.prev<ee.finallyLoc)return re(ee.finallyLoc)}else if(De){if(this.prev<ee.catchLoc)return re(ee.catchLoc,!0)}else{if(!qe)throw new Error("try statement without catch or finally");if(this.prev<ee.finallyLoc)return re(ee.finallyLoc)}}}},abrupt:function(C,x){for(var re=this.tryEntries.length-1;re>=0;--re){var pe=this.tryEntries[re];if(pe.tryLoc<=this.prev&&E.call(pe,"finallyLoc")&&this.prev<pe.finallyLoc){var ee=pe;break}}ee&&(C==="break"||C==="continue")&&ee.tryLoc<=x&&x<=ee.finallyLoc&&(ee=null);var Be=ee?ee.completion:{};return Be.type=C,Be.arg=x,ee?(this.method="next",this.next=ee.finallyLoc,ae):this.complete(Be)},complete:function(C,x){if(C.type==="throw")throw C.arg;return C.type==="break"||C.type==="continue"?this.next=C.arg:C.type==="return"?(this.rval=this.arg=C.arg,this.method="return",this.next="end"):C.type==="normal"&&x&&(this.next=x),ae},finish:function(C){for(var x=this.tryEntries.length-1;x>=0;--x){var re=this.tryEntries[x];if(re.finallyLoc===C)return this.complete(re.completion,re.afterLoc),It(re),ae}},catch:function(C){for(var x=this.tryEntries.length-1;x>=0;--x){var re=this.tryEntries[x];if(re.tryLoc===C){var pe=re.completion;if(pe.type==="throw"){var ee=pe.arg;It(re)}return ee}}throw new Error("illegal catch attempt")},delegateYield:function(C,x,re){return this.delegate={iterator:Rt(C),resultName:x,nextLoc:re},this.method==="next"&&(this.arg=void 0),ae}},B}function lo(B,b,E,D,W,he,de){try{var oe=B[he](de),le=oe.value}catch(ie){return void E(ie)}oe.done?b(le):Promise.resolve(le).then(D,W)}function fo(B){return function(){var b=this,E=arguments;return new Promise(function(D,W){var he=B.apply(b,E);function de(le){lo(he,D,W,de,oe,"next",le)}function oe(le){lo(he,D,W,de,oe,"throw",le)}de(void 0)})}}function Xs(B,b){for(var E=0;E<b.length;E++){var D=b[E];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(B,D.key,D)}}function hi(B,b){return hi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(E,D){return E.__proto__=D,E},hi(B,b)}function Qs(B){var b=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var E,D=Ln(B);if(b){var W=Ln(this).constructor;E=Reflect.construct(D,arguments,W)}else E=D.apply(this,arguments);return Js(this,E)}}function Js(B,b){if(b&&(mn(b)==="object"||typeof b=="function"))return b;if(b!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(E){if(E===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E}(B)}function Ln(B){return Ln=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(b){return b.__proto__||Object.getPrototypeOf(b)},Ln(B)}var ea=function(B){(function(oe,le){if(typeof le!="function"&&le!==null)throw new TypeError("Super expression must either be null or a function");oe.prototype=Object.create(le&&le.prototype,{constructor:{value:oe,writable:!0,configurable:!0}}),Object.defineProperty(oe,"prototype",{writable:!1}),le&&hi(oe,le)})(de,B);var b,E,D,W,he=Qs(de);function de(oe,le){var ie;return function(ae,Ne){if(!(ae instanceof Ne))throw new TypeError("Cannot call a class as a function")}(this,de),(ie=he.call(this,oe,le)).className="SambaUSBSerialPort",ie}return b=de,E=[{key:"open",value:(W=fo(gn().mark(function oe(){var le;return gn().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return ie.prev=0,ie.next=3,this._getPort();case 3:if(this.port=ie.sent,!this.isOpen){ie.next=6;break}return ie.abrupt("return");case 6:return ie.next=8,this.port.open(this.requestOptions||{baudRate:this.baudRate||57600});case 8:return ie.next=10,this.port.writable.getWriter();case 10:this.writer=ie.sent,this.reader=new uo(this.port.readable.getReader()),this.isOpen=!0,(le=this.reader)===null||le===void 0||le.startReading(),ie.next=20;break;case 16:ie.prev=16,ie.t0=ie.catch(0),console.error(ie.t0),this.isOpen=!1;case 20:case"end":return ie.stop()}},oe,this,[[0,16]])})),function(){return W.apply(this,arguments)})},{key:"close",value:(D=fo(gn().mark(function oe(){var le,ie;return gn().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:if(this.isOpen){ae.next=2;break}return ae.abrupt("return");case 2:return ae.prev=2,ae.next=5,(le=this.reader)===null||le===void 0?void 0:le.cancel();case 5:return ae.next=7,(ie=this.writer)===null||ie===void 0?void 0:ie.close();case 7:return ae.next=9,this.port.close();case 9:this.isOpen=!1,ae.next=15;break;case 12:ae.prev=12,ae.t0=ae.catch(2),console.error(ae.t0);case 15:case"end":return ae.stop()}},oe,this,[[2,12]])})),function(){return D.apply(this,arguments)})},{key:"timedRead",value:function(oe,le){var ie;return(ie=this.reader)===null||ie===void 0?void 0:ie.timedRead(oe,le)}}],E&&Xs(b.prototype,E),Object.defineProperty(b,"prototype",{writable:!1}),de}(M);function Tr(B){const b=`000000000${B.toString(16)}`;return b.substring(b.length-8)}var Kt=function(B,b,E,D){return new(E||(E=Promise))(function(W,he){function de(ie){try{le(D.next(ie))}catch(ae){he(ae)}}function oe(ie){try{le(D.throw(ie))}catch(ae){he(ae)}}function le(ie){var ae;ie.done?W(ie.value):(ae=ie.value,ae instanceof E?ae:new E(function(Ne){Ne(ae)})).then(de,oe)}le((D=D.apply(B,[])).next())})};const ho=100,ta=1e3,di=5e3,sr=0,vn=20480,Rr=4096;class Dt{constructor({logger:b,serialPort:E}){this.serialPort=new ea(E,{requestOptions:{baudRate:230400,dataBits:8,parity:"none",stopBits:1,flowControl:"none",bufferSize:4096,autoOpen:!1}}),this.logger=b}flash(b,E){return Kt(this,void 0,void 0,function*(){E&&(yield this.cdcReset()),yield this.openSerial(),yield this.checkVersion(),yield this.identifyChip(),yield this.setBinaryMode(),yield this.erase(),yield this.writeBinary(b),yield this.reset(),yield this.waitForPort(),yield this.closeSerial()})}waitForPort(){return Kt(this,void 0,void 0,function*(){yield h(500)})}reset(){return Kt(this,void 0,void 0,function*(){this.logger.debug("SamBaFlasher#reset"),yield this.serialPort.writeText("K#")})}erase(){return Kt(this,void 0,void 0,function*(){if(this.logger.debug("SamBaFlasher#erase"),yield this.serialPort.writeText(`X${Tr(sr)}#`),!(yield this.checkResponse(`X
\r`,di)))throw new Error("Error while erasing")})}checkVersion(){return Kt(this,void 0,void 0,function*(){this.logger.debug("SamBaFlasher#checkVersion"),yield this.serialPort.writeText("V#"),this.logger.debug(yield this.serialPort.timedRead(256,ho))})}identifyChip(){return Kt(this,void 0,void 0,function*(){this.logger.debug("SamBaFlasher#identifyChip"),yield this.serialPort.writeText("I#"),this.logger.debug(yield this.serialPort.timedRead(256,ho))})}setBinaryMode(){return Kt(this,void 0,void 0,function*(){if(this.logger.debug("SamBaFlasher#setBinaryMode"),yield this.serialPort.writeText("N#"),!(yield this.checkResponse(`
\r`,ta)))throw new Error("Error setting binary mode")})}forgetSerial(){return Kt(this,void 0,void 0,function*(){this.logger.debug("SamBaFlasher#forgetSerial"),yield this.serialPort.forget()})}closeSerial(){return Kt(this,void 0,void 0,function*(){this.logger.debug("SamBaFlasher#closeSerial"),yield this.serialPort.close()})}openSerial(){return Kt(this,void 0,void 0,function*(){this.logger.debug("SamBaFlasher#openSerial"),yield this.serialPort.open()})}writeBinary(b){return Kt(this,void 0,void 0,function*(){let E=0;do{let D=b.length-E;D>Rr&&(D=Rr);const W=b.slice(E,E+D);if(yield this.serialPort.writeText(`S${Tr(vn)},${Tr(D)}#`),yield this.serialPort.write(W),yield h(5),yield this.serialPort.writeText(`Y${Tr(vn)},0#`),!(yield this.checkResponse(`Y
\r`,5*di)))throw new Error(`Error while writing chunk ${(100*E/b.length).toFixed(0)}%`);if(yield this.serialPort.writeText(`Y${Tr(sr+E)},${Tr(D)}#`),!(yield this.checkResponse(`Y
\r`,di)))throw new Error("Error while writing buffer");E+=D}while(E<b.length)})}checkResponse(b,E){return Kt(this,void 0,void 0,function*(){const{length:D}=b;yield h(10);const W=yield this.serialPort.timedRead(D,E);return this.logger.debug(`Checked Response.
${encodeURIComponent(b)} :expected
${encodeURIComponent(W)} :actual`),W===b})}cdcReset(){return Kt(this,void 0,void 0,function*(){const b=yield this.serialPort._getPort();yield new p({logger:this.logger,serialPort:b}).call()})}}var ra=function(B,b,E,D){return new(E||(E=Promise))(function(W,he){function de(ie){try{le(D.next(ie))}catch(ae){he(ae)}}function oe(ie){try{le(D.throw(ie))}catch(ae){he(ae)}}function le(ie){var ae;ie.done?W(ie.value):(ae=ie.value,ae instanceof E?ae:new E(function(Ne){Ne(ae)})).then(de,oe)}le((D=D.apply(B,[])).next())})};function pi(B){return pi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},pi(B)}function Et(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Et=function(){return B};var B={},b=Object.prototype,E=b.hasOwnProperty,D=typeof Symbol=="function"?Symbol:{},W=D.iterator||"@@iterator",he=D.asyncIterator||"@@asyncIterator",de=D.toStringTag||"@@toStringTag";function oe(C,x,re){return Object.defineProperty(C,x,{value:re,enumerable:!0,configurable:!0,writable:!0}),C[x]}try{oe({},"")}catch{oe=function(x,re,pe){return x[re]=pe}}function le(C,x,re,pe){var ee=x&&x.prototype instanceof Ne?x:Ne,Be=Object.create(ee.prototype),De=new Tt(pe||[]);return Be._invoke=function(qe,tt,be){var $e="suspendedStart";return function(Ye,Ut){if($e==="executing")throw new Error("Generator is already running");if($e==="completed"){if(Ye==="throw")throw Ut;return Mt()}for(be.method=Ye,be.arg=Ut;;){var Ot=be.delegate;if(Ot){var gt=ut(Ot,be);if(gt){if(gt===ae)continue;return gt}}if(be.method==="next")be.sent=be._sent=be.arg;else if(be.method==="throw"){if($e==="suspendedStart")throw $e="completed",be.arg;be.dispatchException(be.arg)}else be.method==="return"&&be.abrupt("return",be.arg);$e="executing";var dt=ie(qe,tt,be);if(dt.type==="normal"){if($e=be.done?"completed":"suspendedYield",dt.arg===ae)continue;return{value:dt.arg,done:be.done}}dt.type==="throw"&&($e="completed",be.method="throw",be.arg=dt.arg)}}}(C,re,De),Be}function ie(C,x,re){try{return{type:"normal",arg:C.call(x,re)}}catch(pe){return{type:"throw",arg:pe}}}B.wrap=le;var ae={};function Ne(){}function Me(){}function Ce(){}var Ue={};oe(Ue,W,function(){return this});var _e=Object.getPrototypeOf,Ge=_e&&_e(_e(Rt([])));Ge&&Ge!==b&&E.call(Ge,W)&&(Ue=Ge);var Ke=Ce.prototype=Ne.prototype=Object.create(Ue);function kt(C){["next","throw","return"].forEach(function(x){oe(C,x,function(re){return this._invoke(x,re)})})}function it(C,x){function re(ee,Be,De,qe){var tt=ie(C[ee],C,Be);if(tt.type!=="throw"){var be=tt.arg,$e=be.value;return $e&&pi($e)=="object"&&E.call($e,"__await")?x.resolve($e.__await).then(function(Ye){re("next",Ye,De,qe)},function(Ye){re("throw",Ye,De,qe)}):x.resolve($e).then(function(Ye){be.value=Ye,De(be)},function(Ye){return re("throw",Ye,De,qe)})}qe(tt.arg)}var pe;this._invoke=function(ee,Be){function De(){return new x(function(qe,tt){re(ee,Be,qe,tt)})}return pe=pe?pe.then(De,De):De()}}function ut(C,x){var re=C.iterator[x.method];if(re===void 0){if(x.delegate=null,x.method==="throw"){if(C.iterator.return&&(x.method="return",x.arg=void 0,ut(C,x),x.method==="throw"))return ae;x.method="throw",x.arg=new TypeError("The iterator does not provide a 'throw' method")}return ae}var pe=ie(re,C.iterator,x.arg);if(pe.type==="throw")return x.method="throw",x.arg=pe.arg,x.delegate=null,ae;var ee=pe.arg;return ee?ee.done?(x[C.resultName]=ee.value,x.next=C.nextLoc,x.method!=="return"&&(x.method="next",x.arg=void 0),x.delegate=null,ae):ee:(x.method="throw",x.arg=new TypeError("iterator result is not an object"),x.delegate=null,ae)}function Yt(C){var x={tryLoc:C[0]};1 in C&&(x.catchLoc=C[1]),2 in C&&(x.finallyLoc=C[2],x.afterLoc=C[3]),this.tryEntries.push(x)}function It(C){var x=C.completion||{};x.type="normal",delete x.arg,C.completion=x}function Tt(C){this.tryEntries=[{tryLoc:"root"}],C.forEach(Yt,this),this.reset(!0)}function Rt(C){if(C){var x=C[W];if(x)return x.call(C);if(typeof C.next=="function")return C;if(!isNaN(C.length)){var re=-1,pe=function ee(){for(;++re<C.length;)if(E.call(C,re))return ee.value=C[re],ee.done=!1,ee;return ee.value=void 0,ee.done=!0,ee};return pe.next=pe}}return{next:Mt}}function Mt(){return{value:void 0,done:!0}}return Me.prototype=Ce,oe(Ke,"constructor",Ce),oe(Ce,"constructor",Me),Me.displayName=oe(Ce,de,"GeneratorFunction"),B.isGeneratorFunction=function(C){var x=typeof C=="function"&&C.constructor;return!!x&&(x===Me||(x.displayName||x.name)==="GeneratorFunction")},B.mark=function(C){return Object.setPrototypeOf?Object.setPrototypeOf(C,Ce):(C.__proto__=Ce,oe(C,de,"GeneratorFunction")),C.prototype=Object.create(Ke),C},B.awrap=function(C){return{__await:C}},kt(it.prototype),oe(it.prototype,he,function(){return this}),B.AsyncIterator=it,B.async=function(C,x,re,pe,ee){ee===void 0&&(ee=Promise);var Be=new it(le(C,x,re,pe),ee);return B.isGeneratorFunction(x)?Be:Be.next().then(function(De){return De.done?De.value:Be.next()})},kt(Ke),oe(Ke,de,"Generator"),oe(Ke,W,function(){return this}),oe(Ke,"toString",function(){return"[object Generator]"}),B.keys=function(C){var x=[];for(var re in C)x.push(re);return x.reverse(),function pe(){for(;x.length;){var ee=x.pop();if(ee in C)return pe.value=ee,pe.done=!1,pe}return pe.done=!0,pe}},B.values=Rt,Tt.prototype={constructor:Tt,reset:function(C){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(It),!C)for(var x in this)x.charAt(0)==="t"&&E.call(this,x)&&!isNaN(+x.slice(1))&&(this[x]=void 0)},stop:function(){this.done=!0;var C=this.tryEntries[0].completion;if(C.type==="throw")throw C.arg;return this.rval},dispatchException:function(C){if(this.done)throw C;var x=this;function re(tt,be){return Be.type="throw",Be.arg=C,x.next=tt,be&&(x.method="next",x.arg=void 0),!!be}for(var pe=this.tryEntries.length-1;pe>=0;--pe){var ee=this.tryEntries[pe],Be=ee.completion;if(ee.tryLoc==="root")return re("end");if(ee.tryLoc<=this.prev){var De=E.call(ee,"catchLoc"),qe=E.call(ee,"finallyLoc");if(De&&qe){if(this.prev<ee.catchLoc)return re(ee.catchLoc,!0);if(this.prev<ee.finallyLoc)return re(ee.finallyLoc)}else if(De){if(this.prev<ee.catchLoc)return re(ee.catchLoc,!0)}else{if(!qe)throw new Error("try statement without catch or finally");if(this.prev<ee.finallyLoc)return re(ee.finallyLoc)}}}},abrupt:function(C,x){for(var re=this.tryEntries.length-1;re>=0;--re){var pe=this.tryEntries[re];if(pe.tryLoc<=this.prev&&E.call(pe,"finallyLoc")&&this.prev<pe.finallyLoc){var ee=pe;break}}ee&&(C==="break"||C==="continue")&&ee.tryLoc<=x&&x<=ee.finallyLoc&&(ee=null);var Be=ee?ee.completion:{};return Be.type=C,Be.arg=x,ee?(this.method="next",this.next=ee.finallyLoc,ae):this.complete(Be)},complete:function(C,x){if(C.type==="throw")throw C.arg;return C.type==="break"||C.type==="continue"?this.next=C.arg:C.type==="return"?(this.rval=this.arg=C.arg,this.method="return",this.next="end"):C.type==="normal"&&x&&(this.next=x),ae},finish:function(C){for(var x=this.tryEntries.length-1;x>=0;--x){var re=this.tryEntries[x];if(re.finallyLoc===C)return this.complete(re.completion,re.afterLoc),It(re),ae}},catch:function(C){for(var x=this.tryEntries.length-1;x>=0;--x){var re=this.tryEntries[x];if(re.tryLoc===C){var pe=re.completion;if(pe.type==="throw"){var ee=pe.arg;It(re)}return ee}}throw new Error("illegal catch attempt")},delegateYield:function(C,x,re){return this.delegate={iterator:Rt(C),resultName:x,nextLoc:re},this.method==="next"&&(this.arg=void 0),ae}},B}function $r(B,b,E,D,W,he,de){try{var oe=B[he](de),le=oe.value}catch(ie){return void E(ie)}oe.done?b(le):Promise.resolve(le).then(D,W)}function dr(B){return function(){var b=this,E=arguments;return new Promise(function(D,W){var he=B.apply(b,E);function de(le){$r(he,D,W,de,oe,"next",le)}function oe(le){$r(he,D,W,de,oe,"throw",le)}de(void 0)})}}function pr(B,b){var E=typeof Symbol<"u"&&B[Symbol.iterator]||B["@@iterator"];if(!E){if(Array.isArray(B)||(E=function(le,ie){if(le){if(typeof le=="string")return mi(le,ie);var ae=Object.prototype.toString.call(le).slice(8,-1);if(ae==="Object"&&le.constructor&&(ae=le.constructor.name),ae==="Map"||ae==="Set")return Array.from(le);if(ae==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ae))return mi(le,ie)}}(B))||b){E&&(B=E);var D=0,W=function(){};return{s:W,n:function(){return D>=B.length?{done:!0}:{done:!1,value:B[D++]}},e:function(le){throw le},f:W}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var he,de=!0,oe=!1;return{s:function(){E=E.call(B)},n:function(){var le=E.next();return de=le.done,le},e:function(le){oe=!0,he=le},f:function(){try{de||E.return==null||E.return()}finally{if(oe)throw he}}}}function mi(B,b){(b==null||b>B.length)&&(b=B.length);for(var E=0,D=new Array(b);E<b;E++)D[E]=B[E];return D}var mr=function(){var B={DETACH:0,DNLOAD:1,UPLOAD:2,GETSTATUS:3,CLRSTATUS:4,GETSTATE:5,ABORT:6,appIDLE:0,appDETACH:1,dfuIDLE:2,dfuDNLOAD_SYNC:3,dfuDNBUSY:4,dfuDNLOAD_IDLE:5,dfuMANIFEST_SYNC:6,dfuMANIFEST:7,dfuMANIFEST_WAIT_RESET:8,dfuUPLOAD_IDLE:9,dfuERROR:10,STATUS_OK:0,Device:function(b,E){this.device_=b,this.settings=E,this.intfNumber=E.interface.interfaceNumber},findDeviceDfuInterfaces:function(b){var E,D=[],W=pr(b.configurations);try{for(W.s();!(E=W.n()).done;){var he,de=E.value,oe=pr(de.interfaces);try{for(oe.s();!(he=oe.n()).done;){var le,ie=he.value,ae=pr(ie.alternates);try{for(ae.s();!(le=ae.n()).done;){var Ne=le.value;if(Ne.interfaceClass===254&&Ne.interfaceSubclass===1&&(Ne.interfaceProtocol===1||Ne.interfaceProtocol===2)){var Me={configuration:de,interface:ie,alternate:Ne,name:Ne.interfaceName};D.push(Me)}}}catch(Ce){ae.e(Ce)}finally{ae.f()}}}catch(Ce){oe.e(Ce)}finally{oe.f()}}}catch(Ce){W.e(Ce)}finally{W.f()}return D},findAllDfuInterfaces:function(){return navigator.usb.getDevices().then(function(b){var E,D=[],W=pr(b);try{for(W.s();!(E=W.n()).done;){var he,de=E.value,oe=pr(B.findDeviceDfuInterfaces(de));try{for(oe.s();!(he=oe.n()).done;){var le=he.value;D.push(new B.Device(de,le))}}catch(ie){oe.e(ie)}finally{oe.f()}}}catch(ie){W.e(ie)}finally{W.f()}return D})}};return B.Device.prototype.logDebug=function(b){console.debug(b)},B.Device.prototype.logInfo=function(b){console.log(b)},B.Device.prototype.logWarning=function(b){console.log(b)},B.Device.prototype.logError=function(b){console.log(b)},B.Device.prototype.logProgress=function(b,E){console.log(E===void 0?b:"".concat(b,"/").concat(E))},B.Device.prototype.open=dr(Et().mark(function b(){var E,D,W,he;return Et().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return de.next=2,this.device_.open();case 2:if(E=this.settings.configuration.configurationValue,this.device_.configuration!==null&&this.device_.configuration.configurationValue===E){de.next=6;break}return de.next=6,this.device_.selectConfiguration(E);case 6:if(D=this.settings.interface.interfaceNumber,this.device_.configuration.interfaces[D].claimed){de.next=10;break}return de.next=10,this.device_.claimInterface(D);case 10:if(W=this.settings.alternate.alternateSetting,!((he=this.device_.configuration.interfaces[D]).alternate===null||he.alternate.alternateSetting!==W||he.alternates.length>1)){de.next=25;break}return de.prev=13,de.next=16,this.device_.selectAlternateInterface(D,W);case 16:de.next=25;break;case 18:if(de.prev=18,de.t0=de.catch(13),he.alternate.alternateSetting!==W||!de.t0.endsWith("Unable to set device interface.")){de.next=24;break}this.logWarning("Redundant SET_INTERFACE request to select altSetting ".concat(W," failed")),de.next=25;break;case 24:throw de.t0;case 25:case"end":return de.stop()}},b,this,[[13,18]])})),B.Device.prototype.close=dr(Et().mark(function b(){return Et().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.prev=0,E.next=3,this.device_.close();case 3:E.next=8;break;case 5:E.prev=5,E.t0=E.catch(0),console.log(E.t0);case 8:case"end":return E.stop()}},b,this,[[0,5]])})),B.Device.prototype.readDeviceDescriptor=function(){return this.device_.controlTransferIn({requestType:"standard",recipient:"device",request:6,value:256,index:0},18).then(function(b){return b.status==="ok"?Promise.resolve(b.data):Promise.reject(b.status)})},B.Device.prototype.readStringDescriptor=function(){var b=dr(Et().mark(function E(D,W){var he,de,oe,le,ie,ae;return Et().wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return W===void 0&&(W=0),he={requestType:"standard",recipient:"device",request:6,value:768|D,index:W},Ne.next=7,this.device_.controlTransferIn(he,1);case 7:if((de=Ne.sent).status!=="ok"){Ne.next=20;break}return oe=de.data.getUint8(0),Ne.next=12,this.device_.controlTransferIn(he,oe);case 12:if((de=Ne.sent).status!=="ok"){Ne.next=20;break}for(le=(oe-2)/2,ie=[],ae=0;ae<le;ae++)ie.push(de.data.getUint16(2+2*ae,!0));if(W!==0){Ne.next=19;break}return Ne.abrupt("return",ie);case 19:return Ne.abrupt("return",String.fromCharCode.apply(String,ie));case 20:throw"Failed to read string descriptor ".concat(D,": ").concat(de.status);case 21:case"end":return Ne.stop()}},E,this)}));return function(E,D){return b.apply(this,arguments)}}(),B.Device.prototype.readInterfaceNames=dr(Et().mark(function b(){var E,D,W,he,de,oe,le,ie,ae,Ne,Me,Ce,Ue,_e,Ge,Ke,kt,it;return Et().wrap(function(ut){for(;;)switch(ut.prev=ut.next){case 0:E=4,D={},W=new Set,he=0;case 4:if(!(he<this.device_.configurations.length)){ut.next=16;break}return ut.next=7,this.readConfigurationDescriptor(he);case 7:de=ut.sent,oe=B.parseConfigurationDescriptor(de),le=oe.bConfigurationValue,D[le]={},ie=pr(oe.descriptors);try{for(ie.s();!(ae=ie.n()).done;)(Ne=ae.value).bDescriptorType===E&&(Ne.bInterfaceNumber in D[le]||(D[le][Ne.bInterfaceNumber]={}),D[le][Ne.bInterfaceNumber][Ne.bAlternateSetting]=Ne.iInterface,Ne.iInterface>0&&W.add(Ne.iInterface))}catch(Yt){ie.e(Yt)}finally{ie.f()}case 13:he++,ut.next=4;break;case 16:Me={},Ce=pr(W),ut.prev=18,Ce.s();case 20:if((Ue=Ce.n()).done){ut.next=34;break}return _e=Ue.value,ut.prev=22,ut.next=25,this.readStringDescriptor(_e,1033);case 25:Me[_e]=ut.sent,ut.next=32;break;case 28:ut.prev=28,ut.t0=ut.catch(22),console.log(ut.t0),Me[_e]=null;case 32:ut.next=20;break;case 34:ut.next=39;break;case 36:ut.prev=36,ut.t1=ut.catch(18),Ce.e(ut.t1);case 39:return ut.prev=39,Ce.f(),ut.finish(39);case 42:for(Ge in D)for(Ke in D[Ge])for(kt in D[Ge][Ke])it=D[Ge][Ke][kt],D[Ge][Ke][kt]=Me[it];return ut.abrupt("return",D);case 44:case"end":return ut.stop()}},b,this,[[18,36,39,42],[22,28]])})),B.parseDeviceDescriptor=function(b){return{bLength:b.getUint8(0),bDescriptorType:b.getUint8(1),bcdUSB:b.getUint16(2,!0),bDeviceClass:b.getUint8(4),bDeviceSubClass:b.getUint8(5),bDeviceProtocol:b.getUint8(6),bMaxPacketSize:b.getUint8(7),idVendor:b.getUint16(8,!0),idProduct:b.getUint16(10,!0),bcdDevice:b.getUint16(12,!0),iManufacturer:b.getUint8(14),iProduct:b.getUint8(15),iSerialNumber:b.getUint8(16),bNumConfigurations:b.getUint8(17)}},B.parseConfigurationDescriptor=function(b){var E=new DataView(b.buffer.slice(9)),D=B.parseSubDescriptors(E);return{bLength:b.getUint8(0),bDescriptorType:b.getUint8(1),wTotalLength:b.getUint16(2,!0),bNumInterfaces:b.getUint8(4),bConfigurationValue:b.getUint8(5),iConfiguration:b.getUint8(6),bmAttributes:b.getUint8(7),bMaxPower:b.getUint8(8),descriptors:D}},B.parseInterfaceDescriptor=function(b){return{bLength:b.getUint8(0),bDescriptorType:b.getUint8(1),bInterfaceNumber:b.getUint8(2),bAlternateSetting:b.getUint8(3),bNumEndpoints:b.getUint8(4),bInterfaceClass:b.getUint8(5),bInterfaceSubClass:b.getUint8(6),bInterfaceProtocol:b.getUint8(7),iInterface:b.getUint8(8),descriptors:[]}},B.parseFunctionalDescriptor=function(b){return{bLength:b.getUint8(0),bDescriptorType:b.getUint8(1),bmAttributes:b.getUint8(2),wDetachTimeOut:b.getUint16(3,!0),wTransferSize:b.getUint16(5,!0),bcdDFUVersion:b.getUint16(7,!0)}},B.parseSubDescriptors=function(b){for(var E,D=b,W=[],he=!1;D.byteLength>2;){var de=D.getUint8(0),oe=D.getUint8(1),le=new DataView(D.buffer.slice(0,de));if(oe===4)he=(E=B.parseInterfaceDescriptor(le)).bInterfaceClass===254&&E.bInterfaceSubClass===1,W.push(E);else if(he&&oe===33){var ie=B.parseFunctionalDescriptor(le);W.push(ie),E.descriptors.push(ie)}else{var ae={bLength:de,bDescriptorType:oe,data:le};W.push(ae),E&&E.descriptors.push(ae)}D=new DataView(D.buffer.slice(de))}return W},B.Device.prototype.readConfigurationDescriptor=function(b){var E=this,D=512|b;return this.device_.controlTransferIn({requestType:"standard",recipient:"device",request:6,value:D,index:0},4).then(function(W){if(W.status==="ok"){var he=W.data.getUint16(2,!0);return E.device_.controlTransferIn({requestType:"standard",recipient:"device",request:6,value:D,index:0},he)}return Promise.reject(W.status)}).then(function(W){return W.status==="ok"?Promise.resolve(W.data):Promise.reject(W.status)})},B.Device.prototype.requestOut=function(b,E){var D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return this.device_.controlTransferOut({requestType:"class",recipient:"interface",request:b,value:D,index:this.intfNumber},E).then(function(W){return W.status==="ok"?Promise.resolve(W.bytesWritten):Promise.reject(W.status)},function(W){return Promise.reject("ControlTransferOut failed: ".concat(W))})},B.Device.prototype.requestIn=function(b,E){var D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return this.device_.controlTransferIn({requestType:"class",recipient:"interface",request:b,value:D,index:this.intfNumber},E).then(function(W){return W.status==="ok"?Promise.resolve(W.data):Promise.reject(W.status)},function(W){return Promise.reject("ControlTransferIn failed: ".concat(W))})},B.Device.prototype.detach=function(){return this.requestOut(B.DETACH,void 0,1e3)},B.Device.prototype.waitDisconnected=function(){var b=dr(Et().mark(function E(D){var W,he;return Et().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return W=this,he=this.device_,de.abrupt("return",new Promise(function(oe,le){var ie;D>0&&(ie=setTimeout(le,D));function ae(Ne){Ne.device===he&&(D>0&&clearTimeout(ie),W.disconnected=!0,navigator.usb.removeEventListener("disconnect",ae),Ne.stopPropagation(),oe(W))}navigator.usb.addEventListener("disconnect",ae)}));case 3:case"end":return de.stop()}},E,this)}));return function(E){return b.apply(this,arguments)}}(),B.Device.prototype.download=function(b,E){return this.requestOut(B.DNLOAD,b,E)},B.Device.prototype.dnload=B.Device.prototype.download,B.Device.prototype.upload=function(b,E){return this.requestIn(B.UPLOAD,b,E)},B.Device.prototype.clearStatus=function(){return this.requestOut(B.CLRSTATUS)},B.Device.prototype.clrStatus=B.Device.prototype.clearStatus,B.Device.prototype.getStatus=function(){return this.requestIn(B.GETSTATUS,6).then(function(b){return Promise.resolve({status:b.getUint8(0),pollTimeout:16777215&b.getUint32(1,!0),state:b.getUint8(4)})},function(b){return Promise.reject("DFU GETSTATUS failed: ".concat(b))})},B.Device.prototype.getState=function(){return this.requestIn(B.GETSTATE,1).then(function(b){return Promise.resolve(b.getUint8(0))},function(b){return Promise.reject("DFU GETSTATE failed: ".concat(b))})},B.Device.prototype.abort=function(){return this.requestOut(B.ABORT)},B.Device.prototype.abortToIdle=dr(Et().mark(function b(){var E;return Et().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,this.abort();case 2:return D.next=4,this.getState();case 4:if((E=D.sent)!==B.dfuERROR){D.next=11;break}return D.next=8,this.clearStatus();case 8:return D.next=10,this.getState();case 10:E=D.sent;case 11:if(E===B.dfuIDLE){D.next=13;break}throw"Failed to return to idle state after abort: state ".concat(E.state);case 13:case"end":return D.stop()}},b,this)})),B.Device.prototype.do_upload=function(){var b=dr(Et().mark(function E(D){var W,he,de,oe,le,ie,ae,Ne=arguments;return Et().wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:W=Ne.length>1&&Ne[1]!==void 0?Ne[1]:1/0,he=Ne.length>2&&Ne[2]!==void 0?Ne[2]:0,de=he,oe=[],le=0,this.logInfo("Copying data from DFU device to browser"),this.logProgress(0);case 7:return ae=Math.min(D,W-le),Me.next=10,this.upload(ae,de++);case 10:ie=Me.sent,this.logDebug("Read ".concat(ie.byteLength," bytes")),ie.byteLength>0&&(oe.push(ie),le+=ie.byteLength),Number.isFinite(W)?this.logProgress(le,W):this.logProgress(le);case 14:if(le<W&&ie.byteLength===ae){Me.next=7;break}case 15:if(le!==W){Me.next=18;break}return Me.next=18,this.abortToIdle();case 18:return this.logInfo("Read ".concat(le," bytes")),Me.abrupt("return",new Blob(oe,{type:"application/octet-stream"}));case 20:case"end":return Me.stop()}},E,this)}));return function(E){return b.apply(this,arguments)}}(),B.Device.prototype.poll_until=function(){var b=dr(Et().mark(function E(D){var W,he,de;return Et().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return de=function(le){return new Promise(function(ie,ae){he.logDebug("Sleeping for ".concat(le,"ms")),setTimeout(ie,le)})},oe.next=3,this.getStatus();case 3:W=oe.sent,he=this;case 5:if(D(W.state)||W.state===B.dfuERROR){oe.next=13;break}return oe.next=8,de(W.pollTimeout);case 8:return oe.next=10,this.getStatus();case 10:W=oe.sent,oe.next=5;break;case 13:return oe.abrupt("return",W);case 14:case"end":return oe.stop()}},E,this)}));return function(E){return b.apply(this,arguments)}}(),B.Device.prototype.poll_until_idle=function(b){return this.poll_until(function(E){return E===b})},B.Device.prototype.do_download=function(){var b=dr(Et().mark(function E(D,W,he){var de,oe,le,ie,ae,Ne,Me,Ce,Ue;return Et().wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:de=0,oe=W.byteLength,le=0,this.logInfo("Copying data from browser to DFU device"),this.logProgress(de,oe);case 5:if(!(de<oe)){_e.next=30;break}return ie=oe-de,ae=Math.min(ie,D),Ne=0,Me=void 0,_e.prev=10,_e.next=13,this.download(W.slice(de,de+ae),le++);case 13:return Ne=_e.sent,this.logDebug("Sent ".concat(Ne," bytes")),_e.next=17,this.poll_until_idle(B.dfuDNLOAD_IDLE);case 17:Me=_e.sent,_e.next=23;break;case 20:throw _e.prev=20,_e.t0=_e.catch(10),"Error during DFU download: ".concat(_e.t0);case 23:if(Me.status===B.STATUS_OK){_e.next=25;break}throw"DFU DOWNLOAD failed state=".concat(Me.state,", status=").concat(Me.status);case 25:this.logDebug("Wrote ".concat(Ne," bytes")),de+=Ne,this.logProgress(de,oe),_e.next=5;break;case 30:return this.logDebug("Sending empty block"),_e.prev=31,_e.next=34,this.download(new ArrayBuffer([]),le++);case 34:_e.next=39;break;case 36:throw _e.prev=36,_e.t1=_e.catch(31),"Error during final DFU download: ".concat(_e.t1);case 39:if(this.logInfo("Wrote ".concat(de," bytes")),this.logInfo("Manifesting new firmware"),!he){_e.next=60;break}return _e.prev=42,_e.next=45,this.poll_until(function(Ge){return Ge===B.dfuIDLE||Ge===B.dfuMANIFEST_WAIT_RESET});case 45:if((Ce=_e.sent).state===B.dfuMANIFEST_WAIT_RESET&&this.logDebug("Device transitioned to MANIFEST_WAIT_RESET even though it is manifestation tolerant"),Ce.status===B.STATUS_OK){_e.next=49;break}throw"DFU MANIFEST failed state=".concat(Ce.state,", status=").concat(Ce.status);case 49:_e.next=58;break;case 51:if(_e.prev=51,_e.t2=_e.catch(42),!_e.t2.endsWith("ControlTransferIn failed: NotFoundError: Device unavailable.")&&!_e.t2.endsWith("ControlTransferIn failed: NotFoundError: The device was disconnected.")){_e.next=57;break}this.logWarning("Unable to poll final manifestation status"),_e.next=58;break;case 57:throw"Error during DFU manifest: ".concat(_e.t2);case 58:_e.next=70;break;case 60:return _e.prev=60,_e.next=63,this.getStatus();case 63:Ue=_e.sent,this.logDebug("Final DFU status: state=".concat(Ue.state,", status=").concat(Ue.status)),_e.next=70;break;case 67:_e.prev=67,_e.t3=_e.catch(60),this.logDebug("Manifest GET_STATUS poll error: ".concat(_e.t3));case 70:return _e.prev=70,_e.next=73,this.device_.reset();case 73:_e.next=82;break;case 75:if(_e.prev=75,_e.t4=_e.catch(70),_e.t4!=="NetworkError: Unable to reset the device."&&_e.t4!=="NotFoundError: Device unavailable."&&_e.t4!=="NotFoundError: The device was disconnected."){_e.next=81;break}this.logDebug("Ignored reset error"),_e.next=82;break;case 81:throw"Error during reset for manifestation: ".concat(_e.t4);case 82:case"end":return _e.stop()}},E,this,[[10,20],[31,36],[42,51],[60,67],[70,75]])}));return function(E,D,W){return b.apply(this,arguments)}}(),B}(),Or=function(B,b,E,D){return new(E||(E=Promise))(function(W,he){function de(ie){try{le(D.next(ie))}catch(ae){he(ae)}}function oe(ie){try{le(D.throw(ie))}catch(ae){he(ae)}}function le(ie){var ae;ie.done?W(ie.value):(ae=ie.value,ae instanceof E?ae:new E(function(Ne){Ne(ae)})).then(de,oe)}le((D=D.apply(B,[])).next())})};class zr{constructor(b){this.onDisconnect=de=>{de&&this.logger.error(de)},this.connect=de=>Or(this,void 0,void 0,function*(){try{yield de.open()}catch(le){throw this.onDisconnect(le),le}let oe={};try{oe=yield function(le){return le.readConfigurationDescriptor(0).then(ie=>{const ae=mr.parseConfigurationDescriptor(ie);let Ne=null;const Me=le.settings.configuration.configurationValue;if(ae.bConfigurationValue===Me)for(let Ce=0;Ce<ae.descriptors.length;Ce+=1){const Ue=ae.descriptors[Ce];if(Ue.bDescriptorType===33&&Ue.bcdDFUVersion){Ne=Ue;break}}return Ne?{WillDetach:(8&Ne.bmAttributes)!=0,ManifestationTolerant:(4&Ne.bmAttributes)!=0,CanUpload:(2&Ne.bmAttributes)!=0,CanDnload:(1&Ne.bmAttributes)!=0,TransferSize:Ne.wTransferSize,DetachTimeOut:Ne.wDetachTimeOut,DFUVersion:Ne.bcdDFUVersion}:{}},ie=>{console.error(ie)})}(de)}catch(le){throw this.onDisconnect(le),le}return oe&&Object.keys(oe).length>0&&(de.properties=oe,oe.WillDetach,oe.ManifestationTolerant,oe.CanUpload,oe.CanDnload,oe.TransferSize,oe.DetachTimeOut,function(le){let ie=le.toString(16);for(;ie.length<4;)ie=`0${ie}`}(oe.DFUVersion),this.transferSize=oe.TransferSize,oe.CanDnload&&(this.manifestationTolerant=oe.ManifestationTolerant)),de});const{options:E,postMessage:D,fqbn:W,dialogCustomizations:he}=b;this.logger=(E==null?void 0:E.logger)||new i,this.fqbn=W,this.vid=b.vid,this.pid=b.pid,this.postMessage=D,this.dialogCustomizations=he}getCustomDialog(b){if(this.dialogCustomizations&&b<this.dialogCustomizations.length)return this.dialogCustomizations[b]}flash({filename:b,compiledSketch:E}){return Or(this,void 0,void 0,function*(){this.logger.info(`Compiling file '${b}' ...`);let D=yield T({vid:this.vid,pid:this.pid});if(!D){const de=yield N(this.getCustomDialog(0));this.vid=de.getInfo().usbVendorId||this.vid,this.pid=de.getInfo().usbProductId||this.pid,D=yield T({vid:this.vid,pid:this.pid})}if(!D)throw new Error("Cannot perform CDC reset");yield new p({logger:this.logger,serialPort:D}).call();let W=yield O(this.fqbn);if(W||(yield function(de){return v(this,void 0,void 0,function*(){if(!(yield a.From(de).confirm()))throw new Error("Permission denied");yield navigator.usb.requestDevice({filters:[]})})}(this.dialogCustomizations&&this.dialogCustomizations[0]),W=yield O(this.fqbn)),!W)throw new Error("Cannot connect USB device");const he=yield mr.findDeviceDfuInterfaces(W);if(he.length===0?this.logger.info("The selected device does not have any USB DFU interfaces."):(this.logger.info(`The selected device has ${he.length} USB DFU interfaces`),yield zr.fixInterfaceNames(W,he),this.dfuDevice=yield this.connect(new mr.Device(W,he[0]))),this.dfuDevice&&E!=null){try{(yield this.dfuDevice.getStatus()).state===mr.dfuERROR&&(yield this.dfuDevice.clearStatus())}catch{this.logger.warn("Failed to clear status")}yield this.dfuDevice.do_download(64,Buffer.from(E,"base64"),this.manifestationTolerant).then(()=>{var de;this.logger.info("Done!"),this.manifestationTolerant||(de=this.dfuDevice)===null||de===void 0||de.waitDisconnected(5e3).then(oe=>this.logger.info("Disconnected"),oe=>this.logger.error("Device unexpectedly tolerated manifestation."))},de=>{this.logger.error(de)}),yield this.dfuDevice.detach()}})}}zr.fixInterfaceNames=(B,b)=>Or(void 0,void 0,void 0,function*(){if(b.some(E=>E.name==null)){const E=new mr.Device(B,b[0]);yield E.device_.open(),yield E.device_.selectConfiguration(1);const D=yield E.readInterfaceNames();yield E.close();for(const W of b)if(W.name===null){const he=W.configuration.configurationValue,de=W.interface.interfaceNumber,oe=W.alternate.alternateSetting;W.name=D[he][de][oe]}}}),zr.findDeviceDfuInterfaces=B=>{const b=[];for(const E of B.configurations)for(const D of E.interfaces)for(const W of D.alternates)if(W.interfaceClass===254&&W.interfaceSubclass===1&&(W.interfaceProtocol===1||W.interfaceProtocol===2)){const he={configuration:E,interface:D,alternate:W,name:W.interfaceName};b.push(he)}return b};const gi={avr:class{constructor(B){const{options:b,fqbn:E,vid:D,pid:W,dialogCustomizations:he,postMessage:de}=B;this.fqbn=E,this.vid=D,this.pid=W,this.dialogCustomizations=he,this.logger=(b==null?void 0:b.logger)||new i,this.options=B.options,this.postMessage=de,this.callback=this.options.callback||I,window.match||(window.match="")}flash({filename:B,compiledSketch:b}){return m(this,void 0,void 0,function*(){this.logger.info(`compiling file '${B}'`);let E=yield T({vid:this.vid,pid:this.pid});if(!E){const D=yield N(this.dialogCustomizations?this.dialogCustomizations[0]:void 0);this.vid=D.getInfo().usbVendorId||this.vid,this.pid=D.getInfo().usbProductId||this.pid,E=yield T({vid:this.vid,pid:this.pid})}if(!E)throw new Error("Cannot find the serial port.");return new Ve({board:this.options.avr_name,serialPort:new Re(E),debug:!0,megaDebug:!0}).flash(new TextDecoder().decode(P(b)),this.callback)})}},"sam-ba":class{constructor(B){const{options:b,fqbn:E,dialogCustomizations:D,postMessage:W}=B;this.flasherOptions=b,this.logger=(b==null?void 0:b.logger)||new i,this.fqbn=E,this.vid=B.vid,this.pid=B.pid,this.postMessage=W,this.dialogCustomizations=D}flash({filename:B,compiledSketch:b}){return Ys(this,void 0,void 0,function*(){this.logger.info(`compiling file '${B}'`);let E=yield T({vid:this.vid,pid:this.pid});if(E){yield new p({logger:this.logger,serialPort:E}).call();const W=yield N(this.getCustomDialog(1));if(this.vid=W.getInfo().usbVendorId||this.vid,this.pid=W.getInfo().usbProductId||this.pid,E=yield T({vid:this.vid,pid:this.pid}),E)return new ao({logger:this.logger,serialPort:E}).flash(P(b),!1);throw new Error("Cannot find the serial port.")}const D=yield N(this.getCustomDialog(0));if(this.vid=D.getInfo().usbVendorId||this.vid,this.pid=D.getInfo().usbProductId||this.pid,E=yield T({vid:this.vid,pid:this.pid}),E){yield new p({logger:this.logger,serialPort:E}).call();const W=yield N(this.getCustomDialog(1));if(this.vid=W.getInfo().usbVendorId||this.vid,this.pid=W.getInfo().usbProductId||this.pid,E=yield T({vid:this.vid,pid:this.pid}),E)return new ao({logger:this.logger,serialPort:E}).flash(P(b),!1);throw new Error("Cannot find the serial port.")}throw new Error("Some unexpeted error occurred.")})}getCustomDialog(B){if(this.dialogCustomizations&&B<this.dialogCustomizations.length)return this.dialogCustomizations[B]}},"sam-ba-renesas":class{constructor(B){const{options:b,fqbn:E,dialogCustomizations:D,postMessage:W}=B;this.flasherOptions=b,this.logger=(b==null?void 0:b.logger)||new i,this.fqbn=E,this.pid=B.pid,this.vid=B.vid,this.postMessage=W,this.dialogCustomizations=D}flash({filename:B,compiledSketch:b}){return ra(this,void 0,void 0,function*(){this.logger.info(`compiling file '${B}'`);let E=yield T({vid:this.vid,pid:this.pid});if(E){const W=yield N(this.getCustomDialog(1));if(this.vid=W.getInfo().usbVendorId||this.vid,this.pid=W.getInfo().usbProductId||this.pid,E=yield T({vid:this.vid,pid:this.pid}),E)return yield new p({logger:this.logger,serialPort:E}).call(),new Dt({logger:this.logger,serialPort:E,options:this.flasherOptions}).flash(P(b));throw new Error("Cannot find the serial port.")}const D=yield N(this.getCustomDialog(1));if(this.vid=D.getInfo().usbVendorId||this.vid,this.pid=D.getInfo().usbProductId||this.pid,E=yield T({vid:this.vid,pid:this.pid}),E){const W=yield N(this.getCustomDialog(1));if(this.vid=W.getInfo().usbVendorId||this.vid,this.pid=W.getInfo().usbProductId||this.pid,E=yield T({vid:this.vid,pid:this.pid}),E)return yield new p({logger:this.logger,serialPort:E}).call(),new Dt({logger:this.logger,serialPort:E,options:this.flasherOptions}).flash(P(b));throw new Error("Cannot find the serial port.")}throw new Error(`An unexpected error occurred flashing ${this.fqbn}`)})}getCustomDialog(B){if(this.dialogCustomizations&&B<this.dialogCustomizations.length)return this.dialogCustomizations[B]}},rp:class{constructor(B){const{options:b,fqbn:E,dialogCustomizations:D,postMessage:W}=B;this.fqbn=E,this.vid=B.vid,this.pid=B.pid,this.dialogCustomizations=D,this.logger=(b==null?void 0:b.logger)||new i,this.postMessage=W}flash({filename:B,compiledSketch:b}){return L(this,void 0,void 0,function*(){let E=yield T({vid:this.vid,pid:this.pid});if(!E){const D=yield this.connectToSerialDevice(this.getCustomDialog(0));this.vid=D.getInfo().usbVendorId||this.vid,this.pid=D.getInfo().usbProductId||this.pid,E=yield T({vid:this.vid,pid:this.pid})}if(!E)throw new Error("Cannot find the serial port.");yield new p({logger:this.logger,serialPort:E}).call(),yield this.saveToFile({compiledSketch:b,filename:B||"sketch.uf2",dialogCustomization:this.getCustomDialog(2)})})}saveToFile({filename:B,compiledSketch:b,dialogCustomization:E}){return L(this,void 0,void 0,function*(){const D=a.From(E);let W=B;if(W.endsWith(".elf")&&(W=`${W.substring(0,W.length-4)}.uf2`),!(yield D.confirm()))throw new Error("User aborted");{const he={suggestedName:W,types:[{description:"UF2 files (*.uf2)",accept:{"application/octet-stream":[".uf2"]}}]},de=Buffer.from(b,"base64");yield window.showSaveFilePicker(he).then(oe=>{this.fileHandle=oe,oe.createWritable().then(le=>(le.write(de),le)).then(le=>{le.close(),this.postMessage&&this.postMessage({uploadStatus:"success",message:"Flash completed."})}).catch(le=>console.error(le))})}})}connectToSerialDevice(B){return L(this,void 0,void 0,function*(){if(yield a.From(B).confirm())return yield navigator.serial.requestPort();throw new Error("Permission denied")})}getCustomDialog(B){if(this.dialogCustomizations&&B<this.dialogCustomizations.length)return this.dialogCustomizations[B]}},dfu:zr};class Pn{constructor(){this.create=({fqbn:b,vid:E,pid:D,dialogCustomizations:W,postMessage:he,options:de,logger:oe})=>{const le=S(b),ie=le.flasher;if(!gi[ie])throw new Error(`Flasher for ${b} not found`);return new gi[ie]({fqbn:b,vid:E,pid:D,dialogCustomizations:W,postMessage:he,options:Object.assign(Object.assign({},de),{logger:oe,avr_name:le.avr_name})})}}}var na=function(B,b,E,D){return new(E||(E=Promise))(function(W,he){function de(ie){try{le(D.next(ie))}catch(ae){he(ae)}}function oe(ie){try{le(D.throw(ie))}catch(ae){he(ae)}}function le(ie){var ae;ie.done?W(ie.value):(ae=ie.value,ae instanceof E?ae:new E(function(Ne){Ne(ae)})).then(de,oe)}le((D=D.apply(B,[])).next())})};class ia{constructor({logger:b,filters:E,fqbn:D,vid:W,pid:he,dialogCustomizations:de,postMessage:oe}){this.fqbn=D,this.vid=W,this.pid=he,this.dialogCustomizations=de,this.logger=b,this.filters=E,this.postMessage=oe,this.flasherFactory=new Pn}flash({filename:b,compiledSketch:E}){return na(this,void 0,void 0,function*(){yield this.flasherFactory.create({fqbn:this.fqbn,vid:this.vid,pid:this.pid,dialogCustomizations:this.dialogCustomizations,postMessage:this.postMessage,logger:this.logger||new i,options:{callback:W=>{this.logger.info(W)}}}).flash({filename:b,compiledSketch:E})})}}const Xr="uploader-inbound-channel",po="uploader-outbound-channel";function mo(B,b){return!(!B||!b)&&B.some(E=>b.includes(E))}const oa=class{constructor(B=[]){console.debug("Initializing event channel"),this.whiteListedOrigins=B,this.createInboundChannel(),this.createOutboundChannel()}createInboundChannel(){console.debug("creating inbound channel"),this.inboundChannelBroadcaster=new BroadcastChannel(Xr),this.inboundChannelReceiver=new BroadcastChannel(Xr),this.inboundChannelReceiver.onmessage=B=>{const b=B.origin.toLowerCase();mo(this.whiteListedOrigins,b)&&this._onMessage(B)},this.inboundChannelBroadcaster.onmessageerror=B=>this._onDisconnect(B),this.inboundChannelReceiver.onmessageerror=B=>this._onDisconnect(B)}createOutboundChannel(){console.debug("creating outbound channel"),this.port=new BroadcastChannel(po),this.outboundChannelReceiver=new BroadcastChannel(po),this.port.onmessageerror=B=>this._onDisconnect(B),this.outboundChannelReceiver.onmessageerror=B=>this._onDisconnect(B)}_onDisconnect(B){console.error(B),this.disconnectCallback&&this.disconnectCallback(B),this.inboundChannelBroadcaster.close(),this.inboundChannelReceiver.close(),this.port.close(),this.outboundChannelReceiver.close()}onDisconnect(B){this.disconnectCallback=B}postMessage(B){this.inboundChannelBroadcaster.postMessage(B)}onMessage(B){this.outboundChannelReceiver.onmessage=b=>{const E=b.origin.toLowerCase();mo(this.whiteListedOrigins,E)&&B(b.data)}}};function yn(B){const b=B.split("/"),E=parseInt(b[0],16),D=parseInt(b[1],16);if(Number.isNaN(E)||Number.isNaN(D))throw new Error(`Port name [${B}] has an invalid format`);return{vid:E,pid:D}}const vi=function(B){var b,E;const{extrafiles:D}=B;return((E=(b=D==null?void 0:D[0])===null||b===void 0?void 0:b.filename)===null||E===void 0?void 0:E.indexOf(".uf2"))>0?D[0].hex:B.data};var ar=function(B,b,E,D){return new(E||(E=Promise))(function(W,he){function de(ie){try{le(D.next(ie))}catch(ae){he(ae)}}function oe(ie){try{le(D.throw(ie))}catch(ae){he(ae)}}function le(ie){var ae;ie.done?W(ie.value):(ae=ie.value,ae instanceof E?ae:new E(function(Ne){Ne(ae)})).then(de,oe)}le((D=D.apply(B,[])).next())})};const sa=["create.arduino.cc"];class Bn extends oa{constructor({logger:b,filters:E,whiteListedOrigins:D=sa}){super(D),this.logger=b||new i,this.filters=E,this.serialRxBuffer=Buffer.alloc(0),this.openPorts={},this.sendInitialData()}sendInitialData(){setTimeout(()=>{this.sendVersion(),this.sendSupportedBoards()},500)}_onMessage(b){const{command:E,data:D}=b.data;E==="listPorts"?this.listPorts():E==="upload"?this.upload(D):E==="openPort"?this.openPort(D):E==="closePort"?this.closePort(D):E==="writePort"?this.writePort(D):E==="connectToSerial"&&this.connectToSerialDevice({from:D.from,dialogCustomization:D.dialogCustomization})}writePort(b){var E;(E=this.serialReader)===null||E===void 0||E.writeText(b.data)}listPorts(){this.listBoards().then(b=>{this.port.postMessage({ports:b})})}sendVersion(){this.port.postMessage({version:1})}sendSupportedBoards(){this.port.postMessage({supportedBoards:g})}static isSerialSupported(){return"serial"in navigator}openPort({name:b,baudrate:E}){return ar(this,void 0,void 0,function*(){const{vid:D,pid:W}=yn(b);try{const he=yield T({vid:D,pid:W});he&&(this.serialReader=new M(he,{baudRate:E}),yield this.serialReader.open(),this.serialRxBuffer=Buffer.alloc(0),this.serialReader.on("data",de=>{this.onSerialData(de)}),this.port.postMessage({portOpenStatus:"success"}),this.markPortAsOpen(he))}catch(he){console.error(he),this.port.postMessage({portOpenStatus:"error",message:he.message})}})}markPortAsOpen(b){const{usbVendorId:E,usbProductId:D}=b.getInfo();this.openPorts[l({vid:E,pid:D})]=!0}markPortAsClosed(b){const{usbVendorId:E,usbProductId:D}=b.getInfo();this.openPorts[l({vid:E,pid:D})]=null}isPortOpen(b){const{usbVendorId:E,usbProductId:D}=b.getInfo();return!!this.openPorts[l({vid:E,pid:D})]}onSerialData(b){if(!b)return;this.serialRxBuffer=Buffer.concat([this.serialRxBuffer,b]);let E=0;for(let D=0;D<this.serialRxBuffer.length;D+=1){const W=this.serialRxBuffer[D];let he=1;if(W>>3==30?he=4:W>>4==14?he=3:W>>5==6&&(he=2),D+he>this.serialRxBuffer.length)break;D+=he-1,E+=he}E>0&&(this.port.postMessage({serialData:this.serialRxBuffer.slice(0,E).toString("utf8")}),this.serialRxBuffer=this.serialRxBuffer.slice(E))}closeAllPorts(){return ar(this,void 0,void 0,function*(){(yield this.listBoards()).forEach(b=>this.closePort({name:b.name}))})}closePort({name:b}){return ar(this,void 0,void 0,function*(){const{vid:E,pid:D}=yn(b);try{const W=yield T({vid:E,pid:D});W&&this.serialReader&&(yield this.serialReader.close(),this.markPortAsClosed(W),this.port.postMessage({portCloseStatus:"success"}))}catch(W){console.error(W),this.port.postMessage({portCloseStatus:"error",message:W.message})}})}listBoards(){return ar(this,void 0,void 0,function*(){return Bn.isSerialSupported()?(yield navigator.serial.getPorts()).map(b=>{const{usbVendorId:E,usbProductId:D}=b.getInfo();return function({vid:W,pid:he,isOpen:de}){const oe=Object.keys(g).find(le=>g[le].ids.find(ie=>ie.vid===W&&ie.pid===he));return{name:l({vid:W,pid:he}),vendorId:y(W),productId:y(he),fqbn:oe??A,isOpen:de||!1}}({vid:E,pid:D,isOpen:this.isPortOpen(b)})}):[]})}upload(b){return ar(this,void 0,void 0,function*(){if(Bn.isSerialSupported())try{yield new ia({fqbn:b.board,vid:b.vid,pid:b.pid,dialogCustomizations:b.dialogCustomizations,logger:this.logger,filters:this.filters,postMessage:this.port.postMessage}).flash({filename:b.filename,compiledSketch:vi(b)}),this.port.postMessage({uploadStatus:"success",message:"Upload completed"})}catch(E){console.error(E),this.port.postMessage({uploadStatus:"error",message:E.message})}finally{this.listPorts()}})}connectToSerialDevice({from:b,dialogCustomization:E}){return ar(this,void 0,void 0,function*(){b==="serial-monitor"&&(yield N(E))})}}})(),c})())})(Jf);var Tc=Jf.exports,Wa={exports:{}};const Xg="2.0.0",Qg=256,Jg=Number.MAX_SAFE_INTEGER||9007199254740991,e0=16,t0=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var Es={MAX_LENGTH:Qg,MAX_SAFE_COMPONENT_LENGTH:e0,MAX_SAFE_INTEGER:Jg,RELEASE_TYPES:t0,SEMVER_SPEC_VERSION:Xg,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},xa={};const r0=typeof process=="object"&&xa&&xa.NODE_DEBUG&&/\bsemver\b/i.test(xa.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var Ss=r0;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:r}=Es,n=Ss;t=e.exports={};const o=t.re=[],s=t.safeRe=[],c=t.src=[],i=t.t={};let g=0;const f=(a,y,l)=>{const v=y.split("\\s*").join("\\s{0,1}").split("\\s+").join("\\s"),A=g++;n(a,A,y),i[a]=A,c[A]=y,o[A]=new RegExp(y,l?"g":void 0),s[A]=new RegExp(v,l?"g":void 0)};f("NUMERICIDENTIFIER","0|[1-9]\\d*"),f("NUMERICIDENTIFIERLOOSE","[0-9]+"),f("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),f("MAINVERSION",`(${c[i.NUMERICIDENTIFIER]})\\.(${c[i.NUMERICIDENTIFIER]})\\.(${c[i.NUMERICIDENTIFIER]})`),f("MAINVERSIONLOOSE",`(${c[i.NUMERICIDENTIFIERLOOSE]})\\.(${c[i.NUMERICIDENTIFIERLOOSE]})\\.(${c[i.NUMERICIDENTIFIERLOOSE]})`),f("PRERELEASEIDENTIFIER",`(?:${c[i.NUMERICIDENTIFIER]}|${c[i.NONNUMERICIDENTIFIER]})`),f("PRERELEASEIDENTIFIERLOOSE",`(?:${c[i.NUMERICIDENTIFIERLOOSE]}|${c[i.NONNUMERICIDENTIFIER]})`),f("PRERELEASE",`(?:-(${c[i.PRERELEASEIDENTIFIER]}(?:\\.${c[i.PRERELEASEIDENTIFIER]})*))`),f("PRERELEASELOOSE",`(?:-?(${c[i.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[i.PRERELEASEIDENTIFIERLOOSE]})*))`),f("BUILDIDENTIFIER","[0-9A-Za-z-]+"),f("BUILD",`(?:\\+(${c[i.BUILDIDENTIFIER]}(?:\\.${c[i.BUILDIDENTIFIER]})*))`),f("FULLPLAIN",`v?${c[i.MAINVERSION]}${c[i.PRERELEASE]}?${c[i.BUILD]}?`),f("FULL",`^${c[i.FULLPLAIN]}$`),f("LOOSEPLAIN",`[v=\\s]*${c[i.MAINVERSIONLOOSE]}${c[i.PRERELEASELOOSE]}?${c[i.BUILD]}?`),f("LOOSE",`^${c[i.LOOSEPLAIN]}$`),f("GTLT","((?:<|>)?=?)"),f("XRANGEIDENTIFIERLOOSE",`${c[i.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),f("XRANGEIDENTIFIER",`${c[i.NUMERICIDENTIFIER]}|x|X|\\*`),f("XRANGEPLAIN",`[v=\\s]*(${c[i.XRANGEIDENTIFIER]})(?:\\.(${c[i.XRANGEIDENTIFIER]})(?:\\.(${c[i.XRANGEIDENTIFIER]})(?:${c[i.PRERELEASE]})?${c[i.BUILD]}?)?)?`),f("XRANGEPLAINLOOSE",`[v=\\s]*(${c[i.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[i.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[i.XRANGEIDENTIFIERLOOSE]})(?:${c[i.PRERELEASELOOSE]})?${c[i.BUILD]}?)?)?`),f("XRANGE",`^${c[i.GTLT]}\\s*${c[i.XRANGEPLAIN]}$`),f("XRANGELOOSE",`^${c[i.GTLT]}\\s*${c[i.XRANGEPLAINLOOSE]}$`),f("COERCE",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?(?:$|[^\\d])`),f("COERCERTL",c[i.COERCE],!0),f("LONETILDE","(?:~>?)"),f("TILDETRIM",`(\\s*)${c[i.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",f("TILDE",`^${c[i.LONETILDE]}${c[i.XRANGEPLAIN]}$`),f("TILDELOOSE",`^${c[i.LONETILDE]}${c[i.XRANGEPLAINLOOSE]}$`),f("LONECARET","(?:\\^)"),f("CARETTRIM",`(\\s*)${c[i.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",f("CARET",`^${c[i.LONECARET]}${c[i.XRANGEPLAIN]}$`),f("CARETLOOSE",`^${c[i.LONECARET]}${c[i.XRANGEPLAINLOOSE]}$`),f("COMPARATORLOOSE",`^${c[i.GTLT]}\\s*(${c[i.LOOSEPLAIN]})$|^$`),f("COMPARATOR",`^${c[i.GTLT]}\\s*(${c[i.FULLPLAIN]})$|^$`),f("COMPARATORTRIM",`(\\s*)${c[i.GTLT]}\\s*(${c[i.LOOSEPLAIN]}|${c[i.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",f("HYPHENRANGE",`^\\s*(${c[i.XRANGEPLAIN]})\\s+-\\s+(${c[i.XRANGEPLAIN]})\\s*$`),f("HYPHENRANGELOOSE",`^\\s*(${c[i.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[i.XRANGEPLAINLOOSE]})\\s*$`),f("STAR","(<|>)?=?\\s*\\*"),f("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),f("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Wa,Wa.exports);var Ji=Wa.exports;const n0=Object.freeze({loose:!0}),i0=Object.freeze({}),o0=e=>e?typeof e!="object"?n0:e:i0;var Rc=o0;const dl=/^[0-9]+$/,eh=(e,t)=>{const r=dl.test(e),n=dl.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1},s0=(e,t)=>eh(t,e);var th={compareIdentifiers:eh,rcompareIdentifiers:s0};const Lo=Ss,{MAX_LENGTH:pl,MAX_SAFE_INTEGER:Po}=Es,{safeRe:ml,t:gl}=Ji,a0=Rc,{compareIdentifiers:Mn}=th;let c0=class Pr{constructor(t,r){if(r=a0(r),t instanceof Pr){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>pl)throw new TypeError(`version is longer than ${pl} characters`);Lo("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;const n=t.trim().match(r.loose?ml[gl.LOOSE]:ml[gl.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Po||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Po||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Po||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(o=>{if(/^[0-9]+$/.test(o)){const s=+o;if(s>=0&&s<Po)return s}return o}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(Lo("SemVer.compare",this.version,this.options,t),!(t instanceof Pr)){if(typeof t=="string"&&t===this.version)return 0;t=new Pr(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Pr||(t=new Pr(t,this.options)),Mn(this.major,t.major)||Mn(this.minor,t.minor)||Mn(this.patch,t.patch)}comparePre(t){if(t instanceof Pr||(t=new Pr(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{const n=this.prerelease[r],o=t.prerelease[r];if(Lo("prerelease compare",r,n,o),n===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(n===void 0)return-1;if(n===o)continue;return Mn(n,o)}while(++r)}compareBuild(t){t instanceof Pr||(t=new Pr(t,this.options));let r=0;do{const n=this.build[r],o=t.build[r];if(Lo("prerelease compare",r,n,o),n===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(n===void 0)return-1;if(n===o)continue;return Mn(n,o)}while(++r)}inc(t,r,n){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const o=Number(n)?1:0;if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[o];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(o)}}if(r){let s=[r,o];n===!1&&(s=[r]),Mn(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var rr=c0;const vl=rr,u0=(e,t,r=!1)=>{if(e instanceof vl)return e;try{return new vl(e,t)}catch(n){if(!r)return null;throw n}};var ti=u0;const l0=ti,f0=(e,t)=>{const r=l0(e,t);return r?r.version:null};var h0=f0;const d0=ti,p0=(e,t)=>{const r=d0(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null};var m0=p0;const yl=rr,g0=(e,t,r,n,o)=>{typeof r=="string"&&(o=n,n=r,r=void 0);try{return new yl(e instanceof yl?e.version:e,r).inc(t,n,o).version}catch{return null}};var v0=g0;const bl=ti,y0=(e,t)=>{const r=bl(e,null,!0),n=bl(t,null,!0),o=r.compare(n);if(o===0)return null;const s=o>0,c=s?r:n,i=s?n:r,g=!!c.prerelease.length;if(!!i.prerelease.length&&!g)return!i.patch&&!i.minor?"major":c.patch?"patch":c.minor?"minor":"major";const a=g?"pre":"";return r.major!==n.major?a+"major":r.minor!==n.minor?a+"minor":r.patch!==n.patch?a+"patch":"prerelease"};var b0=y0;const w0=rr,x0=(e,t)=>new w0(e,t).major;var _0=x0;const E0=rr,S0=(e,t)=>new E0(e,t).minor;var C0=S0;const k0=rr,A0=(e,t)=>new k0(e,t).patch;var I0=A0;const T0=ti,R0=(e,t)=>{const r=T0(e,t);return r&&r.prerelease.length?r.prerelease:null};var O0=R0;const wl=rr,N0=(e,t,r)=>new wl(e,r).compare(new wl(t,r));var kr=N0;const L0=kr,P0=(e,t,r)=>L0(t,e,r);var B0=P0;const F0=kr,j0=(e,t)=>F0(e,t,!0);var D0=j0;const xl=rr,M0=(e,t,r)=>{const n=new xl(e,r),o=new xl(t,r);return n.compare(o)||n.compareBuild(o)};var Oc=M0;const U0=Oc,$0=(e,t)=>e.sort((r,n)=>U0(r,n,t));var z0=$0;const G0=Oc,V0=(e,t)=>e.sort((r,n)=>G0(n,r,t));var q0=V0;const H0=kr,W0=(e,t,r)=>H0(e,t,r)>0;var Cs=W0;const Z0=kr,K0=(e,t,r)=>Z0(e,t,r)<0;var Nc=K0;const Y0=kr,X0=(e,t,r)=>Y0(e,t,r)===0;var rh=X0;const Q0=kr,J0=(e,t,r)=>Q0(e,t,r)!==0;var nh=J0;const ev=kr,tv=(e,t,r)=>ev(e,t,r)>=0;var Lc=tv;const rv=kr,nv=(e,t,r)=>rv(e,t,r)<=0;var Pc=nv;const iv=rh,ov=nh,sv=Cs,av=Lc,cv=Nc,uv=Pc,lv=(e,t,r,n)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return iv(e,r,n);case"!=":return ov(e,r,n);case">":return sv(e,r,n);case">=":return av(e,r,n);case"<":return cv(e,r,n);case"<=":return uv(e,r,n);default:throw new TypeError(`Invalid operator: ${t}`)}};var ih=lv;const fv=rr,hv=ti,{safeRe:Bo,t:Fo}=Ji,dv=(e,t)=>{if(e instanceof fv)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let r=null;if(!t.rtl)r=e.match(Bo[Fo.COERCE]);else{let n;for(;(n=Bo[Fo.COERCERTL].exec(e))&&(!r||r.index+r[0].length!==e.length);)(!r||n.index+n[0].length!==r.index+r[0].length)&&(r=n),Bo[Fo.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;Bo[Fo.COERCERTL].lastIndex=-1}return r===null?null:hv(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,t)};var pv=dv,_a,_l;function mv(){return _l||(_l=1,_a=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),_a}var gv=vt;vt.Node=An;vt.create=vt;function vt(e){var t=this;if(t instanceof vt||(t=new vt),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(o){t.push(o)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)t.push(arguments[r]);return t}vt.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t};vt.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};vt.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};vt.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)yv(this,arguments[e]);return this.length};vt.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)bv(this,arguments[e]);return this.length};vt.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};vt.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};vt.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;r!==null;n++)e.call(t,r.value,n,this),r=r.next};vt.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;r!==null;n--)e.call(t,r.value,n,this),r=r.prev};vt.prototype.get=function(e){for(var t=0,r=this.head;r!==null&&t<e;t++)r=r.next;if(t===e&&r!==null)return r.value};vt.prototype.getReverse=function(e){for(var t=0,r=this.tail;r!==null&&t<e;t++)r=r.prev;if(t===e&&r!==null)return r.value};vt.prototype.map=function(e,t){t=t||this;for(var r=new vt,n=this.head;n!==null;)r.push(e.call(t,n.value,this)),n=n.next;return r};vt.prototype.mapReverse=function(e,t){t=t||this;for(var r=new vt,n=this.tail;n!==null;)r.push(e.call(t,n.value,this)),n=n.prev;return r};vt.prototype.reduce=function(e,t){var r,n=this.head;if(arguments.length>1)r=t;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var o=0;n!==null;o++)r=e(r,n.value,o),n=n.next;return r};vt.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(arguments.length>1)r=t;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var o=this.length-1;n!==null;o--)r=e(r,n.value,o),n=n.prev;return r};vt.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;r!==null;t++)e[t]=r.value,r=r.next;return e};vt.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;r!==null;t++)e[t]=r.value,r=r.prev;return e};vt.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var r=new vt;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=0,o=this.head;o!==null&&n<e;n++)o=o.next;for(;o!==null&&n<t;n++,o=o.next)r.push(o.value);return r};vt.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var r=new vt;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=this.length,o=this.tail;o!==null&&n>t;n--)o=o.prev;for(;o!==null&&n>e;n--,o=o.prev)r.push(o.value);return r};vt.prototype.splice=function(e,t,...r){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,o=this.head;o!==null&&n<e;n++)o=o.next;for(var s=[],n=0;o&&n<t;n++)s.push(o.value),o=this.removeNode(o);o===null&&(o=this.tail),o!==this.head&&o!==this.tail&&(o=o.prev);for(var n=0;n<r.length;n++)o=vv(this,o,r[n]);return s};vt.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this};function vv(e,t,r){var n=t===e.head?new An(r,null,t,e):new An(r,t,t.next,e);return n.next===null&&(e.tail=n),n.prev===null&&(e.head=n),e.length++,n}function yv(e,t){e.tail=new An(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function bv(e,t){e.head=new An(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function An(e,t,r,n){if(!(this instanceof An))return new An(e,t,r,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{mv()(vt)}catch{}const wv=gv,En=Symbol("max"),Vr=Symbol("length"),Un=Symbol("lengthCalculator"),Pi=Symbol("allowStale"),Cn=Symbol("maxAge"),Gr=Symbol("dispose"),El=Symbol("noDisposeOnSet"),qt=Symbol("lruList"),wr=Symbol("cache"),oh=Symbol("updateAgeOnGet"),Ea=()=>1;class xv{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[En]=t.max||1/0;const r=t.length||Ea;if(this[Un]=typeof r!="function"?Ea:r,this[Pi]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[Cn]=t.maxAge||0,this[Gr]=t.dispose,this[El]=t.noDisposeOnSet||!1,this[oh]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[En]=t||1/0,Ai(this)}get max(){return this[En]}set allowStale(t){this[Pi]=!!t}get allowStale(){return this[Pi]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[Cn]=t,Ai(this)}get maxAge(){return this[Cn]}set lengthCalculator(t){typeof t!="function"&&(t=Ea),t!==this[Un]&&(this[Un]=t,this[Vr]=0,this[qt].forEach(r=>{r.length=this[Un](r.value,r.key),this[Vr]+=r.length})),Ai(this)}get lengthCalculator(){return this[Un]}get length(){return this[Vr]}get itemCount(){return this[qt].length}rforEach(t,r){r=r||this;for(let n=this[qt].tail;n!==null;){const o=n.prev;Sl(this,t,n,r),n=o}}forEach(t,r){r=r||this;for(let n=this[qt].head;n!==null;){const o=n.next;Sl(this,t,n,r),n=o}}keys(){return this[qt].toArray().map(t=>t.key)}values(){return this[qt].toArray().map(t=>t.value)}reset(){this[Gr]&&this[qt]&&this[qt].length&&this[qt].forEach(t=>this[Gr](t.key,t.value)),this[wr]=new Map,this[qt]=new wv,this[Vr]=0}dump(){return this[qt].map(t=>rs(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[qt]}set(t,r,n){if(n=n||this[Cn],n&&typeof n!="number")throw new TypeError("maxAge must be a number");const o=n?Date.now():0,s=this[Un](r,t);if(this[wr].has(t)){if(s>this[En])return Hn(this,this[wr].get(t)),!1;const g=this[wr].get(t).value;return this[Gr]&&(this[El]||this[Gr](t,g.value)),g.now=o,g.maxAge=n,g.value=r,this[Vr]+=s-g.length,g.length=s,this.get(t),Ai(this),!0}const c=new _v(t,r,s,o,n);return c.length>this[En]?(this[Gr]&&this[Gr](t,r),!1):(this[Vr]+=c.length,this[qt].unshift(c),this[wr].set(t,this[qt].head),Ai(this),!0)}has(t){if(!this[wr].has(t))return!1;const r=this[wr].get(t).value;return!rs(this,r)}get(t){return Sa(this,t,!0)}peek(t){return Sa(this,t,!1)}pop(){const t=this[qt].tail;return t?(Hn(this,t),t.value):null}del(t){Hn(this,this[wr].get(t))}load(t){this.reset();const r=Date.now();for(let n=t.length-1;n>=0;n--){const o=t[n],s=o.e||0;if(s===0)this.set(o.k,o.v);else{const c=s-r;c>0&&this.set(o.k,o.v,c)}}}prune(){this[wr].forEach((t,r)=>Sa(this,r,!1))}}const Sa=(e,t,r)=>{const n=e[wr].get(t);if(n){const o=n.value;if(rs(e,o)){if(Hn(e,n),!e[Pi])return}else r&&(e[oh]&&(n.value.now=Date.now()),e[qt].unshiftNode(n));return o.value}},rs=(e,t)=>{if(!t||!t.maxAge&&!e[Cn])return!1;const r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[Cn]&&r>e[Cn]},Ai=e=>{if(e[Vr]>e[En])for(let t=e[qt].tail;e[Vr]>e[En]&&t!==null;){const r=t.prev;Hn(e,t),t=r}},Hn=(e,t)=>{if(t){const r=t.value;e[Gr]&&e[Gr](r.key,r.value),e[Vr]-=r.length,e[wr].delete(r.key),e[qt].removeNode(t)}};class _v{constructor(t,r,n,o,s){this.key=t,this.value=r,this.length=n,this.now=o,this.maxAge=s||0}}const Sl=(e,t,r,n)=>{let o=r.value;rs(e,o)&&(Hn(e,r),e[Pi]||(o=void 0)),o&&t.call(n,o.value,o.key,e)};var Ev=xv,Ca,Cl;function Ar(){if(Cl)return Ca;Cl=1;class e{constructor(_,k){if(k=n(k),_ instanceof e)return _.loose===!!k.loose&&_.includePrerelease===!!k.includePrerelease?_:new e(_.raw,k);if(_ instanceof o)return this.raw=_.value,this.set=[[_]],this.format(),this;if(this.options=k,this.loose=!!k.loose,this.includePrerelease=!!k.includePrerelease,this.raw=_.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map($=>this.parseRange($)).filter($=>$.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const $=this.set[0];if(this.set=this.set.filter(F=>!A(F[0])),this.set.length===0)this.set=[$];else if(this.set.length>1){for(const F of this.set)if(F.length===1&&d(F[0])){this.set=[F];break}}}this.format()}format(){return this.range=this.set.map(_=>_.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(_){const $=((this.options.includePrerelease&&l)|(this.options.loose&&v))+":"+_,F=r.get($);if(F)return F;const V=this.options.loose,M=V?i[g.HYPHENRANGELOOSE]:i[g.HYPHENRANGE];_=_.replace(M,fe(this.options.includePrerelease)),s("hyphen replace",_),_=_.replace(i[g.COMPARATORTRIM],f),s("comparator trim",_),_=_.replace(i[g.TILDETRIM],a),_=_.replace(i[g.CARETTRIM],y);let K=_.split(" ").map(Ee=>w(Ee,this.options)).join(" ").split(/\s+/).map(Ee=>ue(Ee,this.options));V&&(K=K.filter(Ee=>(s("loose invalid filter",Ee,this.options),!!Ee.match(i[g.COMPARATORLOOSE])))),s("range list",K);const G=new Map,Y=K.map(Ee=>new o(Ee,this.options));for(const Ee of Y){if(A(Ee))return[Ee];G.set(Ee.value,Ee)}G.size>1&&G.has("")&&G.delete("");const ye=[...G.values()];return r.set($,ye),ye}intersects(_,k){if(!(_ instanceof e))throw new TypeError("a Range is required");return this.set.some($=>T($,k)&&_.set.some(F=>T(F,k)&&$.every(V=>F.every(M=>V.intersects(M,k)))))}test(_){if(!_)return!1;if(typeof _=="string")try{_=new c(_,this.options)}catch{return!1}for(let k=0;k<this.set.length;k++)if(q(this.set[k],_,this.options))return!0;return!1}}Ca=e;const t=Ev,r=new t({max:1e3}),n=Rc,o=ks(),s=Ss,c=rr,{safeRe:i,t:g,comparatorTrimReplace:f,tildeTrimReplace:a,caretTrimReplace:y}=Ji,{FLAG_INCLUDE_PRERELEASE:l,FLAG_LOOSE:v}=Es,A=Q=>Q.value==="<0.0.0-0",d=Q=>Q.value==="",T=(Q,_)=>{let k=!0;const $=Q.slice();let F=$.pop();for(;k&&$.length;)k=$.every(V=>F.intersects(V,_)),F=$.pop();return k},w=(Q,_)=>(s("comp",Q,_),Q=P(Q,_),s("caret",Q),Q=O(Q,_),s("tildes",Q),Q=j(Q,_),s("xrange",Q),Q=U(Q,_),s("stars",Q),Q),S=Q=>!Q||Q.toLowerCase()==="x"||Q==="*",O=(Q,_)=>Q.trim().split(/\s+/).map(k=>N(k,_)).join(" "),N=(Q,_)=>{const k=_.loose?i[g.TILDELOOSE]:i[g.TILDE];return Q.replace(k,($,F,V,M,K)=>{s("tilde",Q,$,F,V,M,K);let G;return S(F)?G="":S(V)?G=`>=${F}.0.0 <${+F+1}.0.0-0`:S(M)?G=`>=${F}.${V}.0 <${F}.${+V+1}.0-0`:K?(s("replaceTilde pr",K),G=`>=${F}.${V}.${M}-${K} <${F}.${+V+1}.0-0`):G=`>=${F}.${V}.${M} <${F}.${+V+1}.0-0`,s("tilde return",G),G})},P=(Q,_)=>Q.trim().split(/\s+/).map(k=>H(k,_)).join(" "),H=(Q,_)=>{s("caret",Q,_);const k=_.loose?i[g.CARETLOOSE]:i[g.CARET],$=_.includePrerelease?"-0":"";return Q.replace(k,(F,V,M,K,G)=>{s("caret",Q,F,V,M,K,G);let Y;return S(V)?Y="":S(M)?Y=`>=${V}.0.0${$} <${+V+1}.0.0-0`:S(K)?V==="0"?Y=`>=${V}.${M}.0${$} <${V}.${+M+1}.0-0`:Y=`>=${V}.${M}.0${$} <${+V+1}.0.0-0`:G?(s("replaceCaret pr",G),V==="0"?M==="0"?Y=`>=${V}.${M}.${K}-${G} <${V}.${M}.${+K+1}-0`:Y=`>=${V}.${M}.${K}-${G} <${V}.${+M+1}.0-0`:Y=`>=${V}.${M}.${K}-${G} <${+V+1}.0.0-0`):(s("no pr"),V==="0"?M==="0"?Y=`>=${V}.${M}.${K}${$} <${V}.${M}.${+K+1}-0`:Y=`>=${V}.${M}.${K}${$} <${V}.${+M+1}.0-0`:Y=`>=${V}.${M}.${K} <${+V+1}.0.0-0`),s("caret return",Y),Y})},j=(Q,_)=>(s("replaceXRanges",Q,_),Q.split(/\s+/).map(k=>Z(k,_)).join(" ")),Z=(Q,_)=>{Q=Q.trim();const k=_.loose?i[g.XRANGELOOSE]:i[g.XRANGE];return Q.replace(k,($,F,V,M,K,G)=>{s("xRange",Q,$,F,V,M,K,G);const Y=S(V),ye=Y||S(M),Ee=ye||S(K),Re=Ee;return F==="="&&Re&&(F=""),G=_.includePrerelease?"-0":"",Y?F===">"||F==="<"?$="<0.0.0-0":$="*":F&&Re?(ye&&(M=0),K=0,F===">"?(F=">=",ye?(V=+V+1,M=0,K=0):(M=+M+1,K=0)):F==="<="&&(F="<",ye?V=+V+1:M=+M+1),F==="<"&&(G="-0"),$=`${F+V}.${M}.${K}${G}`):ye?$=`>=${V}.0.0${G} <${+V+1}.0.0-0`:Ee&&($=`>=${V}.${M}.0${G} <${V}.${+M+1}.0-0`),s("xRange return",$),$})},U=(Q,_)=>(s("replaceStars",Q,_),Q.trim().replace(i[g.STAR],"")),ue=(Q,_)=>(s("replaceGTE0",Q,_),Q.trim().replace(i[_.includePrerelease?g.GTE0PRE:g.GTE0],"")),fe=Q=>(_,k,$,F,V,M,K,G,Y,ye,Ee,Re,ct)=>(S($)?k="":S(F)?k=`>=${$}.0.0${Q?"-0":""}`:S(V)?k=`>=${$}.${F}.0${Q?"-0":""}`:M?k=`>=${k}`:k=`>=${k}${Q?"-0":""}`,S(Y)?G="":S(ye)?G=`<${+Y+1}.0.0-0`:S(Ee)?G=`<${Y}.${+ye+1}.0-0`:Re?G=`<=${Y}.${ye}.${Ee}-${Re}`:Q?G=`<${Y}.${ye}.${+Ee+1}-0`:G=`<=${G}`,`${k} ${G}`.trim()),q=(Q,_,k)=>{for(let $=0;$<Q.length;$++)if(!Q[$].test(_))return!1;if(_.prerelease.length&&!k.includePrerelease){for(let $=0;$<Q.length;$++)if(s(Q[$].semver),Q[$].semver!==o.ANY&&Q[$].semver.prerelease.length>0){const F=Q[$].semver;if(F.major===_.major&&F.minor===_.minor&&F.patch===_.patch)return!0}return!1}return!0};return Ca}var ka,kl;function ks(){if(kl)return ka;kl=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(a,y){if(y=r(y),a instanceof t){if(a.loose===!!y.loose)return a;a=a.value}a=a.trim().split(/\s+/).join(" "),c("comparator",a,y),this.options=y,this.loose=!!y.loose,this.parse(a),this.semver===e?this.value="":this.value=this.operator+this.semver.version,c("comp",this)}parse(a){const y=this.options.loose?n[o.COMPARATORLOOSE]:n[o.COMPARATOR],l=a.match(y);if(!l)throw new TypeError(`Invalid comparator: ${a}`);this.operator=l[1]!==void 0?l[1]:"",this.operator==="="&&(this.operator=""),l[2]?this.semver=new i(l[2],this.options.loose):this.semver=e}toString(){return this.value}test(a){if(c("Comparator.test",a,this.options.loose),this.semver===e||a===e)return!0;if(typeof a=="string")try{a=new i(a,this.options)}catch{return!1}return s(a,this.operator,this.semver,this.options)}intersects(a,y){if(!(a instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new g(a.value,y).test(this.value):a.operator===""?a.value===""?!0:new g(this.value,y).test(a.semver):(y=r(y),y.includePrerelease&&(this.value==="<0.0.0-0"||a.value==="<0.0.0-0")||!y.includePrerelease&&(this.value.startsWith("<0.0.0")||a.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&a.operator.startsWith(">")||this.operator.startsWith("<")&&a.operator.startsWith("<")||this.semver.version===a.semver.version&&this.operator.includes("=")&&a.operator.includes("=")||s(this.semver,"<",a.semver,y)&&this.operator.startsWith(">")&&a.operator.startsWith("<")||s(this.semver,">",a.semver,y)&&this.operator.startsWith("<")&&a.operator.startsWith(">")))}}ka=t;const r=Rc,{safeRe:n,t:o}=Ji,s=ih,c=Ss,i=rr,g=Ar();return ka}const Sv=Ar(),Cv=(e,t,r)=>{try{t=new Sv(t,r)}catch{return!1}return t.test(e)};var As=Cv;const kv=Ar(),Av=(e,t)=>new kv(e,t).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));var Iv=Av;const Tv=rr,Rv=Ar(),Ov=(e,t,r)=>{let n=null,o=null,s=null;try{s=new Rv(t,r)}catch{return null}return e.forEach(c=>{s.test(c)&&(!n||o.compare(c)===-1)&&(n=c,o=new Tv(n,r))}),n};var Nv=Ov;const Lv=rr,Pv=Ar(),Bv=(e,t,r)=>{let n=null,o=null,s=null;try{s=new Pv(t,r)}catch{return null}return e.forEach(c=>{s.test(c)&&(!n||o.compare(c)===1)&&(n=c,o=new Lv(n,r))}),n};var Fv=Bv;const Aa=rr,jv=Ar(),Al=Cs,Dv=(e,t)=>{e=new jv(e,t);let r=new Aa("0.0.0");if(e.test(r)||(r=new Aa("0.0.0-0"),e.test(r)))return r;r=null;for(let n=0;n<e.set.length;++n){const o=e.set[n];let s=null;o.forEach(c=>{const i=new Aa(c.semver.version);switch(c.operator){case">":i.prerelease.length===0?i.patch++:i.prerelease.push(0),i.raw=i.format();case"":case">=":(!s||Al(i,s))&&(s=i);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${c.operator}`)}}),s&&(!r||Al(r,s))&&(r=s)}return r&&e.test(r)?r:null};var Mv=Dv;const Uv=Ar(),$v=(e,t)=>{try{return new Uv(e,t).range||"*"}catch{return null}};var zv=$v;const Gv=rr,sh=ks(),{ANY:Vv}=sh,qv=Ar(),Hv=As,Il=Cs,Tl=Nc,Wv=Pc,Zv=Lc,Kv=(e,t,r,n)=>{e=new Gv(e,n),t=new qv(t,n);let o,s,c,i,g;switch(r){case">":o=Il,s=Wv,c=Tl,i=">",g=">=";break;case"<":o=Tl,s=Zv,c=Il,i="<",g="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Hv(e,t,n))return!1;for(let f=0;f<t.set.length;++f){const a=t.set[f];let y=null,l=null;if(a.forEach(v=>{v.semver===Vv&&(v=new sh(">=0.0.0")),y=y||v,l=l||v,o(v.semver,y.semver,n)?y=v:c(v.semver,l.semver,n)&&(l=v)}),y.operator===i||y.operator===g||(!l.operator||l.operator===i)&&s(e,l.semver))return!1;if(l.operator===g&&c(e,l.semver))return!1}return!0};var Bc=Kv;const Yv=Bc,Xv=(e,t,r)=>Yv(e,t,">",r);var Qv=Xv;const Jv=Bc,ey=(e,t,r)=>Jv(e,t,"<",r);var ty=ey;const Rl=Ar(),ry=(e,t,r)=>(e=new Rl(e,r),t=new Rl(t,r),e.intersects(t,r));var ny=ry;const iy=As,oy=kr;var sy=(e,t,r)=>{const n=[];let o=null,s=null;const c=e.sort((a,y)=>oy(a,y,r));for(const a of c)iy(a,t,r)?(s=a,o||(o=a)):(s&&n.push([o,s]),s=null,o=null);o&&n.push([o,null]);const i=[];for(const[a,y]of n)a===y?i.push(a):!y&&a===c[0]?i.push("*"):y?a===c[0]?i.push(`<=${y}`):i.push(`${a} - ${y}`):i.push(`>=${a}`);const g=i.join(" || "),f=typeof t.raw=="string"?t.raw:String(t);return g.length<f.length?g:t};const Ol=Ar(),Fc=ks(),{ANY:Ia}=Fc,Ii=As,jc=kr,ay=(e,t,r={})=>{if(e===t)return!0;e=new Ol(e,r),t=new Ol(t,r);let n=!1;e:for(const o of e.set){for(const s of t.set){const c=uy(o,s,r);if(n=n||c!==null,c)continue e}if(n)return!1}return!0},cy=[new Fc(">=0.0.0-0")],Nl=[new Fc(">=0.0.0")],uy=(e,t,r)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===Ia){if(t.length===1&&t[0].semver===Ia)return!0;r.includePrerelease?e=cy:e=Nl}if(t.length===1&&t[0].semver===Ia){if(r.includePrerelease)return!0;t=Nl}const n=new Set;let o,s;for(const v of e)v.operator===">"||v.operator===">="?o=Ll(o,v,r):v.operator==="<"||v.operator==="<="?s=Pl(s,v,r):n.add(v.semver);if(n.size>1)return null;let c;if(o&&s){if(c=jc(o.semver,s.semver,r),c>0)return null;if(c===0&&(o.operator!==">="||s.operator!=="<="))return null}for(const v of n){if(o&&!Ii(v,String(o),r)||s&&!Ii(v,String(s),r))return null;for(const A of t)if(!Ii(v,String(A),r))return!1;return!0}let i,g,f,a,y=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1,l=o&&!r.includePrerelease&&o.semver.prerelease.length?o.semver:!1;y&&y.prerelease.length===1&&s.operator==="<"&&y.prerelease[0]===0&&(y=!1);for(const v of t){if(a=a||v.operator===">"||v.operator===">=",f=f||v.operator==="<"||v.operator==="<=",o){if(l&&v.semver.prerelease&&v.semver.prerelease.length&&v.semver.major===l.major&&v.semver.minor===l.minor&&v.semver.patch===l.patch&&(l=!1),v.operator===">"||v.operator===">="){if(i=Ll(o,v,r),i===v&&i!==o)return!1}else if(o.operator===">="&&!Ii(o.semver,String(v),r))return!1}if(s){if(y&&v.semver.prerelease&&v.semver.prerelease.length&&v.semver.major===y.major&&v.semver.minor===y.minor&&v.semver.patch===y.patch&&(y=!1),v.operator==="<"||v.operator==="<="){if(g=Pl(s,v,r),g===v&&g!==s)return!1}else if(s.operator==="<="&&!Ii(s.semver,String(v),r))return!1}if(!v.operator&&(s||o)&&c!==0)return!1}return!(o&&f&&!s&&c!==0||s&&a&&!o&&c!==0||l||y)},Ll=(e,t,r)=>{if(!e)return t;const n=jc(e.semver,t.semver,r);return n>0?e:n<0||t.operator===">"&&e.operator===">="?t:e},Pl=(e,t,r)=>{if(!e)return t;const n=jc(e.semver,t.semver,r);return n<0?e:n>0||t.operator==="<"&&e.operator==="<="?t:e};var ly=ay;const Ta=Ji,Bl=Es,fy=rr,Fl=th,hy=ti,dy=h0,py=m0,my=v0,gy=b0,vy=_0,yy=C0,by=I0,wy=O0,xy=kr,_y=B0,Ey=D0,Sy=Oc,Cy=z0,ky=q0,Ay=Cs,Iy=Nc,Ty=rh,Ry=nh,Oy=Lc,Ny=Pc,Ly=ih,Py=pv,By=ks(),Fy=Ar(),jy=As,Dy=Iv,My=Nv,Uy=Fv,$y=Mv,zy=zv,Gy=Bc,Vy=Qv,qy=ty,Hy=ny,Wy=sy,Zy=ly;var Ky={parse:hy,valid:dy,clean:py,inc:my,diff:gy,major:vy,minor:yy,patch:by,prerelease:wy,compare:xy,rcompare:_y,compareLoose:Ey,compareBuild:Sy,sort:Cy,rsort:ky,gt:Ay,lt:Iy,eq:Ty,neq:Ry,gte:Oy,lte:Ny,cmp:Ly,coerce:Py,Comparator:By,Range:Fy,satisfies:jy,toComparators:Dy,maxSatisfying:My,minSatisfying:Uy,minVersion:$y,validRange:zy,outside:Gy,gtr:Vy,ltr:qy,intersects:Hy,simplifyRange:Wy,subset:Zy,SemVer:fy,re:Ta.re,src:Ta.src,tokens:Ta.t,SEMVER_SPEC_VERSION:Bl.SEMVER_SPEC_VERSION,RELEASE_TYPES:Bl.RELEASE_TYPES,compareIdentifiers:Fl.compareIdentifiers,rcompareIdentifiers:Fl.rcompareIdentifiers};function Yy(e){try{return decodeURIComponent(escape(atob(e)))}catch{return atob(e)}}function Xy(e){return decodeURIComponent(escape(e))}function Qy(e){return btoa(unescape(encodeURIComponent(e)))}function Jy(e){return unescape(encodeURIComponent(e))}function ah(e){return!e.startsWith("text")&&!e.startsWith("application/json")}function Dc(e,t){return t&&ah(t)?Xy(e):Yy(e)}function Er(e,t){return t&&ah(t)?Jy(e):Qy(e)}function e1(e,t){return new Set(e.add(t))}function t1(e,t){return e.delete(t),new Set(e)}let Wn;function r1(){return Wn||(Wn=new Pf.UAParser),Wn.getOS().name}const Mc=r1()==="Chromium OS"||at.MODE!=="production"&&new URLSearchParams(window.location.search).has("forceWebSerial");function YS(){return Wn||(Wn=new Pf.UAParser),Wn.getBrowser().name}function ri(){const e=/CrOS/.test(navigator.userAgent),t=window.matchMedia("(display-mode: standalone)").matches;return sessionStorage.getItem("arduino::chrome-app")==="true"||e&&t}const Bi=["filefullname","row","col"],n1=e=>Bi.every(t=>t in e)&&Object.keys(e).length===Bi.length,jl=e=>!!(e.name&&e.path),ch=e=>!!(e.name&&e.ino&&jl(e.ino)&&e.folder&&e.path&&e.types&&(!e.files||e.files&&e.files.every(jl))),uh=36,i1=(e,t)=>{const r=t.indexOf(e)+e.length,o=t.slice(r,t.length).split("_"),s=o.slice(0,3).join("."),c=o.slice(3,o.length).join(".");return c?`${s}-${c}`:s},o1=e=>new RegExp(`.*?${am(e)}/(?<${Bi[0]}>.+?.ino):(?<${Bi[1]}>[0-9]+):(?<${Bi[2]}>[0-9]+):.*error:`,"g"),s1=(e,t)=>[...e.matchAll(o1(t))].filter(n=>{const o=n.groups;return o&&n1(o)}).map(({groups:n})=>n),a1=e=>e.toLowerCase().replace(/[\s-.]+/g,"_")+"_",XS=e=>`:${e.map(n=>{var o;return{key:n.id,value:(o=n.variants.find(s=>s.selected))==null?void 0:o.id}}).map(n=>`${n.key}=${n.value}`).join(",")}`;function lh(e){return e.length>uh}function fh(e){return e.match(/[^a-zA-Z0-9-_]{1}[^a-zA-Z0-9-_.]{0,35}/g)!==null}function QS(e){return e.replace(/[^a-zA-Z0-9-_]{1}[^a-zA-Z0-9-_.]{0,35}/g,"_")}async function JS(){const e=await bt();if(!e)return wt();try{const t=await Em(e);return(t==null?void 0:t.status)==200}catch{return!1}}function hh(e,t,r,n){let o=t&&r?s1(t,r):void 0;o&&n&&(o=o.map(w=>({...w,row:String(Number(w.row)-1)})));const s=(t==null?void 0:t.indexOf("error"))!==-1,c=(e==null?void 0:e.indexOf("[error]"))!==-1,i=/\r\n|\r|\n/,g=e?e.split(i).length:void 0,f=e?1:void 0,a=g,y=g&&t?g+1:t?1:void 0,l=y&&t?y+t.split(i).length:void 0,v=c,A=l!==void 0,d=[e,t].filter(Boolean).join(`

`),T=d.split(i).length;return{output:d,errors:o,failed:s||c,settled:!0,warnLineStart:v?f:y,warnLineEnd:A?l:c?a:void 0,outputLineEnd:T}}async function eC({sketch:e,ota:t=!1,verbose:r=!1,...n},o,s){const c=await bt();if(!c)return wt();const i=await gm({...n,sketch:e,ota:t,verbose:r},c,s);return{...i,...hh(i.stdout,i.stderr,e==null?void 0:e.name,o)}}async function tC({sketch:e,ota:t=!1,verbose:r=!1,...n},o){const s=await bt();return s?vm({...n,sketch:e,ota:t,verbose:r},s,o):wt()}async function rC(e){const t=await bt();return t?ym({id:e},t):wt()}let Bt;function c1(){Bt!=null&&Bt.lastAbortController&&Bt.lastAbortController.abort(),Bt=void 0}async function nC(e,t,r,n,o,s,c,i,g){if(Bt){console.error(`A compilation stream is already open for compilation id: ${Bt.id}`);return}Bt={id:e,cumulativeStdout:"",cumulativeStderr:"",lastAbortController:g};try{const f=await bt();if(!f)return Bt=void 0,wt();const a=l=>{var d;const v=l.event,A=JSON.parse(l.data);switch(v){case Ci.Stdout:t("out",A.timestamp,A.lines),Bt&&(Bt.cumulativeStdout+=A.lines);break;case Ci.Stderr:r("err",A.timestamp,A.lines),Bt&&(Bt.cumulativeStderr+=A.lines);break;case Ci.Status:n(A.status);break;case Ci.Progress:o(A.progress);break;case Ci.Result:{const T=hh(Bt==null?void 0:Bt.cumulativeStdout,Bt==null?void 0:Bt.cumulativeStderr,i,!1);s(A.diagnostics,T)}break}(d=c.onmessage)==null||d.call(c,l)};return g&&(g.signal.onabort=()=>{Bt=void 0}),await bm({id:e},{...c,onclose:()=>{var l;Bt=void 0,(l=c.onclose)==null||l.call(c)},onmessage:a},f,g)}catch(f){throw Bt=void 0,f}}async function iC(e){const t=await bt();return t?await wm({id:e},t):wt()}async function oC(e){const{boards:t,...r}=await cm(e);return{...r,boards:Dr.sortBy(t,["name"])}}async function sC(e,t){const r={...t,id:Dr.uniqueId(),isUnknownBoard:!0};if(e.vid.toLocaleLowerCase()==="0x303a"&&e.pid.toLocaleLowerCase()==="0x1001")return r;let n;try{n=t.fqbn===Tc.UNKNOWN_BOARD_FQBN?{id:Dr.uniqueId(),isUnknownBoard:!0}:await um(e)}catch{return r}return{...t,...n}}function aC(e){return lm(e)}async function cC({fqbn:e,agentOS:t}){const r=await bt();return r?xm({fqbn:e},{action:"upload",verbose:!0,os:t},r):wt()}async function uC(e){return{...await _m(e),fromParams:JSON.stringify(e)}}async function lC(e){const t=await fm(e);let r;if(t.otherVersions){const n=a1(t.name);r=t.otherVersions.map(s=>i1(n,s)).sort((s,c)=>Ky.lt(s,c)?1:-1)}return{...t,examples:t.examples?t.examples.filter(ch):void 0,otherVersions:r}}async function fC(e){return(await hm(e)).examples.filter(ch)}async function hC(){const e=await bt();return e?dm(e):wt()}async function dC({id:e},t){const r=await bt();return r?t?pm({id:e},r):mm({id:e},r):wt()}async function pC(e,t,r,n){const{data:o,mimetype:s,href:c}=await Bf({path:e});if(typeof o>"u")return Promise.reject(new Error("No data to decode in retrieved example file"));const i=e.substring(e.lastIndexOf(".")+1),g=Dc(o,s),f=n&&g.split(`
`).slice(n.start,n.end+1).join(`
`);return{name:bc(t),fullName:t,extension:i,data:o,content:g,scopedContent:f,mimetype:s,path:e,href:c||"",exampleInoPath:r}}async function mC(e,t){const{data:r,mimetype:n,href:o}=await Bf({path:e});if(typeof r>"u")return Promise.reject(new Error("No data to decode in retrieved library file"));let s;return t.toLocaleLowerCase().indexOf("license")!==-1?s="txt":s=e.substring(e.lastIndexOf(".")+1),{name:bc(t),fullName:t,extension:s,data:r,content:Dc(r,n),mimetype:n,href:o||"",path:e}}var Zr={exports:{}};const u1={},l1=Object.freeze(Object.defineProperty({__proto__:null,default:u1},Symbol.toStringTag,{value:"Module"})),eo=cp(l1),f1="dotenv",h1="16.4.7",d1="Loads environment variables from .env file",p1="lib/main.js",m1="lib/main.d.ts",g1={".":{types:"./lib/main.d.ts",require:"./lib/main.js",default:"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},v1={"dts-check":"tsc --project tests/types/tsconfig.json",lint:"standard",pretest:"npm run lint && npm run dts-check",test:"tap run --allow-empty-coverage --disable-coverage --timeout=60000","test:coverage":"tap run --show-full-coverage --timeout=60000 --coverage-report=lcov",prerelease:"npm test",release:"standard-version"},y1={type:"git",url:"git://github.com/motdotla/dotenv.git"},b1="https://dotenvx.com",w1=["dotenv","env",".env","environment","variables","config","settings"],x1="README.md",_1="BSD-2-Clause",E1={"@types/node":"^18.11.3",decache:"^4.6.2",sinon:"^14.0.1",standard:"^17.0.0","standard-version":"^9.5.0",tap:"^19.2.0",typescript:"^4.8.4"},S1={node:">=12"},C1={fs:!1},k1={name:f1,version:h1,description:d1,main:p1,types:m1,exports:g1,scripts:v1,repository:y1,funding:b1,keywords:w1,readmeFilename:x1,license:_1,devDependencies:E1,engines:S1,browser:C1};var Fi={};const Za=eo,Uc=eo,A1=eo,I1=eo,T1=k1,$c=T1.version,R1=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function O1(e){const t={};let r=e.toString();r=r.replace(/\r\n?/mg,`
`);let n;for(;(n=R1.exec(r))!=null;){const o=n[1];let s=n[2]||"";s=s.trim();const c=s[0];s=s.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),c==='"'&&(s=s.replace(/\\n/g,`
`),s=s.replace(/\\r/g,"\r")),t[o]=s}return t}function N1(e){const t=ph(e),r=Gt.configDotenv({path:t});if(!r.parsed){const c=new Error(`MISSING_DATA: Cannot parse ${t} for an unknown reason`);throw c.code="MISSING_DATA",c}const n=dh(e).split(","),o=n.length;let s;for(let c=0;c<o;c++)try{const i=n[c].trim(),g=B1(r,i);s=Gt.decrypt(g.ciphertext,g.key);break}catch(i){if(c+1>=o)throw i}return Gt.parse(s)}function L1(e){console.log(`[dotenv@${$c}][INFO] ${e}`)}function P1(e){console.log(`[dotenv@${$c}][WARN] ${e}`)}function ns(e){console.log(`[dotenv@${$c}][DEBUG] ${e}`)}function dh(e){return e&&e.DOTENV_KEY&&e.DOTENV_KEY.length>0?e.DOTENV_KEY:Fi.DOTENV_KEY&&Fi.DOTENV_KEY.length>0?Fi.DOTENV_KEY:""}function B1(e,t){let r;try{r=new URL(t)}catch(i){if(i.code==="ERR_INVALID_URL"){const g=new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=development");throw g.code="INVALID_DOTENV_KEY",g}throw i}const n=r.password;if(!n){const i=new Error("INVALID_DOTENV_KEY: Missing key part");throw i.code="INVALID_DOTENV_KEY",i}const o=r.searchParams.get("environment");if(!o){const i=new Error("INVALID_DOTENV_KEY: Missing environment part");throw i.code="INVALID_DOTENV_KEY",i}const s=`DOTENV_VAULT_${o.toUpperCase()}`,c=e.parsed[s];if(!c){const i=new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${s} in your .env.vault file.`);throw i.code="NOT_FOUND_DOTENV_ENVIRONMENT",i}return{ciphertext:c,key:n}}function ph(e){let t=null;if(e&&e.path&&e.path.length>0)if(Array.isArray(e.path))for(const r of e.path)Za.existsSync(r)&&(t=r.endsWith(".vault")?r:`${r}.vault`);else t=e.path.endsWith(".vault")?e.path:`${e.path}.vault`;else t=Uc.resolve(process.cwd(),".env.vault");return Za.existsSync(t)?t:null}function Dl(e){return e[0]==="~"?Uc.join(A1.homedir(),e.slice(1)):e}function F1(e){L1("Loading env from encrypted .env.vault");const t=Gt._parseVault(e);let r=Fi;return e&&e.processEnv!=null&&(r=e.processEnv),Gt.populate(r,t,e),{parsed:t}}function j1(e){const t=Uc.resolve(process.cwd(),".env");let r="utf8";const n=!!(e&&e.debug);e&&e.encoding?r=e.encoding:n&&ns("No encoding is specified. UTF-8 is used by default");let o=[t];if(e&&e.path)if(!Array.isArray(e.path))o=[Dl(e.path)];else{o=[];for(const g of e.path)o.push(Dl(g))}let s;const c={};for(const g of o)try{const f=Gt.parse(Za.readFileSync(g,{encoding:r}));Gt.populate(c,f,e)}catch(f){n&&ns(`Failed to load ${g} ${f.message}`),s=f}let i=Fi;return e&&e.processEnv!=null&&(i=e.processEnv),Gt.populate(i,c,e),s?{parsed:c,error:s}:{parsed:c}}function D1(e){if(dh(e).length===0)return Gt.configDotenv(e);const t=ph(e);return t?Gt._configVault(e):(P1(`You set DOTENV_KEY but you are missing a .env.vault file at ${t}. Did you forget to build it?`),Gt.configDotenv(e))}function M1(e,t){const r=Buffer.from(t.slice(-64),"hex");let n=Buffer.from(e,"base64");const o=n.subarray(0,12),s=n.subarray(-16);n=n.subarray(12,-16);try{const c=I1.createDecipheriv("aes-256-gcm",r,o);return c.setAuthTag(s),`${c.update(n)}${c.final()}`}catch(c){const i=c instanceof RangeError,g=c.message==="Invalid key length",f=c.message==="Unsupported state or unable to authenticate data";if(i||g){const a=new Error("INVALID_DOTENV_KEY: It must be 64 characters long (or more)");throw a.code="INVALID_DOTENV_KEY",a}else if(f){const a=new Error("DECRYPTION_FAILED: Please check your DOTENV_KEY");throw a.code="DECRYPTION_FAILED",a}else throw c}}function U1(e,t,r={}){const n=!!(r&&r.debug),o=!!(r&&r.override);if(typeof t!="object"){const s=new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");throw s.code="OBJECT_REQUIRED",s}for(const s of Object.keys(t))Object.prototype.hasOwnProperty.call(e,s)?(o===!0&&(e[s]=t[s]),n&&ns(o===!0?`"${s}" is already defined and WAS overwritten`:`"${s}" is already defined and was NOT overwritten`)):e[s]=t[s]}const Gt={configDotenv:j1,_configVault:F1,_parseVault:N1,config:D1,decrypt:M1,parse:O1,populate:U1};Zr.exports.configDotenv=Gt.configDotenv;Zr.exports._configVault=Gt._configVault;Zr.exports._parseVault=Gt._parseVault;Zr.exports.config=Gt.config;Zr.exports.decrypt=Gt.decrypt;Zr.exports.parse=Gt.parse;Zr.exports.populate=Gt.populate;Zr.exports=Gt;var $1=Zr.exports;const z1=gs($1),zc="arduino_secrets.h",G1=()=>({name:zc,data:"",content:"",mimetype:"text"});function V1(e,t){for(const r of t){const n=r.value?r.value.replace(/\\/g,"\\\\").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/'/g,"\\'").replace(/"/g,'\\"'):"";e.content+=`#define ${r.name} "${n}"
`}return e}function mh(e){const t=G1(),r=V1(t,e);return{data:Er(r.content,r.mimetype),name:r.name}}function gh(e,t,r){const n=`#include "${zc}"
${t}`;return{...e,data:Er(n,r)}}function vh(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(r=vh(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function q1(){for(var e,t,r=0,n="",o=arguments.length;r<o;r++)(e=arguments[r])&&(t=vh(e))&&(n&&(n+=" "),n+=t);return n}const Ml=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,or=q1,to=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return or(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:o,defaultVariants:s}=t,c=Object.keys(o).map(f=>{const a=r==null?void 0:r[f],y=s==null?void 0:s[f];if(a===null)return null;const l=Ml(a)||Ml(y);return o[f][l]}),i=r&&Object.entries(r).reduce((f,a)=>{let[y,l]=a;return l===void 0||(f[y]=l),f},{}),g=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((f,a)=>{let{class:y,className:l,...v}=a;return Object.entries(v).every(A=>{let[d,T]=A;return Array.isArray(T)?T.includes({...s,...i}[d]):{...s,...i}[d]===T})?[...f,y,l]:f},[]);return or(e,c,g,r==null?void 0:r.class,r==null?void 0:r.className)};var lr={id:"my-cloud",name:"My Cloud"},H1={CLOUD_HOME_URL:"https://app.arduino.cc",DIGITAL_STORE_URL:"https://digital-store.arduino.cc",ID_URL:"https://id.arduino.cc",ICON_CDN:"https://wedo-organizations-logo.arduino.cc"},Ka=["arduino","create-entry","create-maker","create-maker-plus","cloud-enterprise","cloud-classroom"];function W1(e){return X.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 32 32",...e,children:X.jsx("path",{fill:"currentColor",d:"M6.67 26.67c-.74 0-1.36-.26-1.89-.79A2.57 2.57 0 0 1 4 24V5.33c0-.73.26-1.36.78-1.88a2.57 2.57 0 0 1 1.89-.78h18.66c.74 0 1.36.26 1.89.78.52.52.78 1.15.78 1.88v7.57a9.22 9.22 0 0 0-2.67-.8V5.33H6.67v17.14a14.15 14.15 0 0 1 3.78-2.6 12.62 12.62 0 0 1 4.58-1.17 11.78 11.78 0 0 0-.36 2.7 10.04 10.04 0 0 0-5.34 2.27V24h5.74c.15.49.33.96.53 1.4.2.44.44.87.73 1.27H6.67ZM16 16h.33a9.45 9.45 0 0 1 4.14-3.3 4.8 4.8 0 0 0 .2-1.37 4.5 4.5 0 0 0-1.37-3.3A4.5 4.5 0 0 0 16 6.67a4.5 4.5 0 0 0-3.3 1.36 4.5 4.5 0 0 0-1.37 3.3 4.5 4.5 0 0 0 1.37 3.3A4.5 4.5 0 0 0 16 16Zm0-2.67c-.56 0-1.03-.2-1.42-.58a1.93 1.93 0 0 1-.58-1.42c0-.55.2-1.02.58-1.41.4-.4.86-.59 1.42-.59.56 0 1.03.2 1.42.59.39.39.58.86.58 1.41 0 .56-.2 1.03-.58 1.42-.4.39-.86.58-1.42.58ZM22.67 28l-.4-2a5.79 5.79 0 0 1-1.47-.8l-1.93.6-1.34-2.27 1.54-1.33a6.15 6.15 0 0 1 0-1.73l-1.54-1.34 1.34-2.26 1.93.6a5.79 5.79 0 0 1 1.47-.8l.4-2h2.66l.4 2a6.72 6.72 0 0 1 1.47.86l1.93-.66 1.34 2.33-1.54 1.33a5.06 5.06 0 0 1 0 1.67l1.54 1.33-1.34 2.27-1.93-.6a5.79 5.79 0 0 1-1.47.8l-.4 2h-2.66ZM24 24c.73 0 1.36-.26 1.88-.78.53-.53.79-1.15.79-1.89 0-.73-.26-1.36-.79-1.88a2.57 2.57 0 0 0-1.88-.78c-.73 0-1.36.26-1.88.78a2.57 2.57 0 0 0-.79 1.88c0 .74.26 1.36.79 1.89.52.52 1.15.78 1.88.78Z"})})}function Z1(e){return X.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 32 32",...e,children:X.jsx("path",{fill:"#374146",fillRule:"evenodd",clipRule:"evenodd",d:"m7.42 21 4.3-4.29a1 1 0 0 0 .21-1.09 1 1 0 0 0-1.63-.33l-6 6a1 1 0 0 0 0 1.42l6 6a1 1 0 1 0 1.42-1.42L7.42 23H27a1 1 0 0 0 0-2H7.4Zm20.3-11.7-6-6a1 1 0 0 0-1.42 1.4L24.59 9H5a1 1 0 0 0 0 2h19.58l-4.3 4.28a1 1 0 1 0 1.43 1.42l6-6a1 1 0 0 0 .21-1.09 1 1 0 0 0-.21-.33Z"})})}function K1(e){return X.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 32 32",...e,children:X.jsx("path",{fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd",d:"M11.9 25.33c-.31 0-.67-.13-.92-.38l-8.31-8.3 1.86-1.82 7.38 7.37L27.47 6.67l1.86 1.85-16.5 16.43c-.25.25-.6.38-.92.38"})})}function Y1(e){return X.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 32 32",...e,children:X.jsx("path",{fill:"currentColor",d:"M29.33 8v16c0 .73-.26 1.36-.78 1.88-.52.53-1.15.79-1.88.79H5.33c-.73 0-1.36-.27-1.88-.79A2.57 2.57 0 0 1 2.67 24V8c0-.73.26-1.36.78-1.88a2.57 2.57 0 0 1 1.88-.79h21.34c.73 0 1.36.26 1.88.79.52.52.78 1.15.78 1.88Zm-24 2.67h21.34V8H5.33v2.67Zm0 5.33v8h21.34v-8H5.33Z"})})}function X1(e){return X.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 32 32",fill:"none",...e,children:X.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"m16.7 5.3 8 8c.2.2.3.4.3.7v12c0 .6-.4 1-1 1H8a1 1 0 0 1-1-1v-2c0-.6.4-1 1-1s1 .4 1 1v1h14V15h-7a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V7H8a1 1 0 0 1-1-1c0-.6.4-1 1-1h8c.3 0 .5.1.7.3Zm.3 3.1V13h4.6L17 8.4ZM12 21h8a1 1 0 1 0 0-2h-8a1 1 0 1 0 0 2Zm-4-2a1 1 0 0 1-1-1v-2a1 1 0 1 1 2 0v2c0 .6-.4 1-1 1Zm-1-7a1 1 0 1 0 2 0v-2a1 1 0 1 0-2 0v2Z",clipRule:"evenodd"})})}function Q1(e){return X.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 32 32",...e,children:X.jsx("path",{fill:"#374146",d:"M6.67 28c-.74 0-1.36-.26-1.89-.78A2.57 2.57 0 0 1 4 25.33V6.67c0-.74.26-1.36.78-1.89A2.57 2.57 0 0 1 6.67 4H16v2.67H6.67v18.66H16V28H6.67Zm14.66-5.33-1.83-1.94 3.4-3.4H12v-2.66h10.9l-3.4-3.4 1.83-1.94L28 16l-6.67 6.67Z"})})}var Ul={label:"Plan Usage",href:"/plan-usage",icon:Ip,allowed:{space:["edu","pro","private"],minor:!1}},J1={label:"Space Settings",href:"/settings",icon:Tp,allowed:{space:["edu","pro"],minor:!1}},eb=[[{label:"Home",href:"/",icon:up,allowed:{space:["edu","pro","private"],minor:!0}}],[{label:"Sketches",href:"/sketches",icon:lp,allowed:{space:["edu","pro","private"],minor:!0}}],[{label:"Devices",href:"/devices",icon:fp,allowed:{space:["edu","pro","private"],minor:!1}},{label:"Things",href:"/things",icon:hp,allowed:{space:["edu","pro","private"],minor:!1}},{label:"Dashboards",href:"/dashboards",icon:dp,allowed:{space:["edu","pro","private"],minor:!1}},{label:"Triggers",href:"/triggers",icon:pp,requiresPaidPlan:Ka.filter(e=>e!=="create-entry"),allowed:{space:["edu","pro","private"],minor:!1}}],[{label:"Templates",href:"/templates",icon:X1,allowed:{space:["edu","pro","private"],minor:!1},extra:()=>window.localStorage.getItem("cs-link-templates")===null?X.jsx("span",{className:"rounded bg-teal-0/30 px-2 font-roboto text-xx-small font-bold text-teal-3",children:"NEW"}):null,onClickEmit:()=>window.localStorage.setItem("cs-link-templates","true")}],[{label:"Resources",href:"/resources",icon:mp,allowed:{space:["edu","pro","private"],minor:!1}},{label:"Courses",href:"/courses",icon:gp,allowed:{space:["edu","private"],minor:!0}}],[{label:"Integrations",href:"/integrations",icon:vp,allowed:{space:["edu","pro","private"],minor:!1}}],[J1,{...Ul,allowed:{...Ul.allowed,space:["private"]}}]],Wo={linkGroup:eb},tb={enabled:!0,cacheTime:0,initialData:void 0},Ra=new Map,Oa=(e,t,r)=>{const n=Oe.useRef(),[o,s]=Oe.useState("stale"),[c,i]=Oe.useState(r==null?void 0:r.initialData),g=Oe.useMemo(()=>typeof e=="string"?e:e.join("/"),[e]),{enabled:f,cacheTime:a}={...tb,...r};return n.current=t,Oe.useEffect(()=>{var y;f&&(a===1/0&&Ra.has(g)?i(Ra.get(g)):(s("loading"),(y=n.current)==null||y.call(n).then(l=>{i(l),s("done"),Ra.set(g,l)}).catch(()=>s("error"))))},[g,f,a]),{loading:o==="loading",error:o==="error",data:c}},yh=class Ya{constructor(t,r){this.domain=t??"arduino.cc",this.prefix=r??"arduino",this._listeners=[]}static isSSR(){return typeof document>"u"||typeof window>"u"}get(t){if(!this.prefix||Ya.isSSR())return"";const r=document.cookie.match(new RegExp(`(?:^|; )${`${this.prefix}::${t}`.replace(/([.$?*|{}()[\]\\/+^])/g,"\\$1")}=([^;]*)`));return r?decodeURIComponent(r[1]):""}set(t,r,n){if(!(!this.prefix||Ya.isSSR())&&(document.cookie=`${this.prefix}::${r}=${encodeURIComponent(t)};max-age=31622400;Domain=${this.domain}; Path=/; SameSite=Strict`,!n))for(const o of this._listeners)o(t,r)}getSpace(){return this.get("space-id")}setSpace(t,r){this.set(t,"space-id",r)}getHiddenlogo(){return this.get("hidden-logo")}setHiddenlogo(t){this.set(t.filter(r=>r!=="").join(","),"hidden-logo")}subscribe(t){this._listeners.push(t)}unsubscribe(t){this._listeners=this._listeners.filter(r=>r!==t)}};function rb(e){if(!e)throw new Error("CloudSidebar: No token provided.");return{Authorization:`Bearer ${e}`,"Content-Type":"application/json;charset=UTF-8"}}async function $l(e,t){const r=await fetch(e,{...t});if(!r.ok){const n=await r.json();return Promise.reject(n)}return r.json().then(n=>n)}function Kn(e){return e.replace(/\/+$/,"")}function bh(e,t){return e?e.includes(t)||e.includes("data:image")?e:`${Kn(t)}/${e}`:""}function zl(e,t,r=!1){return e.map(n=>n.filter(({allowed:s})=>!s.minor&&r?!1:s.space.includes(t.id!==lr.id?t.space:"private"))).filter(n=>n.length>0)}function nb(e,t,r){if(!t||!r)return e;for(const[n,o]of Object.entries(t)){const s=o.linkGroup.flat();if(s.length>1&&s.filter(c=>r===c.href).length>0||s.length===1&&r===s[0].href&&e.linkGroup.flat().filter(c=>r===c.href).length===0)return{...t[n],isSubNav:!0}}return{...e,isSubNav:!1}}function wh(){return typeof window>"u"||typeof document>"u"?!0:localStorage.getItem("create.installed-from-store")==="true"}var xh={page:{id:"",name:"",url:"",updated_at:""},status:{indicator:"",description:"Loading..."}},_h=Oe.createContext({spaces:[],env:H1,selectedSpace:lr,plans:[],storage:new yh,cloudStatus:{data:xh}}),Kr=()=>{const e=Oe.useContext(_h);if(!e)throw new Error("useCloudContext must be used within a CloudContextProvider");return e};function ib(e){var t,r;const{children:n,spaces:o,onSpaceChange:s,env:c,privateSpacePlans:i,api:g,storage:f}=e,{client:a,isAuthenticated:y}=Cr(),l=typeof window>"u"||typeof document>"u"?void 0:a.getCustomization(),v=Oe.useCallback(async N=>$l(N,{headers:rb(await a.getTokenSilently())}),[a]),A=Oa("spaces",()=>v(`${g==null?void 0:g.baseurl}/classroom/v1/organizations`),{enabled:y&&!!g,cacheTime:5*60*1e3}),d=Oa("privatePlans",()=>v(`${g==null?void 0:g.baseurl}/restrictions/v1/recap/me`),{enabled:y&&!!g,cacheTime:5*60*1e3}),T=Oa("cloudStatus",()=>$l("https://status.arduino.cc/api/v2/status.json"),{cacheTime:5*60*1e3,initialData:xh}),w=Oe.useMemo(()=>{var N;const P=o||((N=A.data)==null?void 0:N.organizations);if(P){if(l){const H=P.find(j=>j.id===l.organization_id);return H?[H]:[lr]}return P.includes(lr)?P:[lr,...P]}},[o,(t=A.data)==null?void 0:t.organizations,l]),S=Oe.useSyncExternalStore(N=>{const P=(H,j)=>{if(j!=="space-id"||!H)return;const Z=(w==null?void 0:w.find(U=>U.id===H))||lr;s==null||s(Z),N()};return f.subscribe(P),()=>{f.unsubscribe(P)}},()=>{const N=f.getSpace();if(N||f.setSpace(lr.id,!0),l){const P=w==null?void 0:w.find(H=>H.id===l.organization_id);if(P&&N!==P.id)return f.setSpace(P.id,!0),P}return(w==null?void 0:w.find(P=>P.id===N))||lr},()=>lr);Oe.useEffect(()=>{const N=document.createElement("script");return N.src="https://status.arduino.cc/embed/script.js",N.async=!0,document.body.appendChild(N),()=>{document.body.removeChild(N)}},[]);const O=Oe.useMemo(()=>{var N;return{spaces:w,selectedSpace:S,env:c,cloudStatus:T,plans:S.space==="edu"||S.space==="pro"?[S.plan_name]:i||((N=d.data)==null?void 0:N.plans)||[],storage:f}},[i,T,c,(r=d.data)==null?void 0:r.plans,S,w,f]);return X.jsx(_h.Provider,{value:O,children:n})}function ob(e){const{storage:t,selectedSpace:r}=Kr(),{client:n}=Cr(),o=typeof window>"u"||typeof document>"u"?void 0:n.getCustomization(),s=Oe.useSyncExternalStore(i=>{const g=(f,a)=>a==="hidden-logo"&&i();return t.subscribe(g),()=>{t.unsubscribe(g)}},()=>t.getHiddenlogo(),()=>"");return Oe.useMemo(()=>s.split(",").filter(i=>i!=="").includes(r.id),[s,r.id])?null:X.jsxs("div",{className:"mx-auto my-3.5 flex flex-col items-center gap-2 text-center text-fog",children:[o?X.jsx("span",{className:"font-opensans text-xx-small text-smoke",children:"Powered by"}):void 0,X.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"53",height:"38",fill:"none",...e,children:X.jsxs("g",{fill:"currentColor",children:[X.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M52.5 13.572C52.5 6.574 46.744.89 39.69.89c-.65 0-1.318.037-1.967.149-5.485.796-9.166 4.85-11.223 7.961-2.057-3.11-5.738-7.165-11.223-7.961a14.061 14.061 0 0 0-1.966-.149C6.237.89.5 6.574.5 13.572c0 7 5.756 12.683 12.81 12.683.65 0 1.318-.037 1.985-.148 5.485-.814 9.166-4.87 11.223-7.98 2.057 3.11 5.738 7.166 11.223 7.98.65.093 1.317.148 1.984.148 7.02 0 12.775-5.684 12.775-12.683Zm-37.854 8.091a8.31 8.31 0 0 1-1.354.093c-4.655 0-8.426-3.684-8.426-8.184 0-4.517 3.79-8.183 8.444-8.183.452 0 .903.037 1.354.092 5.178.76 8.336 6 9.418 8.091-1.1 2.111-4.276 7.332-9.436 8.091Zm23.69-16.182c-5.178.76-8.354 6-9.418 8.091 1.064 2.093 4.24 7.332 9.418 8.091.451.056.902.093 1.354.093 4.637 0 8.426-3.666 8.426-8.184 0-4.499-3.771-8.183-8.426-8.183-.452 0-.903.037-1.354.092ZM9.697 12.214h7.748v2.438H9.697v-2.438Zm33.568 2.456h-2.613v2.563h-2.504V14.67h-2.613v-2.456h2.613V9.65h2.504v2.563h2.613v2.456Zm5.938-12.374c0-.77.627-1.407 1.389-1.407a1.41 1.41 0 0 1 1.41 1.407c0 .813-.626 1.406-1.41 1.406a1.406 1.406 0 0 1-1.39-1.406Zm1.408-.88h-.694v1.759h.448V2.58h.246l.247.594h.493l-.336-.66c.224-.087.336-.263.336-.505 0-.373-.202-.593-.74-.593Zm1.144.88c0-.638-.493-1.187-1.165-1.187s-1.143.484-1.143 1.187c0 .725.538 1.186 1.143 1.186.672 0 1.165-.461 1.165-1.186Zm-.875-.308c0 .22-.112.286-.313.286l-.224.022v-.572h.224c.246 0 .313.066.313.264Z"}),X.jsx("path",{d:"m.993 37.79 2.303-7.535h2.093l2.407 7.536H5.808l-.419-1.465H3.296l-.419 1.465H.993Zm3.35-5.65-.733 2.72h1.465l-.733-2.72ZM8.947 30.36h3.036c2.093 0 2.825 1.047 2.825 2.512 0 1.046-.418 1.779-1.256 2.197l1.466 2.722H12.82l-1.047-2.303h-.942v2.407H8.947V30.36Zm3.977 2.512c0-.628-.209-1.047-1.15-1.047h-.943v2.093h.942c.733.105 1.151-.209 1.151-1.046ZM16.378 30.36h2.407c2.826 0 3.768 1.36 3.768 3.663 0 1.78-.523 3.768-3.768 3.768h-2.512V30.36h.105Zm1.884 1.465v4.396h.733c1.57 0 1.674-.942 1.674-2.198 0-1.465-.105-2.198-1.78-2.198h-.627ZM27.995 30.36h1.78v4.919c0 2.198-1.675 2.721-3.036 2.721-1.256 0-2.93-.419-2.93-2.721v-4.92h1.884v4.606c0 1.256.418 1.57 1.15 1.57.838 0 1.152-.419 1.152-1.57V30.36ZM31.449 36.325h1.988V31.93h-1.883v-1.57h5.756v1.57H35.32v4.395h1.989v1.57h-5.757v-1.57h-.104ZM40.45 37.79h-1.78v-7.43h2.093l2.407 4.5v-4.5h1.78v7.535h-1.884l-2.512-4.814-.105 4.71ZM52.485 34.128c0 2.197-.837 3.872-3.244 3.872-2.198 0-3.14-1.256-3.14-3.768 0-2.302.837-3.977 3.14-3.977 2.198 0 3.244.942 3.244 3.873Zm-1.988 0c0-1.884-.105-2.303-1.256-2.303-.942-.104-1.151.524-1.151 2.407 0 1.465.104 2.303 1.15 2.303 1.152-.105 1.257-.733 1.257-2.407Z"})]})})]})}function sb(e){const{children:t,className:r,...n}=e;return X.jsx("div",{className:or("flex items-center justify-center",r),...n,children:t})}var Eh=Oe.forwardRef(({children:e,className:t,...r},n)=>{const o=typeof e=="string"?"span":Rp;return X.jsx(o,{className:or("whitespace-nowrap rounded px-1 text-x-small text-asbestos ","no-underline duration-150 ease-in-out hover:bg-clouds hover:text-jet",t),...r,ref:n,children:e})});Eh.displayName="BreadcrumbsItem";function ab(){return X.jsx(yp,{className:"text-medium text-concrete"})}function cb(e){const{triggerContent:t,hideCaret:r,triggerIcon:n,openOnHover:o,children:s,className:c,...i}=e,[g,f]=Oe.useState(!1);return X.jsx("div",{className:or("flex items-center justify-center",c),...i,children:X.jsxs(bf,{modal:!1,open:g,onOpenChange:f,children:[X.jsx(wf,{asChild:!0,onMouseEnter:()=>{o&&!g&&f(!0)},children:X.jsxs("button",{className:"group flex cursor-pointer items-center rounded-md border-0 bg-transparent px-2 font-opensans text-x-small font-bold text-jet transition-colors duration-150 hover:bg-teal-5/10 hover:text-teal-3 data-[state=open]:bg-teal-5/10 data-[state=open]:text-teal-3",children:[X.jsxs("span",{className:"flex items-center justify-center gap-1",children:[n,X.jsx("span",{className:"max-w-40 truncate",children:t})]}),r?null:X.jsx(bp,{className:"text-medium text-asbestos transition-transform duration-300 group-hover:text-teal-3 group-data-[state=open]:rotate-180 group-data-[state=open]:text-teal-3"})]})}),X.jsx(xf,{children:X.jsx(_f,{className:"w-64 rounded bg-white py-0.5 shadow-deep data-[state=closed]:animate-fade-out data-[state=open]:animate-fade-in",align:"start",sideOffset:5,side:"bottom",children:s})})]})})}var br=Oe.forwardRef((e,t)=>{const{className:r,children:n,...o}=e;return X.jsx(Vn,{className:or("box-border inline-flex w-full cursor-pointer items-center gap-4 px-4 py-2 font-opensans text-xx-small text-jet outline-none transition-colors duration-[250ms] ease-in-out data-[disabled]:pointer-events-none data-[highlighted]:bg-teal-5/10 data-[disabled]:opacity-50",r),...o,ref:t,children:n})});br.displayName="BreadcrumbsDropdownItem";function ub(e){const{children:t,container:r="cloud-header-portal",rightPadding:n=!0,className:o,...s}=e,[c,i]=Oe.useState(!1);if(Oe.useEffect(()=>{i(!0)},[]),!c)return null;const g=document.getElementById(r);return c&&!g&&console.warn(`HeaderPortal: Could not find ${r} element. Is the CloudHeader component correctly mounted?`),g?wp.createPortal(X.jsx("div",{className:or("flex size-full items-center justify-between gap-2 pl-5",n?"pr-[60px]":"",o),...s,children:t}),g):null}function lb(e){const{children:t,className:r,...n}=e;return X.jsx("div",{className:or("scrollable mt-5 flex size-full flex-1 flex-col overflow-auto from-feather",r),...n,children:t})}var fb=to("mx-4 my-2 flex animate-fade-in flex-col items-center gap-4 rounded-md p-4",{variants:{intent:{normal:"bg-clouds",edu:"border border-solid border-edu bg-[#F39C12]/10",expired:"border border-solid border-warning bg-[#FCFEEE]"}},defaultVariants:{intent:"normal"}});function hb(e){var t;const{callbacks:r,...n}=e,{spaces:o,selectedSpace:s,plans:c,env:i}=Kr(),{user:g,isAuthenticated:f,client:a}=Cr(),y=typeof window>"u"||typeof document>"u"?void 0:a.getCustomization(),l=wh(),v=Oe.useMemo(()=>({"free-plan":{intent:"normal",title:"Arduino Cloud",description:"Ready to go beyond this free plan? Upgrade for premium features.",button:{label:"SEE PLANS",onClick:()=>window.open("https://cloud.arduino.cc/plans/","_blank")}},minor:{intent:"edu",title:"Hey Kid!",description:"Join your School in Arduino Cloud and enjoy your experiments!",button:{label:"JOIN SHARED SPACE",onClick:()=>window.open(`${Kn(i.CLOUD_HOME_URL)}/home/?join-space}`,"_blank")}}}),[i]),A=Oe.useMemo(()=>{if(!(!g||c===void 0||!o)){if(g["http://arduino.cc/is_minor"]&&(o==null?void 0:o.length)===1)return"minor";if(!g["http://arduino.cc/is_minor"])return s.id===lr.id?c.some(d=>Ka.includes(d))?void 0:"free-plan":s.space==="edu"&&s.roles.includes("role:edu-admin")?c.some(d=>Ka.includes(d))?void 0:"free-plan":void 0}},[c,s,o,g]);return!A||!f||y||A==="free-plan"&&l?null:X.jsxs("div",{className:fb({intent:v[A].intent}),...n,children:[X.jsxs("div",{className:"flex flex-col items-center justify-center gap-1 text-jet",children:[v[A].icon,X.jsx("span",{className:"text-x-small font-bold",children:v[A].title}),X.jsx("span",{className:"text-center text-xx-small",children:v[A].description})]}),X.jsx("button",{className:"cursor-pointer rounded-full border-0 bg-teal-3 px-4 py-0.5 font-opensans text-x-small font-bold uppercase text-white",onClick:(t=r==null?void 0:r[A])!=null?t:v[A].button.onClick,children:v[A].button.label})]})}function Sh(e){return e.condition?e.wrapper(e.children):e.children}var is=Oe.forwardRef((e,t)=>{const{as:r="a",hrefProp:n="href",onClick:o,className:s,...c}=e;return X.jsx(r,{ref:t,[n]:e.href,onClick:o,className:s,...c})});is.displayName="PolymorphicLink";function db(e){return X.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 32 32",...e,children:X.jsx("path",{fill:"currentColor",d:"M6.67 28c-.74 0-1.36-.26-1.89-.78A2.57 2.57 0 0 1 4 25.33V6.67c0-.74.26-1.36.78-1.89A2.57 2.57 0 0 1 6.67 4h18.66c.74 0 1.36.26 1.89.78.52.53.78 1.15.78 1.89v18.66c0 .74-.26 1.36-.78 1.89-.53.52-1.15.78-1.89.78H6.67Zm4-2.67V6.67h-4v18.66h4Zm2.66 0h12V6.67h-12v18.66Z"})})}var Ch=Oe.createContext({navigation:Wo,subNavigation:{}});function kh(){const e=Oe.useContext(Ch);if(!e)throw new Error("useSidebarContext must be used within a SidebarRoot");return e}function pb(e){const{className:t,children:r,asDialog:n,navigation:o=Wo,linkElement:s,path:c,subNavigation:i,...g}=e,{selectedSpace:f}=Kr(),{user:a,client:y}=Cr(),l=typeof window>"u"||typeof document>"u"?void 0:y.getCustomization(),v=a["http://arduino.cc/is_minor"]||!1,A=Oe.useMemo(()=>({...o,linkGroup:zl(o.linkGroup,f,v)}),[o,f,v]),d=Oe.useMemo(()=>i?Object.fromEntries(Object.entries(i).map(([w,S])=>[w,{...S,linkGroup:zl(S.linkGroup,f,v)}])):void 0,[i,f,v]),T=Oe.useMemo(()=>({linkElement:s,subNavigation:i,asDialog:n,navigation:f.id===lr.id&&l?{...Wo,linkGroup:[[Wo.linkGroup[0][0]]],isSubNav:!1,path:c}:{...nb(A,d,c),path:c}}),[n,A,d,l,s,c,f.id,i]);return X.jsx(Ch.Provider,{value:T,children:n?X.jsx(Sh,{condition:n==="header",wrapper:w=>X.jsxs("nav",{className:"fixed z-[1] box-border flex h-[60px] w-full items-center justify-between border-0 border-b border-solid border-fog bg-white font-opensans",children:[X.jsx(mb,{}),w,X.jsx("div",{id:"cloud-header-portal",className:"contents"})]}),children:X.jsxs(Ef,{children:[X.jsx(Sf,{asChild:!0,children:n==="header"?X.jsx("button",{className:"flex h-full cursor-pointer items-center justify-center border-0 bg-transparent px-3.5 hover:bg-clouds",id:"cs-sidebarroot-trigger",children:X.jsx(db,{className:"text-[32px] text-teal-2"})}):n.trigger}),X.jsxs(Cf,{children:[X.jsx(kf,{className:"fixed inset-0 z-auto bg-black/50 data-[state=closed]:animate-fade-out data-[state=open]:animate-fade-in"}),X.jsx(Af,{asChild:!0,children:X.jsx("div",{className:or("fixed inset-0 z-auto m-5 w-[270px] overflow-auto border-0 border-r border-solid border-fog bg-feather font-opensans data-[state=closed]:animate-sidebar-out data-[state=open]:animate-sidebar-in",t),...g,children:X.jsx("nav",{className:"flex h-full flex-col justify-between",children:r})})})]})]})}):X.jsx("div",{className:or("fixed w-[var(--cloud-sidebar-width)] border-0 border-r border-solid border-fog bg-feather font-opensans",t),...g,children:X.jsx("nav",{className:"flex h-screen flex-col justify-between",children:r})})})}function mb(){const{selectedSpace:e,env:t}=Kr(),{client:r}=Cr(),n=typeof window>"u"||typeof document>"u"?void 0:r.getCustomization(),o=n?n.organization_second_logo:e.second_logo;return n&&!n.organization_second_logo?X.jsx("span",{className:"absolute inset-0 m-auto flex h-[30px] justify-center text-small font-bold text-jet opacity-0 transition-opacity duration-300 xl:opacity-100",children:n.organization_name}):o?X.jsx("img",{className:"absolute inset-0 m-auto aspect-[3/1] h-[30px] object-contain text-5xl text-[#BDC7C7] opacity-0 transition-opacity duration-300 xl:opacity-100",src:bh(o,t.ICON_CDN)}):X.jsx(xp,{className:"absolute inset-0 m-auto h-full text-5xl text-[#BDC7C7] opacity-0 transition-opacity duration-300 xl:opacity-100"})}function gb(){const{spaces:e,plans:t,env:r}=Kr(),{navigation:n,asDialog:o,linkElement:s}=kh(),{isAuthenticated:c}=Cr();return!c||!e?X.jsx("div",{className:"size-full flex-1",children:n.linkGroup.map((i,g,{length:f})=>X.jsxs("div",{children:[X.jsx("ul",{className:"my-1 list-none space-y-2 p-0",children:i.map(({href:a})=>X.jsx("li",{className:"px-2",children:X.jsxs("div",{className:"box-border inline-flex w-full items-center gap-4 px-4 py-2",children:[X.jsx("div",{className:"size-5 animate-pulse rounded-full bg-fog"}),X.jsx("div",{className:"h-6 w-24 animate-pulse rounded-md bg-fog"})]})},a))}),f!==g+1?X.jsx(ga,{className:"h-px w-full bg-fog"}):null]},`linkgroup-${g}`))}):X.jsxs("div",{className:"w-full flex-1",id:"cs-sidebarnavigation",children:[n.name?X.jsxs(X.Fragment,{children:[X.jsx("div",{className:"flex items-center justify-between px-4 py-1.5",children:X.jsx("span",{className:"text-xx-small font-bold uppercase text-jet",children:n.name})}),X.jsx(ga,{className:"h-px w-full bg-fog"})]}):null,n.linkGroup.map((i,g,{length:f})=>X.jsxs("div",{children:[X.jsx("ul",{className:"my-1 list-none space-y-2 p-0",children:i.map(({href:a,label:y,icon:l,requiresPaidPlan:v,onClickEmit:A,extra:d})=>{const T=s?n.path===`${Kn(r.CLOUD_HOME_URL)}${a}`:!1,w=()=>v?!t.filter(Boolean).some(S=>v.includes(S)):!1;return X.jsx("li",{className:"px-2",children:X.jsx(Sh,{condition:o!==void 0,wrapper:S=>X.jsx(gc,{asChild:!0,children:S}),children:X.jsxs(is,{as:s==null?void 0:s.as,hrefProp:s==null?void 0:s.hrefProp,className:"box-border inline-flex w-full items-center justify-between rounded px-4 py-2 text-x-small text-jet no-underline hover:bg-teal-5/5 focus-visible:bg-teal-5/5 data-[active=true]:bg-teal-5/10 data-[active=true]:font-bold data-[active=true]:text-teal-3","data-active":T,onClick:S=>A==null?void 0:A(S),ref:S=>{T&&(S==null||S.scrollIntoView({behavior:"smooth",block:"nearest"}))},href:s?a:`${Kn(r.CLOUD_HOME_URL)}${a}`,children:[X.jsxs("div",{className:"flex w-full items-center gap-4",children:[X.jsx(l,{className:"text-medium"}),X.jsx("span",{children:y}),d==null?void 0:d()]}),w()?X.jsx(_p,{className:"text-medium"}):null]})})},a)})}),f!==g+1?X.jsx(ga,{className:"h-px w-full bg-fog"}):null]},`linkgroup-${g}`))]})}function vb(e){return e.condition?e.children:null}function Ah(e){const{children:t,trigger:r,title:n,padded:o=!0,contentProps:s,...c}=e;return X.jsxs(Ef,{...c,children:[X.jsx(Sf,{asChild:!0,children:r}),X.jsxs(Cf,{children:[X.jsx(kf,{className:"fixed inset-0 z-auto bg-black/80 data-[state=closed]:animate-fade-out data-[state=open]:animate-fade-in"}),X.jsx(Af,{className:"fixed left-[50%] top-[50%] flex max-h-[90vh] w-[90%] translate-x-[-50%] translate-y-[-50%] transition-all duration-500 data-[state=closed]:animate-modal-out data-[state=open]:animate-modal-in md:w-[650px]",...s,children:X.jsxs("div",{className:"relative z-auto w-full overflow-auto rounded bg-white shadow-deep",children:[X.jsxs("div",{className:"sticky top-0 inline-flex h-[54px] w-full border-spacing-1 items-center justify-between border-0 border-b border-solid border-smoke bg-white",children:[X.jsx("div",{className:"w-[50px]"}),X.jsx(Pp,{className:"font-opensans text-small font-normal",children:n}),X.jsx(Bp,{className:"flex w-[50px] cursor-pointer items-center justify-center border-0 bg-transparent",children:X.jsx(Fp,{className:"size-6"})})]}),X.jsx("div",{className:or("scrollable space-y-7 overflow-auto overscroll-y-none from-white",o&&"p-9 md:px-[86px]"),children:t})]})})]})]})}var yb='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" fill="none"><g clip-path="url(%23a)"><mask id="b" width="60" height="60" x="0" y="0" maskUnits="userSpaceOnUse" style="mask-type:luminance"><path fill="%23fff" d="M30 60a30 30 0 1 0 0-60 30 30 0 0 0 0 60Z"/></mask><g mask="url(%23b)"><path fill="%230A7891" d="M30 60a30 30 0 1 0 0-60 30 30 0 0 0 0 60Z"/><path fill="%2399E9E7" d="M49.06 59.14 30 65.39l-19.06-6.25a19.07 19.07 0 0 1 38.12 0Z"/><path fill="%2369C3CA" d="M30.16 16.88h-.32a4.24 4.24 0 0 0-4.23 4.23v11.84c0 2.35 1.9 4.24 4.23 4.24h.32c2.34 0 4.23-1.9 4.23-4.24V21.11c0-2.34-1.9-4.23-4.23-4.23Z"/></g></g><defs><clipPath id="a"><path fill="%23fff" d="M0 0h60v60H0z"/></clipPath></defs></svg>',bb=to("block shrink-0 select-none overflow-hidden align-middle",{variants:{size:{sm:"size-7",lg:"size-9",xl:"size-10"}},defaultVariants:{size:"sm"}}),wb=to("m-0 box-border size-full rounded-full border-2 border-solid object-cover p-px",{variants:{spaceType:{"":"border-teal-1",edu:"border-edu",pro:"border-jet"}},defaultVariants:{spaceType:""}});function Xa(e){const{name:t,spaceType:r,logo:n,size:o}=e,{env:s}=Kr(),{user:c}=Cr(),i=c["http://arduino.cc/is_minor"]?yb:c.picture;return X.jsxs(Op,{className:bb({size:o}),children:[X.jsx(Np,{className:wb({spaceType:r}),src:r?bh(n,s.ICON_CDN):i,alt:t}),X.jsx(Lp,{className:"flex size-full items-center justify-center rounded-full bg-teal-2 font-opensans text-x-small font-bold text-white data-[spacetype=edu]:bg-edu data-[spacetype=pro]:bg-jet",delayMs:0,"data-spacetype":r,children:xb(r?t:c.name||c["http://arduino.cc/username"]||c.email)})]})}function xb(e){try{const t=e.replace(/[^a-zA-Z0-9 ]/g,"").split(" ");return t.length===1?t[0].slice(0,2).toUpperCase():t.filter(r=>r.length>0).slice(0,2).map(r=>r[0].toUpperCase()).join("")||""}catch{return""}}var _b=to("cursor-pointer space-y-2 rounded-lg border-0 bg-transparent p-4 font-opensans outline outline-1 outline-smoke",{variants:{spaceType:{"":"hover:bg-teal-5/10 focus-visible:bg-teal-1/10 data-[selected]:bg-teal-5/10 data-[selected]:outline-teal-2",edu:"hover:bg-edu/10 focus-visible:bg-edu/10 data-[selected]:bg-edu/10 data-[selected]:outline-edu",pro:"hover:bg-jet/10 focus-visible:bg-jet/10 data-[selected]:bg-jet/10 data-[selected]:outline-jet"}},defaultVariants:{spaceType:""}}),Eb={edu:"School Space",pro:"Pro Space"};function jo(e){const{children:t,condition:r=!0,...n}=e;return r?X.jsx(Vn,{className:"box-border inline-flex h-11 w-full cursor-pointer items-center gap-4 px-4 py-2.5 font-opensans text-xx-small text-jet outline-none data-[disabled]:pointer-events-none data-[highlighted]:bg-teal-5/10 data-[disabled]:opacity-50",...n,children:t}):null}function Sb(e){const{onSelect:t}=e,{spaces:r,selectedSpace:n,storage:o}=Kr();return X.jsxs(Ah,{title:"Switch space",contentProps:{onCloseAutoFocus:()=>t()},trigger:X.jsxs(Vn,{className:"flex w-full cursor-pointer items-center justify-center gap-2 rounded-3xl border-0 bg-basegray py-1.5 font-opensans text-jet transition-colors duration-200 hover:bg-clouds hover:outline-none",onSelect:s=>{s.preventDefault()},children:[X.jsx(Z1,{className:"text-[21px]"}),X.jsx("span",{className:"text-xx-small",children:"Switch space"})]}),children:[X.jsxs("div",{className:"flex flex-col justify-center gap-4 font-opensans",children:[X.jsx("span",{className:"text-medium font-bold text-jet",children:"Arduino Shared Space"}),X.jsx("span",{className:"text-x-small",children:"Select one and start to Collaborate on projects with shared devices and dashboards."})]}),X.jsx("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-3",children:r==null?void 0:r.map(s=>X.jsx(gc,{asChild:!0,children:X.jsxs("button",{onClick:()=>{o.setSpace(s.id)},className:_b({spaceType:s.space}),"data-selected":(n==null?void 0:n.id)===s.id?!0:void 0,children:[X.jsx(Xa,{name:s.name,spaceType:s.space,logo:s.logo,size:"xl"}),X.jsxs("div",{className:"block overflow-hidden text-start",children:[X.jsx("div",{title:s.name,className:"truncate text-x-small font-bold text-onyx",children:s.name}),X.jsx("span",{className:"text-xx-small text-jet",children:Eb[s.space]||"Private Space"})]})]})},s.id))})]})}function Na(e){const{user:t}=Cr();return t["http://arduino.cc/is_minor"]?X.jsx(Ah,{title:e.title,padded:!1,trigger:X.jsx("button",{className:"cursor-pointer border-none bg-inherit p-0 font-opensans text-inherit",style:{textDecoration:"inherit",fontSize:"inherit"},children:e.children}),children:X.jsx("iframe",{id:"iframe-content",name:"iframe-content",className:"h-[75vh] w-full border-none bg-white",src:e.href})}):X.jsx("a",{href:e.href,className:"text-inherit",style:{textDecoration:"inherit",fontSize:"inherit"},target:"_blank",rel:"noopener noreferrer",children:e.children})}function Cb(){const[e,t]=Oe.useState(!1),{spaces:r,selectedSpace:n,storage:o,env:s}=Kr(),{navigation:c,asDialog:i,linkElement:g}=kh(),{user:f,isAuthenticated:a,client:y}=Cr(),l=(n==null?void 0:n.space)==="pro"&&(n==null?void 0:n.roles.includes("role:pro-editor")),v=Oe.useRef(null),A=typeof window>"u"||typeof document>"u"?void 0:y.getCustomization(),d=wh();if(!a||!r)return X.jsx("header",{className:"p-2",children:X.jsxs("div",{className:"box-border flex w-full cursor-wait flex-row flex-wrap items-center justify-between rounded px-4 py-2.5",children:[X.jsxs("div",{className:"inline-flex h-11 items-center gap-3",children:[X.jsx("div",{className:"size-9 select-none items-center justify-start overflow-hidden align-middle",children:X.jsx("div",{className:"flex size-full animate-pulse items-center justify-center rounded-full bg-fog"})}),X.jsxs("div",{className:"flex flex-col flex-wrap items-start justify-center gap-1",children:[X.jsx("div",{className:"h-6 w-24 animate-pulse rounded-md bg-fog"}),X.jsx("div",{className:"h-5 w-16 animate-pulse rounded-md bg-fog"})]})]}),X.jsx(ol,{className:"animate-pulse text-3xl text-fog"})]})});if(c.isSubNav)return X.jsx("header",{className:"p-2",children:X.jsxs(is,{as:g==null?void 0:g.as,hrefProp:g==null?void 0:g.hrefProp,href:"/",className:"box-border flex h-16 items-center justify-start gap-3 rounded px-4 py-2.5 text-x-small font-bold text-jet no-underline transition-colors duration-150 hover:bg-teal-5/5",children:[X.jsx(Ep,{className:"text-xl text-jet"}),"Back to Home"]})});const T=n.id===lr.id?{title:f.name||f["http://arduino.cc/username"],desc:f.email}:{title:n.name,desc:f.name||f.email};return X.jsxs("header",{className:"p-2",children:[i!==void 0?X.jsx(gc,{className:"hidden",ref:v}):null,X.jsxs(bf,{open:e,onOpenChange:t,children:[X.jsx(wf,{asChild:!0,children:X.jsxs("button",{id:"cs-spaceselector",className:"flex w-full cursor-pointer items-center justify-start gap-3 rounded border-0 bg-transparent px-4 py-2.5 font-opensans transition-colors duration-150 hover:bg-teal-5/5 data-[state=open]:bg-teal-5/5",children:[X.jsx(Xa,{name:n.name,spaceType:n==null?void 0:n.space,logo:n==null?void 0:n.logo,size:"lg"}),X.jsxs("div",{className:"block flex-1 overflow-hidden text-start",children:[X.jsx("div",{title:T.title,className:"truncate text-x-small font-bold text-gris",children:T.title}),X.jsx("div",{title:T.desc,className:"truncate text-xx-small text-gris",children:T.desc})]}),X.jsx(ol,{className:"shrink-0 text-3xl text-jet"})]})}),X.jsx(xf,{children:X.jsxs(_f,{className:"w-[var(--radix-dropdown-menu-trigger-width)] rounded bg-white py-0.5 shadow-deep data-[state=closed]:animate-fade-out data-[state=open]:animate-slide-in",align:"start",sideOffset:5,side:"bottom",children:[X.jsx(vb,{condition:!!r&&r.length>1,children:X.jsxs(X.Fragment,{children:[r&&r.length>3?X.jsx("div",{className:"px-4 py-3",children:X.jsx(Sb,{onSelect:()=>t(!1)})}):X.jsx(Sp,{className:"py-3 font-opensans",children:r.map(w=>X.jsxs(Cp,{className:"box-border flex w-full cursor-pointer items-center justify-start gap-4 px-4 py-2 text-jet outline-none data-[disabled]:pointer-events-none data-[highlighted]:bg-teal-5/10 data-[disabled]:opacity-50",onClick:()=>o.setSpace(w.id),checked:(n==null?void 0:n.id)===w.id,children:[X.jsx(Xa,{name:w.name,spaceType:w.space,logo:w.logo}),X.jsx("div",{className:"block flex-1 overflow-hidden text-start",children:X.jsx("div",{title:w.name,className:or("truncate text-xx-small text-jet",(n==null?void 0:n.id)===w.id&&"font-bold"),children:w.name})}),X.jsx(kp,{children:X.jsx(K1,{className:"shrink-0 text-small text-jet"})})]},w.id))}),X.jsx(sl,{className:"h-px w-full bg-fog"})]})}),X.jsx(jo,{asChild:!0,condition:!f["http://arduino.cc/is_minor"]&&!l,children:X.jsxs("a",{href:s.ID_URL,className:"text-inherit no-underline",target:"_blank",rel:"noopener noreferrer",children:[X.jsx(W1,{className:"text-small"}),"Account Settings"]})}),d?null:X.jsx(jo,{asChild:!0,condition:!f["http://arduino.cc/is_minor"]&&!l,children:X.jsxs("a",{href:`${Kn(s.DIGITAL_STORE_URL)}/subscriptions/plans`,className:"text-inherit no-underline",target:"_blank",rel:"noopener noreferrer",children:[X.jsx(Y1,{className:"text-small"}),"Billing & subscriptions"]})}),A&&n.id===lr.id?null:X.jsx(jo,{asChild:!0,condition:!f["http://arduino.cc/is_minor"],children:X.jsxs(is,{as:g==null?void 0:g.as,hrefProp:g==null?void 0:g.hrefProp,onClick:()=>{var w;return(w=v.current)==null?void 0:w.click()},className:"font-opensans text-inherit no-underline",href:g?"/api-keys":`${Kn(s.CLOUD_HOME_URL)}/api-keys`,children:[X.jsx(Ap,{className:"text-small"}),"API Keys"]})}),X.jsxs(jo,{onClick:()=>y.logout({logoutParams:{returnTo:window.location.origin}}),children:[X.jsx(Q1,{className:"text-small"}),"Sign out"]}),X.jsx(sl,{className:"h-px w-full bg-fog"}),X.jsxs("div",{className:or("box-border inline-flex w-full items-baseline gap-2 px-4 pb-1 pt-2 text-center font-opensans text-xx-small text-asbestos",A?"justify-center":"justify-between"),children:[X.jsx(Vn,{className:"no-underline outline-none data-[highlighted]:underline",onSelect:w=>w.preventDefault(),children:X.jsx(Na,{title:"Privacy",href:A?A.policy_url:`https://www.arduino.cc/en/privacy-policy${f["http://arduino.cc/is_minor"]?"/children-privacy-policy":""}`,children:"Privacy"})}),X.jsx("span",{className:"h-1",children:"·"}),X.jsx(Vn,{className:"no-underline outline-none data-[highlighted]:underline",onSelect:w=>w.preventDefault(),children:X.jsx(Na,{title:"Terms",href:A?A.custom_tos:"https://www.arduino.cc/en/terms-conditions",children:"Terms"})}),A?null:X.jsxs(X.Fragment,{children:[X.jsx("span",{className:"h-1",children:"·"}),X.jsx(Vn,{className:"no-underline outline-none data-[highlighted]:underline",onSelect:w=>w.preventDefault(),children:X.jsx(Na,{title:"Security",href:"https://www.arduino.cc/en/security",children:"Security"})})]})]})]})})]})]})}var kb=to("size-3.5 rounded-full bg-gray-500",{variants:{intent:{"":"",none:"!bg-[#1DA086]",minor:"!bg-[#E7BC43]",maintenance:"!bg-[#E7BC43]",major:"!bg-[#D9863B]",critical:"!bg-[#C11f09]"}},defaultVariants:{intent:""}}),Ab=()=>{var e,t;const{user:r}=Cr(),n=r["http://arduino.cc/is_minor"]||!1,{cloudStatus:o}=Kr();return X.jsxs("a",{className:or("flex cursor-pointer items-center justify-center gap-3 border-0 border-t border-solid border-fog p-2 text-x-small text-jet no-underline",n&&"pointer-events-none"),href:"https://status.arduino.cc",target:"_blank",rel:"noopener noreferrer",id:"cs-systemstatus",children:[X.jsx("div",{className:kb({intent:o.error?"none":(e=o.data)==null?void 0:e.status.indicator})}),X.jsx("div",{children:o.error?"Unable to obtain status":(t=o.data)==null?void 0:t.status.description})]})};Oe.createContext({selected:"",setSelected:()=>{}});let La=null;function Ih(){return La||(La=new yh(at.COOKIES_DOMAIN,Xo.customKey?`${Xo.customKey}-arduino`:void 0)),La}function nr(){let e;return e=Ih().getSpace(),e==="my-cloud"&&(e=void 0),e}var Th={exports:{}};(function(e,t){(function(r,n){n()})(qr,function(){function r(f,a){return typeof a>"u"?a={autoBom:!1}:typeof a!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(f.type)?new Blob(["\uFEFF",f],{type:f.type}):f}function n(f,a,y){var l=new XMLHttpRequest;l.open("GET",f),l.responseType="blob",l.onload=function(){g(l.response,a,y)},l.onerror=function(){console.error("could not download file")},l.send()}function o(f){var a=new XMLHttpRequest;a.open("HEAD",f,!1);try{a.send()}catch{}return 200<=a.status&&299>=a.status}function s(f){try{f.dispatchEvent(new MouseEvent("click"))}catch{var a=document.createEvent("MouseEvents");a.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),f.dispatchEvent(a)}}var c=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof qr=="object"&&qr.global===qr?qr:void 0,i=c.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),g=c.saveAs||(typeof window!="object"||window!==c?function(){}:"download"in HTMLAnchorElement.prototype&&!i?function(f,a,y){var l=c.URL||c.webkitURL,v=document.createElement("a");a=a||f.name||"download",v.download=a,v.rel="noopener",typeof f=="string"?(v.href=f,v.origin===location.origin?s(v):o(v.href)?n(f,a,y):s(v,v.target="_blank")):(v.href=l.createObjectURL(f),setTimeout(function(){l.revokeObjectURL(v.href)},4e4),setTimeout(function(){s(v)},0))}:"msSaveOrOpenBlob"in navigator?function(f,a,y){if(a=a||f.name||"download",typeof f!="string")navigator.msSaveOrOpenBlob(r(f,y),a);else if(o(f))n(f,a,y);else{var l=document.createElement("a");l.href=f,l.target="_blank",setTimeout(function(){s(l)})}}:function(f,a,y,l){if(l=l||open("","_blank"),l&&(l.document.title=l.document.body.innerText="downloading..."),typeof f=="string")return n(f,a,y);var v=f.type==="application/octet-stream",A=/constructor/i.test(c.HTMLElement)||c.safari,d=/CriOS\/[\d]+/.test(navigator.userAgent);if((d||v&&A||i)&&typeof FileReader<"u"){var T=new FileReader;T.onloadend=function(){var O=T.result;O=d?O:O.replace(/^data:[^;]*;/,"data:attachment/file;"),l?l.location.href=O:location=O,l=null},T.readAsDataURL(f)}else{var w=c.URL||c.webkitURL,S=w.createObjectURL(f);l?l.location=S:location.href=S,l=null,setTimeout(function(){w.revokeObjectURL(S)},4e4)}});c.saveAs=g.saveAs=g,e.exports=g})})(Th);var Ib=Th.exports;function Do(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Rh={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(e,t){(function(r){e.exports=r()})(function(){return function r(n,o,s){function c(f,a){if(!o[f]){if(!n[f]){var y=typeof Do=="function"&&Do;if(!a&&y)return y(f,!0);if(i)return i(f,!0);var l=new Error("Cannot find module '"+f+"'");throw l.code="MODULE_NOT_FOUND",l}var v=o[f]={exports:{}};n[f][0].call(v.exports,function(A){var d=n[f][1][A];return c(d||A)},v,v.exports,r,n,o,s)}return o[f].exports}for(var i=typeof Do=="function"&&Do,g=0;g<s.length;g++)c(s[g]);return c}({1:[function(r,n,o){var s=r("./utils"),c=r("./support"),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";o.encode=function(g){for(var f,a,y,l,v,A,d,T=[],w=0,S=g.length,O=S,N=s.getTypeOf(g)!=="string";w<g.length;)O=S-w,y=N?(f=g[w++],a=w<S?g[w++]:0,w<S?g[w++]:0):(f=g.charCodeAt(w++),a=w<S?g.charCodeAt(w++):0,w<S?g.charCodeAt(w++):0),l=f>>2,v=(3&f)<<4|a>>4,A=1<O?(15&a)<<2|y>>6:64,d=2<O?63&y:64,T.push(i.charAt(l)+i.charAt(v)+i.charAt(A)+i.charAt(d));return T.join("")},o.decode=function(g){var f,a,y,l,v,A,d=0,T=0,w="data:";if(g.substr(0,w.length)===w)throw new Error("Invalid base64 input, it looks like a data url.");var S,O=3*(g=g.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(g.charAt(g.length-1)===i.charAt(64)&&O--,g.charAt(g.length-2)===i.charAt(64)&&O--,O%1!=0)throw new Error("Invalid base64 input, bad content length.");for(S=c.uint8array?new Uint8Array(0|O):new Array(0|O);d<g.length;)f=i.indexOf(g.charAt(d++))<<2|(l=i.indexOf(g.charAt(d++)))>>4,a=(15&l)<<4|(v=i.indexOf(g.charAt(d++)))>>2,y=(3&v)<<6|(A=i.indexOf(g.charAt(d++))),S[T++]=f,v!==64&&(S[T++]=a),A!==64&&(S[T++]=y);return S}},{"./support":30,"./utils":32}],2:[function(r,n,o){var s=r("./external"),c=r("./stream/DataWorker"),i=r("./stream/Crc32Probe"),g=r("./stream/DataLengthProbe");function f(a,y,l,v,A){this.compressedSize=a,this.uncompressedSize=y,this.crc32=l,this.compression=v,this.compressedContent=A}f.prototype={getContentWorker:function(){var a=new c(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new g("data_length")),y=this;return a.on("end",function(){if(this.streamInfo.data_length!==y.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),a},getCompressedWorker:function(){return new c(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},f.createWorkerFrom=function(a,y,l){return a.pipe(new i).pipe(new g("uncompressedSize")).pipe(y.compressWorker(l)).pipe(new g("compressedSize")).withStreamInfo("compression",y)},n.exports=f},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(r,n,o){var s=r("./stream/GenericWorker");o.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},o.DEFLATE=r("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(r,n,o){var s=r("./utils"),c=function(){for(var i,g=[],f=0;f<256;f++){i=f;for(var a=0;a<8;a++)i=1&i?3988292384^i>>>1:i>>>1;g[f]=i}return g}();n.exports=function(i,g){return i!==void 0&&i.length?s.getTypeOf(i)!=="string"?function(f,a,y,l){var v=c,A=l+y;f^=-1;for(var d=l;d<A;d++)f=f>>>8^v[255&(f^a[d])];return-1^f}(0|g,i,i.length,0):function(f,a,y,l){var v=c,A=l+y;f^=-1;for(var d=l;d<A;d++)f=f>>>8^v[255&(f^a.charCodeAt(d))];return-1^f}(0|g,i,i.length,0):0}},{"./utils":32}],5:[function(r,n,o){o.base64=!1,o.binary=!1,o.dir=!1,o.createFolders=!0,o.date=null,o.compression=null,o.compressionOptions=null,o.comment=null,o.unixPermissions=null,o.dosPermissions=null},{}],6:[function(r,n,o){var s=null;s=typeof Promise<"u"?Promise:r("lie"),n.exports={Promise:s}},{lie:37}],7:[function(r,n,o){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",c=r("pako"),i=r("./utils"),g=r("./stream/GenericWorker"),f=s?"uint8array":"array";function a(y,l){g.call(this,"FlateWorker/"+y),this._pako=null,this._pakoAction=y,this._pakoOptions=l,this.meta={}}o.magic="\b\0",i.inherits(a,g),a.prototype.processChunk=function(y){this.meta=y.meta,this._pako===null&&this._createPako(),this._pako.push(i.transformTo(f,y.data),!1)},a.prototype.flush=function(){g.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},a.prototype.cleanUp=function(){g.prototype.cleanUp.call(this),this._pako=null},a.prototype._createPako=function(){this._pako=new c[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var y=this;this._pako.onData=function(l){y.push({data:l,meta:y.meta})}},o.compressWorker=function(y){return new a("Deflate",y)},o.uncompressWorker=function(){return new a("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(r,n,o){function s(v,A){var d,T="";for(d=0;d<A;d++)T+=String.fromCharCode(255&v),v>>>=8;return T}function c(v,A,d,T,w,S){var O,N,P=v.file,H=v.compression,j=S!==f.utf8encode,Z=i.transformTo("string",S(P.name)),U=i.transformTo("string",f.utf8encode(P.name)),ue=P.comment,fe=i.transformTo("string",S(ue)),q=i.transformTo("string",f.utf8encode(ue)),Q=U.length!==P.name.length,_=q.length!==ue.length,k="",$="",F="",V=P.dir,M=P.date,K={crc32:0,compressedSize:0,uncompressedSize:0};A&&!d||(K.crc32=v.crc32,K.compressedSize=v.compressedSize,K.uncompressedSize=v.uncompressedSize);var G=0;A&&(G|=8),j||!Q&&!_||(G|=2048);var Y=0,ye=0;V&&(Y|=16),w==="UNIX"?(ye=798,Y|=function(Re,ct){var ft=Re;return Re||(ft=ct?16893:33204),(65535&ft)<<16}(P.unixPermissions,V)):(ye=20,Y|=function(Re){return 63&(Re||0)}(P.dosPermissions)),O=M.getUTCHours(),O<<=6,O|=M.getUTCMinutes(),O<<=5,O|=M.getUTCSeconds()/2,N=M.getUTCFullYear()-1980,N<<=4,N|=M.getUTCMonth()+1,N<<=5,N|=M.getUTCDate(),Q&&($=s(1,1)+s(a(Z),4)+U,k+="up"+s($.length,2)+$),_&&(F=s(1,1)+s(a(fe),4)+q,k+="uc"+s(F.length,2)+F);var Ee="";return Ee+=`
\0`,Ee+=s(G,2),Ee+=H.magic,Ee+=s(O,2),Ee+=s(N,2),Ee+=s(K.crc32,4),Ee+=s(K.compressedSize,4),Ee+=s(K.uncompressedSize,4),Ee+=s(Z.length,2),Ee+=s(k.length,2),{fileRecord:y.LOCAL_FILE_HEADER+Ee+Z+k,dirRecord:y.CENTRAL_FILE_HEADER+s(ye,2)+Ee+s(fe.length,2)+"\0\0\0\0"+s(Y,4)+s(T,4)+Z+k+fe}}var i=r("../utils"),g=r("../stream/GenericWorker"),f=r("../utf8"),a=r("../crc32"),y=r("../signature");function l(v,A,d,T){g.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=A,this.zipPlatform=d,this.encodeFileName=T,this.streamFiles=v,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}i.inherits(l,g),l.prototype.push=function(v){var A=v.meta.percent||0,d=this.entriesCount,T=this._sources.length;this.accumulate?this.contentBuffer.push(v):(this.bytesWritten+=v.data.length,g.prototype.push.call(this,{data:v.data,meta:{currentFile:this.currentFile,percent:d?(A+100*(d-T-1))/d:100}}))},l.prototype.openedSource=function(v){this.currentSourceOffset=this.bytesWritten,this.currentFile=v.file.name;var A=this.streamFiles&&!v.file.dir;if(A){var d=c(v,A,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:d.fileRecord,meta:{percent:0}})}else this.accumulate=!0},l.prototype.closedSource=function(v){this.accumulate=!1;var A=this.streamFiles&&!v.file.dir,d=c(v,A,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(d.dirRecord),A)this.push({data:function(T){return y.DATA_DESCRIPTOR+s(T.crc32,4)+s(T.compressedSize,4)+s(T.uncompressedSize,4)}(v),meta:{percent:100}});else for(this.push({data:d.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},l.prototype.flush=function(){for(var v=this.bytesWritten,A=0;A<this.dirRecords.length;A++)this.push({data:this.dirRecords[A],meta:{percent:100}});var d=this.bytesWritten-v,T=function(w,S,O,N,P){var H=i.transformTo("string",P(N));return y.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(w,2)+s(w,2)+s(S,4)+s(O,4)+s(H.length,2)+H}(this.dirRecords.length,d,v,this.zipComment,this.encodeFileName);this.push({data:T,meta:{percent:100}})},l.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},l.prototype.registerPrevious=function(v){this._sources.push(v);var A=this;return v.on("data",function(d){A.processChunk(d)}),v.on("end",function(){A.closedSource(A.previous.streamInfo),A._sources.length?A.prepareNextSource():A.end()}),v.on("error",function(d){A.error(d)}),this},l.prototype.resume=function(){return!!g.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},l.prototype.error=function(v){var A=this._sources;if(!g.prototype.error.call(this,v))return!1;for(var d=0;d<A.length;d++)try{A[d].error(v)}catch{}return!0},l.prototype.lock=function(){g.prototype.lock.call(this);for(var v=this._sources,A=0;A<v.length;A++)v[A].lock()},n.exports=l},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(r,n,o){var s=r("../compressions"),c=r("./ZipFileWorker");o.generateWorker=function(i,g,f){var a=new c(g.streamFiles,f,g.platform,g.encodeFileName),y=0;try{i.forEach(function(l,v){y++;var A=function(S,O){var N=S||O,P=s[N];if(!P)throw new Error(N+" is not a valid compression method !");return P}(v.options.compression,g.compression),d=v.options.compressionOptions||g.compressionOptions||{},T=v.dir,w=v.date;v._compressWorker(A,d).withStreamInfo("file",{name:l,dir:T,date:w,comment:v.comment||"",unixPermissions:v.unixPermissions,dosPermissions:v.dosPermissions}).pipe(a)}),a.entriesCount=y}catch(l){a.error(l)}return a}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(r,n,o){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var c=new s;for(var i in this)typeof this[i]!="function"&&(c[i]=this[i]);return c}}(s.prototype=r("./object")).loadAsync=r("./load"),s.support=r("./support"),s.defaults=r("./defaults"),s.version="3.10.1",s.loadAsync=function(c,i){return new s().loadAsync(c,i)},s.external=r("./external"),n.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(r,n,o){var s=r("./utils"),c=r("./external"),i=r("./utf8"),g=r("./zipEntries"),f=r("./stream/Crc32Probe"),a=r("./nodejsUtils");function y(l){return new c.Promise(function(v,A){var d=l.decompressed.getContentWorker().pipe(new f);d.on("error",function(T){A(T)}).on("end",function(){d.streamInfo.crc32!==l.decompressed.crc32?A(new Error("Corrupted zip : CRC32 mismatch")):v()}).resume()})}n.exports=function(l,v){var A=this;return v=s.extend(v||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:i.utf8decode}),a.isNode&&a.isStream(l)?c.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",l,!0,v.optimizedBinaryString,v.base64).then(function(d){var T=new g(v);return T.load(d),T}).then(function(d){var T=[c.Promise.resolve(d)],w=d.files;if(v.checkCRC32)for(var S=0;S<w.length;S++)T.push(y(w[S]));return c.Promise.all(T)}).then(function(d){for(var T=d.shift(),w=T.files,S=0;S<w.length;S++){var O=w[S],N=O.fileNameStr,P=s.resolve(O.fileNameStr);A.file(P,O.decompressed,{binary:!0,optimizedBinaryString:!0,date:O.date,dir:O.dir,comment:O.fileCommentStr.length?O.fileCommentStr:null,unixPermissions:O.unixPermissions,dosPermissions:O.dosPermissions,createFolders:v.createFolders}),O.dir||(A.file(P).unsafeOriginalName=N)}return T.zipComment.length&&(A.comment=T.zipComment),A})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(r,n,o){var s=r("../utils"),c=r("../stream/GenericWorker");function i(g,f){c.call(this,"Nodejs stream input adapter for "+g),this._upstreamEnded=!1,this._bindStream(f)}s.inherits(i,c),i.prototype._bindStream=function(g){var f=this;(this._stream=g).pause(),g.on("data",function(a){f.push({data:a,meta:{percent:0}})}).on("error",function(a){f.isPaused?this.generatedError=a:f.error(a)}).on("end",function(){f.isPaused?f._upstreamEnded=!0:f.end()})},i.prototype.pause=function(){return!!c.prototype.pause.call(this)&&(this._stream.pause(),!0)},i.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=i},{"../stream/GenericWorker":28,"../utils":32}],13:[function(r,n,o){var s=r("readable-stream").Readable;function c(i,g,f){s.call(this,g),this._helper=i;var a=this;i.on("data",function(y,l){a.push(y)||a._helper.pause(),f&&f(l)}).on("error",function(y){a.emit("error",y)}).on("end",function(){a.push(null)})}r("../utils").inherits(c,s),c.prototype._read=function(){this._helper.resume()},n.exports=c},{"../utils":32,"readable-stream":16}],14:[function(r,n,o){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,c){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,c);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,c)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var c=new Buffer(s);return c.fill(0),c},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(r,n,o){function s(P,H,j){var Z,U=i.getTypeOf(H),ue=i.extend(j||{},a);ue.date=ue.date||new Date,ue.compression!==null&&(ue.compression=ue.compression.toUpperCase()),typeof ue.unixPermissions=="string"&&(ue.unixPermissions=parseInt(ue.unixPermissions,8)),ue.unixPermissions&&16384&ue.unixPermissions&&(ue.dir=!0),ue.dosPermissions&&16&ue.dosPermissions&&(ue.dir=!0),ue.dir&&(P=w(P)),ue.createFolders&&(Z=T(P))&&S.call(this,Z,!0);var fe=U==="string"&&ue.binary===!1&&ue.base64===!1;j&&j.binary!==void 0||(ue.binary=!fe),(H instanceof y&&H.uncompressedSize===0||ue.dir||!H||H.length===0)&&(ue.base64=!1,ue.binary=!0,H="",ue.compression="STORE",U="string");var q=null;q=H instanceof y||H instanceof g?H:A.isNode&&A.isStream(H)?new d(P,H):i.prepareContent(P,H,ue.binary,ue.optimizedBinaryString,ue.base64);var Q=new l(P,q,ue);this.files[P]=Q}var c=r("./utf8"),i=r("./utils"),g=r("./stream/GenericWorker"),f=r("./stream/StreamHelper"),a=r("./defaults"),y=r("./compressedObject"),l=r("./zipObject"),v=r("./generate"),A=r("./nodejsUtils"),d=r("./nodejs/NodejsStreamInputAdapter"),T=function(P){P.slice(-1)==="/"&&(P=P.substring(0,P.length-1));var H=P.lastIndexOf("/");return 0<H?P.substring(0,H):""},w=function(P){return P.slice(-1)!=="/"&&(P+="/"),P},S=function(P,H){return H=H!==void 0?H:a.createFolders,P=w(P),this.files[P]||s.call(this,P,null,{dir:!0,createFolders:H}),this.files[P]};function O(P){return Object.prototype.toString.call(P)==="[object RegExp]"}var N={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(P){var H,j,Z;for(H in this.files)Z=this.files[H],(j=H.slice(this.root.length,H.length))&&H.slice(0,this.root.length)===this.root&&P(j,Z)},filter:function(P){var H=[];return this.forEach(function(j,Z){P(j,Z)&&H.push(Z)}),H},file:function(P,H,j){if(arguments.length!==1)return P=this.root+P,s.call(this,P,H,j),this;if(O(P)){var Z=P;return this.filter(function(ue,fe){return!fe.dir&&Z.test(ue)})}var U=this.files[this.root+P];return U&&!U.dir?U:null},folder:function(P){if(!P)return this;if(O(P))return this.filter(function(U,ue){return ue.dir&&P.test(U)});var H=this.root+P,j=S.call(this,H),Z=this.clone();return Z.root=j.name,Z},remove:function(P){P=this.root+P;var H=this.files[P];if(H||(P.slice(-1)!=="/"&&(P+="/"),H=this.files[P]),H&&!H.dir)delete this.files[P];else for(var j=this.filter(function(U,ue){return ue.name.slice(0,P.length)===P}),Z=0;Z<j.length;Z++)delete this.files[j[Z].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(P){var H,j={};try{if((j=i.extend(P||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:c.utf8encode})).type=j.type.toLowerCase(),j.compression=j.compression.toUpperCase(),j.type==="binarystring"&&(j.type="string"),!j.type)throw new Error("No output type specified.");i.checkSupport(j.type),j.platform!=="darwin"&&j.platform!=="freebsd"&&j.platform!=="linux"&&j.platform!=="sunos"||(j.platform="UNIX"),j.platform==="win32"&&(j.platform="DOS");var Z=j.comment||this.comment||"";H=v.generateWorker(this,j,Z)}catch(U){(H=new g("error")).error(U)}return new f(H,j.type||"string",j.mimeType)},generateAsync:function(P,H){return this.generateInternalStream(P).accumulate(H)},generateNodeStream:function(P,H){return(P=P||{}).type||(P.type="nodebuffer"),this.generateInternalStream(P).toNodejsStream(H)}};n.exports=N},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(r,n,o){n.exports=r("stream")},{stream:void 0}],17:[function(r,n,o){var s=r("./DataReader");function c(i){s.call(this,i);for(var g=0;g<this.data.length;g++)i[g]=255&i[g]}r("../utils").inherits(c,s),c.prototype.byteAt=function(i){return this.data[this.zero+i]},c.prototype.lastIndexOfSignature=function(i){for(var g=i.charCodeAt(0),f=i.charCodeAt(1),a=i.charCodeAt(2),y=i.charCodeAt(3),l=this.length-4;0<=l;--l)if(this.data[l]===g&&this.data[l+1]===f&&this.data[l+2]===a&&this.data[l+3]===y)return l-this.zero;return-1},c.prototype.readAndCheckSignature=function(i){var g=i.charCodeAt(0),f=i.charCodeAt(1),a=i.charCodeAt(2),y=i.charCodeAt(3),l=this.readData(4);return g===l[0]&&f===l[1]&&a===l[2]&&y===l[3]},c.prototype.readData=function(i){if(this.checkOffset(i),i===0)return[];var g=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,g},n.exports=c},{"../utils":32,"./DataReader":18}],18:[function(r,n,o){var s=r("../utils");function c(i){this.data=i,this.length=i.length,this.index=0,this.zero=0}c.prototype={checkOffset:function(i){this.checkIndex(this.index+i)},checkIndex:function(i){if(this.length<this.zero+i||i<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+i+"). Corrupted zip ?")},setIndex:function(i){this.checkIndex(i),this.index=i},skip:function(i){this.setIndex(this.index+i)},byteAt:function(){},readInt:function(i){var g,f=0;for(this.checkOffset(i),g=this.index+i-1;g>=this.index;g--)f=(f<<8)+this.byteAt(g);return this.index+=i,f},readString:function(i){return s.transformTo("string",this.readData(i))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var i=this.readInt(4);return new Date(Date.UTC(1980+(i>>25&127),(i>>21&15)-1,i>>16&31,i>>11&31,i>>5&63,(31&i)<<1))}},n.exports=c},{"../utils":32}],19:[function(r,n,o){var s=r("./Uint8ArrayReader");function c(i){s.call(this,i)}r("../utils").inherits(c,s),c.prototype.readData=function(i){this.checkOffset(i);var g=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,g},n.exports=c},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(r,n,o){var s=r("./DataReader");function c(i){s.call(this,i)}r("../utils").inherits(c,s),c.prototype.byteAt=function(i){return this.data.charCodeAt(this.zero+i)},c.prototype.lastIndexOfSignature=function(i){return this.data.lastIndexOf(i)-this.zero},c.prototype.readAndCheckSignature=function(i){return i===this.readData(4)},c.prototype.readData=function(i){this.checkOffset(i);var g=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,g},n.exports=c},{"../utils":32,"./DataReader":18}],21:[function(r,n,o){var s=r("./ArrayReader");function c(i){s.call(this,i)}r("../utils").inherits(c,s),c.prototype.readData=function(i){if(this.checkOffset(i),i===0)return new Uint8Array(0);var g=this.data.subarray(this.zero+this.index,this.zero+this.index+i);return this.index+=i,g},n.exports=c},{"../utils":32,"./ArrayReader":17}],22:[function(r,n,o){var s=r("../utils"),c=r("../support"),i=r("./ArrayReader"),g=r("./StringReader"),f=r("./NodeBufferReader"),a=r("./Uint8ArrayReader");n.exports=function(y){var l=s.getTypeOf(y);return s.checkSupport(l),l!=="string"||c.uint8array?l==="nodebuffer"?new f(y):c.uint8array?new a(s.transformTo("uint8array",y)):new i(s.transformTo("array",y)):new g(y)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(r,n,o){o.LOCAL_FILE_HEADER="PK",o.CENTRAL_FILE_HEADER="PK",o.CENTRAL_DIRECTORY_END="PK",o.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",o.ZIP64_CENTRAL_DIRECTORY_END="PK",o.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(r,n,o){var s=r("./GenericWorker"),c=r("../utils");function i(g){s.call(this,"ConvertWorker to "+g),this.destType=g}c.inherits(i,s),i.prototype.processChunk=function(g){this.push({data:c.transformTo(this.destType,g.data),meta:g.meta})},n.exports=i},{"../utils":32,"./GenericWorker":28}],25:[function(r,n,o){var s=r("./GenericWorker"),c=r("../crc32");function i(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}r("../utils").inherits(i,s),i.prototype.processChunk=function(g){this.streamInfo.crc32=c(g.data,this.streamInfo.crc32||0),this.push(g)},n.exports=i},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(r,n,o){var s=r("../utils"),c=r("./GenericWorker");function i(g){c.call(this,"DataLengthProbe for "+g),this.propName=g,this.withStreamInfo(g,0)}s.inherits(i,c),i.prototype.processChunk=function(g){if(g){var f=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=f+g.data.length}c.prototype.processChunk.call(this,g)},n.exports=i},{"../utils":32,"./GenericWorker":28}],27:[function(r,n,o){var s=r("../utils"),c=r("./GenericWorker");function i(g){c.call(this,"DataWorker");var f=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,g.then(function(a){f.dataIsReady=!0,f.data=a,f.max=a&&a.length||0,f.type=s.getTypeOf(a),f.isPaused||f._tickAndRepeat()},function(a){f.error(a)})}s.inherits(i,c),i.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this.data=null},i.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},i.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},i.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var g=null,f=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":g=this.data.substring(this.index,f);break;case"uint8array":g=this.data.subarray(this.index,f);break;case"array":case"nodebuffer":g=this.data.slice(this.index,f)}return this.index=f,this.push({data:g,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=i},{"../utils":32,"./GenericWorker":28}],28:[function(r,n,o){function s(c){this.name=c||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(c){this.emit("data",c)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(c){this.emit("error",c)}return!0},error:function(c){return!this.isFinished&&(this.isPaused?this.generatedError=c:(this.isFinished=!0,this.emit("error",c),this.previous&&this.previous.error(c),this.cleanUp()),!0)},on:function(c,i){return this._listeners[c].push(i),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(c,i){if(this._listeners[c])for(var g=0;g<this._listeners[c].length;g++)this._listeners[c][g].call(this,i)},pipe:function(c){return c.registerPrevious(this)},registerPrevious:function(c){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=c.streamInfo,this.mergeStreamInfo(),this.previous=c;var i=this;return c.on("data",function(g){i.processChunk(g)}),c.on("end",function(){i.end()}),c.on("error",function(g){i.error(g)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var c=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),c=!0),this.previous&&this.previous.resume(),!c},flush:function(){},processChunk:function(c){this.push(c)},withStreamInfo:function(c,i){return this.extraStreamInfo[c]=i,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var c in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,c)&&(this.streamInfo[c]=this.extraStreamInfo[c])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var c="Worker "+this.name;return this.previous?this.previous+" -> "+c:c}},n.exports=s},{}],29:[function(r,n,o){var s=r("../utils"),c=r("./ConvertWorker"),i=r("./GenericWorker"),g=r("../base64"),f=r("../support"),a=r("../external"),y=null;if(f.nodestream)try{y=r("../nodejs/NodejsStreamOutputAdapter")}catch{}function l(A,d){return new a.Promise(function(T,w){var S=[],O=A._internalType,N=A._outputType,P=A._mimeType;A.on("data",function(H,j){S.push(H),d&&d(j)}).on("error",function(H){S=[],w(H)}).on("end",function(){try{var H=function(j,Z,U){switch(j){case"blob":return s.newBlob(s.transformTo("arraybuffer",Z),U);case"base64":return g.encode(Z);default:return s.transformTo(j,Z)}}(N,function(j,Z){var U,ue=0,fe=null,q=0;for(U=0;U<Z.length;U++)q+=Z[U].length;switch(j){case"string":return Z.join("");case"array":return Array.prototype.concat.apply([],Z);case"uint8array":for(fe=new Uint8Array(q),U=0;U<Z.length;U++)fe.set(Z[U],ue),ue+=Z[U].length;return fe;case"nodebuffer":return Buffer.concat(Z);default:throw new Error("concat : unsupported type '"+j+"'")}}(O,S),P);T(H)}catch(j){w(j)}S=[]}).resume()})}function v(A,d,T){var w=d;switch(d){case"blob":case"arraybuffer":w="uint8array";break;case"base64":w="string"}try{this._internalType=w,this._outputType=d,this._mimeType=T,s.checkSupport(w),this._worker=A.pipe(new c(w)),A.lock()}catch(S){this._worker=new i("error"),this._worker.error(S)}}v.prototype={accumulate:function(A){return l(this,A)},on:function(A,d){var T=this;return A==="data"?this._worker.on(A,function(w){d.call(T,w.data,w.meta)}):this._worker.on(A,function(){s.delay(d,arguments,T)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(A){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new y(this,{objectMode:this._outputType!=="nodebuffer"},A)}},n.exports=v},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(r,n,o){if(o.base64=!0,o.array=!0,o.string=!0,o.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",o.nodebuffer=typeof Buffer<"u",o.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")o.blob=!1;else{var s=new ArrayBuffer(0);try{o.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var c=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);c.append(s),o.blob=c.getBlob("application/zip").size===0}catch{o.blob=!1}}}try{o.nodestream=!!r("readable-stream").Readable}catch{o.nodestream=!1}},{"readable-stream":16}],31:[function(r,n,o){for(var s=r("./utils"),c=r("./support"),i=r("./nodejsUtils"),g=r("./stream/GenericWorker"),f=new Array(256),a=0;a<256;a++)f[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;f[254]=f[254]=1;function y(){g.call(this,"utf-8 decode"),this.leftOver=null}function l(){g.call(this,"utf-8 encode")}o.utf8encode=function(v){return c.nodebuffer?i.newBufferFrom(v,"utf-8"):function(A){var d,T,w,S,O,N=A.length,P=0;for(S=0;S<N;S++)(64512&(T=A.charCodeAt(S)))==55296&&S+1<N&&(64512&(w=A.charCodeAt(S+1)))==56320&&(T=65536+(T-55296<<10)+(w-56320),S++),P+=T<128?1:T<2048?2:T<65536?3:4;for(d=c.uint8array?new Uint8Array(P):new Array(P),S=O=0;O<P;S++)(64512&(T=A.charCodeAt(S)))==55296&&S+1<N&&(64512&(w=A.charCodeAt(S+1)))==56320&&(T=65536+(T-55296<<10)+(w-56320),S++),T<128?d[O++]=T:(T<2048?d[O++]=192|T>>>6:(T<65536?d[O++]=224|T>>>12:(d[O++]=240|T>>>18,d[O++]=128|T>>>12&63),d[O++]=128|T>>>6&63),d[O++]=128|63&T);return d}(v)},o.utf8decode=function(v){return c.nodebuffer?s.transformTo("nodebuffer",v).toString("utf-8"):function(A){var d,T,w,S,O=A.length,N=new Array(2*O);for(d=T=0;d<O;)if((w=A[d++])<128)N[T++]=w;else if(4<(S=f[w]))N[T++]=65533,d+=S-1;else{for(w&=S===2?31:S===3?15:7;1<S&&d<O;)w=w<<6|63&A[d++],S--;1<S?N[T++]=65533:w<65536?N[T++]=w:(w-=65536,N[T++]=55296|w>>10&1023,N[T++]=56320|1023&w)}return N.length!==T&&(N.subarray?N=N.subarray(0,T):N.length=T),s.applyFromCharCode(N)}(v=s.transformTo(c.uint8array?"uint8array":"array",v))},s.inherits(y,g),y.prototype.processChunk=function(v){var A=s.transformTo(c.uint8array?"uint8array":"array",v.data);if(this.leftOver&&this.leftOver.length){if(c.uint8array){var d=A;(A=new Uint8Array(d.length+this.leftOver.length)).set(this.leftOver,0),A.set(d,this.leftOver.length)}else A=this.leftOver.concat(A);this.leftOver=null}var T=function(S,O){var N;for((O=O||S.length)>S.length&&(O=S.length),N=O-1;0<=N&&(192&S[N])==128;)N--;return N<0||N===0?O:N+f[S[N]]>O?N:O}(A),w=A;T!==A.length&&(c.uint8array?(w=A.subarray(0,T),this.leftOver=A.subarray(T,A.length)):(w=A.slice(0,T),this.leftOver=A.slice(T,A.length))),this.push({data:o.utf8decode(w),meta:v.meta})},y.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:o.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},o.Utf8DecodeWorker=y,s.inherits(l,g),l.prototype.processChunk=function(v){this.push({data:o.utf8encode(v.data),meta:v.meta})},o.Utf8EncodeWorker=l},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(r,n,o){var s=r("./support"),c=r("./base64"),i=r("./nodejsUtils"),g=r("./external");function f(d){return d}function a(d,T){for(var w=0;w<d.length;++w)T[w]=255&d.charCodeAt(w);return T}r("setimmediate"),o.newBlob=function(d,T){o.checkSupport("blob");try{return new Blob([d],{type:T})}catch{try{var w=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return w.append(d),w.getBlob(T)}catch{throw new Error("Bug : can't construct the Blob.")}}};var y={stringifyByChunk:function(d,T,w){var S=[],O=0,N=d.length;if(N<=w)return String.fromCharCode.apply(null,d);for(;O<N;)T==="array"||T==="nodebuffer"?S.push(String.fromCharCode.apply(null,d.slice(O,Math.min(O+w,N)))):S.push(String.fromCharCode.apply(null,d.subarray(O,Math.min(O+w,N)))),O+=w;return S.join("")},stringifyByChar:function(d){for(var T="",w=0;w<d.length;w++)T+=String.fromCharCode(d[w]);return T},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,i.allocBuffer(1)).length===1}catch{return!1}}()}};function l(d){var T=65536,w=o.getTypeOf(d),S=!0;if(w==="uint8array"?S=y.applyCanBeUsed.uint8array:w==="nodebuffer"&&(S=y.applyCanBeUsed.nodebuffer),S)for(;1<T;)try{return y.stringifyByChunk(d,w,T)}catch{T=Math.floor(T/2)}return y.stringifyByChar(d)}function v(d,T){for(var w=0;w<d.length;w++)T[w]=d[w];return T}o.applyFromCharCode=l;var A={};A.string={string:f,array:function(d){return a(d,new Array(d.length))},arraybuffer:function(d){return A.string.uint8array(d).buffer},uint8array:function(d){return a(d,new Uint8Array(d.length))},nodebuffer:function(d){return a(d,i.allocBuffer(d.length))}},A.array={string:l,array:f,arraybuffer:function(d){return new Uint8Array(d).buffer},uint8array:function(d){return new Uint8Array(d)},nodebuffer:function(d){return i.newBufferFrom(d)}},A.arraybuffer={string:function(d){return l(new Uint8Array(d))},array:function(d){return v(new Uint8Array(d),new Array(d.byteLength))},arraybuffer:f,uint8array:function(d){return new Uint8Array(d)},nodebuffer:function(d){return i.newBufferFrom(new Uint8Array(d))}},A.uint8array={string:l,array:function(d){return v(d,new Array(d.length))},arraybuffer:function(d){return d.buffer},uint8array:f,nodebuffer:function(d){return i.newBufferFrom(d)}},A.nodebuffer={string:l,array:function(d){return v(d,new Array(d.length))},arraybuffer:function(d){return A.nodebuffer.uint8array(d).buffer},uint8array:function(d){return v(d,new Uint8Array(d.length))},nodebuffer:f},o.transformTo=function(d,T){if(T=T||"",!d)return T;o.checkSupport(d);var w=o.getTypeOf(T);return A[w][d](T)},o.resolve=function(d){for(var T=d.split("/"),w=[],S=0;S<T.length;S++){var O=T[S];O==="."||O===""&&S!==0&&S!==T.length-1||(O===".."?w.pop():w.push(O))}return w.join("/")},o.getTypeOf=function(d){return typeof d=="string"?"string":Object.prototype.toString.call(d)==="[object Array]"?"array":s.nodebuffer&&i.isBuffer(d)?"nodebuffer":s.uint8array&&d instanceof Uint8Array?"uint8array":s.arraybuffer&&d instanceof ArrayBuffer?"arraybuffer":void 0},o.checkSupport=function(d){if(!s[d.toLowerCase()])throw new Error(d+" is not supported by this platform")},o.MAX_VALUE_16BITS=65535,o.MAX_VALUE_32BITS=-1,o.pretty=function(d){var T,w,S="";for(w=0;w<(d||"").length;w++)S+="\\x"+((T=d.charCodeAt(w))<16?"0":"")+T.toString(16).toUpperCase();return S},o.delay=function(d,T,w){setImmediate(function(){d.apply(w||null,T||[])})},o.inherits=function(d,T){function w(){}w.prototype=T.prototype,d.prototype=new w},o.extend=function(){var d,T,w={};for(d=0;d<arguments.length;d++)for(T in arguments[d])Object.prototype.hasOwnProperty.call(arguments[d],T)&&w[T]===void 0&&(w[T]=arguments[d][T]);return w},o.prepareContent=function(d,T,w,S,O){return g.Promise.resolve(T).then(function(N){return s.blob&&(N instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(N))!==-1)&&typeof FileReader<"u"?new g.Promise(function(P,H){var j=new FileReader;j.onload=function(Z){P(Z.target.result)},j.onerror=function(Z){H(Z.target.error)},j.readAsArrayBuffer(N)}):N}).then(function(N){var P=o.getTypeOf(N);return P?(P==="arraybuffer"?N=o.transformTo("uint8array",N):P==="string"&&(O?N=c.decode(N):w&&S!==!0&&(N=function(H){return a(H,s.uint8array?new Uint8Array(H.length):new Array(H.length))}(N))),N):g.Promise.reject(new Error("Can't read the data of '"+d+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(r,n,o){var s=r("./reader/readerFor"),c=r("./utils"),i=r("./signature"),g=r("./zipEntry"),f=r("./support");function a(y){this.files=[],this.loadOptions=y}a.prototype={checkSignature:function(y){if(!this.reader.readAndCheckSignature(y)){this.reader.index-=4;var l=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+c.pretty(l)+", expected "+c.pretty(y)+")")}},isSignature:function(y,l){var v=this.reader.index;this.reader.setIndex(y);var A=this.reader.readString(4)===l;return this.reader.setIndex(v),A},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var y=this.reader.readData(this.zipCommentLength),l=f.uint8array?"uint8array":"array",v=c.transformTo(l,y);this.zipComment=this.loadOptions.decodeFileName(v)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var y,l,v,A=this.zip64EndOfCentralSize-44;0<A;)y=this.reader.readInt(2),l=this.reader.readInt(4),v=this.reader.readData(l),this.zip64ExtensibleData[y]={id:y,length:l,value:v}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var y,l;for(y=0;y<this.files.length;y++)l=this.files[y],this.reader.setIndex(l.localHeaderOffset),this.checkSignature(i.LOCAL_FILE_HEADER),l.readLocalPart(this.reader),l.handleUTF8(),l.processAttributes()},readCentralDir:function(){var y;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(i.CENTRAL_FILE_HEADER);)(y=new g({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(y);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var y=this.reader.lastIndexOfSignature(i.CENTRAL_DIRECTORY_END);if(y<0)throw this.isSignature(0,i.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(y);var l=y;if(this.checkSignature(i.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===c.MAX_VALUE_16BITS||this.diskWithCentralDirStart===c.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===c.MAX_VALUE_16BITS||this.centralDirRecords===c.MAX_VALUE_16BITS||this.centralDirSize===c.MAX_VALUE_32BITS||this.centralDirOffset===c.MAX_VALUE_32BITS){if(this.zip64=!0,(y=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(y),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,i.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var v=this.centralDirOffset+this.centralDirSize;this.zip64&&(v+=20,v+=12+this.zip64EndOfCentralSize);var A=l-v;if(0<A)this.isSignature(l,i.CENTRAL_FILE_HEADER)||(this.reader.zero=A);else if(A<0)throw new Error("Corrupted zip: missing "+Math.abs(A)+" bytes.")},prepareReader:function(y){this.reader=s(y)},load:function(y){this.prepareReader(y),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=a},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(r,n,o){var s=r("./reader/readerFor"),c=r("./utils"),i=r("./compressedObject"),g=r("./crc32"),f=r("./utf8"),a=r("./compressions"),y=r("./support");function l(v,A){this.options=v,this.loadOptions=A}l.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(v){var A,d;if(v.skip(22),this.fileNameLength=v.readInt(2),d=v.readInt(2),this.fileName=v.readData(this.fileNameLength),v.skip(d),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((A=function(T){for(var w in a)if(Object.prototype.hasOwnProperty.call(a,w)&&a[w].magic===T)return a[w];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+c.pretty(this.compressionMethod)+" unknown (inner file : "+c.transformTo("string",this.fileName)+")");this.decompressed=new i(this.compressedSize,this.uncompressedSize,this.crc32,A,v.readData(this.compressedSize))},readCentralPart:function(v){this.versionMadeBy=v.readInt(2),v.skip(2),this.bitFlag=v.readInt(2),this.compressionMethod=v.readString(2),this.date=v.readDate(),this.crc32=v.readInt(4),this.compressedSize=v.readInt(4),this.uncompressedSize=v.readInt(4);var A=v.readInt(2);if(this.extraFieldsLength=v.readInt(2),this.fileCommentLength=v.readInt(2),this.diskNumberStart=v.readInt(2),this.internalFileAttributes=v.readInt(2),this.externalFileAttributes=v.readInt(4),this.localHeaderOffset=v.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");v.skip(A),this.readExtraFields(v),this.parseZIP64ExtraField(v),this.fileComment=v.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var v=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),v==0&&(this.dosPermissions=63&this.externalFileAttributes),v==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var v=s(this.extraFields[1].value);this.uncompressedSize===c.MAX_VALUE_32BITS&&(this.uncompressedSize=v.readInt(8)),this.compressedSize===c.MAX_VALUE_32BITS&&(this.compressedSize=v.readInt(8)),this.localHeaderOffset===c.MAX_VALUE_32BITS&&(this.localHeaderOffset=v.readInt(8)),this.diskNumberStart===c.MAX_VALUE_32BITS&&(this.diskNumberStart=v.readInt(4))}},readExtraFields:function(v){var A,d,T,w=v.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});v.index+4<w;)A=v.readInt(2),d=v.readInt(2),T=v.readData(d),this.extraFields[A]={id:A,length:d,value:T};v.setIndex(w)},handleUTF8:function(){var v=y.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=f.utf8decode(this.fileName),this.fileCommentStr=f.utf8decode(this.fileComment);else{var A=this.findExtraFieldUnicodePath();if(A!==null)this.fileNameStr=A;else{var d=c.transformTo(v,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(d)}var T=this.findExtraFieldUnicodeComment();if(T!==null)this.fileCommentStr=T;else{var w=c.transformTo(v,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(w)}}},findExtraFieldUnicodePath:function(){var v=this.extraFields[28789];if(v){var A=s(v.value);return A.readInt(1)!==1||g(this.fileName)!==A.readInt(4)?null:f.utf8decode(A.readData(v.length-5))}return null},findExtraFieldUnicodeComment:function(){var v=this.extraFields[25461];if(v){var A=s(v.value);return A.readInt(1)!==1||g(this.fileComment)!==A.readInt(4)?null:f.utf8decode(A.readData(v.length-5))}return null}},n.exports=l},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(r,n,o){function s(A,d,T){this.name=A,this.dir=T.dir,this.date=T.date,this.comment=T.comment,this.unixPermissions=T.unixPermissions,this.dosPermissions=T.dosPermissions,this._data=d,this._dataBinary=T.binary,this.options={compression:T.compression,compressionOptions:T.compressionOptions}}var c=r("./stream/StreamHelper"),i=r("./stream/DataWorker"),g=r("./utf8"),f=r("./compressedObject"),a=r("./stream/GenericWorker");s.prototype={internalStream:function(A){var d=null,T="string";try{if(!A)throw new Error("No output type specified.");var w=(T=A.toLowerCase())==="string"||T==="text";T!=="binarystring"&&T!=="text"||(T="string"),d=this._decompressWorker();var S=!this._dataBinary;S&&!w&&(d=d.pipe(new g.Utf8EncodeWorker)),!S&&w&&(d=d.pipe(new g.Utf8DecodeWorker))}catch(O){(d=new a("error")).error(O)}return new c(d,T,"")},async:function(A,d){return this.internalStream(A).accumulate(d)},nodeStream:function(A,d){return this.internalStream(A||"nodebuffer").toNodejsStream(d)},_compressWorker:function(A,d){if(this._data instanceof f&&this._data.compression.magic===A.magic)return this._data.getCompressedWorker();var T=this._decompressWorker();return this._dataBinary||(T=T.pipe(new g.Utf8EncodeWorker)),f.createWorkerFrom(T,A,d)},_decompressWorker:function(){return this._data instanceof f?this._data.getContentWorker():this._data instanceof a?this._data:new i(this._data)}};for(var y=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],l=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},v=0;v<y.length;v++)s.prototype[y[v]]=l;n.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(r,n,o){(function(s){var c,i,g=s.MutationObserver||s.WebKitMutationObserver;if(g){var f=0,a=new g(A),y=s.document.createTextNode("");a.observe(y,{characterData:!0}),c=function(){y.data=f=++f%2}}else if(s.setImmediate||s.MessageChannel===void 0)c="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var d=s.document.createElement("script");d.onreadystatechange=function(){A(),d.onreadystatechange=null,d.parentNode.removeChild(d),d=null},s.document.documentElement.appendChild(d)}:function(){setTimeout(A,0)};else{var l=new s.MessageChannel;l.port1.onmessage=A,c=function(){l.port2.postMessage(0)}}var v=[];function A(){var d,T;i=!0;for(var w=v.length;w;){for(T=v,v=[],d=-1;++d<w;)T[d]();w=v.length}i=!1}n.exports=function(d){v.push(d)!==1||i||c()}}).call(this,typeof qr<"u"?qr:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(r,n,o){var s=r("immediate");function c(){}var i={},g=["REJECTED"],f=["FULFILLED"],a=["PENDING"];function y(w){if(typeof w!="function")throw new TypeError("resolver must be a function");this.state=a,this.queue=[],this.outcome=void 0,w!==c&&d(this,w)}function l(w,S,O){this.promise=w,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof O=="function"&&(this.onRejected=O,this.callRejected=this.otherCallRejected)}function v(w,S,O){s(function(){var N;try{N=S(O)}catch(P){return i.reject(w,P)}N===w?i.reject(w,new TypeError("Cannot resolve promise with itself")):i.resolve(w,N)})}function A(w){var S=w&&w.then;if(w&&(typeof w=="object"||typeof w=="function")&&typeof S=="function")return function(){S.apply(w,arguments)}}function d(w,S){var O=!1;function N(j){O||(O=!0,i.reject(w,j))}function P(j){O||(O=!0,i.resolve(w,j))}var H=T(function(){S(P,N)});H.status==="error"&&N(H.value)}function T(w,S){var O={};try{O.value=w(S),O.status="success"}catch(N){O.status="error",O.value=N}return O}(n.exports=y).prototype.finally=function(w){if(typeof w!="function")return this;var S=this.constructor;return this.then(function(O){return S.resolve(w()).then(function(){return O})},function(O){return S.resolve(w()).then(function(){throw O})})},y.prototype.catch=function(w){return this.then(null,w)},y.prototype.then=function(w,S){if(typeof w!="function"&&this.state===f||typeof S!="function"&&this.state===g)return this;var O=new this.constructor(c);return this.state!==a?v(O,this.state===f?w:S,this.outcome):this.queue.push(new l(O,w,S)),O},l.prototype.callFulfilled=function(w){i.resolve(this.promise,w)},l.prototype.otherCallFulfilled=function(w){v(this.promise,this.onFulfilled,w)},l.prototype.callRejected=function(w){i.reject(this.promise,w)},l.prototype.otherCallRejected=function(w){v(this.promise,this.onRejected,w)},i.resolve=function(w,S){var O=T(A,S);if(O.status==="error")return i.reject(w,O.value);var N=O.value;if(N)d(w,N);else{w.state=f,w.outcome=S;for(var P=-1,H=w.queue.length;++P<H;)w.queue[P].callFulfilled(S)}return w},i.reject=function(w,S){w.state=g,w.outcome=S;for(var O=-1,N=w.queue.length;++O<N;)w.queue[O].callRejected(S);return w},y.resolve=function(w){return w instanceof this?w:i.resolve(new this(c),w)},y.reject=function(w){var S=new this(c);return i.reject(S,w)},y.all=function(w){var S=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var O=w.length,N=!1;if(!O)return this.resolve([]);for(var P=new Array(O),H=0,j=-1,Z=new this(c);++j<O;)U(w[j],j);return Z;function U(ue,fe){S.resolve(ue).then(function(q){P[fe]=q,++H!==O||N||(N=!0,i.resolve(Z,P))},function(q){N||(N=!0,i.reject(Z,q))})}},y.race=function(w){var S=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var O=w.length,N=!1;if(!O)return this.resolve([]);for(var P=-1,H=new this(c);++P<O;)j=w[P],S.resolve(j).then(function(Z){N||(N=!0,i.resolve(H,Z))},function(Z){N||(N=!0,i.reject(H,Z))});var j;return H}},{immediate:36}],38:[function(r,n,o){var s={};(0,r("./lib/utils/common").assign)(s,r("./lib/deflate"),r("./lib/inflate"),r("./lib/zlib/constants")),n.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(r,n,o){var s=r("./zlib/deflate"),c=r("./utils/common"),i=r("./utils/strings"),g=r("./zlib/messages"),f=r("./zlib/zstream"),a=Object.prototype.toString,y=0,l=-1,v=0,A=8;function d(w){if(!(this instanceof d))return new d(w);this.options=c.assign({level:l,method:A,chunkSize:16384,windowBits:15,memLevel:8,strategy:v,to:""},w||{});var S=this.options;S.raw&&0<S.windowBits?S.windowBits=-S.windowBits:S.gzip&&0<S.windowBits&&S.windowBits<16&&(S.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var O=s.deflateInit2(this.strm,S.level,S.method,S.windowBits,S.memLevel,S.strategy);if(O!==y)throw new Error(g[O]);if(S.header&&s.deflateSetHeader(this.strm,S.header),S.dictionary){var N;if(N=typeof S.dictionary=="string"?i.string2buf(S.dictionary):a.call(S.dictionary)==="[object ArrayBuffer]"?new Uint8Array(S.dictionary):S.dictionary,(O=s.deflateSetDictionary(this.strm,N))!==y)throw new Error(g[O]);this._dict_set=!0}}function T(w,S){var O=new d(S);if(O.push(w,!0),O.err)throw O.msg||g[O.err];return O.result}d.prototype.push=function(w,S){var O,N,P=this.strm,H=this.options.chunkSize;if(this.ended)return!1;N=S===~~S?S:S===!0?4:0,typeof w=="string"?P.input=i.string2buf(w):a.call(w)==="[object ArrayBuffer]"?P.input=new Uint8Array(w):P.input=w,P.next_in=0,P.avail_in=P.input.length;do{if(P.avail_out===0&&(P.output=new c.Buf8(H),P.next_out=0,P.avail_out=H),(O=s.deflate(P,N))!==1&&O!==y)return this.onEnd(O),!(this.ended=!0);P.avail_out!==0&&(P.avail_in!==0||N!==4&&N!==2)||(this.options.to==="string"?this.onData(i.buf2binstring(c.shrinkBuf(P.output,P.next_out))):this.onData(c.shrinkBuf(P.output,P.next_out)))}while((0<P.avail_in||P.avail_out===0)&&O!==1);return N===4?(O=s.deflateEnd(this.strm),this.onEnd(O),this.ended=!0,O===y):N!==2||(this.onEnd(y),!(P.avail_out=0))},d.prototype.onData=function(w){this.chunks.push(w)},d.prototype.onEnd=function(w){w===y&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=c.flattenChunks(this.chunks)),this.chunks=[],this.err=w,this.msg=this.strm.msg},o.Deflate=d,o.deflate=T,o.deflateRaw=function(w,S){return(S=S||{}).raw=!0,T(w,S)},o.gzip=function(w,S){return(S=S||{}).gzip=!0,T(w,S)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(r,n,o){var s=r("./zlib/inflate"),c=r("./utils/common"),i=r("./utils/strings"),g=r("./zlib/constants"),f=r("./zlib/messages"),a=r("./zlib/zstream"),y=r("./zlib/gzheader"),l=Object.prototype.toString;function v(d){if(!(this instanceof v))return new v(d);this.options=c.assign({chunkSize:16384,windowBits:0,to:""},d||{});var T=this.options;T.raw&&0<=T.windowBits&&T.windowBits<16&&(T.windowBits=-T.windowBits,T.windowBits===0&&(T.windowBits=-15)),!(0<=T.windowBits&&T.windowBits<16)||d&&d.windowBits||(T.windowBits+=32),15<T.windowBits&&T.windowBits<48&&!(15&T.windowBits)&&(T.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var w=s.inflateInit2(this.strm,T.windowBits);if(w!==g.Z_OK)throw new Error(f[w]);this.header=new y,s.inflateGetHeader(this.strm,this.header)}function A(d,T){var w=new v(T);if(w.push(d,!0),w.err)throw w.msg||f[w.err];return w.result}v.prototype.push=function(d,T){var w,S,O,N,P,H,j=this.strm,Z=this.options.chunkSize,U=this.options.dictionary,ue=!1;if(this.ended)return!1;S=T===~~T?T:T===!0?g.Z_FINISH:g.Z_NO_FLUSH,typeof d=="string"?j.input=i.binstring2buf(d):l.call(d)==="[object ArrayBuffer]"?j.input=new Uint8Array(d):j.input=d,j.next_in=0,j.avail_in=j.input.length;do{if(j.avail_out===0&&(j.output=new c.Buf8(Z),j.next_out=0,j.avail_out=Z),(w=s.inflate(j,g.Z_NO_FLUSH))===g.Z_NEED_DICT&&U&&(H=typeof U=="string"?i.string2buf(U):l.call(U)==="[object ArrayBuffer]"?new Uint8Array(U):U,w=s.inflateSetDictionary(this.strm,H)),w===g.Z_BUF_ERROR&&ue===!0&&(w=g.Z_OK,ue=!1),w!==g.Z_STREAM_END&&w!==g.Z_OK)return this.onEnd(w),!(this.ended=!0);j.next_out&&(j.avail_out!==0&&w!==g.Z_STREAM_END&&(j.avail_in!==0||S!==g.Z_FINISH&&S!==g.Z_SYNC_FLUSH)||(this.options.to==="string"?(O=i.utf8border(j.output,j.next_out),N=j.next_out-O,P=i.buf2string(j.output,O),j.next_out=N,j.avail_out=Z-N,N&&c.arraySet(j.output,j.output,O,N,0),this.onData(P)):this.onData(c.shrinkBuf(j.output,j.next_out)))),j.avail_in===0&&j.avail_out===0&&(ue=!0)}while((0<j.avail_in||j.avail_out===0)&&w!==g.Z_STREAM_END);return w===g.Z_STREAM_END&&(S=g.Z_FINISH),S===g.Z_FINISH?(w=s.inflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===g.Z_OK):S!==g.Z_SYNC_FLUSH||(this.onEnd(g.Z_OK),!(j.avail_out=0))},v.prototype.onData=function(d){this.chunks.push(d)},v.prototype.onEnd=function(d){d===g.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=c.flattenChunks(this.chunks)),this.chunks=[],this.err=d,this.msg=this.strm.msg},o.Inflate=v,o.inflate=A,o.inflateRaw=function(d,T){return(T=T||{}).raw=!0,A(d,T)},o.ungzip=A},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(r,n,o){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";o.assign=function(g){for(var f=Array.prototype.slice.call(arguments,1);f.length;){var a=f.shift();if(a){if(typeof a!="object")throw new TypeError(a+"must be non-object");for(var y in a)a.hasOwnProperty(y)&&(g[y]=a[y])}}return g},o.shrinkBuf=function(g,f){return g.length===f?g:g.subarray?g.subarray(0,f):(g.length=f,g)};var c={arraySet:function(g,f,a,y,l){if(f.subarray&&g.subarray)g.set(f.subarray(a,a+y),l);else for(var v=0;v<y;v++)g[l+v]=f[a+v]},flattenChunks:function(g){var f,a,y,l,v,A;for(f=y=0,a=g.length;f<a;f++)y+=g[f].length;for(A=new Uint8Array(y),f=l=0,a=g.length;f<a;f++)v=g[f],A.set(v,l),l+=v.length;return A}},i={arraySet:function(g,f,a,y,l){for(var v=0;v<y;v++)g[l+v]=f[a+v]},flattenChunks:function(g){return[].concat.apply([],g)}};o.setTyped=function(g){g?(o.Buf8=Uint8Array,o.Buf16=Uint16Array,o.Buf32=Int32Array,o.assign(o,c)):(o.Buf8=Array,o.Buf16=Array,o.Buf32=Array,o.assign(o,i))},o.setTyped(s)},{}],42:[function(r,n,o){var s=r("./common"),c=!0,i=!0;try{String.fromCharCode.apply(null,[0])}catch{c=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{i=!1}for(var g=new s.Buf8(256),f=0;f<256;f++)g[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;function a(y,l){if(l<65537&&(y.subarray&&i||!y.subarray&&c))return String.fromCharCode.apply(null,s.shrinkBuf(y,l));for(var v="",A=0;A<l;A++)v+=String.fromCharCode(y[A]);return v}g[254]=g[254]=1,o.string2buf=function(y){var l,v,A,d,T,w=y.length,S=0;for(d=0;d<w;d++)(64512&(v=y.charCodeAt(d)))==55296&&d+1<w&&(64512&(A=y.charCodeAt(d+1)))==56320&&(v=65536+(v-55296<<10)+(A-56320),d++),S+=v<128?1:v<2048?2:v<65536?3:4;for(l=new s.Buf8(S),d=T=0;T<S;d++)(64512&(v=y.charCodeAt(d)))==55296&&d+1<w&&(64512&(A=y.charCodeAt(d+1)))==56320&&(v=65536+(v-55296<<10)+(A-56320),d++),v<128?l[T++]=v:(v<2048?l[T++]=192|v>>>6:(v<65536?l[T++]=224|v>>>12:(l[T++]=240|v>>>18,l[T++]=128|v>>>12&63),l[T++]=128|v>>>6&63),l[T++]=128|63&v);return l},o.buf2binstring=function(y){return a(y,y.length)},o.binstring2buf=function(y){for(var l=new s.Buf8(y.length),v=0,A=l.length;v<A;v++)l[v]=y.charCodeAt(v);return l},o.buf2string=function(y,l){var v,A,d,T,w=l||y.length,S=new Array(2*w);for(v=A=0;v<w;)if((d=y[v++])<128)S[A++]=d;else if(4<(T=g[d]))S[A++]=65533,v+=T-1;else{for(d&=T===2?31:T===3?15:7;1<T&&v<w;)d=d<<6|63&y[v++],T--;1<T?S[A++]=65533:d<65536?S[A++]=d:(d-=65536,S[A++]=55296|d>>10&1023,S[A++]=56320|1023&d)}return a(S,A)},o.utf8border=function(y,l){var v;for((l=l||y.length)>y.length&&(l=y.length),v=l-1;0<=v&&(192&y[v])==128;)v--;return v<0||v===0?l:v+g[y[v]]>l?v:l}},{"./common":41}],43:[function(r,n,o){n.exports=function(s,c,i,g){for(var f=65535&s|0,a=s>>>16&65535|0,y=0;i!==0;){for(i-=y=2e3<i?2e3:i;a=a+(f=f+c[g++]|0)|0,--y;);f%=65521,a%=65521}return f|a<<16|0}},{}],44:[function(r,n,o){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(r,n,o){var s=function(){for(var c,i=[],g=0;g<256;g++){c=g;for(var f=0;f<8;f++)c=1&c?3988292384^c>>>1:c>>>1;i[g]=c}return i}();n.exports=function(c,i,g,f){var a=s,y=f+g;c^=-1;for(var l=f;l<y;l++)c=c>>>8^a[255&(c^i[l])];return-1^c}},{}],46:[function(r,n,o){var s,c=r("../utils/common"),i=r("./trees"),g=r("./adler32"),f=r("./crc32"),a=r("./messages"),y=0,l=4,v=0,A=-2,d=-1,T=4,w=2,S=8,O=9,N=286,P=30,H=19,j=2*N+1,Z=15,U=3,ue=258,fe=ue+U+1,q=42,Q=113,_=1,k=2,$=3,F=4;function V(R,Se){return R.msg=a[Se],Se}function M(R){return(R<<1)-(4<R?9:0)}function K(R){for(var Se=R.length;0<=--Se;)R[Se]=0}function G(R){var Se=R.state,Ae=Se.pending;Ae>R.avail_out&&(Ae=R.avail_out),Ae!==0&&(c.arraySet(R.output,Se.pending_buf,Se.pending_out,Ae,R.next_out),R.next_out+=Ae,Se.pending_out+=Ae,R.total_out+=Ae,R.avail_out-=Ae,Se.pending-=Ae,Se.pending===0&&(Se.pending_out=0))}function Y(R,Se){i._tr_flush_block(R,0<=R.block_start?R.block_start:-1,R.strstart-R.block_start,Se),R.block_start=R.strstart,G(R.strm)}function ye(R,Se){R.pending_buf[R.pending++]=Se}function Ee(R,Se){R.pending_buf[R.pending++]=Se>>>8&255,R.pending_buf[R.pending++]=255&Se}function Re(R,Se){var Ae,se,ne=R.max_chain_length,ve=R.strstart,Te=R.prev_length,Pe=R.nice_match,xe=R.strstart>R.w_size-fe?R.strstart-(R.w_size-fe):0,Fe=R.window,Ve=R.w_mask,m=R.prev,I=R.strstart+ue,h=Fe[ve+Te-1],u=Fe[ve+Te];R.prev_length>=R.good_match&&(ne>>=2),Pe>R.lookahead&&(Pe=R.lookahead);do if(Fe[(Ae=Se)+Te]===u&&Fe[Ae+Te-1]===h&&Fe[Ae]===Fe[ve]&&Fe[++Ae]===Fe[ve+1]){ve+=2,Ae++;do;while(Fe[++ve]===Fe[++Ae]&&Fe[++ve]===Fe[++Ae]&&Fe[++ve]===Fe[++Ae]&&Fe[++ve]===Fe[++Ae]&&Fe[++ve]===Fe[++Ae]&&Fe[++ve]===Fe[++Ae]&&Fe[++ve]===Fe[++Ae]&&Fe[++ve]===Fe[++Ae]&&ve<I);if(se=ue-(I-ve),ve=I-ue,Te<se){if(R.match_start=Se,Pe<=(Te=se))break;h=Fe[ve+Te-1],u=Fe[ve+Te]}}while((Se=m[Se&Ve])>xe&&--ne!=0);return Te<=R.lookahead?Te:R.lookahead}function ct(R){var Se,Ae,se,ne,ve,Te,Pe,xe,Fe,Ve,m=R.w_size;do{if(ne=R.window_size-R.lookahead-R.strstart,R.strstart>=m+(m-fe)){for(c.arraySet(R.window,R.window,m,m,0),R.match_start-=m,R.strstart-=m,R.block_start-=m,Se=Ae=R.hash_size;se=R.head[--Se],R.head[Se]=m<=se?se-m:0,--Ae;);for(Se=Ae=m;se=R.prev[--Se],R.prev[Se]=m<=se?se-m:0,--Ae;);ne+=m}if(R.strm.avail_in===0)break;if(Te=R.strm,Pe=R.window,xe=R.strstart+R.lookahead,Fe=ne,Ve=void 0,Ve=Te.avail_in,Fe<Ve&&(Ve=Fe),Ae=Ve===0?0:(Te.avail_in-=Ve,c.arraySet(Pe,Te.input,Te.next_in,Ve,xe),Te.state.wrap===1?Te.adler=g(Te.adler,Pe,Ve,xe):Te.state.wrap===2&&(Te.adler=f(Te.adler,Pe,Ve,xe)),Te.next_in+=Ve,Te.total_in+=Ve,Ve),R.lookahead+=Ae,R.lookahead+R.insert>=U)for(ve=R.strstart-R.insert,R.ins_h=R.window[ve],R.ins_h=(R.ins_h<<R.hash_shift^R.window[ve+1])&R.hash_mask;R.insert&&(R.ins_h=(R.ins_h<<R.hash_shift^R.window[ve+U-1])&R.hash_mask,R.prev[ve&R.w_mask]=R.head[R.ins_h],R.head[R.ins_h]=ve,ve++,R.insert--,!(R.lookahead+R.insert<U)););}while(R.lookahead<fe&&R.strm.avail_in!==0)}function ft(R,Se){for(var Ae,se;;){if(R.lookahead<fe){if(ct(R),R.lookahead<fe&&Se===y)return _;if(R.lookahead===0)break}if(Ae=0,R.lookahead>=U&&(R.ins_h=(R.ins_h<<R.hash_shift^R.window[R.strstart+U-1])&R.hash_mask,Ae=R.prev[R.strstart&R.w_mask]=R.head[R.ins_h],R.head[R.ins_h]=R.strstart),Ae!==0&&R.strstart-Ae<=R.w_size-fe&&(R.match_length=Re(R,Ae)),R.match_length>=U)if(se=i._tr_tally(R,R.strstart-R.match_start,R.match_length-U),R.lookahead-=R.match_length,R.match_length<=R.max_lazy_match&&R.lookahead>=U){for(R.match_length--;R.strstart++,R.ins_h=(R.ins_h<<R.hash_shift^R.window[R.strstart+U-1])&R.hash_mask,Ae=R.prev[R.strstart&R.w_mask]=R.head[R.ins_h],R.head[R.ins_h]=R.strstart,--R.match_length!=0;);R.strstart++}else R.strstart+=R.match_length,R.match_length=0,R.ins_h=R.window[R.strstart],R.ins_h=(R.ins_h<<R.hash_shift^R.window[R.strstart+1])&R.hash_mask;else se=i._tr_tally(R,0,R.window[R.strstart]),R.lookahead--,R.strstart++;if(se&&(Y(R,!1),R.strm.avail_out===0))return _}return R.insert=R.strstart<U-1?R.strstart:U-1,Se===l?(Y(R,!0),R.strm.avail_out===0?$:F):R.last_lit&&(Y(R,!1),R.strm.avail_out===0)?_:k}function Ze(R,Se){for(var Ae,se,ne;;){if(R.lookahead<fe){if(ct(R),R.lookahead<fe&&Se===y)return _;if(R.lookahead===0)break}if(Ae=0,R.lookahead>=U&&(R.ins_h=(R.ins_h<<R.hash_shift^R.window[R.strstart+U-1])&R.hash_mask,Ae=R.prev[R.strstart&R.w_mask]=R.head[R.ins_h],R.head[R.ins_h]=R.strstart),R.prev_length=R.match_length,R.prev_match=R.match_start,R.match_length=U-1,Ae!==0&&R.prev_length<R.max_lazy_match&&R.strstart-Ae<=R.w_size-fe&&(R.match_length=Re(R,Ae),R.match_length<=5&&(R.strategy===1||R.match_length===U&&4096<R.strstart-R.match_start)&&(R.match_length=U-1)),R.prev_length>=U&&R.match_length<=R.prev_length){for(ne=R.strstart+R.lookahead-U,se=i._tr_tally(R,R.strstart-1-R.prev_match,R.prev_length-U),R.lookahead-=R.prev_length-1,R.prev_length-=2;++R.strstart<=ne&&(R.ins_h=(R.ins_h<<R.hash_shift^R.window[R.strstart+U-1])&R.hash_mask,Ae=R.prev[R.strstart&R.w_mask]=R.head[R.ins_h],R.head[R.ins_h]=R.strstart),--R.prev_length!=0;);if(R.match_available=0,R.match_length=U-1,R.strstart++,se&&(Y(R,!1),R.strm.avail_out===0))return _}else if(R.match_available){if((se=i._tr_tally(R,0,R.window[R.strstart-1]))&&Y(R,!1),R.strstart++,R.lookahead--,R.strm.avail_out===0)return _}else R.match_available=1,R.strstart++,R.lookahead--}return R.match_available&&(se=i._tr_tally(R,0,R.window[R.strstart-1]),R.match_available=0),R.insert=R.strstart<U-1?R.strstart:U-1,Se===l?(Y(R,!0),R.strm.avail_out===0?$:F):R.last_lit&&(Y(R,!1),R.strm.avail_out===0)?_:k}function Je(R,Se,Ae,se,ne){this.good_length=R,this.max_lazy=Se,this.nice_length=Ae,this.max_chain=se,this.func=ne}function Xe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=S,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new c.Buf16(2*j),this.dyn_dtree=new c.Buf16(2*(2*P+1)),this.bl_tree=new c.Buf16(2*(2*H+1)),K(this.dyn_ltree),K(this.dyn_dtree),K(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new c.Buf16(Z+1),this.heap=new c.Buf16(2*N+1),K(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new c.Buf16(2*N+1),K(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Qe(R){var Se;return R&&R.state?(R.total_in=R.total_out=0,R.data_type=w,(Se=R.state).pending=0,Se.pending_out=0,Se.wrap<0&&(Se.wrap=-Se.wrap),Se.status=Se.wrap?q:Q,R.adler=Se.wrap===2?0:1,Se.last_flush=y,i._tr_init(Se),v):V(R,A)}function ht(R){var Se=Qe(R);return Se===v&&function(Ae){Ae.window_size=2*Ae.w_size,K(Ae.head),Ae.max_lazy_match=s[Ae.level].max_lazy,Ae.good_match=s[Ae.level].good_length,Ae.nice_match=s[Ae.level].nice_length,Ae.max_chain_length=s[Ae.level].max_chain,Ae.strstart=0,Ae.block_start=0,Ae.lookahead=0,Ae.insert=0,Ae.match_length=Ae.prev_length=U-1,Ae.match_available=0,Ae.ins_h=0}(R.state),Se}function lt(R,Se,Ae,se,ne,ve){if(!R)return A;var Te=1;if(Se===d&&(Se=6),se<0?(Te=0,se=-se):15<se&&(Te=2,se-=16),ne<1||O<ne||Ae!==S||se<8||15<se||Se<0||9<Se||ve<0||T<ve)return V(R,A);se===8&&(se=9);var Pe=new Xe;return(R.state=Pe).strm=R,Pe.wrap=Te,Pe.gzhead=null,Pe.w_bits=se,Pe.w_size=1<<Pe.w_bits,Pe.w_mask=Pe.w_size-1,Pe.hash_bits=ne+7,Pe.hash_size=1<<Pe.hash_bits,Pe.hash_mask=Pe.hash_size-1,Pe.hash_shift=~~((Pe.hash_bits+U-1)/U),Pe.window=new c.Buf8(2*Pe.w_size),Pe.head=new c.Buf16(Pe.hash_size),Pe.prev=new c.Buf16(Pe.w_size),Pe.lit_bufsize=1<<ne+6,Pe.pending_buf_size=4*Pe.lit_bufsize,Pe.pending_buf=new c.Buf8(Pe.pending_buf_size),Pe.d_buf=1*Pe.lit_bufsize,Pe.l_buf=3*Pe.lit_bufsize,Pe.level=Se,Pe.strategy=ve,Pe.method=Ae,ht(R)}s=[new Je(0,0,0,0,function(R,Se){var Ae=65535;for(Ae>R.pending_buf_size-5&&(Ae=R.pending_buf_size-5);;){if(R.lookahead<=1){if(ct(R),R.lookahead===0&&Se===y)return _;if(R.lookahead===0)break}R.strstart+=R.lookahead,R.lookahead=0;var se=R.block_start+Ae;if((R.strstart===0||R.strstart>=se)&&(R.lookahead=R.strstart-se,R.strstart=se,Y(R,!1),R.strm.avail_out===0)||R.strstart-R.block_start>=R.w_size-fe&&(Y(R,!1),R.strm.avail_out===0))return _}return R.insert=0,Se===l?(Y(R,!0),R.strm.avail_out===0?$:F):(R.strstart>R.block_start&&(Y(R,!1),R.strm.avail_out),_)}),new Je(4,4,8,4,ft),new Je(4,5,16,8,ft),new Je(4,6,32,32,ft),new Je(4,4,16,16,Ze),new Je(8,16,32,32,Ze),new Je(8,16,128,128,Ze),new Je(8,32,128,256,Ze),new Je(32,128,258,1024,Ze),new Je(32,258,258,4096,Ze)],o.deflateInit=function(R,Se){return lt(R,Se,S,15,8,0)},o.deflateInit2=lt,o.deflateReset=ht,o.deflateResetKeep=Qe,o.deflateSetHeader=function(R,Se){return R&&R.state?R.state.wrap!==2?A:(R.state.gzhead=Se,v):A},o.deflate=function(R,Se){var Ae,se,ne,ve;if(!R||!R.state||5<Se||Se<0)return R?V(R,A):A;if(se=R.state,!R.output||!R.input&&R.avail_in!==0||se.status===666&&Se!==l)return V(R,R.avail_out===0?-5:A);if(se.strm=R,Ae=se.last_flush,se.last_flush=Se,se.status===q)if(se.wrap===2)R.adler=0,ye(se,31),ye(se,139),ye(se,8),se.gzhead?(ye(se,(se.gzhead.text?1:0)+(se.gzhead.hcrc?2:0)+(se.gzhead.extra?4:0)+(se.gzhead.name?8:0)+(se.gzhead.comment?16:0)),ye(se,255&se.gzhead.time),ye(se,se.gzhead.time>>8&255),ye(se,se.gzhead.time>>16&255),ye(se,se.gzhead.time>>24&255),ye(se,se.level===9?2:2<=se.strategy||se.level<2?4:0),ye(se,255&se.gzhead.os),se.gzhead.extra&&se.gzhead.extra.length&&(ye(se,255&se.gzhead.extra.length),ye(se,se.gzhead.extra.length>>8&255)),se.gzhead.hcrc&&(R.adler=f(R.adler,se.pending_buf,se.pending,0)),se.gzindex=0,se.status=69):(ye(se,0),ye(se,0),ye(se,0),ye(se,0),ye(se,0),ye(se,se.level===9?2:2<=se.strategy||se.level<2?4:0),ye(se,3),se.status=Q);else{var Te=S+(se.w_bits-8<<4)<<8;Te|=(2<=se.strategy||se.level<2?0:se.level<6?1:se.level===6?2:3)<<6,se.strstart!==0&&(Te|=32),Te+=31-Te%31,se.status=Q,Ee(se,Te),se.strstart!==0&&(Ee(se,R.adler>>>16),Ee(se,65535&R.adler)),R.adler=1}if(se.status===69)if(se.gzhead.extra){for(ne=se.pending;se.gzindex<(65535&se.gzhead.extra.length)&&(se.pending!==se.pending_buf_size||(se.gzhead.hcrc&&se.pending>ne&&(R.adler=f(R.adler,se.pending_buf,se.pending-ne,ne)),G(R),ne=se.pending,se.pending!==se.pending_buf_size));)ye(se,255&se.gzhead.extra[se.gzindex]),se.gzindex++;se.gzhead.hcrc&&se.pending>ne&&(R.adler=f(R.adler,se.pending_buf,se.pending-ne,ne)),se.gzindex===se.gzhead.extra.length&&(se.gzindex=0,se.status=73)}else se.status=73;if(se.status===73)if(se.gzhead.name){ne=se.pending;do{if(se.pending===se.pending_buf_size&&(se.gzhead.hcrc&&se.pending>ne&&(R.adler=f(R.adler,se.pending_buf,se.pending-ne,ne)),G(R),ne=se.pending,se.pending===se.pending_buf_size)){ve=1;break}ve=se.gzindex<se.gzhead.name.length?255&se.gzhead.name.charCodeAt(se.gzindex++):0,ye(se,ve)}while(ve!==0);se.gzhead.hcrc&&se.pending>ne&&(R.adler=f(R.adler,se.pending_buf,se.pending-ne,ne)),ve===0&&(se.gzindex=0,se.status=91)}else se.status=91;if(se.status===91)if(se.gzhead.comment){ne=se.pending;do{if(se.pending===se.pending_buf_size&&(se.gzhead.hcrc&&se.pending>ne&&(R.adler=f(R.adler,se.pending_buf,se.pending-ne,ne)),G(R),ne=se.pending,se.pending===se.pending_buf_size)){ve=1;break}ve=se.gzindex<se.gzhead.comment.length?255&se.gzhead.comment.charCodeAt(se.gzindex++):0,ye(se,ve)}while(ve!==0);se.gzhead.hcrc&&se.pending>ne&&(R.adler=f(R.adler,se.pending_buf,se.pending-ne,ne)),ve===0&&(se.status=103)}else se.status=103;if(se.status===103&&(se.gzhead.hcrc?(se.pending+2>se.pending_buf_size&&G(R),se.pending+2<=se.pending_buf_size&&(ye(se,255&R.adler),ye(se,R.adler>>8&255),R.adler=0,se.status=Q)):se.status=Q),se.pending!==0){if(G(R),R.avail_out===0)return se.last_flush=-1,v}else if(R.avail_in===0&&M(Se)<=M(Ae)&&Se!==l)return V(R,-5);if(se.status===666&&R.avail_in!==0)return V(R,-5);if(R.avail_in!==0||se.lookahead!==0||Se!==y&&se.status!==666){var Pe=se.strategy===2?function(xe,Fe){for(var Ve;;){if(xe.lookahead===0&&(ct(xe),xe.lookahead===0)){if(Fe===y)return _;break}if(xe.match_length=0,Ve=i._tr_tally(xe,0,xe.window[xe.strstart]),xe.lookahead--,xe.strstart++,Ve&&(Y(xe,!1),xe.strm.avail_out===0))return _}return xe.insert=0,Fe===l?(Y(xe,!0),xe.strm.avail_out===0?$:F):xe.last_lit&&(Y(xe,!1),xe.strm.avail_out===0)?_:k}(se,Se):se.strategy===3?function(xe,Fe){for(var Ve,m,I,h,u=xe.window;;){if(xe.lookahead<=ue){if(ct(xe),xe.lookahead<=ue&&Fe===y)return _;if(xe.lookahead===0)break}if(xe.match_length=0,xe.lookahead>=U&&0<xe.strstart&&(m=u[I=xe.strstart-1])===u[++I]&&m===u[++I]&&m===u[++I]){h=xe.strstart+ue;do;while(m===u[++I]&&m===u[++I]&&m===u[++I]&&m===u[++I]&&m===u[++I]&&m===u[++I]&&m===u[++I]&&m===u[++I]&&I<h);xe.match_length=ue-(h-I),xe.match_length>xe.lookahead&&(xe.match_length=xe.lookahead)}if(xe.match_length>=U?(Ve=i._tr_tally(xe,1,xe.match_length-U),xe.lookahead-=xe.match_length,xe.strstart+=xe.match_length,xe.match_length=0):(Ve=i._tr_tally(xe,0,xe.window[xe.strstart]),xe.lookahead--,xe.strstart++),Ve&&(Y(xe,!1),xe.strm.avail_out===0))return _}return xe.insert=0,Fe===l?(Y(xe,!0),xe.strm.avail_out===0?$:F):xe.last_lit&&(Y(xe,!1),xe.strm.avail_out===0)?_:k}(se,Se):s[se.level].func(se,Se);if(Pe!==$&&Pe!==F||(se.status=666),Pe===_||Pe===$)return R.avail_out===0&&(se.last_flush=-1),v;if(Pe===k&&(Se===1?i._tr_align(se):Se!==5&&(i._tr_stored_block(se,0,0,!1),Se===3&&(K(se.head),se.lookahead===0&&(se.strstart=0,se.block_start=0,se.insert=0))),G(R),R.avail_out===0))return se.last_flush=-1,v}return Se!==l?v:se.wrap<=0?1:(se.wrap===2?(ye(se,255&R.adler),ye(se,R.adler>>8&255),ye(se,R.adler>>16&255),ye(se,R.adler>>24&255),ye(se,255&R.total_in),ye(se,R.total_in>>8&255),ye(se,R.total_in>>16&255),ye(se,R.total_in>>24&255)):(Ee(se,R.adler>>>16),Ee(se,65535&R.adler)),G(R),0<se.wrap&&(se.wrap=-se.wrap),se.pending!==0?v:1)},o.deflateEnd=function(R){var Se;return R&&R.state?(Se=R.state.status)!==q&&Se!==69&&Se!==73&&Se!==91&&Se!==103&&Se!==Q&&Se!==666?V(R,A):(R.state=null,Se===Q?V(R,-3):v):A},o.deflateSetDictionary=function(R,Se){var Ae,se,ne,ve,Te,Pe,xe,Fe,Ve=Se.length;if(!R||!R.state||(ve=(Ae=R.state).wrap)===2||ve===1&&Ae.status!==q||Ae.lookahead)return A;for(ve===1&&(R.adler=g(R.adler,Se,Ve,0)),Ae.wrap=0,Ve>=Ae.w_size&&(ve===0&&(K(Ae.head),Ae.strstart=0,Ae.block_start=0,Ae.insert=0),Fe=new c.Buf8(Ae.w_size),c.arraySet(Fe,Se,Ve-Ae.w_size,Ae.w_size,0),Se=Fe,Ve=Ae.w_size),Te=R.avail_in,Pe=R.next_in,xe=R.input,R.avail_in=Ve,R.next_in=0,R.input=Se,ct(Ae);Ae.lookahead>=U;){for(se=Ae.strstart,ne=Ae.lookahead-(U-1);Ae.ins_h=(Ae.ins_h<<Ae.hash_shift^Ae.window[se+U-1])&Ae.hash_mask,Ae.prev[se&Ae.w_mask]=Ae.head[Ae.ins_h],Ae.head[Ae.ins_h]=se,se++,--ne;);Ae.strstart=se,Ae.lookahead=U-1,ct(Ae)}return Ae.strstart+=Ae.lookahead,Ae.block_start=Ae.strstart,Ae.insert=Ae.lookahead,Ae.lookahead=0,Ae.match_length=Ae.prev_length=U-1,Ae.match_available=0,R.next_in=Pe,R.input=xe,R.avail_in=Te,Ae.wrap=ve,v},o.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(r,n,o){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(r,n,o){n.exports=function(s,c){var i,g,f,a,y,l,v,A,d,T,w,S,O,N,P,H,j,Z,U,ue,fe,q,Q,_,k;i=s.state,g=s.next_in,_=s.input,f=g+(s.avail_in-5),a=s.next_out,k=s.output,y=a-(c-s.avail_out),l=a+(s.avail_out-257),v=i.dmax,A=i.wsize,d=i.whave,T=i.wnext,w=i.window,S=i.hold,O=i.bits,N=i.lencode,P=i.distcode,H=(1<<i.lenbits)-1,j=(1<<i.distbits)-1;e:do{O<15&&(S+=_[g++]<<O,O+=8,S+=_[g++]<<O,O+=8),Z=N[S&H];t:for(;;){if(S>>>=U=Z>>>24,O-=U,(U=Z>>>16&255)===0)k[a++]=65535&Z;else{if(!(16&U)){if(!(64&U)){Z=N[(65535&Z)+(S&(1<<U)-1)];continue t}if(32&U){i.mode=12;break e}s.msg="invalid literal/length code",i.mode=30;break e}ue=65535&Z,(U&=15)&&(O<U&&(S+=_[g++]<<O,O+=8),ue+=S&(1<<U)-1,S>>>=U,O-=U),O<15&&(S+=_[g++]<<O,O+=8,S+=_[g++]<<O,O+=8),Z=P[S&j];r:for(;;){if(S>>>=U=Z>>>24,O-=U,!(16&(U=Z>>>16&255))){if(!(64&U)){Z=P[(65535&Z)+(S&(1<<U)-1)];continue r}s.msg="invalid distance code",i.mode=30;break e}if(fe=65535&Z,O<(U&=15)&&(S+=_[g++]<<O,(O+=8)<U&&(S+=_[g++]<<O,O+=8)),v<(fe+=S&(1<<U)-1)){s.msg="invalid distance too far back",i.mode=30;break e}if(S>>>=U,O-=U,(U=a-y)<fe){if(d<(U=fe-U)&&i.sane){s.msg="invalid distance too far back",i.mode=30;break e}if(Q=w,(q=0)===T){if(q+=A-U,U<ue){for(ue-=U;k[a++]=w[q++],--U;);q=a-fe,Q=k}}else if(T<U){if(q+=A+T-U,(U-=T)<ue){for(ue-=U;k[a++]=w[q++],--U;);if(q=0,T<ue){for(ue-=U=T;k[a++]=w[q++],--U;);q=a-fe,Q=k}}}else if(q+=T-U,U<ue){for(ue-=U;k[a++]=w[q++],--U;);q=a-fe,Q=k}for(;2<ue;)k[a++]=Q[q++],k[a++]=Q[q++],k[a++]=Q[q++],ue-=3;ue&&(k[a++]=Q[q++],1<ue&&(k[a++]=Q[q++]))}else{for(q=a-fe;k[a++]=k[q++],k[a++]=k[q++],k[a++]=k[q++],2<(ue-=3););ue&&(k[a++]=k[q++],1<ue&&(k[a++]=k[q++]))}break}}break}}while(g<f&&a<l);g-=ue=O>>3,S&=(1<<(O-=ue<<3))-1,s.next_in=g,s.next_out=a,s.avail_in=g<f?f-g+5:5-(g-f),s.avail_out=a<l?l-a+257:257-(a-l),i.hold=S,i.bits=O}},{}],49:[function(r,n,o){var s=r("../utils/common"),c=r("./adler32"),i=r("./crc32"),g=r("./inffast"),f=r("./inftrees"),a=1,y=2,l=0,v=-2,A=1,d=852,T=592;function w(q){return(q>>>24&255)+(q>>>8&65280)+((65280&q)<<8)+((255&q)<<24)}function S(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function O(q){var Q;return q&&q.state?(Q=q.state,q.total_in=q.total_out=Q.total=0,q.msg="",Q.wrap&&(q.adler=1&Q.wrap),Q.mode=A,Q.last=0,Q.havedict=0,Q.dmax=32768,Q.head=null,Q.hold=0,Q.bits=0,Q.lencode=Q.lendyn=new s.Buf32(d),Q.distcode=Q.distdyn=new s.Buf32(T),Q.sane=1,Q.back=-1,l):v}function N(q){var Q;return q&&q.state?((Q=q.state).wsize=0,Q.whave=0,Q.wnext=0,O(q)):v}function P(q,Q){var _,k;return q&&q.state?(k=q.state,Q<0?(_=0,Q=-Q):(_=1+(Q>>4),Q<48&&(Q&=15)),Q&&(Q<8||15<Q)?v:(k.window!==null&&k.wbits!==Q&&(k.window=null),k.wrap=_,k.wbits=Q,N(q))):v}function H(q,Q){var _,k;return q?(k=new S,(q.state=k).window=null,(_=P(q,Q))!==l&&(q.state=null),_):v}var j,Z,U=!0;function ue(q){if(U){var Q;for(j=new s.Buf32(512),Z=new s.Buf32(32),Q=0;Q<144;)q.lens[Q++]=8;for(;Q<256;)q.lens[Q++]=9;for(;Q<280;)q.lens[Q++]=7;for(;Q<288;)q.lens[Q++]=8;for(f(a,q.lens,0,288,j,0,q.work,{bits:9}),Q=0;Q<32;)q.lens[Q++]=5;f(y,q.lens,0,32,Z,0,q.work,{bits:5}),U=!1}q.lencode=j,q.lenbits=9,q.distcode=Z,q.distbits=5}function fe(q,Q,_,k){var $,F=q.state;return F.window===null&&(F.wsize=1<<F.wbits,F.wnext=0,F.whave=0,F.window=new s.Buf8(F.wsize)),k>=F.wsize?(s.arraySet(F.window,Q,_-F.wsize,F.wsize,0),F.wnext=0,F.whave=F.wsize):(k<($=F.wsize-F.wnext)&&($=k),s.arraySet(F.window,Q,_-k,$,F.wnext),(k-=$)?(s.arraySet(F.window,Q,_-k,k,0),F.wnext=k,F.whave=F.wsize):(F.wnext+=$,F.wnext===F.wsize&&(F.wnext=0),F.whave<F.wsize&&(F.whave+=$))),0}o.inflateReset=N,o.inflateReset2=P,o.inflateResetKeep=O,o.inflateInit=function(q){return H(q,15)},o.inflateInit2=H,o.inflate=function(q,Q){var _,k,$,F,V,M,K,G,Y,ye,Ee,Re,ct,ft,Ze,Je,Xe,Qe,ht,lt,R,Se,Ae,se,ne=0,ve=new s.Buf8(4),Te=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!q||!q.state||!q.output||!q.input&&q.avail_in!==0)return v;(_=q.state).mode===12&&(_.mode=13),V=q.next_out,$=q.output,K=q.avail_out,F=q.next_in,k=q.input,M=q.avail_in,G=_.hold,Y=_.bits,ye=M,Ee=K,Se=l;e:for(;;)switch(_.mode){case A:if(_.wrap===0){_.mode=13;break}for(;Y<16;){if(M===0)break e;M--,G+=k[F++]<<Y,Y+=8}if(2&_.wrap&&G===35615){ve[_.check=0]=255&G,ve[1]=G>>>8&255,_.check=i(_.check,ve,2,0),Y=G=0,_.mode=2;break}if(_.flags=0,_.head&&(_.head.done=!1),!(1&_.wrap)||(((255&G)<<8)+(G>>8))%31){q.msg="incorrect header check",_.mode=30;break}if((15&G)!=8){q.msg="unknown compression method",_.mode=30;break}if(Y-=4,R=8+(15&(G>>>=4)),_.wbits===0)_.wbits=R;else if(R>_.wbits){q.msg="invalid window size",_.mode=30;break}_.dmax=1<<R,q.adler=_.check=1,_.mode=512&G?10:12,Y=G=0;break;case 2:for(;Y<16;){if(M===0)break e;M--,G+=k[F++]<<Y,Y+=8}if(_.flags=G,(255&_.flags)!=8){q.msg="unknown compression method",_.mode=30;break}if(57344&_.flags){q.msg="unknown header flags set",_.mode=30;break}_.head&&(_.head.text=G>>8&1),512&_.flags&&(ve[0]=255&G,ve[1]=G>>>8&255,_.check=i(_.check,ve,2,0)),Y=G=0,_.mode=3;case 3:for(;Y<32;){if(M===0)break e;M--,G+=k[F++]<<Y,Y+=8}_.head&&(_.head.time=G),512&_.flags&&(ve[0]=255&G,ve[1]=G>>>8&255,ve[2]=G>>>16&255,ve[3]=G>>>24&255,_.check=i(_.check,ve,4,0)),Y=G=0,_.mode=4;case 4:for(;Y<16;){if(M===0)break e;M--,G+=k[F++]<<Y,Y+=8}_.head&&(_.head.xflags=255&G,_.head.os=G>>8),512&_.flags&&(ve[0]=255&G,ve[1]=G>>>8&255,_.check=i(_.check,ve,2,0)),Y=G=0,_.mode=5;case 5:if(1024&_.flags){for(;Y<16;){if(M===0)break e;M--,G+=k[F++]<<Y,Y+=8}_.length=G,_.head&&(_.head.extra_len=G),512&_.flags&&(ve[0]=255&G,ve[1]=G>>>8&255,_.check=i(_.check,ve,2,0)),Y=G=0}else _.head&&(_.head.extra=null);_.mode=6;case 6:if(1024&_.flags&&(M<(Re=_.length)&&(Re=M),Re&&(_.head&&(R=_.head.extra_len-_.length,_.head.extra||(_.head.extra=new Array(_.head.extra_len)),s.arraySet(_.head.extra,k,F,Re,R)),512&_.flags&&(_.check=i(_.check,k,Re,F)),M-=Re,F+=Re,_.length-=Re),_.length))break e;_.length=0,_.mode=7;case 7:if(2048&_.flags){if(M===0)break e;for(Re=0;R=k[F+Re++],_.head&&R&&_.length<65536&&(_.head.name+=String.fromCharCode(R)),R&&Re<M;);if(512&_.flags&&(_.check=i(_.check,k,Re,F)),M-=Re,F+=Re,R)break e}else _.head&&(_.head.name=null);_.length=0,_.mode=8;case 8:if(4096&_.flags){if(M===0)break e;for(Re=0;R=k[F+Re++],_.head&&R&&_.length<65536&&(_.head.comment+=String.fromCharCode(R)),R&&Re<M;);if(512&_.flags&&(_.check=i(_.check,k,Re,F)),M-=Re,F+=Re,R)break e}else _.head&&(_.head.comment=null);_.mode=9;case 9:if(512&_.flags){for(;Y<16;){if(M===0)break e;M--,G+=k[F++]<<Y,Y+=8}if(G!==(65535&_.check)){q.msg="header crc mismatch",_.mode=30;break}Y=G=0}_.head&&(_.head.hcrc=_.flags>>9&1,_.head.done=!0),q.adler=_.check=0,_.mode=12;break;case 10:for(;Y<32;){if(M===0)break e;M--,G+=k[F++]<<Y,Y+=8}q.adler=_.check=w(G),Y=G=0,_.mode=11;case 11:if(_.havedict===0)return q.next_out=V,q.avail_out=K,q.next_in=F,q.avail_in=M,_.hold=G,_.bits=Y,2;q.adler=_.check=1,_.mode=12;case 12:if(Q===5||Q===6)break e;case 13:if(_.last){G>>>=7&Y,Y-=7&Y,_.mode=27;break}for(;Y<3;){if(M===0)break e;M--,G+=k[F++]<<Y,Y+=8}switch(_.last=1&G,Y-=1,3&(G>>>=1)){case 0:_.mode=14;break;case 1:if(ue(_),_.mode=20,Q!==6)break;G>>>=2,Y-=2;break e;case 2:_.mode=17;break;case 3:q.msg="invalid block type",_.mode=30}G>>>=2,Y-=2;break;case 14:for(G>>>=7&Y,Y-=7&Y;Y<32;){if(M===0)break e;M--,G+=k[F++]<<Y,Y+=8}if((65535&G)!=(G>>>16^65535)){q.msg="invalid stored block lengths",_.mode=30;break}if(_.length=65535&G,Y=G=0,_.mode=15,Q===6)break e;case 15:_.mode=16;case 16:if(Re=_.length){if(M<Re&&(Re=M),K<Re&&(Re=K),Re===0)break e;s.arraySet($,k,F,Re,V),M-=Re,F+=Re,K-=Re,V+=Re,_.length-=Re;break}_.mode=12;break;case 17:for(;Y<14;){if(M===0)break e;M--,G+=k[F++]<<Y,Y+=8}if(_.nlen=257+(31&G),G>>>=5,Y-=5,_.ndist=1+(31&G),G>>>=5,Y-=5,_.ncode=4+(15&G),G>>>=4,Y-=4,286<_.nlen||30<_.ndist){q.msg="too many length or distance symbols",_.mode=30;break}_.have=0,_.mode=18;case 18:for(;_.have<_.ncode;){for(;Y<3;){if(M===0)break e;M--,G+=k[F++]<<Y,Y+=8}_.lens[Te[_.have++]]=7&G,G>>>=3,Y-=3}for(;_.have<19;)_.lens[Te[_.have++]]=0;if(_.lencode=_.lendyn,_.lenbits=7,Ae={bits:_.lenbits},Se=f(0,_.lens,0,19,_.lencode,0,_.work,Ae),_.lenbits=Ae.bits,Se){q.msg="invalid code lengths set",_.mode=30;break}_.have=0,_.mode=19;case 19:for(;_.have<_.nlen+_.ndist;){for(;Je=(ne=_.lencode[G&(1<<_.lenbits)-1])>>>16&255,Xe=65535&ne,!((Ze=ne>>>24)<=Y);){if(M===0)break e;M--,G+=k[F++]<<Y,Y+=8}if(Xe<16)G>>>=Ze,Y-=Ze,_.lens[_.have++]=Xe;else{if(Xe===16){for(se=Ze+2;Y<se;){if(M===0)break e;M--,G+=k[F++]<<Y,Y+=8}if(G>>>=Ze,Y-=Ze,_.have===0){q.msg="invalid bit length repeat",_.mode=30;break}R=_.lens[_.have-1],Re=3+(3&G),G>>>=2,Y-=2}else if(Xe===17){for(se=Ze+3;Y<se;){if(M===0)break e;M--,G+=k[F++]<<Y,Y+=8}Y-=Ze,R=0,Re=3+(7&(G>>>=Ze)),G>>>=3,Y-=3}else{for(se=Ze+7;Y<se;){if(M===0)break e;M--,G+=k[F++]<<Y,Y+=8}Y-=Ze,R=0,Re=11+(127&(G>>>=Ze)),G>>>=7,Y-=7}if(_.have+Re>_.nlen+_.ndist){q.msg="invalid bit length repeat",_.mode=30;break}for(;Re--;)_.lens[_.have++]=R}}if(_.mode===30)break;if(_.lens[256]===0){q.msg="invalid code -- missing end-of-block",_.mode=30;break}if(_.lenbits=9,Ae={bits:_.lenbits},Se=f(a,_.lens,0,_.nlen,_.lencode,0,_.work,Ae),_.lenbits=Ae.bits,Se){q.msg="invalid literal/lengths set",_.mode=30;break}if(_.distbits=6,_.distcode=_.distdyn,Ae={bits:_.distbits},Se=f(y,_.lens,_.nlen,_.ndist,_.distcode,0,_.work,Ae),_.distbits=Ae.bits,Se){q.msg="invalid distances set",_.mode=30;break}if(_.mode=20,Q===6)break e;case 20:_.mode=21;case 21:if(6<=M&&258<=K){q.next_out=V,q.avail_out=K,q.next_in=F,q.avail_in=M,_.hold=G,_.bits=Y,g(q,Ee),V=q.next_out,$=q.output,K=q.avail_out,F=q.next_in,k=q.input,M=q.avail_in,G=_.hold,Y=_.bits,_.mode===12&&(_.back=-1);break}for(_.back=0;Je=(ne=_.lencode[G&(1<<_.lenbits)-1])>>>16&255,Xe=65535&ne,!((Ze=ne>>>24)<=Y);){if(M===0)break e;M--,G+=k[F++]<<Y,Y+=8}if(Je&&!(240&Je)){for(Qe=Ze,ht=Je,lt=Xe;Je=(ne=_.lencode[lt+((G&(1<<Qe+ht)-1)>>Qe)])>>>16&255,Xe=65535&ne,!(Qe+(Ze=ne>>>24)<=Y);){if(M===0)break e;M--,G+=k[F++]<<Y,Y+=8}G>>>=Qe,Y-=Qe,_.back+=Qe}if(G>>>=Ze,Y-=Ze,_.back+=Ze,_.length=Xe,Je===0){_.mode=26;break}if(32&Je){_.back=-1,_.mode=12;break}if(64&Je){q.msg="invalid literal/length code",_.mode=30;break}_.extra=15&Je,_.mode=22;case 22:if(_.extra){for(se=_.extra;Y<se;){if(M===0)break e;M--,G+=k[F++]<<Y,Y+=8}_.length+=G&(1<<_.extra)-1,G>>>=_.extra,Y-=_.extra,_.back+=_.extra}_.was=_.length,_.mode=23;case 23:for(;Je=(ne=_.distcode[G&(1<<_.distbits)-1])>>>16&255,Xe=65535&ne,!((Ze=ne>>>24)<=Y);){if(M===0)break e;M--,G+=k[F++]<<Y,Y+=8}if(!(240&Je)){for(Qe=Ze,ht=Je,lt=Xe;Je=(ne=_.distcode[lt+((G&(1<<Qe+ht)-1)>>Qe)])>>>16&255,Xe=65535&ne,!(Qe+(Ze=ne>>>24)<=Y);){if(M===0)break e;M--,G+=k[F++]<<Y,Y+=8}G>>>=Qe,Y-=Qe,_.back+=Qe}if(G>>>=Ze,Y-=Ze,_.back+=Ze,64&Je){q.msg="invalid distance code",_.mode=30;break}_.offset=Xe,_.extra=15&Je,_.mode=24;case 24:if(_.extra){for(se=_.extra;Y<se;){if(M===0)break e;M--,G+=k[F++]<<Y,Y+=8}_.offset+=G&(1<<_.extra)-1,G>>>=_.extra,Y-=_.extra,_.back+=_.extra}if(_.offset>_.dmax){q.msg="invalid distance too far back",_.mode=30;break}_.mode=25;case 25:if(K===0)break e;if(Re=Ee-K,_.offset>Re){if((Re=_.offset-Re)>_.whave&&_.sane){q.msg="invalid distance too far back",_.mode=30;break}ct=Re>_.wnext?(Re-=_.wnext,_.wsize-Re):_.wnext-Re,Re>_.length&&(Re=_.length),ft=_.window}else ft=$,ct=V-_.offset,Re=_.length;for(K<Re&&(Re=K),K-=Re,_.length-=Re;$[V++]=ft[ct++],--Re;);_.length===0&&(_.mode=21);break;case 26:if(K===0)break e;$[V++]=_.length,K--,_.mode=21;break;case 27:if(_.wrap){for(;Y<32;){if(M===0)break e;M--,G|=k[F++]<<Y,Y+=8}if(Ee-=K,q.total_out+=Ee,_.total+=Ee,Ee&&(q.adler=_.check=_.flags?i(_.check,$,Ee,V-Ee):c(_.check,$,Ee,V-Ee)),Ee=K,(_.flags?G:w(G))!==_.check){q.msg="incorrect data check",_.mode=30;break}Y=G=0}_.mode=28;case 28:if(_.wrap&&_.flags){for(;Y<32;){if(M===0)break e;M--,G+=k[F++]<<Y,Y+=8}if(G!==(4294967295&_.total)){q.msg="incorrect length check",_.mode=30;break}Y=G=0}_.mode=29;case 29:Se=1;break e;case 30:Se=-3;break e;case 31:return-4;case 32:default:return v}return q.next_out=V,q.avail_out=K,q.next_in=F,q.avail_in=M,_.hold=G,_.bits=Y,(_.wsize||Ee!==q.avail_out&&_.mode<30&&(_.mode<27||Q!==4))&&fe(q,q.output,q.next_out,Ee-q.avail_out)?(_.mode=31,-4):(ye-=q.avail_in,Ee-=q.avail_out,q.total_in+=ye,q.total_out+=Ee,_.total+=Ee,_.wrap&&Ee&&(q.adler=_.check=_.flags?i(_.check,$,Ee,q.next_out-Ee):c(_.check,$,Ee,q.next_out-Ee)),q.data_type=_.bits+(_.last?64:0)+(_.mode===12?128:0)+(_.mode===20||_.mode===15?256:0),(ye==0&&Ee===0||Q===4)&&Se===l&&(Se=-5),Se)},o.inflateEnd=function(q){if(!q||!q.state)return v;var Q=q.state;return Q.window&&(Q.window=null),q.state=null,l},o.inflateGetHeader=function(q,Q){var _;return q&&q.state&&2&(_=q.state).wrap?((_.head=Q).done=!1,l):v},o.inflateSetDictionary=function(q,Q){var _,k=Q.length;return q&&q.state?(_=q.state).wrap!==0&&_.mode!==11?v:_.mode===11&&c(1,Q,k,0)!==_.check?-3:fe(q,Q,k,k)?(_.mode=31,-4):(_.havedict=1,l):v},o.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(r,n,o){var s=r("../utils/common"),c=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],g=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(a,y,l,v,A,d,T,w){var S,O,N,P,H,j,Z,U,ue,fe=w.bits,q=0,Q=0,_=0,k=0,$=0,F=0,V=0,M=0,K=0,G=0,Y=null,ye=0,Ee=new s.Buf16(16),Re=new s.Buf16(16),ct=null,ft=0;for(q=0;q<=15;q++)Ee[q]=0;for(Q=0;Q<v;Q++)Ee[y[l+Q]]++;for($=fe,k=15;1<=k&&Ee[k]===0;k--);if(k<$&&($=k),k===0)return A[d++]=20971520,A[d++]=20971520,w.bits=1,0;for(_=1;_<k&&Ee[_]===0;_++);for($<_&&($=_),q=M=1;q<=15;q++)if(M<<=1,(M-=Ee[q])<0)return-1;if(0<M&&(a===0||k!==1))return-1;for(Re[1]=0,q=1;q<15;q++)Re[q+1]=Re[q]+Ee[q];for(Q=0;Q<v;Q++)y[l+Q]!==0&&(T[Re[y[l+Q]]++]=Q);if(j=a===0?(Y=ct=T,19):a===1?(Y=c,ye-=257,ct=i,ft-=257,256):(Y=g,ct=f,-1),q=_,H=d,V=Q=G=0,N=-1,P=(K=1<<(F=$))-1,a===1&&852<K||a===2&&592<K)return 1;for(;;){for(Z=q-V,ue=T[Q]<j?(U=0,T[Q]):T[Q]>j?(U=ct[ft+T[Q]],Y[ye+T[Q]]):(U=96,0),S=1<<q-V,_=O=1<<F;A[H+(G>>V)+(O-=S)]=Z<<24|U<<16|ue|0,O!==0;);for(S=1<<q-1;G&S;)S>>=1;if(S!==0?(G&=S-1,G+=S):G=0,Q++,--Ee[q]==0){if(q===k)break;q=y[l+T[Q]]}if($<q&&(G&P)!==N){for(V===0&&(V=$),H+=_,M=1<<(F=q-V);F+V<k&&!((M-=Ee[F+V])<=0);)F++,M<<=1;if(K+=1<<F,a===1&&852<K||a===2&&592<K)return 1;A[N=G&P]=$<<24|F<<16|H-d|0}}return G!==0&&(A[H+G]=q-V<<24|64<<16|0),w.bits=$,0}},{"../utils/common":41}],51:[function(r,n,o){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(r,n,o){var s=r("../utils/common"),c=0,i=1;function g(ne){for(var ve=ne.length;0<=--ve;)ne[ve]=0}var f=0,a=29,y=256,l=y+1+a,v=30,A=19,d=2*l+1,T=15,w=16,S=7,O=256,N=16,P=17,H=18,j=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Z=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],U=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ue=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],fe=new Array(2*(l+2));g(fe);var q=new Array(2*v);g(q);var Q=new Array(512);g(Q);var _=new Array(256);g(_);var k=new Array(a);g(k);var $,F,V,M=new Array(v);function K(ne,ve,Te,Pe,xe){this.static_tree=ne,this.extra_bits=ve,this.extra_base=Te,this.elems=Pe,this.max_length=xe,this.has_stree=ne&&ne.length}function G(ne,ve){this.dyn_tree=ne,this.max_code=0,this.stat_desc=ve}function Y(ne){return ne<256?Q[ne]:Q[256+(ne>>>7)]}function ye(ne,ve){ne.pending_buf[ne.pending++]=255&ve,ne.pending_buf[ne.pending++]=ve>>>8&255}function Ee(ne,ve,Te){ne.bi_valid>w-Te?(ne.bi_buf|=ve<<ne.bi_valid&65535,ye(ne,ne.bi_buf),ne.bi_buf=ve>>w-ne.bi_valid,ne.bi_valid+=Te-w):(ne.bi_buf|=ve<<ne.bi_valid&65535,ne.bi_valid+=Te)}function Re(ne,ve,Te){Ee(ne,Te[2*ve],Te[2*ve+1])}function ct(ne,ve){for(var Te=0;Te|=1&ne,ne>>>=1,Te<<=1,0<--ve;);return Te>>>1}function ft(ne,ve,Te){var Pe,xe,Fe=new Array(T+1),Ve=0;for(Pe=1;Pe<=T;Pe++)Fe[Pe]=Ve=Ve+Te[Pe-1]<<1;for(xe=0;xe<=ve;xe++){var m=ne[2*xe+1];m!==0&&(ne[2*xe]=ct(Fe[m]++,m))}}function Ze(ne){var ve;for(ve=0;ve<l;ve++)ne.dyn_ltree[2*ve]=0;for(ve=0;ve<v;ve++)ne.dyn_dtree[2*ve]=0;for(ve=0;ve<A;ve++)ne.bl_tree[2*ve]=0;ne.dyn_ltree[2*O]=1,ne.opt_len=ne.static_len=0,ne.last_lit=ne.matches=0}function Je(ne){8<ne.bi_valid?ye(ne,ne.bi_buf):0<ne.bi_valid&&(ne.pending_buf[ne.pending++]=ne.bi_buf),ne.bi_buf=0,ne.bi_valid=0}function Xe(ne,ve,Te,Pe){var xe=2*ve,Fe=2*Te;return ne[xe]<ne[Fe]||ne[xe]===ne[Fe]&&Pe[ve]<=Pe[Te]}function Qe(ne,ve,Te){for(var Pe=ne.heap[Te],xe=Te<<1;xe<=ne.heap_len&&(xe<ne.heap_len&&Xe(ve,ne.heap[xe+1],ne.heap[xe],ne.depth)&&xe++,!Xe(ve,Pe,ne.heap[xe],ne.depth));)ne.heap[Te]=ne.heap[xe],Te=xe,xe<<=1;ne.heap[Te]=Pe}function ht(ne,ve,Te){var Pe,xe,Fe,Ve,m=0;if(ne.last_lit!==0)for(;Pe=ne.pending_buf[ne.d_buf+2*m]<<8|ne.pending_buf[ne.d_buf+2*m+1],xe=ne.pending_buf[ne.l_buf+m],m++,Pe===0?Re(ne,xe,ve):(Re(ne,(Fe=_[xe])+y+1,ve),(Ve=j[Fe])!==0&&Ee(ne,xe-=k[Fe],Ve),Re(ne,Fe=Y(--Pe),Te),(Ve=Z[Fe])!==0&&Ee(ne,Pe-=M[Fe],Ve)),m<ne.last_lit;);Re(ne,O,ve)}function lt(ne,ve){var Te,Pe,xe,Fe=ve.dyn_tree,Ve=ve.stat_desc.static_tree,m=ve.stat_desc.has_stree,I=ve.stat_desc.elems,h=-1;for(ne.heap_len=0,ne.heap_max=d,Te=0;Te<I;Te++)Fe[2*Te]!==0?(ne.heap[++ne.heap_len]=h=Te,ne.depth[Te]=0):Fe[2*Te+1]=0;for(;ne.heap_len<2;)Fe[2*(xe=ne.heap[++ne.heap_len]=h<2?++h:0)]=1,ne.depth[xe]=0,ne.opt_len--,m&&(ne.static_len-=Ve[2*xe+1]);for(ve.max_code=h,Te=ne.heap_len>>1;1<=Te;Te--)Qe(ne,Fe,Te);for(xe=I;Te=ne.heap[1],ne.heap[1]=ne.heap[ne.heap_len--],Qe(ne,Fe,1),Pe=ne.heap[1],ne.heap[--ne.heap_max]=Te,ne.heap[--ne.heap_max]=Pe,Fe[2*xe]=Fe[2*Te]+Fe[2*Pe],ne.depth[xe]=(ne.depth[Te]>=ne.depth[Pe]?ne.depth[Te]:ne.depth[Pe])+1,Fe[2*Te+1]=Fe[2*Pe+1]=xe,ne.heap[1]=xe++,Qe(ne,Fe,1),2<=ne.heap_len;);ne.heap[--ne.heap_max]=ne.heap[1],function(u,p){var L,J,ge,we,We,et,rt=p.dyn_tree,xt=p.max_code,mt=p.stat_desc.static_tree,Yr=p.stat_desc.has_stree,fn=p.stat_desc.extra_bits,hn=p.stat_desc.extra_base,Ur=p.stat_desc.max_length,Ir=0;for(we=0;we<=T;we++)u.bl_count[we]=0;for(rt[2*u.heap[u.heap_max]+1]=0,L=u.heap_max+1;L<d;L++)Ur<(we=rt[2*rt[2*(J=u.heap[L])+1]+1]+1)&&(we=Ur,Ir++),rt[2*J+1]=we,xt<J||(u.bl_count[we]++,We=0,hn<=J&&(We=fn[J-hn]),et=rt[2*J],u.opt_len+=et*(we+We),Yr&&(u.static_len+=et*(mt[2*J+1]+We)));if(Ir!==0){do{for(we=Ur-1;u.bl_count[we]===0;)we--;u.bl_count[we]--,u.bl_count[we+1]+=2,u.bl_count[Ur]--,Ir-=2}while(0<Ir);for(we=Ur;we!==0;we--)for(J=u.bl_count[we];J!==0;)xt<(ge=u.heap[--L])||(rt[2*ge+1]!==we&&(u.opt_len+=(we-rt[2*ge+1])*rt[2*ge],rt[2*ge+1]=we),J--)}}(ne,ve),ft(Fe,h,ne.bl_count)}function R(ne,ve,Te){var Pe,xe,Fe=-1,Ve=ve[1],m=0,I=7,h=4;for(Ve===0&&(I=138,h=3),ve[2*(Te+1)+1]=65535,Pe=0;Pe<=Te;Pe++)xe=Ve,Ve=ve[2*(Pe+1)+1],++m<I&&xe===Ve||(m<h?ne.bl_tree[2*xe]+=m:xe!==0?(xe!==Fe&&ne.bl_tree[2*xe]++,ne.bl_tree[2*N]++):m<=10?ne.bl_tree[2*P]++:ne.bl_tree[2*H]++,Fe=xe,h=(m=0)===Ve?(I=138,3):xe===Ve?(I=6,3):(I=7,4))}function Se(ne,ve,Te){var Pe,xe,Fe=-1,Ve=ve[1],m=0,I=7,h=4;for(Ve===0&&(I=138,h=3),Pe=0;Pe<=Te;Pe++)if(xe=Ve,Ve=ve[2*(Pe+1)+1],!(++m<I&&xe===Ve)){if(m<h)for(;Re(ne,xe,ne.bl_tree),--m!=0;);else xe!==0?(xe!==Fe&&(Re(ne,xe,ne.bl_tree),m--),Re(ne,N,ne.bl_tree),Ee(ne,m-3,2)):m<=10?(Re(ne,P,ne.bl_tree),Ee(ne,m-3,3)):(Re(ne,H,ne.bl_tree),Ee(ne,m-11,7));Fe=xe,h=(m=0)===Ve?(I=138,3):xe===Ve?(I=6,3):(I=7,4)}}g(M);var Ae=!1;function se(ne,ve,Te,Pe){Ee(ne,(f<<1)+(Pe?1:0),3),function(xe,Fe,Ve,m){Je(xe),ye(xe,Ve),ye(xe,~Ve),s.arraySet(xe.pending_buf,xe.window,Fe,Ve,xe.pending),xe.pending+=Ve}(ne,ve,Te)}o._tr_init=function(ne){Ae||(function(){var ve,Te,Pe,xe,Fe,Ve=new Array(T+1);for(xe=Pe=0;xe<a-1;xe++)for(k[xe]=Pe,ve=0;ve<1<<j[xe];ve++)_[Pe++]=xe;for(_[Pe-1]=xe,xe=Fe=0;xe<16;xe++)for(M[xe]=Fe,ve=0;ve<1<<Z[xe];ve++)Q[Fe++]=xe;for(Fe>>=7;xe<v;xe++)for(M[xe]=Fe<<7,ve=0;ve<1<<Z[xe]-7;ve++)Q[256+Fe++]=xe;for(Te=0;Te<=T;Te++)Ve[Te]=0;for(ve=0;ve<=143;)fe[2*ve+1]=8,ve++,Ve[8]++;for(;ve<=255;)fe[2*ve+1]=9,ve++,Ve[9]++;for(;ve<=279;)fe[2*ve+1]=7,ve++,Ve[7]++;for(;ve<=287;)fe[2*ve+1]=8,ve++,Ve[8]++;for(ft(fe,l+1,Ve),ve=0;ve<v;ve++)q[2*ve+1]=5,q[2*ve]=ct(ve,5);$=new K(fe,j,y+1,l,T),F=new K(q,Z,0,v,T),V=new K(new Array(0),U,0,A,S)}(),Ae=!0),ne.l_desc=new G(ne.dyn_ltree,$),ne.d_desc=new G(ne.dyn_dtree,F),ne.bl_desc=new G(ne.bl_tree,V),ne.bi_buf=0,ne.bi_valid=0,Ze(ne)},o._tr_stored_block=se,o._tr_flush_block=function(ne,ve,Te,Pe){var xe,Fe,Ve=0;0<ne.level?(ne.strm.data_type===2&&(ne.strm.data_type=function(m){var I,h=4093624447;for(I=0;I<=31;I++,h>>>=1)if(1&h&&m.dyn_ltree[2*I]!==0)return c;if(m.dyn_ltree[18]!==0||m.dyn_ltree[20]!==0||m.dyn_ltree[26]!==0)return i;for(I=32;I<y;I++)if(m.dyn_ltree[2*I]!==0)return i;return c}(ne)),lt(ne,ne.l_desc),lt(ne,ne.d_desc),Ve=function(m){var I;for(R(m,m.dyn_ltree,m.l_desc.max_code),R(m,m.dyn_dtree,m.d_desc.max_code),lt(m,m.bl_desc),I=A-1;3<=I&&m.bl_tree[2*ue[I]+1]===0;I--);return m.opt_len+=3*(I+1)+5+5+4,I}(ne),xe=ne.opt_len+3+7>>>3,(Fe=ne.static_len+3+7>>>3)<=xe&&(xe=Fe)):xe=Fe=Te+5,Te+4<=xe&&ve!==-1?se(ne,ve,Te,Pe):ne.strategy===4||Fe===xe?(Ee(ne,2+(Pe?1:0),3),ht(ne,fe,q)):(Ee(ne,4+(Pe?1:0),3),function(m,I,h,u){var p;for(Ee(m,I-257,5),Ee(m,h-1,5),Ee(m,u-4,4),p=0;p<u;p++)Ee(m,m.bl_tree[2*ue[p]+1],3);Se(m,m.dyn_ltree,I-1),Se(m,m.dyn_dtree,h-1)}(ne,ne.l_desc.max_code+1,ne.d_desc.max_code+1,Ve+1),ht(ne,ne.dyn_ltree,ne.dyn_dtree)),Ze(ne),Pe&&Je(ne)},o._tr_tally=function(ne,ve,Te){return ne.pending_buf[ne.d_buf+2*ne.last_lit]=ve>>>8&255,ne.pending_buf[ne.d_buf+2*ne.last_lit+1]=255&ve,ne.pending_buf[ne.l_buf+ne.last_lit]=255&Te,ne.last_lit++,ve===0?ne.dyn_ltree[2*Te]++:(ne.matches++,ve--,ne.dyn_ltree[2*(_[Te]+y+1)]++,ne.dyn_dtree[2*Y(ve)]++),ne.last_lit===ne.lit_bufsize-1},o._tr_align=function(ne){Ee(ne,2,3),Re(ne,O,fe),function(ve){ve.bi_valid===16?(ye(ve,ve.bi_buf),ve.bi_buf=0,ve.bi_valid=0):8<=ve.bi_valid&&(ve.pending_buf[ve.pending++]=255&ve.bi_buf,ve.bi_buf>>=8,ve.bi_valid-=8)}(ne)}},{"../utils/common":41}],53:[function(r,n,o){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(r,n,o){(function(s){(function(c,i){if(!c.setImmediate){var g,f,a,y,l=1,v={},A=!1,d=c.document,T=Object.getPrototypeOf&&Object.getPrototypeOf(c);T=T&&T.setTimeout?T:c,g={}.toString.call(c.process)==="[object process]"?function(N){process.nextTick(function(){S(N)})}:function(){if(c.postMessage&&!c.importScripts){var N=!0,P=c.onmessage;return c.onmessage=function(){N=!1},c.postMessage("","*"),c.onmessage=P,N}}()?(y="setImmediate$"+Math.random()+"$",c.addEventListener?c.addEventListener("message",O,!1):c.attachEvent("onmessage",O),function(N){c.postMessage(y+N,"*")}):c.MessageChannel?((a=new MessageChannel).port1.onmessage=function(N){S(N.data)},function(N){a.port2.postMessage(N)}):d&&"onreadystatechange"in d.createElement("script")?(f=d.documentElement,function(N){var P=d.createElement("script");P.onreadystatechange=function(){S(N),P.onreadystatechange=null,f.removeChild(P),P=null},f.appendChild(P)}):function(N){setTimeout(S,0,N)},T.setImmediate=function(N){typeof N!="function"&&(N=new Function(""+N));for(var P=new Array(arguments.length-1),H=0;H<P.length;H++)P[H]=arguments[H+1];var j={callback:N,args:P};return v[l]=j,g(l),l++},T.clearImmediate=w}function w(N){delete v[N]}function S(N){if(A)setTimeout(S,0,N);else{var P=v[N];if(P){A=!0;try{(function(H){var j=H.callback,Z=H.args;switch(Z.length){case 0:j();break;case 1:j(Z[0]);break;case 2:j(Z[0],Z[1]);break;case 3:j(Z[0],Z[1],Z[2]);break;default:j.apply(i,Z)}})(P)}finally{w(N),A=!1}}}}function O(N){N.source===c&&typeof N.data=="string"&&N.data.indexOf(y)===0&&S(+N.data.slice(y.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof qr<"u"?qr:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Rh);var Tb=Rh.exports;const Oh=gs(Tb);function Gc(e,t){const r=new Oh,n=t&&r.folder(t)||r;return e.forEach(o=>{try{const s=t?`${t}/${o.nameWithExt}`:o.nameWithExt;if(!o.isDirectory&&!o.base64Content&&!o.textContent){n.file(s,"");return}o.isDirectory?n.folder(s):n.file(s,o.base64Content||btoa(o.textContent),{base64:!0})}catch(s){console.error(`Failed to add file ${o.nameWithExt} to zip archive`,s)}}),r.generateAsync({type:"blob"})}async function Nh(e,t,r){const n=await Gc(t,r);Ib.saveAs(n,`${e}.zip`)}async function Rb(e){const r=await new Oh().loadAsync(e),n=[];for(const o in r.files){const s=r.files[o];n.push({nameWithExt:s.name.replace(`${e.name.replace(".zip","")}/`,""),base64Content:await s.async("base64"),isDirectory:s.dir})}return n}const Lh=e=>!e.meta.initialChange&&"context"in e,Ob=e=>{const[t,r]=e;return Ph(t,r)},Ph=(e,t)=>e.meta.doc&&t.meta.doc?!e.meta.doc.eq(t.meta.doc):e.value!==t.value,Qa="sketch.json",Nb=[Qa,zc];function Bh(e){return Nb.some(t=>e.path.includes(t))}function ln(e){const t=e.indexOf(":")+1;let r=e.indexOf("/sketches_v2");return r===-1&&(r=e.indexOf("/libraries_v2")),e.substring(t,r)}const Lb="cannot access resources from a private space";function Pb(e,t){var o,s;const r=e.cause,n=((s=(o=r.message)==null?void 0:o.detail)==null?void 0:s.toLowerCase())===Lb;return t?r.status===401&&(t(r)||n):r.status===401&&n}const os="EditorBeta_Sketch",Bb="me",Fb="LyoNDSovDQ12b2lkIHNldHVwKCkgew0gICAgDX0NDXZvaWQgbG9vcCgpIHsNICAgIA19DQ==";let Yn={};function jb(){Yn={}}function Db(e,t){return{...e,...t}}function Vc(e){Yn=Db(Yn,e)}const Mb=new Map;function Ub(e){const t=new Map(e);return Vc({codeSubjects:t}),t}function $b(){const e=new un().pipe(xc((t,[r,n])=>n?e1(t,r):t1(t,r),new Set),Jn(1));return Vc({unsavedFiles$:e}),e}function zb(){const e=new un().pipe(Qo(()=>{t.unsubscribe()}),Jn(1)),t=e.subscribe(({fileId:r,value:n,initialContext:o,isLibrary:s})=>{const c=Sr(r).getValue(),i=s?`${n}
`+c.value:n,g=Sr(r).getValue();qc(r,i,Lh(g)?g.context.saveCode:o.saveCode,void 0,!0)});return Vc({codeSubjectInjections$:e}),e}function Rn(e=Mb){let{codeSubjects:t}=Yn;return t||(t=Ub(e),t)}function Sr(e){const t=Rn(),r=typeof e=="string"?t.get(e):Ga;if(r===void 0)throw new Error(`Code subject with id ${e} not found`);return r}const Fh=1e3;function Is(){let{unsavedFiles$:e}=Yn;return e||(e=$b(),e)}function jh(e,t){Is().next([e,t])}function Gb(){let{codeSubjectInjections$:e}=Yn;return e||(e=zb(),e)}function gC(e,t,r,n){return Sr(e).getValue().value.indexOf(t)!==-1?!1:(Gb().next({fileId:e,value:t,initialContext:r,isLibrary:n}),!0)}function Gl(e){return function(t){return t.pipe(kn(Lh),Fm(()=>Mm(e)))}}function Vb(e,t=Fh){const r=e.path,n=e.scopedContent||e.content,o={fileId:r,meta:{initialChange:!0,instanceId:Dr.uniqueId(),ext:e.extension,hash:e.hash},value:n},s=new In(o),c=s.pipe(Gl(t),Im(o),Tm(),kn(Ob),Xi(([,y])=>y),Qo(()=>{g.unsubscribe()})),i=Is(),g=c.subscribe(async({context:y,value:l,meta:v})=>{i.next([r,!0]);try{const A=await y.saveCode(r,l,v.hash);if(A&&"isUnsaved"in A&&(A!=null&&A.isUnsaved))return;i.next([r,!1]),A&&"newHash"in A&&qc(r,l,y.saveCode,void 0,!1,A==null?void 0:A.newHash)}catch(A){console.error(A)}}),a=s.pipe(Gl(t),xc((y,l)=>({isSameCode:!Ph(y,l),value:l.value,meta:{doc:l.meta.doc}}),{isSameCode:!1,value:n,meta:{}}),kn(({isSameCode:y})=>y),Qo(()=>{a.unsubscribe()})).subscribe(()=>{i.next([r,!1])});return s}function Dh(e,t=Fh){const r=Rn(),n=Vb(e,t);r.set(e.path,n)}function qb(e){Rn().forEach(r=>{const n=r.getValue().fileId;new RegExp(`^${e}/`).test(n)&&Ts(n)})}function Ts(e){Sr(e).complete(),Rn().delete(e)}function qc(e,t,r,n,o=!1,s){const c=Sr(e);Is().next([e,!0]);const g=o?Dr.uniqueId():c.getValue().meta.instanceId,f=c.getValue().meta.ext,a=s||c.getValue().meta.hash;c.next({fileId:e,value:t,meta:{initialChange:!1,instanceId:g,doc:n,ext:f,hash:a},context:{saveCode:r}})}function vC(e,t,r,n){qc(e,t,r,void 0,!1,n),jh(e,!1)}async function yC(){const e=await bt();if(!e)return wt();try{const t=await Um(e);return(t==null?void 0:t.status)==200}catch{return!1}}async function Hc(e=os,t=Fb,r=Bb,n=[]){const o=await bt();if(!o)return wt();const s=nr(),c=await Sm({user_id:r,path:e,ino:t},o,s);return n.length>0&&await Promise.all(n.map(i=>(()=>{const g=Er(i.content,i.mimetype);return wc({path:`${c.path}/${i.fullName}`},{data:g},o,s)})())),{owner:ln(c.path),...c}}async function Hb(e){const t=await bt();if(!t)return wt();const r=nr(),{id:n,secrets:o}=e,s=await ys({id:n},{secrets:{data:o}},t,r);return{owner:ln(s.path),...s}}async function Wb(e){const t=await bt();if(!t)return wt();const r=nr(),{id:n,...o}=e,s=await ys({id:n},o,t,r);return{owner:ln(s.path),...s}}async function Zb(e){const t=await bt();if(!t)return wt();const r=nr(),{id:n,...o}=e,s=await ys({id:n},o,t,r);return{owner:ln(s.path),...s}}async function Kb(e){const t=await bt();if(!t)return wt();const r=nr(),{id:n,...o}=e,s=await ys({id:n},o,t,r);return{owner:ln(s.path),...s}}async function Yb(e){const t=await bt();if(!t)return wt();const r=nr(),o=await Rm({id:e},t===ei?void 0:t,r);return o?{owner:ln(o.path),...o}:null}async function Xb(e){const t=await bt();if(!t)return wt();const r=nr();await jm({id:e},t,r)}async function Qb(e){const t=await bt();if(!t)return wt();const r=nr();return(await Om({user_id:"me",name_like:e},t,r)).map(s=>({owner:ln(s.path),...s}))}async function Wc(e,t,r,n,o){const s=await bt(void 0,o);if(!s)return wt();const c=r?void 0:nr(),{data:i,mimetype:g,revision:f,href:a}=await Nm(e,s===ei?void 0:s,c);if(typeof i>"u")return Promise.reject(new Error("No data to decode in retrieved file"));const y=e.substring(e.lastIndexOf(".")+1),l=Dc(i,g),v=n&&l.split(`
`).slice(n.start,n.end+1).join(`
`);return{name:bc(t),fullName:t,extension:y,data:i,content:l,scopedContent:v,mimetype:g,path:e,hash:f==null?void 0:f.hash,href:a}}async function Zc(e,t,r){const n=await bt(void 0,r);if(!n)return wt();const o=t?void 0:nr();return Cm(e,n===ei?void 0:n,o)}async function Jb(e,t,r){const n=await bt();if(!n)return wt();const o=nr(),s=Er(t);return await wc(e,{data:s,hash:r},n,o)}async function ew(e,t,r=""){const n=await bt();if(!n)return wt();const o=nr(),s=Lm.includes(`.${t}`)?r:Er(r);return wc(e,{data:s},n,o)}class tw extends Error{constructor(t){super(t),this.name="SketchNameConflict"}}async function Mh(e,t){const r=await bt();if(!r)return wt();const n=nr();try{await Pm({from:e,to:t},r,n)}catch(o){throw o.status===409?new tw("Sketch name already exists"):o}}async function rw(e){const t=await bt();if(!t)return wt();const r=nr();return await Bm(e,t,r)}async function Uh(){const e=await bt(void 0,!0);return e?(await km(e)).map(r=>({...r,owner:r.path&&ln(r.path)})):wt()}async function nw(e){const t=await bt(void 0,!0);return t?Am(e,t):wt()}async function iw(e,t){const r=await bt(void 0,!0);if(!r)return wt();const n=t.map(o=>{if(o.fullName==="library.properties"){const s=z1.parse(o.content);s.name=e;let c="";for(const i in s)c+=`${i}=${s[i]}
`;return{nameWithExt:o.fullName,textContent:c}}return{nameWithExt:o.fullName,textContent:o.content}});try{const o=await Gc(n),{response:s}=await Ff(o,r);if(!s)throw new Error("Create API returned no information about the newly created library");return s}catch(o){return console.error(o),Promise.reject(new Error("Error creating new custom library"))}}async function ow(e){const t=await bt(void 0,!0);if(!t)return wt();await Dm({id:e},t)}class Vl extends Error{constructor(t){super(t),this.name="MalformedLibrary"}}async function sw(e){const t=await bt(void 0,!0);if(!t)return wt();const r=await Rb(e),n=r.find(f=>f.nameWithExt.match(/^\/?library.properties/))||r.filter(f=>f.nameWithExt.match(/^\/?[A-Za-z0-9][A-Za-z0-9_.-]*\/$/)).map(f=>r.find(a=>a.nameWithExt.startsWith(`${f.nameWithExt}library.properties`))).find(f=>f);if(!n||!n.base64Content&&!n.textContent)throw new Vl("library does not contain a library.properties file");const o=n.nameWithExt.replace(/\/?library.properties$/,"");let s=r.filter(f=>f.nameWithExt.startsWith(o)&&!f.nameWithExt.match(/^\/?(__MACOSX\/|\.DS_Store|\.git)/));o!=="/"&&(s.forEach(f=>{f.nameWithExt=f.nameWithExt.replace(o,"")}),s=s.filter(f=>f.nameWithExt!=="/"));const c=await Gc(s),{error:i,response:g}=await Ff(c,t);if(i)throw new Vl(i);if(!g)throw new Error("Create API returned no information about the newly created library");return g}async function bC(e,t,r,n){const o=await Wc(`${t}/${Qa}`,Qa,!1),s=JSON.parse(o.content).secrets,c=s.length?mh(s.map(({name:a})=>({name:a,value:""}))):void 0;let i=Sr(r.path).value.value,g=Er(i,r.mimetype);c&&(g=gh({...r,data:g},i,r.mimetype).data,i=void 0);const f=n.map(a=>{const y=Sr(a.path).value.value,l=Er(y,a.mimetype);return{nameWithExt:a.fullName,base64Content:l,textContent:y}});c&&f.push({nameWithExt:c.name,base64Content:c.data}),f.push({nameWithExt:o.fullName,base64Content:Er(o.content,o.mimetype)}),f.push({nameWithExt:r.fullName,base64Content:g,textContent:i}),await Nh(e,f)}var Rs=(e=>(e.HTTP="http",e.HTTPS="https",e))(Rs||{});async function wC(e,t,r,n=zm,o=Os()){return $m(St,e,t,r,o,n)}function Os(){let{stateChangeSubject$:e}=St;return e||(e=jf(At),e)}var ot=(e=>(e.Config="config",e.SocketConnected="socketConnected",e.DownloadQuota="downloadQuota",e.Ports="ports",e.NetworkPorts="networkPorts",e.AgentInfo="agentInfo",e.Socket="socket",e.UploadStatus="uploadStatus",e.SerialMonitors="serialMonitors",e.PortsListQuota="portsListQuota",e.UploadQuota="uploadQuota",e))(ot||{});const $h={[ot.Config]:{protocolToUse:Rs.HTTP,useV2:!1},[ot.SocketConnected]:!1,[ot.DownloadQuota]:[],[ot.NetworkPorts]:[],[ot.Ports]:[],[ot.SerialMonitors]:[],[ot.PortsListQuota]:[],[ot.UploadQuota]:[],searchedForDaemon:!1,socketEventsAreSet:!1};let St={...$h};function aw(){St={...$h}}function At(e,t=!1){St=Df(St,e);const r=Os();t||Mf(St,r)}function xC(){const{[ot.Socket]:e,[ot.SocketConnected]:t,[ot.PortsListQuota]:r,[ot.UploadQuota]:n,socketEventsAreSet:o,uploadConcatResponseStream$:s,uploadResponseStream$:c,serialMonitorsMsgStream$:i,serialMonitorsDisconnections$:g,stateChangeSubject$:f,...a}=St;return{...a,[ot.SocketConnected]:null,[ot.PortsListQuota]:[],[ot.UploadQuota]:[],socketEventsAreSet:!1}}var Zo=(e=>(e.Latest="latest",e))(Zo||{}),Ni=(e=>(e.Arduino="arduino",e))(Ni||{});const _C=e=>!!(e.http&&e.ws),EC=e=>!!(e.https&&e.wss),SC=e=>!!e.os,cw="127.0.0.1",uw="localhost",lw=`${Rs.HTTP}://${cw}`,fw=`${Rs.HTTPS}://${uw}`,CC="bin",hw=Number(at.AGENT_LAST_POSSIBLE_PORT),ql=Number(at.AGENT_FIRST_POSSIBLE_PORT),kC=3e4,zh=new Gm;var yf;const dw=((yf=zh.getOS().name)==null?void 0:yf.indexOf("Windows"))!==-1,Pa=zh.getBrowser(),AC=(()=>{const e=dw?[{toolName:"windows-drivers",toolVersion:Zo.Latest,packageName:Ni.Arduino}]:[];return e.push({toolName:"bossac",toolVersion:"1.7.0",packageName:Ni.Arduino},{toolName:"fwupdater",toolVersion:Zo.Latest,packageName:Ni.Arduino},{toolName:"rp2040tools",toolVersion:Zo.Latest,packageName:Ni.Arduino}),e})();function pw(e,t,r){return async()=>{const n=await Vm(`${e}:${t}`,r);return n||Promise.reject()}}const mw=Array.from(Array(hw-ql+1),(e,t)=>{var o,s,c;const r=ql+t,n=(o=Pa.name)!=null&&o.includes("Chrome")||(s=Pa.name)!=null&&s.includes("Firefox")||(c=Pa.name)!=null&&c.includes("Edge")?lw:fw;return pw(n,r,at.AGENT_INFO_ENDPOINT)});function IC(){return mw.map(e=>e())}var xn=(e=>(e.Sent="sent",e.Pending="pending",e.Success="success",e.Error="error",e))(xn||{}),Ja=(e=>(e.Success="Success",e.Pending="Pending",e))(Ja||{});function TC(e){return!!(e.name&&e.version&&e.packager)}var Ft=(e=>(e[e.ListCommandPortsResponse=0]="ListCommandPortsResponse",e[e.ListCommandNetworkPortsResponse=1]="ListCommandNetworkPortsResponse",e[e.SerialMonitorStatusUpdate=2]="SerialMonitorStatusUpdate",e[e.SerialMonitorMessage=3]="SerialMonitorMessage",e[e.DownloadStatusResponse=4]="DownloadStatusResponse",e[e.Upload=5]="Upload",e[e.Unknown=6]="Unknown",e))(Ft||{});function RC(e){return{endpointUrl:e.url,status:e.status,http:e.http,https:e.https,ws:e.ws,wss:e.wss,updateUrl:e.update_url,version:e.version,os:e.os}}function Hl(e){const{Ports:t,Network:r}=e;return{ports:t.map(n=>({baud:n.Baud,bufferAlgorithm:n.BufferAlgorithm,deviceClass:n.DeviceClass,isOpen:n.IsOpen,isPrimary:n.IsPrimary,portName:n.Name,networkPort:n.NetworkPort,productId:n.ProductID,serialNumber:n.SerialNumber,vendorId:n.VendorID,version:n.Ver})),areNetworkPorts:r}}function gw(e){const{DownloadStatus:t,Msg:r}=e;return{status:t,message:r}}function vw(e){const{ProgrammerStatus:t,Msg:r,Flash:n}=e;return{status:t,message:r,flash:n}}function yw(e){const{Cmd:t,Port:r,Baud:n}=e;return{status:t,port:r,baudRate:n}}function bw(e){const{P:t,D:r}=e;return{port:t,data:r}}const ww={[Ft.ListCommandPortsResponse]:Hl,[Ft.ListCommandNetworkPortsResponse]:Hl,[Ft.SerialMonitorStatusUpdate]:yw,[Ft.SerialMonitorMessage]:bw,[Ft.DownloadStatusResponse]:gw,[Ft.Upload]:vw,[Ft.Unknown]:e=>e};var ec={exports:{}},xw=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,_w=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],Gh=function(t){var r=t,n=t.indexOf("["),o=t.indexOf("]");n!=-1&&o!=-1&&(t=t.substring(0,n)+t.substring(n,o).replace(/:/g,";")+t.substring(o,t.length));for(var s=xw.exec(t||""),c={},i=14;i--;)c[_w[i]]=s[i]||"";return n!=-1&&o!=-1&&(c.source=r,c.host=c.host.substring(1,c.host.length-1).replace(/;/g,":"),c.authority=c.authority.replace("[","").replace("]","").replace(/;/g,":"),c.ipv6uri=!0),c.pathNames=Ew(c,c.path),c.queryKey=Sw(c,c.query),c};function Ew(e,t){var r=/\/{2,9}/g,n=t.replace(r,"/").split("/");return(t.substr(0,1)=="/"||t.length===0)&&n.splice(0,1),t.substr(t.length-1,1)=="/"&&n.splice(n.length-1,1),n}function Sw(e,t){var r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,o,s){o&&(r[o]=s)}),r}var tc={exports:{}},rc={exports:{}},ji=1e3,Di=ji*60,Mi=Di*60,Ui=Mi*24,Cw=Ui*365.25,kw=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return Aw(e);if(r==="number"&&isNaN(e)===!1)return t.long?Tw(e):Iw(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function Aw(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*Cw;case"days":case"day":case"d":return r*Ui;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Mi;case"minutes":case"minute":case"mins":case"min":case"m":return r*Di;case"seconds":case"second":case"secs":case"sec":case"s":return r*ji;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function Iw(e){return e>=Ui?Math.round(e/Ui)+"d":e>=Mi?Math.round(e/Mi)+"h":e>=Di?Math.round(e/Di)+"m":e>=ji?Math.round(e/ji)+"s":e+"ms"}function Tw(e){return Mo(e,Ui,"day")||Mo(e,Mi,"hour")||Mo(e,Di,"minute")||Mo(e,ji,"second")||e+" ms"}function Mo(e,t,r){if(!(e<t))return e<t*1.5?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}(function(e,t){t=e.exports=n.debug=n.default=n,t.coerce=g,t.disable=c,t.enable=s,t.enabled=i,t.humanize=kw,t.instances=[],t.names=[],t.skips=[],t.formatters={};function r(f){var a=0,y;for(y in f)a=(a<<5)-a+f.charCodeAt(y),a|=0;return t.colors[Math.abs(a)%t.colors.length]}function n(f){var a;function y(){if(y.enabled){var l=y,v=+new Date,A=v-(a||v);l.diff=A,l.prev=a,l.curr=v,a=v;for(var d=new Array(arguments.length),T=0;T<d.length;T++)d[T]=arguments[T];d[0]=t.coerce(d[0]),typeof d[0]!="string"&&d.unshift("%O");var w=0;d[0]=d[0].replace(/%([a-zA-Z%])/g,function(O,N){if(O==="%%")return O;w++;var P=t.formatters[N];if(typeof P=="function"){var H=d[w];O=P.call(l,H),d.splice(w,1),w--}return O}),t.formatArgs.call(l,d);var S=y.log||t.log||console.log.bind(console);S.apply(l,d)}}return y.namespace=f,y.enabled=t.enabled(f),y.useColors=t.useColors(),y.color=r(f),y.destroy=o,typeof t.init=="function"&&t.init(y),t.instances.push(y),y}function o(){var f=t.instances.indexOf(this);return f!==-1?(t.instances.splice(f,1),!0):!1}function s(f){t.save(f),t.names=[],t.skips=[];var a,y=(typeof f=="string"?f:"").split(/[\s,]+/),l=y.length;for(a=0;a<l;a++)y[a]&&(f=y[a].replace(/\*/g,".*?"),f[0]==="-"?t.skips.push(new RegExp("^"+f.substr(1)+"$")):t.names.push(new RegExp("^"+f+"$")));for(a=0;a<t.instances.length;a++){var v=t.instances[a];v.enabled=t.enabled(v.namespace)}}function c(){t.enable("")}function i(f){if(f[f.length-1]==="*")return!0;var a,y;for(a=0,y=t.skips.length;a<y;a++)if(t.skips[a].test(f))return!1;for(a=0,y=t.names.length;a<y;a++)if(t.names[a].test(f))return!0;return!1}function g(f){return f instanceof Error?f.stack||f.message:f}})(rc,rc.exports);var Rw=rc.exports;(function(e,t){var r={};t=e.exports=Rw,t.log=s,t.formatArgs=o,t.save=c,t.load=i,t.useColors=n,t.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:g(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}t.formatters.j=function(f){try{return JSON.stringify(f)}catch(a){return"[UnexpectedJSONParseError]: "+a.message}};function o(f){var a=this.useColors;if(f[0]=(a?"%c":"")+this.namespace+(a?" %c":" ")+f[0]+(a?"%c ":" ")+"+"+t.humanize(this.diff),!!a){var y="color: "+this.color;f.splice(1,0,y,"color: inherit");var l=0,v=0;f[0].replace(/%[a-zA-Z%]/g,function(A){A!=="%%"&&(l++,A==="%c"&&(v=l))}),f.splice(v,0,y)}}function s(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function c(f){try{f==null?t.storage.removeItem("debug"):t.storage.debug=f}catch{}}function i(){var f;try{f=t.storage.debug}catch{}return!f&&typeof process<"u"&&"env"in process&&(f=r.DEBUG),f}t.enable(i());function g(){try{return window.localStorage}catch{}}})(tc,tc.exports);var Ns=tc.exports,Ow=Gh,Wl=Ns("socket.io-client:url"),Nw=Lw;function Lw(e,t){var r=e;t=t||typeof location<"u"&&location,e==null&&(e=t.protocol+"//"+t.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=t.protocol+e:e=t.host+e),/^(https?|wss?):\/\//.test(e)||(Wl("protocol-less url %s",e),typeof t<"u"?e=t.protocol+"//"+e:e="https://"+e),Wl("parse %s",e),r=Ow(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";var n=r.host.indexOf(":")!==-1,o=n?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+o+":"+r.port,r.href=r.protocol+"://"+o+(t&&t.port===r.port?"":":"+r.port),r}var Ls={},nc={exports:{}},ic={exports:{}},$i=1e3,zi=$i*60,Gi=zi*60,Vi=Gi*24,Pw=Vi*365.25,Bw=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return Fw(e);if(r==="number"&&isNaN(e)===!1)return t.long?Dw(e):jw(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function Fw(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*Pw;case"days":case"day":case"d":return r*Vi;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Gi;case"minutes":case"minute":case"mins":case"min":case"m":return r*zi;case"seconds":case"second":case"secs":case"sec":case"s":return r*$i;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function jw(e){return e>=Vi?Math.round(e/Vi)+"d":e>=Gi?Math.round(e/Gi)+"h":e>=zi?Math.round(e/zi)+"m":e>=$i?Math.round(e/$i)+"s":e+"ms"}function Dw(e){return Uo(e,Vi,"day")||Uo(e,Gi,"hour")||Uo(e,zi,"minute")||Uo(e,$i,"second")||e+" ms"}function Uo(e,t,r){if(!(e<t))return e<t*1.5?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}(function(e,t){t=e.exports=n.debug=n.default=n,t.coerce=g,t.disable=c,t.enable=s,t.enabled=i,t.humanize=Bw,t.instances=[],t.names=[],t.skips=[],t.formatters={};function r(f){var a=0,y;for(y in f)a=(a<<5)-a+f.charCodeAt(y),a|=0;return t.colors[Math.abs(a)%t.colors.length]}function n(f){var a;function y(){if(y.enabled){var l=y,v=+new Date,A=v-(a||v);l.diff=A,l.prev=a,l.curr=v,a=v;for(var d=new Array(arguments.length),T=0;T<d.length;T++)d[T]=arguments[T];d[0]=t.coerce(d[0]),typeof d[0]!="string"&&d.unshift("%O");var w=0;d[0]=d[0].replace(/%([a-zA-Z%])/g,function(O,N){if(O==="%%")return O;w++;var P=t.formatters[N];if(typeof P=="function"){var H=d[w];O=P.call(l,H),d.splice(w,1),w--}return O}),t.formatArgs.call(l,d);var S=y.log||t.log||console.log.bind(console);S.apply(l,d)}}return y.namespace=f,y.enabled=t.enabled(f),y.useColors=t.useColors(),y.color=r(f),y.destroy=o,typeof t.init=="function"&&t.init(y),t.instances.push(y),y}function o(){var f=t.instances.indexOf(this);return f!==-1?(t.instances.splice(f,1),!0):!1}function s(f){t.save(f),t.names=[],t.skips=[];var a,y=(typeof f=="string"?f:"").split(/[\s,]+/),l=y.length;for(a=0;a<l;a++)y[a]&&(f=y[a].replace(/\*/g,".*?"),f[0]==="-"?t.skips.push(new RegExp("^"+f.substr(1)+"$")):t.names.push(new RegExp("^"+f+"$")));for(a=0;a<t.instances.length;a++){var v=t.instances[a];v.enabled=t.enabled(v.namespace)}}function c(){t.enable("")}function i(f){if(f[f.length-1]==="*")return!0;var a,y;for(a=0,y=t.skips.length;a<y;a++)if(t.skips[a].test(f))return!1;for(a=0,y=t.names.length;a<y;a++)if(t.names[a].test(f))return!0;return!1}function g(f){return f instanceof Error?f.stack||f.message:f}})(ic,ic.exports);var Mw=ic.exports;(function(e,t){var r={};t=e.exports=Mw,t.log=s,t.formatArgs=o,t.save=c,t.load=i,t.useColors=n,t.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:g(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}t.formatters.j=function(f){try{return JSON.stringify(f)}catch(a){return"[UnexpectedJSONParseError]: "+a.message}};function o(f){var a=this.useColors;if(f[0]=(a?"%c":"")+this.namespace+(a?" %c":" ")+f[0]+(a?"%c ":" ")+"+"+t.humanize(this.diff),!!a){var y="color: "+this.color;f.splice(1,0,y,"color: inherit");var l=0,v=0;f[0].replace(/%[a-zA-Z%]/g,function(A){A!=="%%"&&(l++,A==="%c"&&(v=l))}),f.splice(v,0,y)}}function s(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function c(f){try{f==null?t.storage.removeItem("debug"):t.storage.debug=f}catch{}}function i(){var f;try{f=t.storage.debug}catch{}return!f&&typeof process<"u"&&"env"in process&&(f=r.DEBUG),f}t.enable(i());function g(){try{return window.localStorage}catch{}}})(nc,nc.exports);var Uw=nc.exports,Vh={exports:{}};(function(e){e.exports=t;function t(n){if(n)return r(n)}function r(n){for(var o in t.prototype)n[o]=t.prototype[o];return n}t.prototype.on=t.prototype.addEventListener=function(n,o){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(o),this},t.prototype.once=function(n,o){function s(){this.off(n,s),o.apply(this,arguments)}return s.fn=o,this.on(n,s),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(n,o){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+n];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var c,i=0;i<s.length;i++)if(c=s[i],c===o||c.fn===o){s.splice(i,1);break}return s.length===0&&delete this._callbacks["$"+n],this},t.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var o=new Array(arguments.length-1),s=this._callbacks["$"+n],c=1;c<arguments.length;c++)o[c-1]=arguments[c];if(s){s=s.slice(0);for(var c=0,i=s.length;c<i;++c)s[c].apply(this,o)}return this},t.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]},t.prototype.hasListeners=function(n){return!!this.listeners(n).length}})(Vh);var ni=Vh.exports,Ps={},$w={}.toString,qh=Array.isArray||function(e){return $w.call(e)=="[object Array]"},Hh=qw,zw=typeof Buffer=="function"&&typeof Buffer.isBuffer=="function",Gw=typeof ArrayBuffer=="function",Vw=function(e){return typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer};function qw(e){return zw&&Buffer.isBuffer(e)||Gw&&(e instanceof ArrayBuffer||Vw(e))}var Kc=qh,Wh=Hh,Zh=Object.prototype.toString,Hw=typeof Blob=="function"||typeof Blob<"u"&&Zh.call(Blob)==="[object BlobConstructor]",Ww=typeof File=="function"||typeof File<"u"&&Zh.call(File)==="[object FileConstructor]";Ps.deconstructPacket=function(e){var t=[],r=e.data,n=e;return n.data=oc(r,t),n.attachments=t.length,{packet:n,buffers:t}};function oc(e,t){if(!e)return e;if(Wh(e)){var r={_placeholder:!0,num:t.length};return t.push(e),r}else if(Kc(e)){for(var n=new Array(e.length),o=0;o<e.length;o++)n[o]=oc(e[o],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){var n={};for(var s in e)n[s]=oc(e[s],t);return n}return e}Ps.reconstructPacket=function(e,t){return e.data=sc(e.data,t),e.attachments=void 0,e};function sc(e,t){if(!e)return e;if(e&&e._placeholder===!0){var r=typeof e.num=="number"&&e.num>=0&&e.num<t.length;if(r)return t[e.num];throw new Error("illegal attachments")}else if(Kc(e))for(var n=0;n<e.length;n++)e[n]=sc(e[n],t);else if(typeof e=="object")for(var o in e)e[o]=sc(e[o],t);return e}Ps.removeBlobs=function(e,t){function r(s,c,i){if(!s)return s;if(Hw&&s instanceof Blob||Ww&&s instanceof File){n++;var g=new FileReader;g.onload=function(){i?i[c]=this.result:o=this.result,--n||t(o)},g.readAsArrayBuffer(s)}else if(Kc(s))for(var f=0;f<s.length;f++)r(s[f],f,s);else if(typeof s=="object"&&!Wh(s))for(var a in s)r(s[a],a,s)}var n=0,o=e;r(o),n||t(o)};(function(e){var t=Uw("socket.io-parser"),r=ni,n=Ps,o=qh,s=Hh;e.protocol=4,e.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],e.CONNECT=0,e.DISCONNECT=1,e.EVENT=2,e.ACK=3,e.ERROR=4,e.BINARY_EVENT=5,e.BINARY_ACK=6,e.Encoder=c,e.Decoder=y;function c(){}var i=e.ERROR+'"encode error"';c.prototype.encode=function(w,S){if(t("encoding packet %j",w),e.BINARY_EVENT===w.type||e.BINARY_ACK===w.type)a(w,S);else{var O=g(w);S([O])}};function g(w){var S=""+w.type;if((e.BINARY_EVENT===w.type||e.BINARY_ACK===w.type)&&(S+=w.attachments+"-"),w.nsp&&w.nsp!=="/"&&(S+=w.nsp+","),w.id!=null&&(S+=w.id),w.data!=null){var O=f(w.data);if(O!==!1)S+=O;else return i}return t("encoded %j as %s",w,S),S}function f(w){try{return JSON.stringify(w)}catch{return!1}}function a(w,S){function O(N){var P=n.deconstructPacket(N),H=g(P.packet),j=P.buffers;j.unshift(H),S(j)}n.removeBlobs(w,O)}function y(){this.reconstructor=null}r(y.prototype),y.prototype.add=function(w){var S;if(typeof w=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");S=v(w),e.BINARY_EVENT===S.type||e.BINARY_ACK===S.type?(this.reconstructor=new d(S),this.reconstructor.reconPack.attachments===0&&this.emit("decoded",S)):this.emit("decoded",S)}else if(s(w)||w.base64)if(this.reconstructor)S=this.reconstructor.takeBinaryData(w),S&&(this.reconstructor=null,this.emit("decoded",S));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+w)};function l(w,S){switch(w){case 0:return typeof S=="object";case 1:return S===void 0;case 4:return typeof S=="string"||typeof S=="object";case 2:case 5:return o(S)&&(typeof S[0]=="string"||typeof S[0]=="number");case 3:case 6:return o(S)}}function v(w){var S=0,O={type:Number(w.charAt(0))};if(e.types[O.type]==null)return T("unknown packet type "+O.type);if(e.BINARY_EVENT===O.type||e.BINARY_ACK===O.type){for(var N=S+1;w.charAt(++S)!=="-"&&S!=w.length;);var P=w.substring(N,S);if(P!=Number(P)||w.charAt(S)!=="-")throw new Error("Illegal attachments");O.attachments=Number(P)}if(w.charAt(S+1)==="/"){for(var N=S+1;++S;){var H=w.charAt(S);if(H===","||S===w.length)break}O.nsp=w.substring(N,S)}else O.nsp="/";var j=w.charAt(S+1);if(j!==""&&Number(j)==j){for(var N=S+1;++S;){var H=w.charAt(S);if(H==null||Number(H)!=H){--S;break}if(S===w.length)break}O.id=Number(w.substring(N,S+1))}if(w.charAt(++S)){var Z=A(w.substr(S));if(l(O.type,Z))O.data=Z;else throw new Error("invalid payload")}return t("decoded %s as %j",w,O),O}function A(w){try{return JSON.parse(w)}catch{return!1}}y.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()};function d(w){this.reconPack=w,this.buffers=[]}d.prototype.takeBinaryData=function(w){if(this.buffers.push(w),this.buffers.length===this.reconPack.attachments){var S=n.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),S}return null},d.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]};function T(w){return{type:e.ERROR,data:"parser error: "+w}}})(Ls);var Yc={exports:{}},Bs={},ac={exports:{}};try{ac.exports=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{ac.exports=!1}var Zw=ac.exports,Xc=function(){return typeof self<"u"?self:typeof window<"u"?window:Function("return this")()}(),Kw=Zw,Yw=Xc,Qc=function(e){var t=e.xdomain,r=e.xscheme,n=e.enablesXDR;try{if(typeof XMLHttpRequest<"u"&&(!t||Kw))return new XMLHttpRequest}catch{}try{if(typeof XDomainRequest<"u"&&!r&&n)return new XDomainRequest}catch{}if(!t)try{return new Yw[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}},Jc={exports:{}},On={},Xw=Object.keys||function(t){var r=[],n=Object.prototype.hasOwnProperty;for(var o in t)n.call(t,o)&&r.push(o);return r},Qw={}.toString,Jw=Array.isArray||function(e){return Qw.call(e)=="[object Array]"},e2=Jw,Kh=Object.prototype.toString,t2=typeof Blob=="function"||typeof Blob<"u"&&Kh.call(Blob)==="[object BlobConstructor]",r2=typeof File=="function"||typeof File<"u"&&Kh.call(File)==="[object FileConstructor]",Yh=Ko;function Ko(e){if(!e||typeof e!="object")return!1;if(e2(e)){for(var t=0,r=e.length;t<r;t++)if(Ko(e[t]))return!0;return!1}if(typeof Buffer=="function"&&Buffer.isBuffer&&Buffer.isBuffer(e)||typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||t2&&e instanceof Blob||r2&&e instanceof File)return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return Ko(e.toJSON(),!0);for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&Ko(e[n]))return!0;return!1}var n2=function(e,t,r){var n=e.byteLength;if(t=t||0,r=r||n,e.slice)return e.slice(t,r);if(t<0&&(t+=n),r<0&&(r+=n),r>n&&(r=n),t>=n||t>=r||n===0)return new ArrayBuffer(0);for(var o=new Uint8Array(e),s=new Uint8Array(r-t),c=t,i=0;c<r;c++,i++)s[i]=o[c];return s.buffer},i2=o2;function o2(e,t,r){var n=!1;return r=r||s2,o.count=e,e===0?t():o;function o(s,c){if(o.count<=0)throw new Error("after called too many times");--o.count,s?(n=!0,t(s),t=r):o.count===0&&!n&&t(null,c)}}function s2(){}/*! https://mths.be/utf8js v2.1.2 by @mathias */var tn=String.fromCharCode;function Xh(e){for(var t=[],r=0,n=e.length,o,s;r<n;)o=e.charCodeAt(r++),o>=55296&&o<=56319&&r<n?(s=e.charCodeAt(r++),(s&64512)==56320?t.push(((o&1023)<<10)+(s&1023)+65536):(t.push(o),r--)):t.push(o);return t}function a2(e){for(var t=e.length,r=-1,n,o="";++r<t;)n=e[r],n>65535&&(n-=65536,o+=tn(n>>>10&1023|55296),n=56320|n&1023),o+=tn(n);return o}function Qh(e,t){if(e>=55296&&e<=57343){if(t)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function Ba(e,t){return tn(e>>t&63|128)}function c2(e,t){if(!(e&4294967168))return tn(e);var r="";return e&4294965248?e&4294901760?e&4292870144||(r=tn(e>>18&7|240),r+=Ba(e,12),r+=Ba(e,6)):(Qh(e,t)||(e=65533),r=tn(e>>12&15|224),r+=Ba(e,6)):r=tn(e>>6&31|192),r+=tn(e&63|128),r}function u2(e,t){t=t||{};for(var r=t.strict!==!1,n=Xh(e),o=n.length,s=-1,c,i="";++s<o;)c=n[s],i+=c2(c,r);return i}function $n(){if(nn>=as)throw Error("Invalid byte index");var e=ss[nn]&255;if(nn++,(e&192)==128)return e&63;throw Error("Invalid continuation byte")}function l2(e){var t,r,n,o,s;if(nn>as)throw Error("Invalid byte index");if(nn==as)return!1;if(t=ss[nn]&255,nn++,!(t&128))return t;if((t&224)==192){if(r=$n(),s=(t&31)<<6|r,s>=128)return s;throw Error("Invalid continuation byte")}if((t&240)==224){if(r=$n(),n=$n(),s=(t&15)<<12|r<<6|n,s>=2048)return Qh(s,e)?s:65533;throw Error("Invalid continuation byte")}if((t&248)==240&&(r=$n(),n=$n(),o=$n(),s=(t&7)<<18|r<<12|n<<6|o,s>=65536&&s<=1114111))return s;throw Error("Invalid UTF-8 detected")}var ss,as,nn;function f2(e,t){t=t||{};var r=t.strict!==!1;ss=Xh(e),as=ss.length,nn=0;for(var n=[],o;(o=l2(r))!==!1;)n.push(o);return a2(n)}var h2={version:"2.1.2",encode:u2,decode:f2},$o={},Zl;function d2(){return Zl||(Zl=1,function(e){$o.encode=function(t){var r=new Uint8Array(t),n,o=r.length,s="";for(n=0;n<o;n+=3)s+=e[r[n]>>2],s+=e[(r[n]&3)<<4|r[n+1]>>4],s+=e[(r[n+1]&15)<<2|r[n+2]>>6],s+=e[r[n+2]&63];return o%3===2?s=s.substring(0,s.length-1)+"=":o%3===1&&(s=s.substring(0,s.length-2)+"=="),s},$o.decode=function(t){var r=t.length*.75,n=t.length,o,s=0,c,i,g,f;t[t.length-1]==="="&&(r--,t[t.length-2]==="="&&r--);var a=new ArrayBuffer(r),y=new Uint8Array(a);for(o=0;o<n;o+=4)c=e.indexOf(t[o]),i=e.indexOf(t[o+1]),g=e.indexOf(t[o+2]),f=e.indexOf(t[o+3]),y[s++]=c<<2|i>>4,y[s++]=(i&15)<<4|g>>2,y[s++]=(g&3)<<6|f&63;return a}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")),$o}var Fa,Kl;function p2(){if(Kl)return Fa;Kl=1;var e=typeof e<"u"?e:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:!1,t=function(){try{var i=new Blob(["hi"]);return i.size===2}catch{return!1}}(),r=t&&function(){try{var i=new Blob([new Uint8Array([1,2])]);return i.size===2}catch{return!1}}(),n=e&&e.prototype.append&&e.prototype.getBlob;function o(i){return i.map(function(g){if(g.buffer instanceof ArrayBuffer){var f=g.buffer;if(g.byteLength!==f.byteLength){var a=new Uint8Array(g.byteLength);a.set(new Uint8Array(f,g.byteOffset,g.byteLength)),f=a.buffer}return f}return g})}function s(i,g){g=g||{};var f=new e;return o(i).forEach(function(a){f.append(a)}),g.type?f.getBlob(g.type):f.getBlob()}function c(i,g){return new Blob(o(i),g||{})}return typeof Blob<"u"&&(s.prototype=Blob.prototype,c.prototype=Blob.prototype),Fa=function(){return t?r?Blob:c:n?s:void 0}(),Fa}(function(e){var t=Xw,r=Yh,n=n2,o=i2,s=h2,c;typeof ArrayBuffer<"u"&&(c=d2());var i=typeof navigator<"u"&&/Android/i.test(navigator.userAgent),g=typeof navigator<"u"&&/PhantomJS/i.test(navigator.userAgent),f=i||g;e.protocol=3;var a=e.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},y=t(a),l={type:"error",data:"parser error"},v=p2();e.encodePacket=function(N,P,H,j){typeof P=="function"&&(j=P,P=!1),typeof H=="function"&&(j=H,H=null);var Z=N.data===void 0?void 0:N.data.buffer||N.data;if(typeof ArrayBuffer<"u"&&Z instanceof ArrayBuffer)return d(N,P,j);if(typeof v<"u"&&Z instanceof v)return w(N,P,j);if(Z&&Z.base64)return A(N,j);var U=a[N.type];return N.data!==void 0&&(U+=H?s.encode(String(N.data),{strict:!1}):String(N.data)),j(""+U)};function A(N,P){var H="b"+e.packets[N.type]+N.data.data;return P(H)}function d(N,P,H){if(!P)return e.encodeBase64Packet(N,H);var j=N.data,Z=new Uint8Array(j),U=new Uint8Array(1+j.byteLength);U[0]=a[N.type];for(var ue=0;ue<Z.length;ue++)U[ue+1]=Z[ue];return H(U.buffer)}function T(N,P,H){if(!P)return e.encodeBase64Packet(N,H);var j=new FileReader;return j.onload=function(){e.encodePacket({type:N.type,data:j.result},P,!0,H)},j.readAsArrayBuffer(N.data)}function w(N,P,H){if(!P)return e.encodeBase64Packet(N,H);if(f)return T(N,P,H);var j=new Uint8Array(1);j[0]=a[N.type];var Z=new v([j.buffer,N.data]);return H(Z)}e.encodeBase64Packet=function(N,P){var H="b"+e.packets[N.type];if(typeof v<"u"&&N.data instanceof v){var j=new FileReader;return j.onload=function(){var q=j.result.split(",")[1];P(H+q)},j.readAsDataURL(N.data)}var Z;try{Z=String.fromCharCode.apply(null,new Uint8Array(N.data))}catch{for(var U=new Uint8Array(N.data),ue=new Array(U.length),fe=0;fe<U.length;fe++)ue[fe]=U[fe];Z=String.fromCharCode.apply(null,ue)}return H+=btoa(Z),P(H)},e.decodePacket=function(N,P,H){if(N===void 0)return l;if(typeof N=="string"){if(N.charAt(0)==="b")return e.decodeBase64Packet(N.substr(1),P);if(H&&(N=S(N),N===!1))return l;var Z=N.charAt(0);return Number(Z)!=Z||!y[Z]?l:N.length>1?{type:y[Z],data:N.substring(1)}:{type:y[Z]}}var j=new Uint8Array(N),Z=j[0],U=n(N,1);return v&&P==="blob"&&(U=new v([U])),{type:y[Z],data:U}};function S(N){try{N=s.decode(N,{strict:!1})}catch{return!1}return N}e.decodeBase64Packet=function(N,P){var H=y[N.charAt(0)];if(!c)return{type:H,data:{base64:!0,data:N.substr(1)}};var j=c.decode(N.substr(1));return P==="blob"&&v&&(j=new v([j])),{type:H,data:j}},e.encodePayload=function(N,P,H){typeof P=="function"&&(H=P,P=null);var j=r(N);if(P&&j)return v&&!f?e.encodePayloadAsBlob(N,H):e.encodePayloadAsArrayBuffer(N,H);if(!N.length)return H("0:");function Z(ue){return ue.length+":"+ue}function U(ue,fe){e.encodePacket(ue,j?P:!1,!1,function(q){fe(null,Z(q))})}O(N,U,function(ue,fe){return H(fe.join(""))})};function O(N,P,H){for(var j=new Array(N.length),Z=o(N.length,H),U=function(fe,q,Q){P(q,function(_,k){j[fe]=k,Q(_,j)})},ue=0;ue<N.length;ue++)U(ue,N[ue],Z)}e.decodePayload=function(N,P,H){if(typeof N!="string")return e.decodePayloadAsBinary(N,P,H);typeof P=="function"&&(H=P,P=null);var j;if(N==="")return H(l,0,1);for(var Z="",U,ue,fe=0,q=N.length;fe<q;fe++){var Q=N.charAt(fe);if(Q!==":"){Z+=Q;continue}if(Z===""||Z!=(U=Number(Z))||(ue=N.substr(fe+1,U),Z!=ue.length))return H(l,0,1);if(ue.length){if(j=e.decodePacket(ue,P,!1),l.type===j.type&&l.data===j.data)return H(l,0,1);var _=H(j,fe+U,q);if(_===!1)return}fe+=U,Z=""}if(Z!=="")return H(l,0,1)},e.encodePayloadAsArrayBuffer=function(N,P){if(!N.length)return P(new ArrayBuffer(0));function H(j,Z){e.encodePacket(j,!0,!0,function(U){return Z(null,U)})}O(N,H,function(j,Z){var U=Z.reduce(function(q,Q){var _;return typeof Q=="string"?_=Q.length:_=Q.byteLength,q+_.toString().length+_+2},0),ue=new Uint8Array(U),fe=0;return Z.forEach(function(q){var Q=typeof q=="string",_=q;if(Q){for(var F=new Uint8Array(q.length),k=0;k<q.length;k++)F[k]=q.charCodeAt(k);_=F.buffer}Q?ue[fe++]=0:ue[fe++]=1;for(var $=_.byteLength.toString(),k=0;k<$.length;k++)ue[fe++]=parseInt($[k]);ue[fe++]=255;for(var F=new Uint8Array(_),k=0;k<F.length;k++)ue[fe++]=F[k]}),P(ue.buffer)})},e.encodePayloadAsBlob=function(N,P){function H(j,Z){e.encodePacket(j,!0,!0,function(U){var ue=new Uint8Array(1);if(ue[0]=1,typeof U=="string"){for(var fe=new Uint8Array(U.length),q=0;q<U.length;q++)fe[q]=U.charCodeAt(q);U=fe.buffer,ue[0]=0}for(var Q=U instanceof ArrayBuffer?U.byteLength:U.size,_=Q.toString(),k=new Uint8Array(_.length+1),q=0;q<_.length;q++)k[q]=parseInt(_[q]);if(k[_.length]=255,v){var $=new v([ue.buffer,k.buffer,U]);Z(null,$)}})}O(N,H,function(j,Z){return P(new v(Z))})},e.decodePayloadAsBinary=function(N,P,H){typeof P=="function"&&(H=P,P=null);for(var j=N,Z=[];j.byteLength>0;){for(var U=new Uint8Array(j),ue=U[0]===0,fe="",q=1;U[q]!==255;q++){if(fe.length>310)return H(l,0,1);fe+=U[q]}j=n(j,2+fe.length),fe=parseInt(fe);var Q=n(j,0,fe);if(ue)try{Q=String.fromCharCode.apply(null,new Uint8Array(Q))}catch{var _=new Uint8Array(Q);Q="";for(var q=0;q<_.length;q++)Q+=String.fromCharCode(_[q])}Z.push(Q),j=n(j,fe)}var k=Z.length;Z.forEach(function($,F){H(e.decodePacket($,P,!0),F,k)})}})(On);var ja,Yl;function eu(){if(Yl)return ja;Yl=1;var e=On,t=ni;ja=r;function r(n){this.path=n.path,this.hostname=n.hostname,this.port=n.port,this.secure=n.secure,this.query=n.query,this.timestampParam=n.timestampParam,this.timestampRequests=n.timestampRequests,this.readyState="",this.agent=n.agent||!1,this.socket=n.socket,this.enablesXDR=n.enablesXDR,this.withCredentials=n.withCredentials,this.pfx=n.pfx,this.key=n.key,this.passphrase=n.passphrase,this.cert=n.cert,this.ca=n.ca,this.ciphers=n.ciphers,this.rejectUnauthorized=n.rejectUnauthorized,this.forceNode=n.forceNode,this.isReactNative=n.isReactNative,this.extraHeaders=n.extraHeaders,this.localAddress=n.localAddress}return t(r.prototype),r.prototype.onError=function(n,o){var s=new Error(n);return s.type="TransportError",s.description=o,this.emit("error",s),this},r.prototype.open=function(){return(this.readyState==="closed"||this.readyState==="")&&(this.readyState="opening",this.doOpen()),this},r.prototype.close=function(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this},r.prototype.send=function(n){if(this.readyState==="open")this.write(n);else throw new Error("Transport not open")},r.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},r.prototype.onData=function(n){var o=e.decodePacket(n,this.socket.binaryType);this.onPacket(o)},r.prototype.onPacket=function(n){this.emit("packet",n)},r.prototype.onClose=function(){this.readyState="closed",this.emit("close")},ja}var ii={};ii.encode=function(e){var t="";for(var r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t};ii.decode=function(e){for(var t={},r=e.split("&"),n=0,o=r.length;n<o;n++){var s=r[n].split("=");t[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return t};var Fs=function(e,t){var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e},Jh="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),cs=64,ed={},Xl=0,on=0,Ql;function cc(e){var t="";do t=Jh[e%cs]+t,e=Math.floor(e/cs);while(e>0);return t}function m2(e){var t=0;for(on=0;on<e.length;on++)t=t*cs+ed[e.charAt(on)];return t}function tu(){var e=cc(+new Date);return e!==Ql?(Xl=0,Ql=e):e+"."+cc(Xl++)}for(;on<cs;on++)ed[Jh[on]]=on;tu.encode=cc;tu.decode=m2;var td=tu,uc={exports:{}},lc={exports:{}},qi=1e3,Hi=qi*60,Wi=Hi*60,Zi=Wi*24,g2=Zi*365.25,v2=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return y2(e);if(r==="number"&&isNaN(e)===!1)return t.long?w2(e):b2(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function y2(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*g2;case"days":case"day":case"d":return r*Zi;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Wi;case"minutes":case"minute":case"mins":case"min":case"m":return r*Hi;case"seconds":case"second":case"secs":case"sec":case"s":return r*qi;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function b2(e){return e>=Zi?Math.round(e/Zi)+"d":e>=Wi?Math.round(e/Wi)+"h":e>=Hi?Math.round(e/Hi)+"m":e>=qi?Math.round(e/qi)+"s":e+"ms"}function w2(e){return zo(e,Zi,"day")||zo(e,Wi,"hour")||zo(e,Hi,"minute")||zo(e,qi,"second")||e+" ms"}function zo(e,t,r){if(!(e<t))return e<t*1.5?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}(function(e,t){t=e.exports=n.debug=n.default=n,t.coerce=g,t.disable=c,t.enable=s,t.enabled=i,t.humanize=v2,t.instances=[],t.names=[],t.skips=[],t.formatters={};function r(f){var a=0,y;for(y in f)a=(a<<5)-a+f.charCodeAt(y),a|=0;return t.colors[Math.abs(a)%t.colors.length]}function n(f){var a;function y(){if(y.enabled){var l=y,v=+new Date,A=v-(a||v);l.diff=A,l.prev=a,l.curr=v,a=v;for(var d=new Array(arguments.length),T=0;T<d.length;T++)d[T]=arguments[T];d[0]=t.coerce(d[0]),typeof d[0]!="string"&&d.unshift("%O");var w=0;d[0]=d[0].replace(/%([a-zA-Z%])/g,function(O,N){if(O==="%%")return O;w++;var P=t.formatters[N];if(typeof P=="function"){var H=d[w];O=P.call(l,H),d.splice(w,1),w--}return O}),t.formatArgs.call(l,d);var S=y.log||t.log||console.log.bind(console);S.apply(l,d)}}return y.namespace=f,y.enabled=t.enabled(f),y.useColors=t.useColors(),y.color=r(f),y.destroy=o,typeof t.init=="function"&&t.init(y),t.instances.push(y),y}function o(){var f=t.instances.indexOf(this);return f!==-1?(t.instances.splice(f,1),!0):!1}function s(f){t.save(f),t.names=[],t.skips=[];var a,y=(typeof f=="string"?f:"").split(/[\s,]+/),l=y.length;for(a=0;a<l;a++)y[a]&&(f=y[a].replace(/\*/g,".*?"),f[0]==="-"?t.skips.push(new RegExp("^"+f.substr(1)+"$")):t.names.push(new RegExp("^"+f+"$")));for(a=0;a<t.instances.length;a++){var v=t.instances[a];v.enabled=t.enabled(v.namespace)}}function c(){t.enable("")}function i(f){if(f[f.length-1]==="*")return!0;var a,y;for(a=0,y=t.skips.length;a<y;a++)if(t.skips[a].test(f))return!1;for(a=0,y=t.names.length;a<y;a++)if(t.names[a].test(f))return!0;return!1}function g(f){return f instanceof Error?f.stack||f.message:f}})(lc,lc.exports);var x2=lc.exports;(function(e,t){var r={};t=e.exports=x2,t.log=s,t.formatArgs=o,t.save=c,t.load=i,t.useColors=n,t.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:g(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}t.formatters.j=function(f){try{return JSON.stringify(f)}catch(a){return"[UnexpectedJSONParseError]: "+a.message}};function o(f){var a=this.useColors;if(f[0]=(a?"%c":"")+this.namespace+(a?" %c":" ")+f[0]+(a?"%c ":" ")+"+"+t.humanize(this.diff),!!a){var y="color: "+this.color;f.splice(1,0,y,"color: inherit");var l=0,v=0;f[0].replace(/%[a-zA-Z%]/g,function(A){A!=="%%"&&(l++,A==="%c"&&(v=l))}),f.splice(v,0,y)}}function s(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function c(f){try{f==null?t.storage.removeItem("debug"):t.storage.debug=f}catch{}}function i(){var f;try{f=t.storage.debug}catch{}return!f&&typeof process<"u"&&"env"in process&&(f=r.DEBUG),f}t.enable(i());function g(){try{return window.localStorage}catch{}}})(uc,uc.exports);var js=uc.exports,rd=eu(),_2=ii,nd=On,E2=Fs,S2=td,xr=js("engine.io-client:polling"),id=Mr,C2=function(){var e=Qc,t=new e({xdomain:!1});return t.responseType!=null}();function Mr(e){var t=e&&e.forceBase64;(!C2||t)&&(this.supportsBinary=!1),rd.call(this,e)}E2(Mr,rd);Mr.prototype.name="polling";Mr.prototype.doOpen=function(){this.poll()};Mr.prototype.pause=function(e){var t=this;this.readyState="pausing";function r(){xr("paused"),t.readyState="paused",e()}if(this.polling||!this.writable){var n=0;this.polling&&(xr("we are currently polling - waiting to pause"),n++,this.once("pollComplete",function(){xr("pre-pause polling complete"),--n||r()})),this.writable||(xr("we are currently writing - waiting to pause"),n++,this.once("drain",function(){xr("pre-pause writing complete"),--n||r()}))}else r()};Mr.prototype.poll=function(){xr("polling"),this.polling=!0,this.doPoll(),this.emit("poll")};Mr.prototype.onData=function(e){var t=this;xr("polling got data %s",e);var r=function(n,o,s){if(t.readyState==="opening"&&n.type==="open"&&t.onOpen(),n.type==="close")return t.onClose(),!1;t.onPacket(n)};nd.decodePayload(e,this.socket.binaryType,r),this.readyState!=="closed"&&(this.polling=!1,this.emit("pollComplete"),this.readyState==="open"?this.poll():xr('ignoring poll - transport state "%s"',this.readyState))};Mr.prototype.doClose=function(){var e=this;function t(){xr("writing close packet"),e.write([{type:"close"}])}this.readyState==="open"?(xr("transport open - closing"),t()):(xr("transport not open - deferring close"),this.once("open",t))};Mr.prototype.write=function(e){var t=this;this.writable=!1;var r=function(){t.writable=!0,t.emit("drain")};nd.encodePayload(e,this.supportsBinary,function(n){t.doWrite(n,r)})};Mr.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",r="";this.timestampRequests!==!1&&(e[this.timestampParam]=S2()),!this.supportsBinary&&!e.sid&&(e.b64=1),e=_2.encode(e),this.port&&(t==="https"&&Number(this.port)!==443||t==="http"&&Number(this.port)!==80)&&(r=":"+this.port),e.length&&(e="?"+e);var n=this.hostname.indexOf(":")!==-1;return t+"://"+(n?"["+this.hostname+"]":this.hostname)+r+this.path+e};var k2=Qc,od=id,A2=ni,I2=Fs,fc=js("engine.io-client:polling-xhr"),T2=Xc;Jc.exports=oi;Jc.exports.Request=Vt;function Jl(){}function oi(e){if(od.call(this,e),this.requestTimeout=e.requestTimeout,this.extraHeaders=e.extraHeaders,typeof location<"u"){var t=location.protocol==="https:",r=location.port;r||(r=t?443:80),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port,this.xs=e.secure!==t}}I2(oi,od);oi.prototype.supportsBinary=!0;oi.prototype.request=function(e){return e=e||{},e.uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.withCredentials=this.withCredentials,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new Vt(e)};oi.prototype.doWrite=function(e,t){var r=typeof e!="string"&&e!==void 0,n=this.request({method:"POST",data:e,isBinary:r}),o=this;n.on("success",t),n.on("error",function(s){o.onError("xhr post error",s)}),this.sendXhr=n};oi.prototype.doPoll=function(){fc("xhr poll");var e=this.request(),t=this;e.on("data",function(r){t.onData(r)}),e.on("error",function(r){t.onError("xhr poll error",r)}),this.pollXhr=e};function Vt(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=e.async!==!1,this.data=e.data!==void 0?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.withCredentials=e.withCredentials,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}A2(Vt.prototype);Vt.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new k2(e),r=this;try{fc("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.extraHeaders){t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0);for(var n in this.extraHeaders)this.extraHeaders.hasOwnProperty(n)&&t.setRequestHeader(n,this.extraHeaders[n])}}catch{}if(this.method==="POST")try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{t.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in t&&(t.withCredentials=this.withCredentials),this.requestTimeout&&(t.timeout=this.requestTimeout),this.hasXDR()?(t.onload=function(){r.onLoad()},t.onerror=function(){r.onError(t.responseText)}):t.onreadystatechange=function(){if(t.readyState===2)try{var o=t.getResponseHeader("Content-Type");(r.supportsBinary&&o==="application/octet-stream"||o==="application/octet-stream; charset=UTF-8")&&(t.responseType="arraybuffer")}catch{}t.readyState===4&&(t.status===200||t.status===1223?r.onLoad():setTimeout(function(){r.onError(typeof t.status=="number"?t.status:0)},0))},fc("xhr data %s",this.data),t.send(this.data)}catch(o){setTimeout(function(){r.onError(o)},0);return}typeof document<"u"&&(this.index=Vt.requestsCount++,Vt.requests[this.index]=this)};Vt.prototype.onSuccess=function(){this.emit("success"),this.cleanup()};Vt.prototype.onData=function(e){this.emit("data",e),this.onSuccess()};Vt.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)};Vt.prototype.cleanup=function(e){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=Jl:this.xhr.onreadystatechange=Jl,e)try{this.xhr.abort()}catch{}typeof document<"u"&&delete Vt.requests[this.index],this.xhr=null}};Vt.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type")}catch{}t==="application/octet-stream"||t==="application/octet-stream; charset=UTF-8"?e=this.xhr.response||this.xhr.responseText:e=this.xhr.responseText}catch(r){this.onError(r)}e!=null&&this.onData(e)};Vt.prototype.hasXDR=function(){return typeof XDomainRequest<"u"&&!this.xs&&this.enablesXDR};Vt.prototype.abort=function(){this.cleanup()};Vt.requestsCount=0;Vt.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",ef);else if(typeof addEventListener=="function"){var R2="onpagehide"in T2?"pagehide":"unload";addEventListener(R2,ef,!1)}}function ef(){for(var e in Vt.requests)Vt.requests.hasOwnProperty(e)&&Vt.requests[e].abort()}var O2=Jc.exports,ru=id,N2=Fs,tf=Xc,L2=si,P2=/\n/g,B2=/\\n/g,Go;function F2(){}function si(e){ru.call(this,e),this.query=this.query||{},Go||(Go=tf.___eio=tf.___eio||[]),this.index=Go.length;var t=this;Go.push(function(r){t.onData(r)}),this.query.j=this.index,typeof addEventListener=="function"&&addEventListener("beforeunload",function(){t.script&&(t.script.onerror=F2)},!1)}N2(si,ru);si.prototype.supportsBinary=!1;si.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),ru.prototype.doClose.call(this)};si.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(o){e.onError("jsonp poll error",o)};var r=document.getElementsByTagName("script")[0];r?r.parentNode.insertBefore(t,r):(document.head||document.body).appendChild(t),this.script=t;var n=typeof navigator<"u"&&/gecko/i.test(navigator.userAgent);n&&setTimeout(function(){var o=document.createElement("iframe");document.body.appendChild(o),document.body.removeChild(o)},100)};si.prototype.doWrite=function(e,t){var r=this;if(!this.form){var n=document.createElement("form"),o=document.createElement("textarea"),s=this.iframeId="eio_iframe_"+this.index,c;n.className="socketio",n.style.position="absolute",n.style.top="-1000px",n.style.left="-1000px",n.target=s,n.method="POST",n.setAttribute("accept-charset","utf-8"),o.name="d",n.appendChild(o),document.body.appendChild(n),this.form=n,this.area=o}this.form.action=this.uri();function i(){g(),t()}function g(){if(r.iframe)try{r.form.removeChild(r.iframe)}catch(a){r.onError("jsonp polling iframe removal error",a)}try{var f='<iframe src="javascript:0" name="'+r.iframeId+'">';c=document.createElement(f)}catch{c=document.createElement("iframe"),c.name=r.iframeId,c.src="javascript:0"}c.id=r.iframeId,r.form.appendChild(c),r.iframe=c}g(),e=e.replace(B2,`\\
`),this.area.value=e.replace(P2,"\\n");try{this.form.submit()}catch{}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){r.iframe.readyState==="complete"&&i()}:this.iframe.onload=i};var nu=eu(),j2=On,D2=ii,M2=Fs,U2=td,$2=js("engine.io-client:websocket"),us,iu;typeof WebSocket<"u"?us=WebSocket:typeof self<"u"&&(us=self.WebSocket||self.MozWebSocket);if(typeof window>"u")try{iu=eo}catch{}var Zn=us||iu,z2=yr;function yr(e){var t=e&&e.forceBase64;t&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=us&&!e.forceNode,this.protocols=e.protocols,this.usingBrowserWebSocket||(Zn=iu),nu.call(this,e)}M2(yr,nu);yr.prototype.name="websocket";yr.prototype.supportsBinary=!0;yr.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=this.protocols,r={};this.isReactNative||(r.agent=this.agent,r.perMessageDeflate=this.perMessageDeflate,r.pfx=this.pfx,r.key=this.key,r.passphrase=this.passphrase,r.cert=this.cert,r.ca=this.ca,r.ciphers=this.ciphers,r.rejectUnauthorized=this.rejectUnauthorized),this.extraHeaders&&(r.headers=this.extraHeaders),this.localAddress&&(r.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?t?new Zn(e,t):new Zn(e):new Zn(e,t,r)}catch(n){return this.emit("error",n)}this.ws.binaryType===void 0&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}};yr.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}};yr.prototype.write=function(e){var t=this;this.writable=!1;for(var r=e.length,n=0,o=r;n<o;n++)(function(c){j2.encodePacket(c,t.supportsBinary,function(i){if(!t.usingBrowserWebSocket){var g={};if(c.options&&(g.compress=c.options.compress),t.perMessageDeflate){var f=typeof i=="string"?Buffer.byteLength(i):i.length;f<t.perMessageDeflate.threshold&&(g.compress=!1)}}try{t.usingBrowserWebSocket?t.ws.send(i):t.ws.send(i,g)}catch{$2("websocket closed before onclose event")}--r||s()})})(e[n]);function s(){t.emit("flush"),setTimeout(function(){t.writable=!0,t.emit("drain")},0)}};yr.prototype.onClose=function(){nu.prototype.onClose.call(this)};yr.prototype.doClose=function(){typeof this.ws<"u"&&this.ws.close()};yr.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",r="";this.port&&(t==="wss"&&Number(this.port)!==443||t==="ws"&&Number(this.port)!==80)&&(r=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=U2()),this.supportsBinary||(e.b64=1),e=D2.encode(e),e.length&&(e="?"+e);var n=this.hostname.indexOf(":")!==-1;return t+"://"+(n?"["+this.hostname+"]":this.hostname)+r+this.path+e};yr.prototype.check=function(){return!!Zn&&!("__initialize"in Zn&&this.name===yr.prototype.name)};var G2=Qc,V2=O2,q2=L2,H2=z2;Bs.polling=W2;Bs.websocket=H2;function W2(e){var t,r=!1,n=!1,o=e.jsonp!==!1;if(typeof location<"u"){var s=location.protocol==="https:",c=location.port;c||(c=s?443:80),r=e.hostname!==location.hostname||c!==e.port,n=e.secure!==s}if(e.xdomain=r,e.xscheme=n,t=new G2(e),"open"in t&&!e.forceJSONP)return new V2(e);if(!o)throw new Error("JSONP disabled");return new q2(e)}var Z2=[].indexOf,sd=function(e,t){if(Z2)return e.indexOf(t);for(var r=0;r<e.length;++r)if(e[r]===t)return r;return-1},K2=Bs,Y2=ni,$t=js("engine.io-client:socket"),X2=sd,ad=On,rf=Gh,Q2=ii,J2=pt;function pt(e,t){if(!(this instanceof pt))return new pt(e,t);t=t||{},e&&typeof e=="object"&&(t=e,e=null),e?(e=rf(e),t.hostname=e.host,t.secure=e.protocol==="https"||e.protocol==="wss",t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=rf(t.host).host),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?443:80),this.query=t.query||{},typeof this.query=="string"&&(this.query=Q2.decode(this.query)),this.upgrade=t.upgrade!==!1,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=t.jsonp!==!1,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.withCredentials=t.withCredentials!==!1,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.transportOptions=t.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=t.perMessageDeflate!==!1?t.perMessageDeflate||{}:!1,this.perMessageDeflate===!0&&(this.perMessageDeflate={}),this.perMessageDeflate&&this.perMessageDeflate.threshold==null&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||void 0,this.key=t.key||void 0,this.passphrase=t.passphrase||void 0,this.cert=t.cert||void 0,this.ca=t.ca||void 0,this.ciphers=t.ciphers||void 0,this.rejectUnauthorized=t.rejectUnauthorized===void 0?!0:t.rejectUnauthorized,this.forceNode=!!t.forceNode,this.isReactNative=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative",(typeof self>"u"||this.isReactNative)&&(t.extraHeaders&&Object.keys(t.extraHeaders).length>0&&(this.extraHeaders=t.extraHeaders),t.localAddress&&(this.localAddress=t.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}pt.priorWebsocketSuccess=!1;Y2(pt.prototype);pt.protocol=ad.protocol;pt.Socket=pt;pt.Transport=eu();pt.transports=Bs;pt.parser=On;pt.prototype.createTransport=function(e){$t('creating transport "%s"',e);var t=ex(this.query);t.EIO=ad.protocol,t.transport=e;var r=this.transportOptions[e]||{};this.id&&(t.sid=this.id);var n=new K2[e]({query:t,socket:this,agent:r.agent||this.agent,hostname:r.hostname||this.hostname,port:r.port||this.port,secure:r.secure||this.secure,path:r.path||this.path,forceJSONP:r.forceJSONP||this.forceJSONP,jsonp:r.jsonp||this.jsonp,forceBase64:r.forceBase64||this.forceBase64,enablesXDR:r.enablesXDR||this.enablesXDR,withCredentials:r.withCredentials||this.withCredentials,timestampRequests:r.timestampRequests||this.timestampRequests,timestampParam:r.timestampParam||this.timestampParam,policyPort:r.policyPort||this.policyPort,pfx:r.pfx||this.pfx,key:r.key||this.key,passphrase:r.passphrase||this.passphrase,cert:r.cert||this.cert,ca:r.ca||this.ca,ciphers:r.ciphers||this.ciphers,rejectUnauthorized:r.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:r.perMessageDeflate||this.perMessageDeflate,extraHeaders:r.extraHeaders||this.extraHeaders,forceNode:r.forceNode||this.forceNode,localAddress:r.localAddress||this.localAddress,requestTimeout:r.requestTimeout||this.requestTimeout,protocols:r.protocols||void 0,isReactNative:this.isReactNative});return n};function ex(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}pt.prototype.open=function(){var e;if(this.rememberUpgrade&&pt.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){var t=this;setTimeout(function(){t.emit("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch{this.transports.shift(),this.open();return}e.open(),this.setTransport(e)};pt.prototype.setTransport=function(e){$t("setting transport %s",e.name);var t=this;this.transport&&($t("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(r){t.onPacket(r)}).on("error",function(r){t.onError(r)}).on("close",function(){t.onClose("transport close")})};pt.prototype.probe=function(e){$t('probing transport "%s"',e);var t=this.createTransport(e,{probe:1}),r=!1,n=this;pt.priorWebsocketSuccess=!1;function o(){if(n.onlyBinaryUpgrades){var y=!this.supportsBinary&&n.transport.supportsBinary;r=r||y}r||($t('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",function(l){if(!r)if(l.type==="pong"&&l.data==="probe"){if($t('probe transport "%s" pong',e),n.upgrading=!0,n.emit("upgrading",t),!t)return;pt.priorWebsocketSuccess=t.name==="websocket",$t('pausing current transport "%s"',n.transport.name),n.transport.pause(function(){r||n.readyState!=="closed"&&($t("changing transport and sending upgrade packet"),a(),n.setTransport(t),t.send([{type:"upgrade"}]),n.emit("upgrade",t),t=null,n.upgrading=!1,n.flush())})}else{$t('probe transport "%s" failed',e);var v=new Error("probe error");v.transport=t.name,n.emit("upgradeError",v)}}))}function s(){r||(r=!0,a(),t.close(),t=null)}function c(y){var l=new Error("probe error: "+y);l.transport=t.name,s(),$t('probe transport "%s" failed because of error: %s',e,y),n.emit("upgradeError",l)}function i(){c("transport closed")}function g(){c("socket closed")}function f(y){t&&y.name!==t.name&&($t('"%s" works - aborting "%s"',y.name,t.name),s())}function a(){t.removeListener("open",o),t.removeListener("error",c),t.removeListener("close",i),n.removeListener("close",g),n.removeListener("upgrading",f)}t.once("open",o),t.once("error",c),t.once("close",i),this.once("close",g),this.once("upgrading",f),t.open()};pt.prototype.onOpen=function(){if($t("socket open"),this.readyState="open",pt.priorWebsocketSuccess=this.transport.name==="websocket",this.emit("open"),this.flush(),this.readyState==="open"&&this.upgrade&&this.transport.pause){$t("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}};pt.prototype.onPacket=function(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch($t('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data);break}else $t('packet received with socket readyState "%s"',this.readyState)};pt.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),this.readyState!=="closed"&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))};pt.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){t.readyState!=="closed"&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)};pt.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){$t("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)};pt.prototype.ping=function(){var e=this;this.sendPacket("ping",function(){e.emit("ping")})};pt.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emit("drain"):this.flush()};pt.prototype.flush=function(){this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&($t("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))};pt.prototype.write=pt.prototype.send=function(e,t,r){return this.sendPacket("message",e,t,r),this};pt.prototype.sendPacket=function(e,t,r,n){if(typeof t=="function"&&(n=t,t=void 0),typeof r=="function"&&(n=r,r=null),!(this.readyState==="closing"||this.readyState==="closed")){r=r||{},r.compress=r.compress!==!1;var o={type:e,data:t,options:r};this.emit("packetCreate",o),this.writeBuffer.push(o),n&&this.once("flush",n),this.flush()}};pt.prototype.close=function(){if(this.readyState==="opening"||this.readyState==="open"){this.readyState="closing";var e=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?n():t()}):this.upgrading?n():t()}function t(){e.onClose("forced close"),$t("socket closing - telling transport to close"),e.transport.close()}function r(){e.removeListener("upgrade",r),e.removeListener("upgradeError",r),t()}function n(){e.once("upgrade",r),e.once("upgradeError",r)}return this};pt.prototype.onError=function(e){$t("socket error %j",e),pt.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)};pt.prototype.onClose=function(e,t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){$t('socket close with reason: "%s"',e);var r=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),r.writeBuffer=[],r.prevBufferLen=0}};pt.prototype.filterUpgrades=function(e){for(var t=[],r=0,n=e.length;r<n;r++)~X2(this.transports,e[r])&&t.push(e[r]);return t};Yc.exports=J2;Yc.exports.parser=On;var tx=Yc.exports,cd={exports:{}},rx=nx;function nx(e,t){var r=[];t=t||0;for(var n=t||0;n<e.length;n++)r[n-t]=e[n];return r}var ud=ix;function ix(e,t,r){return e.on(t,r),{destroy:function(){e.removeListener(t,r)}}}var nf=[].slice,ld=function(e,t){if(typeof t=="string"&&(t=e[t]),typeof t!="function")throw new Error("bind() requires a function");var r=nf.call(arguments,2);return function(){return t.apply(e,r.concat(nf.call(arguments)))}};(function(e,t){var r=Ls,n=ni,o=rx,s=ud,c=ld,i=Ns("socket.io-client:socket"),g=ii,f=Yh;e.exports=l;var a={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},y=n.prototype.emit;function l(v,A,d){this.io=v,this.nsp=A,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},d&&d.query&&(this.query=d.query),this.io.autoConnect&&this.open()}n(l.prototype),l.prototype.subEvents=function(){if(!this.subs){var v=this.io;this.subs=[s(v,"open",c(this,"onopen")),s(v,"packet",c(this,"onpacket")),s(v,"close",c(this,"onclose"))]}},l.prototype.open=l.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.reconnecting||this.io.open(),this.io.readyState==="open"&&this.onopen(),this.emit("connecting"),this)},l.prototype.send=function(){var v=o(arguments);return v.unshift("message"),this.emit.apply(this,v),this},l.prototype.emit=function(v){if(a.hasOwnProperty(v))return y.apply(this,arguments),this;var A=o(arguments),d={type:(this.flags.binary!==void 0?this.flags.binary:f(A))?r.BINARY_EVENT:r.EVENT,data:A};return d.options={},d.options.compress=!this.flags||this.flags.compress!==!1,typeof A[A.length-1]=="function"&&(i("emitting packet with ack id %d",this.ids),this.acks[this.ids]=A.pop(),d.id=this.ids++),this.connected?this.packet(d):this.sendBuffer.push(d),this.flags={},this},l.prototype.packet=function(v){v.nsp=this.nsp,this.io.packet(v)},l.prototype.onopen=function(){if(i("transport is open - connecting"),this.nsp!=="/")if(this.query){var v=typeof this.query=="object"?g.encode(this.query):this.query;i("sending connect packet with query %s",v),this.packet({type:r.CONNECT,query:v})}else this.packet({type:r.CONNECT})},l.prototype.onclose=function(v){i("close (%s)",v),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",v)},l.prototype.onpacket=function(v){var A=v.nsp===this.nsp,d=v.type===r.ERROR&&v.nsp==="/";if(!(!A&&!d))switch(v.type){case r.CONNECT:this.onconnect();break;case r.EVENT:this.onevent(v);break;case r.BINARY_EVENT:this.onevent(v);break;case r.ACK:this.onack(v);break;case r.BINARY_ACK:this.onack(v);break;case r.DISCONNECT:this.ondisconnect();break;case r.ERROR:this.emit("error",v.data);break}},l.prototype.onevent=function(v){var A=v.data||[];i("emitting event %j",A),v.id!=null&&(i("attaching ack callback to event"),A.push(this.ack(v.id))),this.connected?y.apply(this,A):this.receiveBuffer.push(A)},l.prototype.ack=function(v){var A=this,d=!1;return function(){if(!d){d=!0;var T=o(arguments);i("sending ack %j",T),A.packet({type:f(T)?r.BINARY_ACK:r.ACK,id:v,data:T})}}},l.prototype.onack=function(v){var A=this.acks[v.id];typeof A=="function"?(i("calling ack %s with %j",v.id,v.data),A.apply(this,v.data),delete this.acks[v.id]):i("bad ack %s",v.id)},l.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},l.prototype.emitBuffered=function(){var v;for(v=0;v<this.receiveBuffer.length;v++)y.apply(this,this.receiveBuffer[v]);for(this.receiveBuffer=[],v=0;v<this.sendBuffer.length;v++)this.packet(this.sendBuffer[v]);this.sendBuffer=[]},l.prototype.ondisconnect=function(){i("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},l.prototype.destroy=function(){if(this.subs){for(var v=0;v<this.subs.length;v++)this.subs[v].destroy();this.subs=null}this.io.destroy(this)},l.prototype.close=l.prototype.disconnect=function(){return this.connected&&(i("performing disconnect (%s)",this.nsp),this.packet({type:r.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},l.prototype.compress=function(v){return this.flags.compress=v,this},l.prototype.binary=function(v){return this.flags.binary=v,this}})(cd);var fd=cd.exports,ox=ai;function ai(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}ai.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+r:e-r}return Math.min(e,this.max)|0};ai.prototype.reset=function(){this.attempts=0};ai.prototype.setMin=function(e){this.ms=e};ai.prototype.setMax=function(e){this.max=e};ai.prototype.setJitter=function(e){this.jitter=e};var sx=tx,ax=fd,cx=ni,ux=Ls,Jr=ud,zn=ld,Zt=Ns("socket.io-client:manager"),hd=sd,lx=ox,dd=Object.prototype.hasOwnProperty,of=yt;function yt(e,t){if(!(this instanceof yt))return new yt(e,t);e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new lx({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var r=t.parser||ux;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this.autoConnect=t.autoConnect!==!1,this.autoConnect&&this.open()}yt.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var e in this.nsps)dd.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)};yt.prototype.updateSocketIds=function(){for(var e in this.nsps)dd.call(this.nsps,e)&&(this.nsps[e].id=this.generateId(e))};yt.prototype.generateId=function(e){return(e==="/"?"":e+"#")+this.engine.id};cx(yt.prototype);yt.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection};yt.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts};yt.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay};yt.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor};yt.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax};yt.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout};yt.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()};yt.prototype.open=yt.prototype.connect=function(e,t){if(Zt("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;Zt("opening %s",this.uri),this.engine=sx(this.uri,this.opts);var r=this.engine,n=this;this.readyState="opening",this.skipReconnect=!1;var o=Jr(r,"open",function(){n.onopen(),e&&e()}),s=Jr(r,"error",function(g){if(Zt("connect_error"),n.cleanup(),n.readyState="closed",n.emitAll("connect_error",g),e){var f=new Error("Connection error");f.data=g,e(f)}else n.maybeReconnectOnOpen()});if(this._timeout!==!1){var c=this._timeout;Zt("connect attempt will timeout after %d",c),c===0&&o.destroy();var i=setTimeout(function(){Zt("connect attempt timed out after %d",c),o.destroy(),r.close(),r.emit("error","timeout"),n.emitAll("connect_timeout",c)},c);this.subs.push({destroy:function(){clearTimeout(i)}})}return this.subs.push(o),this.subs.push(s),this};yt.prototype.onopen=function(){Zt("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(Jr(e,"data",zn(this,"ondata"))),this.subs.push(Jr(e,"ping",zn(this,"onping"))),this.subs.push(Jr(e,"pong",zn(this,"onpong"))),this.subs.push(Jr(e,"error",zn(this,"onerror"))),this.subs.push(Jr(e,"close",zn(this,"onclose"))),this.subs.push(Jr(this.decoder,"decoded",zn(this,"ondecoded")))};yt.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")};yt.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)};yt.prototype.ondata=function(e){this.decoder.add(e)};yt.prototype.ondecoded=function(e){this.emit("packet",e)};yt.prototype.onerror=function(e){Zt("error",e),this.emitAll("error",e)};yt.prototype.socket=function(e,t){var r=this.nsps[e];if(!r){r=new ax(this,e,t),this.nsps[e]=r;var n=this;r.on("connecting",o),r.on("connect",function(){r.id=n.generateId(e)}),this.autoConnect&&o()}function o(){~hd(n.connecting,r)||n.connecting.push(r)}return r};yt.prototype.destroy=function(e){var t=hd(this.connecting,e);~t&&this.connecting.splice(t,1),!this.connecting.length&&this.close()};yt.prototype.packet=function(e){Zt("writing packet %j",e);var t=this;e.query&&e.type===0&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(r){for(var n=0;n<r.length;n++)t.engine.write(r[n],e.options);t.encoding=!1,t.processPacketQueue()}))};yt.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}};yt.prototype.cleanup=function(){Zt("cleanup");for(var e=this.subs.length,t=0;t<e;t++){var r=this.subs.shift();r.destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()};yt.prototype.close=yt.prototype.disconnect=function(){Zt("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,this.readyState==="opening"&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()};yt.prototype.onclose=function(e){Zt("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()};yt.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)Zt("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();Zt("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var r=setTimeout(function(){e.skipReconnect||(Zt("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),!e.skipReconnect&&e.open(function(n){n?(Zt("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",n.data)):(Zt("reconnect success"),e.onreconnect())}))},t);this.subs.push({destroy:function(){clearTimeout(r)}})}};yt.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)};(function(e,t){var r=Nw,n=Ls,o=of,s=Ns("socket.io-client");e.exports=t=i;var c=t.managers={};function i(g,f){typeof g=="object"&&(f=g,g=void 0),f=f||{};var a=r(g),y=a.source,l=a.id,v=a.path,A=c[l]&&v in c[l].nsps,d=f.forceNew||f["force new connection"]||f.multiplex===!1||A,T;return d?(s("ignoring socket cache for %s",y),T=o(y,f)):(c[l]||(s("new io instance for %s",y),c[l]=o(y,f)),T=c[l]),a.query&&!f.query&&(f.query=a.query),T.socket(a.path,f)}t.protocol=n.protocol,t.connect=i,t.Manager=of,t.Socket=fd})(ec,ec.exports);var fx=ec.exports;const hx=gs(fx);function dx(e){const t=new un;return e({serialMonitorsMsgStream$:t}),t}function pd(e,t){let{serialMonitorsMsgStream$:r}=t;return r||(r=dx(e),r)}function md(e,t,r){pd(e,t).next(r)}function px(e){const t=new un;return e({serialMonitorsDisconnections$:t}),t}function gd(e,t){let{serialMonitorsDisconnections$:r}=t;return r||(r=px(e),r)}function hc(e,t,r){gd(e,t).next(r)}function mx(e,t,r,n){const o=pd(e,t),s=r.find(g=>g.port===n),c=gd(e,t);if(!s)throw new Error(`Cannot find serial monitor with port ${n}`);const i=c.pipe(kn(g=>g===n));return qm(o.pipe(kn(g=>g.port===n),Xi(g=>g.data),Wm(i)),i.pipe(Hm(()=>_r(()=>new bd))))}function gx(e,t){return function([r,n]){if(!n[t])return!1;const o=n[t].find(s=>s.port===e);return(o==null?void 0:o.status)===Qt.OPENED}}function vx(e,t,r){return function([n,o]){var c;if(!o[t])return!1;const s=(c=o[r])==null?void 0:c.find(i=>i.portName===e);return!o[t].some(i=>i.port===e)&&!(s!=null&&s.isOpen)}}function vd(e,t,r,n,o,s){return Uf(t,r,gx(n,r),o,100,s).pipe(Zm(c=>{var i;if(!c||((i=c.find(g=>g.port===n))==null?void 0:i.status)!==Qt.OPENED)throw new Error("Could not open serial monitor");return Km(Ym({type:"info",value:"ready"}),mx(e,t,c,n).pipe(Xi(g=>({type:"message",value:g}))))}))}function yd(e,t,r,n,o,s){return Uf(e,t,vx(n,t,r),o,5e3,s).pipe(Xi(c=>{if(c.some(i=>i.port===n))throw new Error("Could not close serial monitor");return n}))}var Qt=(e=>(e.Open="Open",e.OpenFail="OpenFail",e.Close="Close",e))(Qt||{}),Qt=(e=>(e.NONE="none",e.OPENED="opened",e.FAILED="failed",e.CLOSED="closed",e))(Qt||{});class bd extends Error{constructor(){super("Board disconnected"),this.name="BoardDisconnectionError"}}class ou extends Error{constructor(t){super(`Serial monitor at ${t} is already open`),this.name="PortAlreadyOpenError"}}const wd=[300,1200,2400,4800,9600,19200,38400,57600,115200],OC=[...wd],NC=9600;function LC(e){return wd.includes(e)}var Ht=(e=>(e[e.NONE=0]="NONE",e[e.IN_PROG=1]="IN_PROG",e[e.DONE=2]="DONE",e[e.ERROR=3]="ERROR",e))(Ht||{});const PC=e=>!!e,xd="END",yx="COMPILE_STREAM_UPDATE";function _d(e){const t=new un;return e({uploadResponseStream$:t}),t}function bx(e,t){let{uploadResponseStream$:r}=t;return r||(r=_d(e),r)}function Ki(e,t,r,n){bx(e,t).next({value:r,meta:n})}function wx(e,t){const r=t.pipe(xc((n,{value:o,meta:s})=>(s==null?void 0:s.signal)===xd?"":(s==null?void 0:s.signal)===yx?o:`${n&&`${n}
`}${o||""}`,""),Jn(1));return e({uploadConcatResponseStream$:r}),r}function BC(e,t){let{uploadConcatResponseStream$:r}=t;if(r)return r;let{uploadResponseStream$:n}=t;return n||(n=_d(e)),r=wx(e,n),r}function FC(e,t){const{uploadResponseStream$:r}=t;if(!r)return;Ki(e,t,"",{signal:xd}),r.complete(),e({uploadResponseStream$:void 0});const{uploadConcatResponseStream$:n}=t;n&&(n.complete(),e({uploadConcatResponseStream$:void 0}))}function xx(e){const{category:t,data:r}=e;if(t===Ft.ListCommandPortsResponse){if(!St[ot.PortsListQuota].length)return;At({[ot.PortsListQuota]:St[ot.PortsListQuota].slice(1)}),At({[ot.Ports]:r.ports})}if(t===Ft.ListCommandNetworkPortsResponse&&At({[ot.NetworkPorts]:r.ports}),t===Ft.DownloadStatusResponse){const{downloadQuota:n}=St,o=n.findIndex(c=>c.status===xn.Sent||c.status===xn.Pending);if(o===-1)return;const s=n[o];if(r.status===Ja.Pending){if(s.status===xn.Pending)return;n[o]={...s,status:xn.Pending},At({[ot.DownloadQuota]:n});return}if(r.status===Ja.Success){n[o]={...s,status:xn.Success},At({[ot.DownloadQuota]:n});return}n[o]={...s,status:xn.Error},At({[ot.DownloadQuota]:n})}if(t===Ft.Upload){if(!St[ot.UploadQuota].length)return;if((r==null?void 0:r.flash)==="Ok"&&r.status===_n.Done){At({[ot.UploadStatus]:Ht.DONE}),Ki(At,St,r.flash);return}switch(r.status){case _n.Starting:At({[ot.UploadStatus]:Ht.IN_PROG});break;case _n.Busy:At({[ot.UploadStatus]:Ht.IN_PROG});break;case _n.Error:At({[ot.UploadStatus]:Ht.ERROR});break;case _n.Killed:At({[ot.UploadStatus]:Ht.ERROR});break;case _n.NotFound:At({[ot.UploadStatus]:Ht.ERROR});break;default:At({[ot.UploadStatus]:Ht.IN_PROG})}(St[ot.UploadStatus]===Ht.ERROR||St[ot.UploadStatus]===Ht.DONE)&&At({[ot.UploadQuota]:St[ot.UploadQuota].slice(1)}),r.message&&Ki(At,St,r.message)}if(t===Ft.SerialMonitorStatusUpdate){const n=St[ot.SerialMonitors],s=n.findIndex(i=>i.port===r.port)!==-1;let c;switch(r.status){case Qt.Open:case Qt.OpenFail:{const i=r.status,g={[Qt.Open]:Qt.OPENED,[Qt.OpenFail]:Qt.FAILED};s?(i===Qt.OpenFail&&hc(At,St,r.port),c=n.map(f=>f.port===r.port?{...f,status:g[i]}:f)):c=[...n,{status:g[i],port:r.port,baudRate:r.baudRate}];break}case Qt.Close:s?(hc(At,St,r.port),c=n.filter(i=>i.port!==r.port)):c=n;break;default:c=n}At({[ot.SerialMonitors]:c})}t===Ft.SerialMonitorMessage&&md(At,St,r)}function _x(e,t){const r=ww[t];return r(e)}function Ex(e){let t=Ft.Unknown;const r=e.Ports,n=e.Network;return r&&!n&&(t=Ft.ListCommandPortsResponse),r&&n&&(t=Ft.ListCommandNetworkPortsResponse),e.DownloadStatus&&(t=Ft.DownloadStatusResponse),e.ProgrammerStatus&&(t=Ft.Upload),e.Cmd in Qt&&(t=Ft.SerialMonitorStatusUpdate),e.P&&e.D&&(t=Ft.SerialMonitorMessage),t}function Sx(e){try{return JSON.parse(e)}catch{return{}}}function Cx(e){const t=Sx(e),r=Ex(t),n=_x(t,r);xx({category:r,data:n})}function kx(){var t;const{socket:e}=St;e&&(e.removeAllListeners(),(t=e.destroy)==null||t.call(e))}function Ax(e){const{socketEventsAreSet:t}=St;t||(e.on("connect",()=>{At({[ot.SocketConnected]:!0})}),e.on("message",Cx),e.on("error",()=>{}),e.on("disconnect",()=>{At({[ot.SocketConnected]:!1})}),At({socketEventsAreSet:!0}))}function Ix(e){return hx(e,{transports:["websocket"]})}function Tx(e){let{socket:t}=St;return t||(t=Ix(e),At({[ot.Socket]:t}),t)}function jC(e){const t=Tx(e);Ax(t)}function Rx(e,t=9600){return bs(()=>{const{[ot.Ports]:r,[ot.Socket]:n,[ot.UploadStatus]:o,[ot.SerialMonitors]:s}=St;if(o===Ht.IN_PROG)return _r(()=>new Error("Could not open serial monitor, upload in progress"));if(!n)return _r(()=>new Error("Could not open serial monitor, no connection to agent"));const c=r.find(i=>i.portName===e);return c?c.isOpen?_r(()=>new ou(e)):(n.emit("command",`open ${e} ${t} timed`),vd(At,St,ot.SerialMonitors,e,s,Os())):_r(()=>new Error(`Could not open serial monitor, can't find board at ${e}`))})}function Ox(e){return bs(()=>{const{[ot.Socket]:t,[ot.SerialMonitors]:r}=St;return t?(t.emit("command",`close ${e}`),yd(St,ot.SerialMonitors,ot.Ports,e,r,Os())):_r(()=>new Error("Could not close serial monitor, no connection to agent"))})}function Nx(e,t){const{[ot.Socket]:r,[ot.SerialMonitors]:n}=St;if(!r)throw new Error("Could not close serial monitor, no connection to agent");if(!n.some(({port:o})=>o===e))throw new Error(`Could not find an opened serial monitor on port ${e}`);r.emit("command",`send ${e} ${t}`)}var _n=(e=>(e.Starting="Starting",e.Busy="Busy",e.Error="Error",e.Killed="Killed",e.NotFound="Error 404 Not Found",e.Done="Done",e))(_n||{}),Ed=(e=>(e[e.Change=0]="Change",e[e.Success=1]="Success",e[e.Error=2]="Error",e))(Ed||{}),Sd=(e=>(e[e.Toast=0]="Toast",e[e.NonUI=1]="NonUI",e))(Sd||{});const Lx=e=>!!(e&&e.mode===0);let Xn={};function Px(){Xn={}}function Bx(e,t){return{...e,...t}}function su(e){Xn=Bx(Xn,e)}function Fx(e){const t=new In(e);return su({$notificationStream:t}),t}const jx=null;function Cd(e=jx){let{$notificationStream:t}=Xn;return t||(t=Fx(e),t)}function Dx({id:e=Dr.uniqueId(),type:t=Ed.Change,...r}){return Cd().next({...r,id:e,type:t}),e}function Mx(e){const t=e.pipe(kn(Lx),Jn(1));return su({$toastNotificationStream:t}),t}function DC(){let{$toastNotificationStream:e}=Xn;if(e)return e;const t=Cd();return e=Mx(t),e}function Ux(){const e=new un().pipe(Jn(1));return su({$toastNotificationDismissalStream:e}),e}function $x(){let{$toastNotificationDismissalStream:e}=Xn;return e||(e=Ux(),e)}function zx(e){$x().next({toastId:e})}let ls={};function Gx(){ls={}}function Vx(e,t){return{...e,...t}}function qx(e){ls=Vx(ls,e)}function Hx(e){const t=new Map(e);return qx({preferencesSubjects:t}),t}async function Wx(e){let{preferencesSubjects:t}=ls;if(t)return t;const r=await Yx();return t=Hx(r),t}async function kd(e,t){const r=await Ad(e);if(!r)throw new Error(`Preference subject with id ${e} not found`);r.next(t)}async function Ad(e){return(await Wx()).get(e)}function Zx(){Object.values(Jo).forEach((e,t)=>{const r=Object.keys(Jo)[t];kd(r,e)})}function Kx(e,t,r){return r.set(e,t),t.subscribe(n=>{Yf(e,n)}),t}async function Yx(){const e=new Map,t=Object.keys(Jo),r=Object.values(Jo);return(await kg(t)).forEach((o,s)=>{const c=t[s],i=new In(o??r[s]);Kx(c,i,e)}),e}async function Xx(e){if(!e)throw new Error("No user_id provided");const t=await bt(void 0,!0);if(!t)return wt();const r=nr();return Xm({user_id:e,header:r?{[Qm]:r}:void 0},t)}function Qx(e){const t=Jx(e);return t.usage>=t.limit}function Jx(e){return{limit:e.limits.create_compilation_number_day,usage:e.usage.create_compilation_number_day_current}}function e_(e){return e.limits.ota>0}function t_(e){var t;return(t=e.plans)==null?void 0:t.some(r=>r==="organization-member")}const sf={"arduino:avr:uno":{name:"Arduino Uno",flasher:"avr",avr_name:"uno",ids:[{vid:9025,pid:67},{vid:9025,pid:1},{vid:10755,pid:67},{vid:9025,pid:579}]},"arduino:megaavr:uno2018":{name:"Arduino Uno WiFi Rev2",flasher:"avr",ids:[{vid:1003,pid:8517}],avr_name:"unowifirev2"},"arduino:samd:mkrwifi1010":{name:"Arduino MKR WiFi 1010",flasher:"sam-ba",iot_enabled:!0,ids:[{vid:9025,pid:84},{vid:9025,pid:32852,bootloader:!0}],use_1200bps_touch:!0},"arduino:mbed_nano:nanorp2040connect":{name:"Arduino Nano RP2040 Connect",flasher:"rp",iot_enabled:!1,supports_uf2:!0,ids:[{vid:9025,pid:94},{vid:9025,pid:32862},{vid:9025,pid:350},{vid:9025,pid:606}],use_1200bps_touch:!0},"arduino:samd:nano_33_iot":{name:"Arduino NANO 33 IoT",flasher:"sam-ba",iot_enabled:!0,ids:[{vid:9025,pid:87},{vid:9025,pid:32855,bootloader:!0}],use_1200bps_touch:!0},"arduino:renesas_uno:minima":{name:"Arduino Uno R4 Minima",flasher:"dfu",iot_enabled:!1,ids:[{vid:9025,pid:105},{vid:9025,pid:873,bootloader:!0}],use_1200bps_touch:!0},"arduino:renesas_uno:unor4wifi":{name:"Arduino Uno R4 WiFi",flasher:"sam-ba-renesas",iot_enabled:!0,ids:[{vid:9025,pid:4098},{vid:9025,pid:109,bootloader:!0}]}};function Id(e){return e.map(r=>({serialNumber:"",vendorId:r.vendorId,productId:r.productId,id:r.fqbn.split(":")[2],name:sf[r.fqbn]?sf[r.fqbn].name:Tc.UNKNOWN_BOARD_NAME,portBoardId:r.name,fqbn:r.fqbn,portName:`${r.vendorId}/${r.productId}`,isOpen:r.isOpen,architecture:r.fqbn.split(":")[1]}))}function au(){let{stateChangeSubject$:e}=zt;return e||(e=jf(Xt),e)}var Ct=(e=>(e.WebSerialConnected="webSerialConnected",e.Ports="ports",e.UploadStatus="uploadStatus",e.SerialMonitors="serialMonitors",e.SupportedFqbns="supportedFqbns",e))(Ct||{});const Td={[Ct.WebSerialConnected]:!1,[Ct.Ports]:[],[Ct.SerialMonitors]:[],[Ct.SupportedFqbns]:[]};let zt={...Td};function r_(){zt={...Td}}function Xt(e,t=!1){zt=Df(zt,e);const r=au();t||Mf(zt,r)}function MC(){const{[Ct.WebSerialConnected]:e,uploadConcatResponseStream$:t,uploadResponseStream$:r,serialMonitorsMsgStream$:n,serialMonitorsDisconnections$:o,stateChangeSubject$:s,...c}=zt;return{...c,[Ct.WebSerialConnected]:null}}function n_(e,t){return!e||!t||e.length!==t.length?!1:e.every((r,n)=>t[n].portName===r.portName&&t[n].isOpen===r.isOpen)}let sn=null;function i_(){sn=null}class o_{debug(t,r){this.shouldLogUploadMessage()&&this.uploadLog(t),console.log(t,r)}info(t,r){this.shouldLogUploadMessage()&&this.uploadLog(t),console.log(t,r)}warn(t,r){console.warn(t,r)}error(t,r){console.error(t,r)}shouldLogUploadMessage(){return console.log(zt[Ct.UploadStatus]),zt[Ct.UploadStatus]===Ht.IN_PROG}uploadLog(t){t.toLowerCase().includes("checked response")||Ki(Xt,zt,t)}}function s_(){return sn=new Tc.Uploader({whiteListedOrigins:[at.APP_ORIGIN,at.WEB_IDE_URL],logger:new o_}),sn.onMessage(a_),sn}function Ds(){return sn||(sn=s_(),sn)}function a_(e){var t,r;if(e.portCloseStatus==="success"){const{[Ct.SerialMonitors]:n}=zt,o=(t=n[0])==null?void 0:t.port,c=n.findIndex(g=>g.port===o)!==-1;let i;c?(hc(Xt,zt,o),i=n.filter(g=>g.port!==o)):i=n,Xt({[Ct.SerialMonitors]:i})}if(e.serialData){const{[Ct.SerialMonitors]:n}=zt,o=(r=n[0])==null?void 0:r.port;md(Xt,zt,{port:o,data:e.serialData})}if(e.ports&&Array.isArray(e.ports)){const n=e.ports.filter(c_),o=zt[Ct.Ports],s=Id(n);n_(o,s)||Xt({[Ct.Ports]:s})}if(e.supportedBoards&&Xt({[Ct.SupportedFqbns]:Object.keys(e.supportedBoards)}),e.uploadStatus)switch(Ki(Xt,zt,e.message),e.uploadStatus){case"message":Xt({[Ct.UploadStatus]:Ht.IN_PROG});break;case"error":Xt({[Ct.UploadStatus]:Ht.ERROR});break;case"success":Xt({[Ct.UploadStatus]:Ht.DONE});break;default:Xt({[Ct.UploadStatus]:Ht.NONE})}e.err&&Xt({uploadStatus:Ht.ERROR})}function c_(e){return e.name!==void 0&&e.vendorId!==void 0&&e.productId!==void 0&&e.fqbn!==void 0&&e.isOpen!==void 0}async function UC(){const t=await Ds().listBoards();return Id(t)}async function u_(e,t){const r=Ds();Object.keys(r.openPorts).some(n=>n===e&&r.openPorts[n]===!0)||await r.openPort({name:e,baudrate:t})}async function l_(e){await Ds().closePort({name:e})}function f_(e,t){Ds().writePort({name:e,data:t})}async function $C(){const e=navigator;return e.serial?(await e.serial.requestPort()).getInfo():Promise.reject(new Error("Web Serial API is not available"))}function h_(e,t=9600){return bs(()=>{const{[Ct.Ports]:r,[Ct.UploadStatus]:n,[Ct.SerialMonitors]:o}=zt;if(n===Ht.IN_PROG)return _r(()=>new Error("Could not open serial monitor, upload in progress"));const s=r.find(f=>f.portName===e);if(!s)return _r(()=>new Error(`Could not open serial monitor, can't find board at ${e}`));if(s.isOpen)return _r(()=>new ou(e));const i=o.findIndex(f=>f.port===e)!==-1;let g;return i?g=o.map(f=>f.port===e?{...f}:f):g=[...o,{port:e,baudRate:t,status:Qt.OPENED}],u_(e,9600),Xt({[Ct.SerialMonitors]:g}),vd(Xt,zt,Ct.SerialMonitors,e,o,au())})}function d_(e){return bs(()=>{const{[Ct.SerialMonitors]:t}=zt;return l_(e),yd(zt,Ct.SerialMonitors,Ct.Ports,e,t,au())})}function p_(e,t){const{[Ct.SerialMonitors]:r}=zt;if(!r.some(({port:n})=>n===e))throw new Error(`Could not find an opened serial monitor on port ${e}`);f_(e,t)}let er,an;function m_(){er=void 0,an=void 0}function g_(e){return t=>{let r=!1;return t.pipe($f(n=>{r=e(n)}),tg(n=>r?rg:_r(()=>n)))}}function v_(){return an=new un,an}function y_(e,t,r){return er=new un().pipe(Qo(()=>{er=void 0}),$f(({type:o,value:s})=>{o==="info"&&s==="ready"&&r()}),g_(({type:o,value:s})=>o==="info"&&s==="closing"),kn(({type:o})=>o==="message")),(Mc?h_:Rx)(e,t).pipe(eg({delay:(o,s)=>o instanceof bd||o instanceof ou||s>4?_r(()=>o):ng(s**2*100)})).subscribe(er),er}function zC(e,t,r,n=()=>{}){if(!(!t||!r||!(e===ul.Starting||e===ul.Active)))return er||(er=y_(t,r,n)),er}function b_(){return an||(an=v_()),an}function GC(e,t){e.meta==="sent"&&t&&(Mc?p_(t,e.value):Nx(t,e.value)),er==null||er.next(e)}async function VC(e){e&&(er==null||er.next({type:"info",value:"closing"}),await Jm((Mc?d_:Ox)(e)),er=void 0)}function qC(){an=b_(),an.next()}async function w_(){const e=await bt(void 0,!0);return e?ig(e):wt()}const x_={userNotTargetAudience:!1,compileUsageExceeded:void 0,canUseOta:void 0,canUseGenAi:void 0,isAuthInjected:!1},Qn=Oe.createContext(x_),__={headerless:!1,notificationElement:null,updateLogic:og},ro=Oe.createContext(__);var Wt=(e=>(e.Sketch="Sketch",e.Example="Example",e.CustomLibrary="CustomLibrary",e.None="None",e))(Wt||{}),E_=(e=>(e.Rename="Rename",e.Download="Download",e.Delete="Delete",e.Share="Share",e.ShareToClassroom="ShareToClassroom",e))(E_||{}),S_=(e=>(e.Download="Download",e.Delete="Delete",e))(S_||{}),C_=(e=>(e.CopyToSketches="CopyToSketches",e.Download="Download",e.Share="Share",e))(C_||{});const k_="_warning_1n54v_12",bn={"title-skeleton":"_title-skeleton_1n54v_1",warning:k_,"read-only-header":"_read-only-header_1n54v_16","logo-container":"_logo-container_1n54v_26","right-item-container":"_right-item-container_1n54v_37","user-avatar":"_user-avatar_1n54v_42"},Da=cn({[Wt.Sketch]:{id:"headerTitle.sketch",defaultMessage:"Sketches",description:"Sketches"},[Wt.Example]:{id:"headerTitle.example",defaultMessage:"Example",description:"Example"},[Wt.CustomLibrary]:{id:"headerTitle.customLibrary",defaultMessage:"Library",description:"Library"}}),A_=cn({signIn:{id:"header.signIn",defaultMessage:"Sign In",description:"Sign In"}}),af={[Wt.CustomLibrary]:Da[Wt.CustomLibrary],[Wt.Example]:Da[Wt.Example],[Wt.Sketch]:Da[Wt.Sketch]},I_=e=>{const{headerLogic:t}=e,{user:r,isReadOnly:n,canShareToClassroom:o,readOnlyAvatarLink:s,headerItemId:c,itemName:i,itemDataIsLoading:g,headerActions:f}=t(),{formatMessage:a}=Tn();return n?X.jsxs("div",{className:bn["read-only-header"],children:[X.jsx("div",{className:bn["logo-container"],children:X.jsx(en.ArduinoLoop,{})}),X.jsx("div",{className:bn["right-item-container"],children:r?r.picture?X.jsx("a",{href:s,target:"_blank",rel:"noreferrer",children:X.jsx("img",{className:bn["user-avatar"],src:r.picture,alt:"User avatar",width:"36",height:"36"})}):null:r===null?X.jsx(_c,{type:ag.Tertiary,onClick:es,children:a(A_.signIn)}):null})]}):X.jsxs(X.Fragment,{children:[X.jsxs(pb,{asDialog:"header",children:[X.jsx(Cb,{}),X.jsxs(lb,{children:[X.jsx(gb,{}),X.jsx(hb,{}),X.jsx(ob,{})]}),X.jsx(Ab,{})]}),X.jsx(ub,{children:c===Wt.None||!f?null:g?X.jsx("div",{className:bn["title-skeleton"],children:X.jsx(sg,{variant:"rounded",count:1})}):X.jsxs(sb,{children:[X.jsx(Eh,{children:c!==Wt.Sketch?a(af[c]):X.jsx("a",{href:`${at.CLOUD_HOME_URL}/sketches`,children:a(af[c])})}),X.jsx(ab,{}),X.jsxs(cb,{triggerContent:i,children:[c===Wt.Sketch&&X.jsxs(X.Fragment,{children:[X.jsx(br,{onClick:f[c].Rename,children:"Rename"}),X.jsx(br,{onClick:f[c].Download,children:"Download"}),X.jsx(br,{onClick:f[c].Share,children:"Share Sketch"}),X.jsx(br,{onClick:f[c].ShareToClassroom,disabled:!o,children:"Share to Google Classroom"}),X.jsx(br,{className:bn.warning,onClick:f[c].Delete,children:"Delete"})]}),c===Wt.CustomLibrary&&X.jsxs(X.Fragment,{children:[X.jsx(br,{onClick:f[c].Download,children:"Download"}),X.jsx(br,{className:bn.warning,onClick:f[c].Delete,children:"Delete"})]}),c===Wt.Example&&X.jsxs(X.Fragment,{children:[X.jsx(br,{onClick:f[c].CopyToSketches,children:"Save in your sketches"}),X.jsx(br,{onClick:f[c].Download,children:"Download"}),X.jsx(br,{onClick:f[c].Share,children:"Share"})]})]})]})})]})},Ms=Oe.memo(I_),HC=Object.freeze(Object.defineProperty({__proto__:null,default:Ms},Symbol.toStringTag,{value:"Module"})),T_="data:image/svg+xml,%3csvg%20width='15'%20height='8'%20viewBox='0%200%2015%208'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M7.5%204.97755C8.35464%206.46437%209.6849%207.28125%2011.2596%207.28125C13.0637%207.28125%2014.5312%205.80931%2014.5312%204C14.5312%202.19069%2013.0637%200.71875%2011.2596%200.71875C9.6849%200.71875%208.35464%201.53563%207.5%203.02245C6.64536%201.53563%205.3151%200.71875%203.74039%200.71875C1.93634%200.71875%200.46875%202.19069%200.46875%204C0.46875%205.80931%201.93634%207.28125%203.74039%207.28125C5.3151%207.28125%206.64536%206.46437%207.5%204.97755ZM8.25531%204.40741L8.03353%204L8.25531%203.59259C8.9447%202.32573%209.98337%201.65625%2011.2596%201.65625C12.5466%201.65625%2013.5938%202.70773%2013.5938%204C13.5938%205.29227%2012.5466%206.34375%2011.2596%206.34375C9.98337%206.34375%208.9447%205.67427%208.25531%204.40741ZM1.40625%204C1.40625%202.70773%202.45338%201.65625%203.74039%201.65625C5.01663%201.65625%206.0553%202.32573%206.74469%203.59259L6.96647%204L6.74469%204.40741C6.0553%205.67427%205.01663%206.34375%203.74039%206.34375C2.45339%206.34375%201.40625%205.29227%201.40625%204ZM11.3688%204.35175H12.0849V3.66663H11.3688V2.94565H10.684V3.66663H9.96693V4.35175H10.684V5.07273H11.3688V4.35175ZM5.013%203.66663H2.89407V4.35175H5.013V3.66663Z'%20fill='black'/%3e%3c/svg%3e",R_="data:image/svg+xml,%3csvg%20width='15'%20height='8'%20viewBox='0%200%2015%208'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M7.5%204.97755C8.35464%206.46437%209.6849%207.28125%2011.2596%207.28125C13.0637%207.28125%2014.5312%205.80931%2014.5312%204C14.5312%202.19069%2013.0637%200.71875%2011.2596%200.71875C9.6849%200.71875%208.35464%201.53563%207.5%203.02245C6.64536%201.53563%205.3151%200.71875%203.74039%200.71875C1.93634%200.71875%200.46875%202.19069%200.46875%204C0.46875%205.80931%201.93634%207.28125%203.74039%207.28125C5.3151%207.28125%206.64536%206.46437%207.5%204.97755ZM8.25531%204.40741L8.03353%204L8.25531%203.59259C8.9447%202.32573%209.98337%201.65625%2011.2596%201.65625C12.5466%201.65625%2013.5938%202.70773%2013.5938%204C13.5938%205.29227%2012.5466%206.34375%2011.2596%206.34375C9.98337%206.34375%208.9447%205.67427%208.25531%204.40741ZM1.40625%204C1.40625%202.70773%202.45338%201.65625%203.74039%201.65625C5.01663%201.65625%206.0553%202.32573%206.74469%203.59259L6.96647%204L6.74469%204.40741C6.0553%205.67427%205.01663%206.34375%203.74039%206.34375C2.45339%206.34375%201.40625%205.29227%201.40625%204ZM11.3688%204.35175H12.0849V3.66663H11.3688V2.94565H10.684V3.66663H9.96693V4.35175H10.684V5.07273H11.3688V4.35175ZM5.013%203.66663H2.89407V4.35175H5.013V3.66663Z'%20fill='white'/%3e%3c/svg%3e",O_={},Rd=Oe.createContext(O_),cf=cn({title:{id:"title",defaultMessage:"Cloud Editor",description:"Tab Title"},titleSuffix:{id:"title.suffix",defaultMessage:"Arduino Cloud Editor",description:"Tab Title Suffix"}}),cu=e=>{const{tabTitle:t}=e,{isDarkModeOs:r}=Oe.useContext(Rd),{formatMessage:n}=Tn();return X.jsxs(jp,{children:[X.jsx("title",{children:t?`${t} — ${n(cf.titleSuffix)}`:n(cf.title)}),X.jsx("link",{rel:"icon",type:"image/svg+xml",href:r?R_:T_})]})},N_={},L_=Oe.createContext(N_);function uf({getKeyFromAction:e,action:t,successMessage:r,onFailure:n=c=>{},alwaysShowSuccessMessage:o=!1,customErrors:s}){const c=Oe.useRef(new Map),{sendSuccessNotification:i,sendErrorNotification:g}=Oe.useContext(L_),f=Oe.useCallback(async(...a)=>{const y=e(...a);try{const l=await t(...a);if(c.current.has(y)||o){const v=c.current.get(y);i(r,v)}return c.current.delete(y),l}catch(l){n(l);const v=c.current.get(y),A=l,d=s==null?void 0:s.get(A.constructor),{toastId:T}=g(()=>{f(...a)},v,d,d?{hasErrorMessage:!!A.message,errorMessage:A.message}:void 0);c.current.set(y,T)}},[e,t,o,i,r,n,g,s]);return{wrappedAction:f}}const P_={hasError:!1};class B_ extends Oe.Component{constructor(t){super(t),this.state=P_}componentDidCatch(){this.setState({hasError:!0})}render(){return this.state.hasError?null:this.props.children}}const F_="_container_dbaw5_1",j_="_content_dbaw5_12",Ma={container:F_,"container-with-header":"_container-with-header_dbaw5_7",content:j_},D_="_container_1nfy1_1",M_="_content_1nfy1_8",U_="_title_1nfy1_18",$_="_message_1nfy1_23",z_="_divider_1nfy1_27",G_="_button_1nfy1_33",V_="_iconContainer_1nfy1_37",wn={container:D_,content:M_,title:U_,message:$_,divider:z_,button:G_,iconContainer:V_},Ti=cn({needHelpMessage:{id:"error.needHelpMessage",defaultMessage:"{getInTouchLink} with us",description:"Help msg for error page"},getInTouchLink:{id:"error.getInTouchLink",defaultMessage:"Get in touch",description:"Link to get in touch"},helpTitle:{id:"error.helpTitle",defaultMessage:"An Error Occurred",description:"Title for error page"},helpMessage:{id:"error.helpMessage",defaultMessage:"We're not sure what happened",description:"Help msg for error page"},copyError:{id:"error.copyError",defaultMessage:"Copy Error to Clipboard",description:"CTA to copy error to clipboard"}}),q_=e=>{const{onClickCopyError:t}=e,{formatMessage:r}=Tn(),n=X.jsx(zf,{href:at.ARDUINO_CONTACT_US_URL,target:"_blank",rel:"noreferrer",children:r(Ti.getInTouchLink)});return X.jsx("div",{className:wn.container,children:X.jsxs("div",{className:wn.content,children:[X.jsx("div",{className:wn.iconContainer,children:X.jsx(en.StatusError,{})}),X.jsx(Ec,{bold:!0,className:wn.title,children:r(Ti.helpTitle)}),X.jsx(Sc,{className:wn.message,children:r(Ti.helpMessage)}),X.jsx(_c,{classes:{button:wn.button},onClick:t,children:r(Ti.copyError)}),X.jsx("hr",{className:wn.divider}),ri()?void 0:X.jsx(Gf,{children:r(Ti.needHelpMessage,{getInTouchLink:n})})]})})},H_=Oe.memo(q_),W_=e=>{const{onClickCopyError:t}=e,r=()=>{const{user:c}=Oe.useContext(Qn),{viewMode:i}=zs(),g=Wt.None;return{isReadOnly:!!i,readOnlyAvatarLink:ri()?"":at.ID_URL,user:c,headerItemId:g}},n=Oe.useCallback(r,[]);let o=!1;const s=Oe.useContext(ro);return s&&(o=!!s.headerless),X.jsxs("div",{className:vs(Ma.container,{[Ma["container-with-header"]]:!o}),children:[X.jsxs(B_,{children:[o?null:X.jsx(cu,{}),o?null:X.jsx(Ms,{headerLogic:n})]}),X.jsx("div",{className:Ma.content,children:X.jsx(H_,{onClickCopyError:t})})]})},Z_=Oe.memo(W_),K_=function(e){const{data:t,isLoading:r}=Jt(["show-user-settings"],w_,{enabled:e});return{data:t,isLoading:r}};function Od(e){const t=Oe.useCallback(n=>{const o=e.subscribe(n);return()=>o.unsubscribe()},[e]),r=Oe.useCallback(()=>{if(e instanceof In)return e.getValue();{let n;return e.subscribe(o=>{n=o}).unsubscribe(),n}},[e]);return Oe.useSyncExternalStore(t,r)}const Y_="nav",Nd="eid",Ld="lid",WC="ui",uu="slid",Pd="clid",dc="createExample",pc="createSketch",Bd="sketchID",X_="optIn",Q_="bypassIotRedirect",J_="view-mode",eE="scope",tE="highlight",rE="hide-numbers",nE=["preview","embed","snippet"],iE="builder-v1";function oE(e){return nE.includes(e)}function sE(e){const[t,r]=e.replaceAll("L","").split("-");return!isNaN(Number(t))&&!isNaN(Number(r))}function aE(e){const[t,r]=e.replaceAll("L","").split("-").map(Number);return{start:t,end:r}}function cE(e){return e.split(",").every(t=>{const[r,n]=t.replaceAll("L","").split("-");return n?!isNaN(Number(r))&&!isNaN(Number(n)):!isNaN(Number(r))})}function uE(e){return[...new Set(e.split(",").flatMap(t=>{const[r,n]=t.replaceAll("L","").split("-").map(Number);return n?Array.from({length:n-r+1},(o,s)=>r+s):[r]}))]}var lE=(e=>(e.Fullscreen="fs",e))(lE||{});let lf=!1;function fE(e,t){const r=Dp(),{viewMode:n}=zs(),o=Ic(),s=Od(o),c=!!(n&&!s);$g(c);const i=!!(e||!e&&t),{data:g}=Jt(["auth-init"],Fg,{enabled:!i}),{data:f}=Jt(["auth-token"],()=>bt(void 0,!0,c),{enabled:!i&&!!g}),a=!!(f||f===""),{data:y}=Jt(["auth-check"],Dg,{enabled:a});Jt(["auth-login"],es,{enabled:a&&y===!1&&!c});const{data:l}=Jt(["auth-user"],Xf,{enabled:a&&y===!0}),v=e||l||void 0,{data:A}=Jt(["user-restrictions-recap",v==null?void 0:v[Li]],()=>Xx(v==null?void 0:v[Li]),{enabled:!!v});Jt(["analytics",v==null?void 0:v[Li]],()=>v?Zg(v):Promise.reject(),{enabled:!!v,onSuccess:async()=>{v&&!lf&&(Yg({type:"INIT"}),lf=!0)}});const{data:d}=K_(!!v);return{client:g,token:f,user:c&&f===ei?null:v,isAuthInjected:i,userNotTargetAudience:!1,compileUsageExceeded:A&&Qx(A),canUseOta:A&&e_(A),canUseGenAi:at.MODE==="production"?(d==null?void 0:d.genAi)===!0:!0,canShareToClassroom:A&&t_(A),canUseBuilderV2:at.MODE!=="production"?!r[iE]:!0}}const lu=({profile:e,profileIsLoading:t,children:r})=>{const{client:n,isAuthInjected:o,...s}=fE(e,t);return o?X.jsx(Qn.Provider,{value:{...s,isAuthInjected:!0},children:r}):X.jsx(Oe.Suspense,{children:n?X.jsx(Qn.Provider,{value:{...s,isAuthInjected:!1},children:X.jsx(cg,{env:{API_URL:at.API_URL},authClient:n,skipRedirectCallback:!0,children:r})}):null})},{API_URL:hE,ID_URL:dE,DIGITAL_STORE_URL:pE,CLOUD_CDN_URL:mE}=at,fu=({children:e})=>{const{isAuthInjected:t}=Oe.useContext(Qn);return t?X.jsx(X.Fragment,{children:e}):X.jsx(gE,{children:e})},gE=({children:e})=>{var r,n;const{client:t}=Cr();return X.jsx(ib,{api:{baseurl:hE},onSpaceChange:vE(((r=t.getCustomization())==null?void 0:r.url)||at.CLOUD_HOME_URL),env:{DIGITAL_STORE_URL:ri()?"":pE,ID_URL:dE,ICON_CDN:mE,CLOUD_HOME_URL:((n=t.getCustomization())==null?void 0:n.url)||at.CLOUD_HOME_URL},storage:Ih(),children:e})},vE=e=>t=>{window.location.href=`${e}/sketches`},fr=new Mp({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:!1}}}),hu=e=>{const{children:t}=e;return X.jsx(Up,{client:fr,children:t})},yE={},bE=Oe.createContext(yE),ff=ug.ENGLISH,du=({children:e})=>{const[t,r]=Oe.useState(ff);return X.jsx(bE.Provider,{value:{currentLocale:t,setCurrentLocale:r},children:X.jsx($p,{locale:t,defaultLocale:ff,children:e})})},ZC=function(){const e=Oe.useCallback((r,n)=>{kd(r,n)},[]),t=Oe.useCallback(()=>{Zx()},[]);return{setPreference:e,restorePreferences:t}};function hf(e){const[t,r]=Oe.useState(Ga);Oe.useEffect(()=>{(async()=>{const o=await Ad(e);r(o||Ga)})()},[e,t]);const n=Od(t);return t instanceof In?n:void 0}const wE="_themeContainer_17qd2_1",xE={themeContainer:wE},pu=e=>{const{children:t}=e,r=zp("(prefers-color-scheme:dark)"),n=hf(ll.Theme),s=hf(ll.AutoTheme)?r?va.DarkTheme:va.LightTheme:n??va.LightTheme,[c,i]=Oe.useState(String(s));return X.jsx(Rd.Provider,{value:{theme:c,setTheme:i,isDarkModeOs:r},children:X.jsx("div",{className:vs(c,xE.themeContainer),children:t})})},_E=new If,EE=({profile:e,profileIsLoading:t,children:r})=>X.jsx(Tf,{location:_E,routes:[],children:X.jsx(hu,{children:X.jsx(du,{children:X.jsx(lu,{profile:e,profileIsLoading:t,children:X.jsx(fu,{children:X.jsx(pu,{children:X.jsx(vc,{children:r})})})})})})}),SE=e=>{const{errorMsg:t,errorInfo:r,profile:n,profileIsLoading:o}=e,[s,c]=Gp(),i=Oe.useCallback(()=>{const g=`Error message: ${t}
Stack: ${r.componentStack}`;c(g)},[c,r.componentStack,t]);return X.jsx(EE,{profile:n,profileIsLoading:o,children:X.jsx(Z_,{onClickCopyError:i})})},CE={hasError:!1,errorMsg:void 0,errorInfo:void 0};class Fd extends Oe.Component{constructor(t){super(t),this.state=CE}componentDidCatch(t,r){this.setState({hasError:!0,errorInfo:r,errorMsg:t.message})}render(){return this.state.hasError?X.jsx(SE,{errorInfo:this.state.errorInfo,errorMsg:this.state.errorMsg,profile:this.context.profile,profileIsLoading:this.context.profileIsLoading}):this.props.children}}il(Fd,"contextType",ro);const kE="_container_1nf32_1",AE="_content_1nf32_13",Ua={container:kE,"container-with-header":"_container-with-header_1nf32_10",content:AE},Ri=cn({needHelpMessage:{id:"notFound.needHelpMessage",defaultMessage:"Need help? {getInTouchLink} with us",description:"Help msg for error page"},getInTouchLink:{id:"notFound.getInTouchLink",defaultMessage:"Get in touch",description:"Link to get in touch"},helpTitle:{id:"notFound.helpTitle",defaultMessage:"{type} not found",description:"Title for error page"},helpMessage:{id:"notFound.helpMessage",defaultMessage:"Unfortunately, we can’t find the {type} that you are looking for",description:"Help msg for error page"},goToSketches:{id:"notFound.goToSketches",defaultMessage:"Go to sketches",description:"CTA to go to sketch list"}}),IE="_container_17g8x_1",TE="_content_17g8x_8",RE="_title_17g8x_18",OE="_message_17g8x_23",NE="_divider_17g8x_27",LE="_button_17g8x_33",Gn={container:IE,content:TE,title:RE,message:OE,divider:NE,button:LE},PE=e=>{const{type:t}=e,{formatMessage:r}=Tn(),n=X.jsx(zf,{href:at.ARDUINO_CONTACT_US_URL,target:"_blank",rel:"noreferrer",children:r(Ri.getInTouchLink)}),o=()=>{window.location.href=`${at.CLOUD_HOME_URL}/sketches`};return X.jsx("div",{className:Gn.container,children:X.jsxs("div",{className:Gn.content,children:[X.jsx(en.NotFoundPageImage,{}),X.jsx(Ec,{bold:!0,className:Gn.title,children:r(Ri.helpTitle,{type:t})}),X.jsx(Sc,{className:Gn.message,children:r(Ri.helpMessage,{type:t})}),X.jsx(_c,{classes:{button:Gn.button},onClick:o,children:r(Ri.goToSketches)}),X.jsx("hr",{className:Gn.divider}),ri()?null:X.jsx(Gf,{children:r(Ri.needHelpMessage,{getInTouchLink:n})})]})})},BE=e=>{const{notFoundType:t}=e,r=()=>{const{user:c}=Oe.useContext(Qn),{viewMode:i}=zs(),g=Wt.None;return{isReadOnly:!!i,readOnlyAvatarLink:ri()?"":at.ID_URL,user:c,headerItemId:g}},n=Oe.useCallback(r,[]);let o=!1;const s=Oe.useContext(ro);return s&&(o=!!s.headerless),X.jsxs("div",{className:vs(Ua.container,{[Ua["container-with-header"]]:!o}),children:[o?null:X.jsx(cu,{}),o?null:X.jsx(Ms,{headerLogic:n}),X.jsx("div",{className:Ua.content,children:X.jsx(PE,{type:t})})]})},FE=({profile:e,profileIsLoading:t,children:r})=>X.jsx(hu,{children:X.jsx(du,{children:X.jsx(lu,{profile:e,profileIsLoading:t,children:X.jsx(fu,{children:X.jsx(pu,{children:X.jsx(vc,{children:r})})})})})}),$a=e=>{const{notFoundType:t,profile:r,profileIsLoading:n}=e;return X.jsx(FE,{profile:r,profileIsLoading:n,children:X.jsx(BE,{notFoundType:t})})};let df=!1;const jE=function(){const{isIotComponent:e}=Oe.useContext(ro),[t,r]=Oe.useState(!1);return Oe.useEffect(()=>{if(e)return;const n="hotjar-script";return function(o,s,c,i,g,f){o.hj=o.hj||function(){(o.hj.q=o.hj.q||[]).push(arguments)},o._hjSettings={hjid:1036685,hjsv:6},g=s.getElementsByTagName("head")[0],f=s.createElement("script"),f.setAttribute("id",n),f.async=1,f.src=c+o._hjSettings.hjid+i+o._hjSettings.hjsv,g.appendChild(f)}(window,document,"https://static.hotjar.com/c/hotjar-",".js?sv="),r(!0),()=>{if(e)return;delete window._hjSettings,delete window.hj;const o=document.getElementById(n);o&&o.remove()}},[e]),Oe.useEffect(()=>{(t||e)&&!df&&(window.hj("event","generic_survey_request"),df=!0)},[t,e]),{ready:!!(t||e)}};function DE(){const e=Object.assign(Oe.lazy(()=>Oi(()=>import("./MainPage-DiLM2QNQ.js").then(r=>r.M),__vite__mapDeps([0,1,2,3,4,5,6,7]))),{preload:async()=>{await Oi(()=>import("./MainPage-DiLM2QNQ.js").then(r=>r.M),__vite__mapDeps([0,1,2,3,4,5,6,7]))}}),t=Object.assign(Oe.lazy(()=>Oi(()=>import("./SerialMonitorPage-D6oh_I7F.js"),__vite__mapDeps([8,1,2,3,4,5,6]))),{preload:async()=>{await Oi(()=>import("./SerialMonitorPage-D6oh_I7F.js"),__vite__mapDeps([8,1,2,3,4,5,6]))}});return{MainPage:e,SerialMonitorPage:t}}function ME(e){return decodeURIComponent(Array.prototype.map.call(atob(e),function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""))}function UE(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(t,r){return String.fromCharCode(parseInt(r,16))}))}const $E={parseSearch:Vp(e=>JSON.parse(ME(e))),stringifySearch:qp(e=>UE(JSON.stringify(e)))},zE=new If($E),{MainPage:Us,SerialMonitorPage:GE}=DE(),jd="monitor",Dd="examples",Md="libraries",$s="notfound",Ud="redirect",VE=[jd,Dd,Md,$s,Ud],ci="/",qE=jd,mu=`${ci}${Dd}`,gu=`${ci}${Md}`,$d=`${ci}${$s}`,zd=`${mu}/${$s}`,Gd=`${gu}/${$s}`,HE=`${ci}${Ud}`,WE={Sketch:$d,Example:zd,Library:Gd},ZE=X.jsx(Hp,{to:ci,from:{pathname:at.ROUTING_BASE_URL},fromCurrent:!1}),KE={element:ZE},YE=e=>({path:qE,element:X.jsx(GE,{...e})}),XE=e=>({path:`:${Bd}`,element:X.jsx(Us,{...e})}),QE=e=>({path:mu,element:X.jsx(Us,{...e})}),JE=e=>({path:gu,element:X.jsx(Us,{...e})}),eS=e=>({path:HE,element:X.jsx(Us,{...e})}),tS=e=>[{path:Gd,element:X.jsx($a,{...e,notFoundType:"Library"})},{path:$d,element:X.jsx($a,{...e,notFoundType:"Sketch"})},{path:zd,element:X.jsx($a,{...e,notFoundType:"Example"})}],rS=(e,t)=>[...tS(e),YE(t),eS(e),QE(e),JE(e),XE(e),KE],nS=rS(),iS=e=>{const{ready:t}=jE(),{location:r,routes:n,renderOutletContextProvider:o}=e,s=X.jsx(Fd,{children:X.jsx(Wp,{})});return t?X.jsx(Tf,{location:r||zE,basepath:at.ROUTING_BASE_URL,routes:n||nS,children:o?o(s):s}):null};var mc=(e=>(e[e.DeviceAssociation=0]="DeviceAssociation",e[e.DeleteFile=1]="DeleteFile",e[e.RenameSketch=2]="RenameSketch",e[e.DeleteSketch=3]="DeleteSketch",e[e.DeleteLibrary=4]="DeleteLibrary",e[e.MobileWarning=5]="MobileWarning",e[e.DeleteSecret=6]="DeleteSecret",e[e.FlavourConfig=7]="FlavourConfig",e[e.ShareSketch=8]="ShareSketch",e[e.ShareToClassroom=9]="ShareToClassroom",e))(mc||{}),oS=(e=>(e[e.Upload=0]="Upload",e[e.Identify=1]="Identify",e))(oS||{});const fs=cn({noAgentAdvisoryTitle:{id:"toolbar.agent-down-title",defaultMessage:"No Cloud Agent Connection",description:"Title for advisory given to user when create agent is not detected"},noAgentAdvisoryMessage:{id:"toolbar.agent-down",defaultMessage:"To upload a Sketch via USB port, make sure the Cloud Agent is installed and running on this computer.",description:"Advisory given to user when create agent is not detected"},uploadNotAvailableAdvisoryTitle:{id:"toolbar.generic-upload-unavailable-title",defaultMessage:"Upload Unavailable",description:"Title for advisory given to user when upload is not available"},noDeviceAdvisoryTitle:{id:"toolbar.no-device-upload-unavailable-title",defaultMessage:"Device not found",description:"Title for advisory given to user when upload is not available because no device/port is selected"},noDeviceAdvisoryMessage:{id:"toolbar.no-device-upload-unavailable",defaultMessage:"To upload your sketch, plug a device.",description:"Advisory given to user when upload is not available because no device/port is selected"},successfulCreation:{id:"create-file-success",defaultMessage:"File successfully created",description:"Advisory given to user when file is created"},successfulSketchRename:{id:"rename-sketch-success",defaultMessage:"Sketch successfully renamed",description:"Advisory given to user when file is renamed"},sketchNameAlreadyExists:{id:"rename-sketch-conflict",defaultMessage:"Sketch name already exists",description:"Advisory given when to user when selected sketch name already exists"},successfulRename:{id:"rename-file-success",defaultMessage:"File successfully renamed",description:"Advisory given to user when file is renamed"},successfulDeletion:{id:"delete-file-success",defaultMessage:"File successfully deleted",description:"Advisory given to user when file is deleted"},exampleModificationAdvisory:{id:"example-mod-advisory",defaultMessage:"Examples cannot be modified, you can make a copy and do your changes there.",description:"Advisory given to user when example is modified"},exampleModificationCopy:{id:"example-mod-advisory-action",defaultMessage:"COPY IN YOUR SKETCHES",description:"Action given to user when example is modified"},successfulLibraryInclude:{id:"include-library-success",defaultMessage:"Library included",description:"Advisory given to user when library is included"},libraryAlreadyIncluded:{id:"include-library-already-included",defaultMessage:"Library already included",description:"Advisory given to user when library is already included"},portOfflineAdvisoryTitle:{id:"port-offline-title",defaultMessage:"Port Offline",description:"Title for advisory given to user when port is offline"},portOfflineAdvisoryMessage:{id:"port-offline",defaultMessage:"Your device is not online, check it is powered on, and connected to the relevant network",description:"Advisory given to user when port is offline"},compileLimitExceededAdvisoryTitle:{id:"compile-limit-exceeded-title",defaultMessage:"Plan limits reached",description:"Title for advisory given to user when compile limit is exceeded"},compileLimitExceededAdvisory:{id:"compile-limit-exceeded",defaultMessage:"You have used up your available {messageBold}. Upgrade your plan for unlimited compilations.",description:"Advisory given to user when compile limit is exceeded"},compileLimitExceededAdvisoryWOUpgrade:{id:"compile-limit-exceeded",defaultMessage:"You have used up your available {messageBold}",description:"Advisory given to user when compile limit is exceeded"},compileLimitExceededAdvisoryBold:{id:"compile-limit-exceeded-bold",defaultMessage:"25 daily compilations",description:"Bold message shown in compile limit exceeded advisory"},compileLimitExceededUpgrade:{id:"compile-limit-exceeded-action",defaultMessage:"Upgrade plan",description:"Action given to user when compile limit is exceeded"},libraryUploadSuccess:{id:"library-upload-success",defaultMessage:"Library uploaded successfully",description:"Advisory given to user when library is uploaded"},libraryMalformedError:{id:"library-malformed-error",defaultMessage:"{hasErrorMessage, select, true {Selected file is not a valid library: {errorMessage}} other {Selected file is not a valid library}}",description:"Advisory given to user when library is malformed"},libraryDownloadStart:{id:"library-download-start",defaultMessage:'Preparing "{name}.zip" library, download will start shortly...',description:"Advisory given to user when library download starts"},readOnlyOpenInEditor:{id:"read-only-open-in-editor",defaultMessage:"Open in editor",description:"Action given to user when file is read-only"},readOnlyAddToSketches:{id:"read-only-add-to-sketches",defaultMessage:"Add to sketches",description:"Action given to user when file is read-only"},readOnlyDownloadAction:{id:"read-only-download",defaultMessage:"Download",description:"Action given to user when file is read-only"},sketchDataNotCompliantAdvisoryTitle:{id:"sketch-data-not-compliant-title",defaultMessage:"Sketch Data Incomplete",description:"Title for advisory given to user when sketch data is not compliant"},sketchDataNotCompliantAdvisoryMessage:{id:"sketch-data-not-compliant",defaultMessage:"Data in this sketch is either loading, or not compliant with our Cloud CLI, if this message persists please see our:",description:"Advisory given to user when sketch data is not compliant"},sketchDataNotCompliantReferenceLink:{id:"sketch-data-not-compliant-reference-link",defaultMessage:"Arduino Sketch Specification",description:"Link to the Arduino Sketch Specification"},iotWebSerialWrongDevice:{id:"iot-web-serial-wrong-device",defaultMessage:"Selected board doesn't match the device associated with this Thing",description:"Advisory given to user when user selects a different board from the associated Thing one using the Chrome web serial selector"},otaBlockedAdvisoryTitle:{id:"ota-blocked-title",defaultMessage:"Upgrade for OTA upload",description:"Title for advisory given to user when OTA is blocked"},otaBlockedAdvisoryMessage:{id:"ota-blocked",defaultMessage:"OTA upload is not available with your current plan",description:"Advisory given to user when OTA is blocked"},otaBlockedAdvisoryMessageWOPlan:{id:"ota-blocked",defaultMessage:"OTA upload is not available",description:"Advisory given to user when OTA is blocked"},otaIncompatibleTitle:{id:"ota-incompatible-title",defaultMessage:"OTA upload not supported",description:"Title for advisory given to user when OTA is not supported for current device"},otaIncompatibleMessage:{id:"ota-incompatible",defaultMessage:"Upload Over-The-Air is not supported by this device. Please connect the device via USB.",description:"Advisory given to user when OTA is not supported for current device"},portBusyAdvisoryTitle:{id:"port-busy-title",defaultMessage:"Port Busy",description:"Title for advisory given to user when port is busy"},portBusyAdvisoryMessage:{id:"port-busy",defaultMessage:"The selected port is busy, please wait a few moments",description:"Advisory given to user when port is busy"},shareSketchWarning:{id:"share-sketch-warning",defaultMessage:"The Sketch is now public. People outside your space with the link can view it.",description:"Warning shown when user tries to share a sketch"},shareSketchUndo:{id:"share-sketch-undo",defaultMessage:"Undo",description:"Action given to user when sketch is shared"},shareToClassroomTitle:{id:"share-to-classroom-title",defaultMessage:"Arduino Sketch - {title}",description:"Title shown in the title of sketch shared to classroom"},shareToClassroomContent:{id:"share-to-classroom-content",defaultMessage:"Hi! This is the sketch that I’ve made for you. Copy it in your sketchbook or download it.",description:"Text shown in the content of sketch shared to classroom"},couldNotCheckOtaTitle:{id:"could-not-check-ota-title",defaultMessage:"OTA Status unknown",description:"Title shown when OTA compatibility check fails"},couldNotCheckOta:{id:"could-not-check-ota",defaultMessage:"An Over-The-Air upload may be in progress",description:"Advisory given to user when OTA compatibility check fails"},noDeviceAssociatedTitle:{id:"no-device-associated-title",defaultMessage:"No device associated",description:"Title shown when no device is associated"},noDeviceAssociated:{id:"no-device-associated",defaultMessage:"We could not find a device associated with this sketch, you can associate a device from the setup tab",description:"Advisory given to user when no device is associated"}}),sS=cn({[rn.exceedsLimit]:{id:"fileNameExceedsLimit",defaultMessage:"Character limit reached.",description:"Character limit reached."},[rn.hasInvalidCharacters]:{id:"fileNameContainsInvalidCharacters",defaultMessage:"Spaces, punctuations and special characters are not allowed.",description:"Spaces, punctuations and special characters are not allowed."},[rn.alreadyExists]:{id:"fileNameAlreadyExists",defaultMessage:"Name already in use, please choose another one.",description:"Name already in use, please choose another one."},[rn.emptyName]:{id:"fileNameEmpty",defaultMessage:"Name cannot be empty.",description:"Name cannot be empty."}}),Vd={fileId:Dr.uniqueId(),fileName:"Sketch Secrets",fileFullName:"Sketch Secrets",fileExtension:"secrets",Icon:hs("secrets"),tags:[],isMetadataReadOnly:!0};function KC(e){return e==null?void 0:e.find(t=>t.name===os)}function aS(e){const{href:t}=e;if(!t)return!1;const r=t.split("/");return r.pop()===`${r.pop()}.ino`}function YC(e){return e==null?void 0:e.find(aS)}function pf(e){return{data:e.data,name:e.fullName}}function XC(e,t,r,n,o,s){let c=!1;const i=Sr(r.path).value.value,g=Er(Sr(r.path).value.value,r.mimetype),f=o?o.filter(l=>typeof l.data<"u").map(qd).map(pf):[];t.secrets&&(f.push(mh(t.secrets)),c=!0);const a=pf({...r,data:g}),y={fqbn:e,sketch:{name:t.name,files:f,metadata:{included_libs:t.libraries||[]},ino:c?gh(a,i,r.mimetype):a},hasSecretsIncludeInjected:c,verbose:n};return s&&(y.ota=!0),y}function cS(e,t){const r=Er(Sr(e.path).value.value,e.mimetype),n=t?t.map(qd):[];return{exampleIno:{...e,data:r},exampleFiles:n}}function qd(e){const t=e.path,r=Sr(t).value.value,n=Er(r,e.mimetype);return{...e,data:n,content:r}}function Yo(e,t=!1,r=!1,n=[]){return{fileId:e.path,fileFullName:e.fullName,fileName:e.name,fileExtension:e.extension,Icon:hs(e.extension),tags:n,isNotCreated:e.isNotCreated,isFixed:r,isMetadataReadOnly:t}}function hs(e){switch(e){case"ino":case"cpp":case"c":case"pde":return en.FileTypeIno;case"h":return en.FileTypeHeader;case"txt":case"adoc":case"md":case"asciidoc":case"asc":return en.FileTypeText;case"png":case"jpg":case"svg":return en.FileTypeImage;case"secrets":return en.FileTypeSecrets;default:return}}function QC(e){return{exceedsLimit:lh(e),hasInvalidCharacters:fh(e)}}function JC(e,t){const r=t.slice(0,uh),n=new RegExp(r,"d"),o=e.filter(c=>c.fileName.match(n)).map(c=>c.fileName);if(o.length===0)return r;function s(c,i=0){const g=`${r}-${i}`;return c.indexOf(g)===-1?g:s(c,i+1)}return s(o)}const uS=e=>e.name.toLowerCase().includes("readme"),lS=e=>(t=>"fullName"in t)(e)?e.fullName==="library.properties":e.name==="library.properties";function Hd(e){const t=e==null?void 0:e.find(uS);if(t)return t;if(!t)return e==null?void 0:e.find(lS)}function ek(e){return`${at.CLOUD_HOME_URL}/things/${e}/setup`}function tk(e,t){var n;return!!(t&&((n=e.path)!=null&&n.includes(`${t[lg]}/libraries_v2`)))}const rk=e=>{const t=/T(\d{2}:\d{2}:\d{2})(?:\.\d+)?Z/,r=e==null?void 0:e.match(t);return r?`[${r[1]}]`:""},fS=e=>{const t=new Date(e),r=new Date;return Math.abs(t.getTime()-r.getTime())};var hS=(e=>(e.GET_SKETCH_BY_ID_QUERY_KEY="get-sketch-by-id",e.CREATE_DEFAULT_KEY_QUERY_KEY="create-default-sketch",e.GET_SKETCHES_QUERY_KEY="get-sketches",e))(hS||{});const nk={"get-sketch-by-id":(e,t)=>({...e,...t}),"create-default-sketch":(e,t)=>({...e,...t}),"get-sketches":(e,t,r)=>e.map(n=>n.id===(t==null?void 0:t.id)?{...t,...r}:n)},ik=function(e,t){const{data:r,isLoading:n,isError:o}=Jt(["get-sketch-by-id",t],()=>t?Yb(t):Promise.reject("Tried to obtain a sketch by ID without providing a specific sketch ID"),{refetchOnWindowFocus:!1,enabled:e});return{data:r,isLoading:n,isError:o}},dS=function(e,t,r,n){const{data:o,isLoading:s,refetch:c}=Jt(["get-sketches",t],()=>Qb(n),{refetchOnWindowFocus:!1,enabled:e,cacheTime:r});return{refetch:c,sketchesData:o,getSketchesIsLoading:s}},ok=function(){const{data:e,isLoading:t,mutate:r}=tr({mutationFn:Hc});return{create:r,isLoading:t,createdSketch:e}},sk=function(){const{isLoading:e,mutateAsync:t}=tr({mutationFn:Xb});return{isLoading:e,deleteSketchMutate:t}},ak=function(){const{isLoading:e,mutateAsync:t}=tr({mutationFn:r=>Mh(r.from,r.to)});return{renameSketchMutate:t,isLoading:e}},pS=function(e){const t=Of(),r=Oe.useRef(0),n=Oe.useCallback(i=>{const g=`${at.ROUTING_BASE_URL?`/${at.ROUTING_BASE_URL}`:""}/${i}`;i&&t({to:g,search:{[Nd]:void 0,[uu]:void 0,[pc]:void 0,[dc]:void 0,[Pd]:void 0},replace:!0})},[t]),{data:o,isLoading:s,mutate:c}=tr({mutationFn:i=>i?Hc(i.sketchName,i.sketchContent,void 0,i.files??[]):Promise.reject("Content undefined"),onSuccess:async i=>{e==null||e(i),n(i.id)},onError:(i,g)=>{if(r.current=r.current+1,r.current>1){t({search:{[pc]:void 0,[dc]:void 0}});return}c({...g,sketchName:`${(g==null?void 0:g.sketchName)||"Existing_Sketch_Copy"}_${new Date().valueOf()}`})}});return{create:c,isLoading:s,createdSketch:o}},ck=function(e){const[t,r]=Oe.useState(os),n=Oe.useRef(0),{data:o}=Jt(["create-default-sketch",t],()=>Hc(t),{onError:()=>{n.current===0&&r(`${os}_${new Date().valueOf()}`),n.current=n.current+1},refetchOnWindowFocus:!1,enabled:e});return{createdSketch:o}};function uk(){fr.invalidateQueries(["get-sketch-by-id"],{})}function lk(e){e.forEach(t=>{fr.invalidateQueries(["get-file-content",t]),fr.invalidateQueries(["get-batch-file-content",t])})}const fk=function(e,t,r,n,o,s){const{data:c}=Jt(["get-file-content",n,s,String(t)],()=>n&&o?Wc(n,o,t,s):Promise.reject(new Error("Tried to get file without path or sketch name")),{onSuccess:i=>{Dh(i),jh(i.path,!1)},onError:i=>{if(Ac&&i&&i.cause.status===401){const g=r==null?void 0:r(i);if(g!=null&&g.errorIsManaged)return;Vg(!0)}},refetchOnWindowFocus:!1,enabled:e});return{fileData:c}};async function ds(e,t,r,n,o){if(e.type==="file")return[{...e,contents:await Wc(e.path,e.name,t,n===e.path?r:void 0,o)}];if(e.type==="folder"||e.type==="sketch"){const s=await Zc(e.path,t),c=await Promise.all(s.filter(i=>!Bh(i)).map(i=>ds(i,t)));return[e,...c.flat()]}else return[]}const Vo="get-batch-file-content",hk=function(e,t,r,n,o,s,c,i=!1,g,f,a=!1){const[y,l]=Oe.useState({items:[],fetchCount:0,fetchComplete:!1});Oe.useEffect(()=>{l({items:[],fetchCount:0,fetchComplete:!1})},[o,r]),Oe.useEffect(()=>{const U=s||[];l(ue=>{const fe=ue.items.filter(q=>{const Q=U.map(_=>_.path).includes(q.path);return!Q&&[...Rn().keys()].includes(q.path)&&Ts(q.path),Q});return{...ue,...fe}})},[s]);const[v,A]=Oe.useState(!1),{renameSketchFileMutate:d,isLoading:T}=vS(r),{createSketchFileMutate:w}=gS(e,r),{deleteFileQuery:S,isDeleting:O}=mS(r),N=Rf({queries:(s??[]).map(U=>({queryKey:f===U.path?[Vo,U.path,g,String(t)]:[Vo,U.path,String(t)],queryFn:()=>ds(U,t,g,f,a),onSuccess:ue=>{var q,Q;const fe=new Map;for(const _ of ue)if(_.contents&&_.type==="file"){let k;if(i){const $=(q=_.contents)==null?void 0:q.path.replace((c??"")+"/","");k={..._.contents,name:(Q=_.contents)!=null&&Q.extension?$.replace(`.${_.contents.extension}`,""):$,fullName:$}}else k=_.contents;fe.set(_.path,k),Dh(k)}l(_=>({items:_.items.filter($=>!fe.has($.path)).concat(Array.from(fe.values())),fetchCount:_.fetchComplete?_.fetchCount:_.fetchCount+1,fetchComplete:_.fetchComplete?_.fetchComplete:_.fetchCount+1===(s==null?void 0:s.length)}))},onError:n,refetchOnWindowFocus:!1,enabled:e}))}),P=U=>{const ue=U?U.map(fe=>[Vo,fe]):[Vo];fr.invalidateQueries(ue)},H=Oe.useCallback(async(U,ue)=>{function fe(q,Q){l(_=>{const k=_.items.map($=>{if(Q!==void 0&&$.path===q){$.path=Q;const F=Q.split("/").pop()??"";$.fullName=F,$.name=F.split(".")[0]}return $});return{..._,items:k}})}fe(U,ue),A(U===o);try{await d({from:U,to:ue})}catch(q){throw fe(ue,U),q}},[o,d]),j=Oe.useCallback(async(U,ue,fe,q)=>{const Q={fullName:`${ue}.${fe}`,name:ue,data:"",path:U,href:"",content:"",extension:fe??"",mimetype:"",isNotCreated:!0};l(_=>({..._,items:_.items.concat(Q)}));try{return await w({filePath:{path:U},extension:fe,code:q})}catch(_){throw l(k=>({...k,items:k.items.filter($=>$.path!==U)})),_}},[w]),Z=Oe.useCallback(async U=>{const ue=y.items.findIndex(q=>q.path===U),fe=y.items[ue];l(q=>({...q,items:q.items.filter(Q=>Q.path!==U)}));try{return await S(U)}catch(q){throw q.cause!==404&&l(_=>{const k=[..._.items.slice(0,ue),fe,..._.items.slice(ue)];return{..._,items:k}}),q}},[S,y]);return{filesContents:y.items.length>0?y.items:void 0,refreshFileContents:P,deleteFile:Z,fileIsDeleting:O,renameSketchFile:H,addSketchFile:j,mainInoIsRenaming:T&&v,isLoading:y.items.length>0?N.some(U=>U.isLoading):!0,allContentsRetrieved:y.fetchComplete}},dk=function(e,t,r,n,o,s=!1){const c=Zp(),{data:i,isLoading:g,isError:f,refetch:a}=Jt(e,()=>o?Zc(o,r,s):Promise.reject(new Error("Tried to obtain sketch files without providing a valid sketch path")),{onError:n,refetchOnWindowFocus:!1,enabled:t}),y=Oe.useCallback(()=>{c.invalidateQueries(e)},[e,c]);return{filesList:i,getFilesIsLoading:g,getFilesIsError:f,refetch:a,invalidateFilesList:y}},pk=function(e){const{mutateAsync:t}=tr({mutationFn:r=>e&&typeof r<"u"&&typeof r.code<"u"&&typeof r.fileId<"u"?Jb({path:r.fileId},r.code,r.hash):Promise.reject(new Error("Tried to save sketch without auth, path, sketch name, hash,  or content"))});return{saveSketchFileQuery:t}},mS=function(e){const{mutateAsync:t,isLoading:r}=tr({mutationFn:n=>typeof n<"u"?rw({path:n}):Promise.reject(new Error("Tried to delete sketch without path")),onSuccess:(n,o)=>{o&&Ts(o),fr.invalidateQueries({queryKey:e,exact:!0})}});return{deleteFileQuery:t,isDeleting:r}},gS=function(e,t){const{data:r,isLoading:n,mutateAsync:o}=tr({mutationFn:s=>e?ew(s.filePath,s.extension,s.code):Promise.reject(),onSuccess:()=>{fr.invalidateQueries({queryKey:t,exact:!0})}});return{createdSketchFile:r,isLoading:n,createSketchFileMutate:o}},vS=function(e){const{mutateAsync:t,isLoading:r}=tr({mutationFn:n=>typeof n<"u"&&typeof n.from<"u"&&typeof n.to<"u"?Mh(n.from,n.to):Promise.reject(new Error("Tried to rename sketch without path or sketch name")),onSuccess:(n,o)=>{o.from&&Ts(o.from),fr.invalidateQueries({queryKey:e,exact:!0})}});return{renameSketchFileMutate:t,isLoading:r}},mk=function(){const{mutateAsync:e,isLoading:t,isError:r}=tr({mutationFn:Hb});return{mutateSketchWithSecrets:e,isError:r,isLoading:t}},gk=function(){const{mutateAsync:e,isLoading:t}=tr({mutationFn:Wb});return{mutateSketchWithDevice:e,isLoading:t}},vk=function(){const{mutateAsync:e,isLoading:t}=tr({mutationFn:Zb});return{mutateSketchVisibility:e,isLoading:t}},yk=function(){const{mutateAsync:e,isLoading:t}=tr({mutationFn:Kb});return{mutateSketchWithLibraries:e,isLoading:t}};function mf(e){if(!e)throw new Error("Tried to get custom library code without path");return["get-custom-library-code",e]}const bk=function(e,t=!1){const[r,n]=Oe.useState(),{data:o,isLoading:s}=Jt(["get-custom-libraries"],Uh,{refetchOnWindowFocus:!1,enabled:e,staleTime:1/0,onSuccess(c){for(const i of c)fr.invalidateQueries(mf(i.path))}});return Rf({queries:(r??[]).map(c=>({queryKey:mf(c.path),queryFn:()=>nw({id:c.id}),enabled:t,staleTime:1/0,onSuccess:({code:i})=>{n(g=>g==null?void 0:g.map(f=>f.id===c.id?{...f,code:i}:f))},refetchOnWindowFocus:!1}))}),Oe.useEffect(()=>{n(o)},[o]),{customLibraries:r,customLibrariesAreLoading:s}};function Wd(e){return e?!("version"in e)&&!("downloadUrl"in e):!1}function Zd(){fr.invalidateQueries(["get-custom-libraries"])}const wk=function(e,t){const r=Of(),{mutateAsync:n}=tr({mutationFn(o){return t?e?iw(e,o):Promise.reject("Tried to save library without library name"):Promise.resolve(null)},onSuccess:o=>{Wd(o)&&(r({search:{[Ld]:o.id,[uu]:void 0,[Y_]:fg.Libraries},replace:!0}),Zd())}});return{saveLibraryQuery:n}},xk=function(){const{isLoading:e,mutateAsync:t}=tr({mutationFn:ow});return{isLoading:e,deleteCustomLibraryMutate:t}},_k=()=>{const{mutateAsync:e,isLoading:t}=tr({mutationFn:sw,onSuccess:r=>{Wd(r)&&Zd()}});return{importLibraryQuery:e,isLoading:t}};async function Ek(e){const t=(await Uh()).find(o=>o.id===e);if(!t)throw new Error("Library not found");let r;try{r=await ds({path:t.path,name:t.name,type:"folder"},!1)}catch(o){Pb(o)&&(r=await ds({path:t.path,name:t.name,type:"folder"},!0))}if(!r)throw new Error("Failed to retrieve library files");const n=r.map(o=>({...o,path:o.path.replace(t.path,"")}));Nh(t.name,n.map(o=>{var s;return{nameWithExt:o.path.replace(/\//,""),base64Content:(s=o.contents)==null?void 0:s.data,isDirectory:o.type==="folder"||o.type==="sketch"}}),t.name)}const gf=12e4,Sk=function(e,t,r,n,o,s){const[c,i]=Oe.useState(!1),g=Oe.useRef(0),f=Oe.useRef(void 0),a=()=>{f.current&&clearTimeout(f.current),f.current=window.setTimeout(()=>{i(!1)},gf)};return Jt(["retrieve-files-hash-poll",n,s,o],()=>n?Zc(n,!1):Promise.reject("No sketch path while polling the file hash."),{refetchOnWindowFocus:!1,enabled:e,refetchInterval:3e3,refetchIntervalInBackground:!0,onSuccess(y){var T,w,S,O,N;const l=y==null?void 0:y.filter(P=>!Bh(P)),v=Rn();let A=!1;for(const P of l.keys()){const H=l[P],j=(T=v.get(H.path))==null?void 0:T.getValue();if(!j)continue;const Z=!!j.meta.hash&&!!((w=H.revision)!=null&&w.hash)&&j.meta.hash!==((S=H.revision)==null?void 0:S.hash);if(Z&&(fr.invalidateQueries(["get-file-content",H.path],{exact:!1}),fr.invalidateQueries(["get-batch-file-content",H.path],{exact:!1})),A=Z||!!((O=H.revision)!=null&&O.username)&&s!==((N=H.revision)==null?void 0:N.username)&&!!H.modifiedAt&&fS(H.modifiedAt)<gf,A)break}(l.filter(P=>!v.has(P.path)).length||v.size!==l.length)&&(A=!0,t()),A&&(i(!0),r(),a()),g.current=0},onError(y){if(!n)throw new Error("Missing sketchPath");y.cause.path===n&&y.cause.status===404&&g.current===0&&(g.current=g.current+1,i(!0),a(),fr.invalidateQueries(["get-sketch-by-id"],{exact:!1}),qb(n))}}),Oe.useEffect(()=>{let y;return f.current&&(y=f.current),()=>{clearTimeout(y)}},[]),{isConcurrent:c}};function Ck(e){const t=[];return e.forEach(r=>{const n=t;if(r.type==="folder"&&n.push({name:r.name,path:r.path,examplesNumber:r.children??0}),r.type==="sketch"&&n.push({name:r.name,path:r.path,folder:r.name,ino:{path:`${r.path}/${r.name}.ino`,name:`${r.name}.ino`},types:[]}),r.type==="file"&&r.name.split(".").pop()==="ino"){const o=e==null?void 0:e.filter(c=>c.type==="file"&&c.name!==r.name),s=r.path.slice(0,r.path.lastIndexOf("/"));n.push({name:r.name,path:s,folder:s.split("/").pop()??"",ino:{path:r.path,name:r.name},types:[],files:o.length>0?o:void 0})}}),t}const yS=function(e){const t=e?`${e.name}_copy-`:void 0,{refetch:r}=dS(!1,"get-sketches-for-created-sketch-name",0,t);return{getProposedSketchName:Oe.useCallback(async()=>{if(!t)return;const{data:o}=await r();if(!o)return;const s=o.filter(f=>f.name.startsWith(t)),c=s.length+1;let i=`${t}${s.length+1}`;const g=f=>s.some(a=>a.name===f);if(g(i))for(let f=c;f<100&&(i=`${t}${f}`,!!g(i));f++)f===99&&(i=`${t}${new Date().valueOf()}`);return i},[t,r])}},bS=function(e){const t=Oe.useRef(!1),{create:r}=pS(),{formatMessage:n}=Tn(),{getProposedSketchName:o}=yS(e);return{send:Oe.useCallback((c,i)=>{if(!t.current){t.current=!0;const g=Dr.uniqueId();Dx({message:n(fs.exampleModificationAdvisory),mode:Sd.Toast,modeOptions:{toastId:g,toastType:hg.Persistent,onUnmount:()=>{t.current=!1},toastActions:[{id:Dr.uniqueId(),label:n(fs.exampleModificationCopy),handler:async()=>{const{exampleIno:f,exampleFiles:a}=cS(c,i),y=await o();r({sketchName:y,sketchContent:f.data,files:a}),zx(g)}}]}})}},[r,n,o])}};var wS=(e=>(e.SKETCH_UPDATE="sketch-update",e.SKETCH_DELETE="sketch-delete",e))(wS||{});const zs=function(){var S;const e=Kp()||{},{params:{[Bd]:t}={}}=e,{value:r,sketchId:n}=_S(),o=!!t&&t!=="/"||!!n,c=(S=Yi().pathname)==null?void 0:S.split("/"),i=c==null?void 0:c.indexOf(at.ROUTING_BASE_URL),g=i!==void 0?c==null?void 0:c[i+1]:void 0,f=g&&VE.includes(g)?void 0:g,a=new URLSearchParams(window.location.search),y=a.get(J_),l=y&&oE(y)?y:void 0,v=l&&l!=="preview"?a.get(eE):void 0,A=Oe.useMemo(()=>v&&sE(v)?aE(v):void 0,[v]),d=l&&l!=="preview"?a.get(tE):void 0,T=Oe.useMemo(()=>d&&cE(d)?uE(d).filter(O=>!A||O>=A.start&&O<=A.end):void 0,[d,A]),w=a.get(rE);return{isSketchQueried:o,sketchID:o?r&&n?n:t:void 0,sketchIDIsLoading:r&&n?!n:!!(f&&f!==t),libraryID:a.get(Ld)||void 0,sourceLibraryID:a.get(uu)||void 0,customLibraryID:a.get(Pd)||void 0,exampleID:a.get(Nd)||void 0,createExampleParam:!!a.get(dc),createSketchParam:!!a.get(pc),bypassOptIn:!!a.get(X_),bypassIotRedirect:!!a.get(Q_),viewMode:l,scope:A,highlight:T&&T.length>0?T:void 0,hideNumbers:typeof w=="string"&&w!=="false"}},xS=function(e,t,r,n=!1){const[o,s]=Oe.useState(t);return Oe.useEffect(()=>{s(c=>{if(!((c==null?void 0:c.fileId)!==void 0&&(r==null?void 0:r.map(g=>g.path).includes(c.fileId))))if(e){if(e&&!n&&r){const g=Hd(r);if(g)return Yo(g)}return}else return t;return c.isNotCreated&&Rn().has(c.fileId)?{...c,isNotCreated:!1}:c})},[r,t,e,n]),{selectedFile:o,setSelectedFile:s}},kk=function(e,t,r,n,o=!0,s=!1){const[c,i]=Oe.useState([]),[g,f]=Oe.useState(!1),[a,y]=Oe.useState(void 0),v=a??t?Vd:void 0,A=Yp(Is());Xp("beforeunload",U=>{(A??new Set).size!==0&&U.preventDefault()});const d=Oe.useMemo(()=>r&&Yo(r,!0,!0,["Main"]),[r]),T=Oe.useMemo(()=>{if(e&&!o&&n){const U=Hd(n);if(U)return Yo(U,!0,!0,["Main"])}},[n,e,o]),{selectedFile:w,setSelectedFile:S}=xS(e,d,n,o),O=Oe.useMemo(()=>n!==void 0?n.map(U=>Yo(U)).filter(U=>e?U.fileId!==(T==null?void 0:T.fileId):!0):[],[n,e,T==null?void 0:T.fileId]),N=Oe.useMemo(()=>[e?T:d,...Dr.sortBy(O,U=>U.fileName.toLowerCase()),v].filter(U=>!!U),[d,e,O,T,v]);Oe.useEffect(()=>{g||(s&&c.length===N.length&&f(!0),i(N))},[c,N,s,g]),Oe.useEffect(()=>{var ue;if(o)return;if((d==null?void 0:d.fileId)!==((ue=c[0])==null?void 0:ue.fileId)){f(!1);return}const U=c.filter(fe=>!!N.find(q=>q.fileId===fe.fileId));c.length!==U.length&&i(U)},[N,c,i,o,d==null?void 0:d.fileId]);const P=Oe.useCallback(U=>y(U),[]),H=Oe.useCallback(U=>{const ue=c.find(fe=>fe.fileId===(U==null?void 0:U.fileId));U&&!ue&&i(fe=>[...fe,U]),S(U)},[c,S]),j=Oe.useCallback(U=>{const ue=N.find(fe=>fe.fileId===U);ue&&i(fe=>[...fe,ue])},[N]),Z=Oe.useCallback(U=>{if(U===((d==null?void 0:d.fileId)||(T==null?void 0:T.fileId)))return;const ue=c.findIndex(fe=>fe.fileId===U);S(c[ue-1]||0),i(fe=>fe.filter(q=>q.fileId!==U))},[d==null?void 0:d.fileId,T==null?void 0:T.fileId,S,c]);return{mainInoFile:d,otherFiles:O,tabs:c,explorerFiles:N,selectedFile:w,unsavedFileIds:A,setSelectedFile:H,setShowSecretsTab:P,openFileTab:j,closeFileTab:Z}},Ak=function(e){Oe.useEffect(()=>{if(!e)return;const t=new URL(e,ci);if(!window.open(t))throw new Error("New sketch could not be opened in new window")},[e])},Ik=function(...e){const[t,r,n,o,s,c,i,g,f,a,y]=e,{formatMessage:l}=Tn(),v=Oe.useRef(),A=ES(),{send:d}=bS(a),T=Oe.useCallback(()=>A&&a?(d(a,y),{bypassDefault:!0}):{bypassDefault:A},[y,a,A,d]),w=Oe.useCallback((fe,q,Q)=>{const _=[],k=(F,V)=>{const M=l(sS[F]);_.push({id:F,message:M,type:V})},$=n.some(F=>F.fileFullName!==`${fe}.${Q}`&&F.fileName===q&&F.fileExtension===Q);return q===""&&k(rn.emptyName,"error"),$&&k(rn.alreadyExists,"error"),lh(q)&&k(rn.exceedsLimit,"warning"),fh(q)&&k(rn.hasInvalidCharacters,"warning"),_},[n,l]),S=Oe.useCallback(async(fe,q,Q)=>{if(!o||!o.fileFullName)return;const _={fileId:fe,fileName:q,fileFullName:`${q}.${Q}`,fileExtension:Q,Icon:hs(Q),isNotCreated:!0,tags:[]};v.current=o,s(_),await r(o==null?void 0:o.fileId,fe)},[r,o,s]),{wrappedAction:O}=uf({action:S,getKeyFromAction:fe=>`rename-${fe}`,successMessage:fs.successfulRename,onFailure(){v.current&&s(v.current)}}),N=Oe.useMemo(()=>({[ya.Close]:i,[ya.DeleteFile]:(fe,q,Q)=>{f(!0),g({id:mc.DeleteFile,data:{file:{fileId:fe,fileExtension:Q,fileFullName:q,tags:[]}}})},[ya.Rename]:O}),[i,O,f,g]),P=Oe.useCallback(async(fe,q,Q,_)=>{const k={fileId:fe,fileName:q,fileFullName:`${q}.${Q}`,fileExtension:Q,Icon:hs(Q),isNotCreated:!0,tags:[]};s(k),await t(fe,q,Q,_)},[t,s]),H=Qp(o),{wrappedAction:j}=uf({action:P,getKeyFromAction:fe=>`add-file-${fe}`,successMessage:fs.successfulCreation,onFailure(){H&&s(H)}}),Z=Oe.useCallback(()=>{c(!0),s(Vd)},[c,s]),U=Oe.useMemo(()=>({[ki.AddSketchFile]:j,[ki.AddHeaderFile]:j,[ki.AddTextFile]:j,[ki.AddSecretsTab]:Z,[ki.ImportFile]:j}),[j,Z]);return{fileExplorerMenuHandlers:Oe.useMemo(()=>({[fl.Rename]:O,[fl.Delete]:(fe,q,Q)=>{f(!0),g({id:mc.DeleteFile,data:{file:{fileId:fe,fileExtension:Q,fileFullName:q,tags:[]}}})}}),[O,g,f]),tabMenuHandlers:N,newTabMenuHandlers:U,onClickTabsBarAction:T,validateFileName:w}},_S=()=>{var n,o,s;const e=Yi(),t=`${at.APP_ORIGIN}${at.ROUTING_BASE_URL?`/${at.ROUTING_BASE_URL}`:""}/`,r=((n=e.href)==null?void 0:n.replace(t,"").split("/").length)===2;return{value:r,username:r&&((o=e.href)==null?void 0:o.replace(t,"").split("/")[0])||"",sketchId:r&&((s=e.href)==null?void 0:s.replace(t,"").split("/")[1])||""}},ES=()=>{var r;const e=Yi(),t=`${at.APP_ORIGIN}${at.ROUTING_BASE_URL?`/${at.ROUTING_BASE_URL}`:""}${mu}`;return!!((r=e.href)!=null&&r.startsWith(t))},Tk=()=>{var r;const e=Yi(),t=`${at.APP_ORIGIN}${at.ROUTING_BASE_URL?`/${at.ROUTING_BASE_URL}`:""}${gu}`;return!!((r=e.href)!=null&&r.startsWith(t))},Rk=()=>{var r,n,o;const e=Yi(),t=s=>`${at.APP_ORIGIN}${at.ROUTING_BASE_URL?`/${at.ROUTING_BASE_URL}`:""}${WE[s]}`;return!!((r=e.href)!=null&&r.startsWith(t("Sketch")))||!!((n=e.href)!=null&&n.startsWith(t("Example")))||!!((o=e.href)!=null&&o.startsWith(t("Library")))},SS="_container_dbaw5_1",CS="_content_dbaw5_12",za={container:SS,"container-with-header":"_container-with-header_dbaw5_7",content:CS},vf=cn({offlineTitle:{id:"error.offlineTitle",defaultMessage:"You're offline",description:"Title for offline page"},offlineMessage:{id:"error.offlineMessage",defaultMessage:"Check your connection and try again",description:"Message for offline page"}}),kS="_container_1t0wg_1",AS="_content_1t0wg_8",IS="_title_1t0wg_17",TS="_message_1t0wg_22",qo={container:kS,content:AS,title:IS,message:TS},RS=()=>{const{formatMessage:e}=Tn();return X.jsx("div",{className:qo.container,children:X.jsxs("div",{className:qo.content,children:[X.jsx(Ec,{bold:!0,className:qo.title,children:e(vf.offlineTitle)}),X.jsx(Sc,{className:qo.message,children:e(vf.offlineMessage)})]})})},OS=Oe.memo(RS),NS=()=>{const e=()=>{const{user:o}=Oe.useContext(Qn),{viewMode:s}=zs(),c=Wt.None;return{isReadOnly:!!s,readOnlyAvatarLink:ri()?"":at.ID_URL,user:o,headerItemId:c}},t=Oe.useCallback(e,[]);let r=!1;const n=Oe.useContext(ro);return n&&(r=!!n.headerless),X.jsxs("div",{className:vs(za.container,{[za["container-with-header"]]:!r}),children:[r?null:X.jsx(cu,{}),r?null:X.jsx(Ms,{headerLogic:t}),X.jsx("div",{className:za.content,children:X.jsx(OS,{})})]})},LS=({profile:e,profileIsLoading:t,children:r})=>X.jsx(hu,{children:X.jsx(du,{children:X.jsx(lu,{profile:e,profileIsLoading:t,children:X.jsx(fu,{children:X.jsx(pu,{children:X.jsx(vc,{children:r})})})})})}),PS=e=>{const{profile:t,profileIsLoading:r}=e;return X.jsx(LS,{profile:t,profileIsLoading:r,children:X.jsx(NS,{})})},BS=()=>X.jsx(PS,{}),Kd={selectedPort:void 0,prevSelectedPort:void 0};let ps=null,ms=null;function FS(){ps=null,ms=null}function jS(){return ps=new In(Kd),ps}function no(){let e=ps;return e||(e=jS()),e}function Ok(){return no().getValue().selectedPort}function Nk(){return no().getValue().prevSelectedPort}function Lk(e){const t=no();t.next({prevSelectedPort:t.getValue().selectedPort,selectedPort:e})}function Pk(){no().next(Kd)}function DS(){return ms=no().pipe(Xi(t=>t.selectedPort),dg(),Jn(1)),ms}function Bk(){let e=ms;return e||(e=DS()),e}function MS(){kx(),aw(),i_(),r_(),m_(),c1(),zg(),FS(),Gx(),Px(),jb()}const US=({location:e,routes:t,renderOutletContextProvider:r})=>(Oe.useEffect(()=>()=>MS(),[]),X.jsx(iS,{location:e,routes:t,renderOutletContextProvider:r})),$S=()=>X.jsx(US,{});window.Buffer=Cc.Buffer;window.process=Kf;at.MODE!=="production"&&Oi(()=>import("./index-wWwew1qC.js").then(e=>e.i),__vite__mapDeps([9,1,2])).then(e=>{e.default(Lf,Nf,1e3)});Nf.createRoot(document.getElementById("root")).render(X.jsx(Lf.StrictMode,{children:window.navigator.onLine?X.jsx($S,{}):X.jsx(BS,{})}));export{Nh as $,ot as A,zs as B,hC as C,CC as D,dC as E,Yg as F,lC as G,fC as H,pC as I,aC as J,eC as K,Dx as L,Sd as M,Ed as N,tC as O,rC as P,nC as Q,Ki as R,Xt as S,Rd as T,Ht as U,iC as V,Ct as W,cC as X,uC as Y,Dh as Z,mC as _,Os as a,pS as a$,yx as a0,rk as a1,XC as a2,ri as a3,zx as a4,fs as a5,hf as a6,gk as a7,Lk as a8,Ok as a9,KS as aA,ci as aB,Rk as aC,bk as aD,Ld as aE,uu as aF,Y_ as aG,wk as aH,Pb as aI,dk as aJ,Hd as aK,hk as aL,Wd as aM,Ek as aN,Vl as aO,_k as aP,uf as aQ,tk as aR,gu as aS,ak as aT,wS as aU,qb as aV,tw as aW,QC as aX,QS as aY,sk as aZ,xk as a_,XS as aa,Mc as ab,Bk as ac,Nk as ad,Pk as ae,FS as af,qc as ag,bS as ah,Is as ai,Zd as aj,vC as ak,Yo as al,gC as am,Sr as an,Gb as ao,lk as ap,uk as aq,Lh as ar,jh as as,ro as at,WE as au,J_ as av,tE as aw,WS as ax,Pg as ay,ZS as az,JS as b,b_ as b$,Ck as b0,yS as b1,mu as b2,Nd as b3,Pd as b4,dc as b5,WC as b6,lE as b7,Yf as b8,fr as b9,hs as bA,mk as bB,Sk as bC,yk as bD,eE as bE,rE as bF,pc as bG,cu as bH,L_ as bI,FC as bJ,sC as bK,BC as bL,$C as bM,UC as bN,hu as bO,du as bP,lu as bQ,fu as bR,pu as bS,jC as bT,qC as bU,VC as bV,NC as bW,LC as bX,GC as bY,OC as bZ,zC as b_,ES as ba,E_ as bb,bC as bc,C_ as bd,S_ as be,Wt as bf,ik as bg,dS as bh,KC as bi,ck as bj,hS as bk,nk as bl,YC as bm,fk as bn,Bh as bo,os as bp,_S as bq,Tk as br,kk as bs,pk as bt,Ik as bu,ok as bv,Ak as bw,vk as bx,ek as by,JC as bz,yC as c,kC as c0,AC as c1,xn as c2,SC as c3,Rs as c4,EC as c5,_C as c6,uw as c7,cw as c8,IC as c9,RC as ca,qE as cb,d_ as cc,Ox as cd,MC as ce,xC as cf,ZC as cg,HC as ch,St as d,PC as e,YS as f,bt as g,r1 as h,TC as i,Bg as j,Ky as k,wC as l,nr as m,wt as n,au as o,Ds as p,mc as q,Xf as r,At as s,oS as t,DC as u,Od as v,zt as w,$x as x,oC as y,Qn as z};
